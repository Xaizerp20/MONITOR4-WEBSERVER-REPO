(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"./bundles/pdf.js":function(t,e,i){"use strict";i.r(e);i("./modules/pdf.js")},"./modules/pdf.js":function(t,e){window.sf=window.sf||{},window.sf.pdf=function(t){"use strict";var e,i,n,r,a,s,o,h,c,_,d,l,p,f,u,g,y,b,m,v,w,S,P,A,x,k,T,R,F,I,N,C,M,B,L,E;(e=t.PdfAnnotationFlag||(t.PdfAnnotationFlag={}))[e.default=0]="default",e[e.invisible=1]="invisible",e[e.hidden=2]="hidden",e[e.print=4]="print",e[e.noZoom=8]="noZoom",e[e.noRotate=16]="noRotate",e[e.noView=32]="noView",e[e.readOnly=64]="readOnly",e[e.locked=128]="locked",e[e.toggleNoView=256]="toggleNoView",(i=t.PdfLineEndingStyle||(t.PdfLineEndingStyle={}))[i.none=0]="none",i[i.openArrow=1]="openArrow",i[i.closedArrow=2]="closedArrow",i[i.rOpenArrow=3]="rOpenArrow",i[i.rClosedArrow=4]="rClosedArrow",i[i.butt=5]="butt",i[i.diamond=6]="diamond",i[i.circle=7]="circle",i[i.square=8]="square",i[i.slash=9]="slash",(n=t.PdfLineIntent||(t.PdfLineIntent={}))[n.lineArrow=0]="lineArrow",n[n.lineDimension=1]="lineDimension",(r=t.PdfLineCaptionType||(t.PdfLineCaptionType={}))[r.inline=0]="inline",r[r.top=1]="top",(a=t.PdfBorderStyle||(t.PdfBorderStyle={}))[a.solid=0]="solid",a[a.dashed=1]="dashed",a[a.beveled=2]="beveled",a[a.inset=3]="inset",a[a.underline=4]="underline",a[a.dot=5]="dot",(s=t.PdfBorderEffectStyle||(t.PdfBorderEffectStyle={}))[s.solid=0]="solid",s[s.cloudy=1]="cloudy",(o=t.PdfRotationAngle||(t.PdfRotationAngle={}))[o.angle0=0]="angle0",o[o.angle90=1]="angle90",o[o.angle180=2]="angle180",o[o.angle270=3]="angle270",(h=t.PdfCrossReferenceType||(t.PdfCrossReferenceType={}))[h.table=0]="table",h[h.stream=1]="stream",(c=t.PdfHighlightMode||(t.PdfHighlightMode={}))[c.noHighlighting=0]="noHighlighting",c[c.invert=1]="invert",c[c.outline=2]="outline",c[c.push=3]="push",(_=t.PdfTextAlignment||(t.PdfTextAlignment={}))[_.left=0]="left",_[_.center=1]="center",_[_.right=2]="right",_[_.justify=3]="justify",(d=t.PdfFormFieldVisibility||(t.PdfFormFieldVisibility={}))[d.visible=0]="visible",d[d.hidden=1]="hidden",d[d.visibleNotPrintable=2]="visibleNotPrintable",d[d.hiddenPrintable=3]="hiddenPrintable",(l=t.PdfMeasurementUnit||(t.PdfMeasurementUnit={}))[l.inch=0]="inch",l[l.pica=1]="pica",l[l.point=3]="point",l[l.centimeter=4]="centimeter",l[l.millimeter=6]="millimeter",(p=t.PdfCircleMeasurementType||(t.PdfCircleMeasurementType={}))[p.diameter=0]="diameter",p[p.radius=1]="radius",(f=t.PdfRubberStampAnnotationIcon||(t.PdfRubberStampAnnotationIcon={}))[f.approved=0]="approved",f[f.asIs=1]="asIs",f[f.confidential=2]="confidential",f[f.departmental=3]="departmental",f[f.draft=4]="draft",f[f.experimental=5]="experimental",f[f.expired=6]="expired",f[f.final=7]="final",f[f.forComment=8]="forComment",f[f.forPublicRelease=9]="forPublicRelease",f[f.notApproved=10]="notApproved",f[f.notForPublicRelease=11]="notForPublicRelease",f[f.sold=12]="sold",f[f.topSecret=13]="topSecret",f[f.completed=14]="completed",f[f.void=15]="void",f[f.informationOnly=16]="informationOnly",f[f.preliminaryResults=17]="preliminaryResults",(u=t.PdfCheckBoxStyle||(t.PdfCheckBoxStyle={}))[u.check=0]="check",u[u.circle=1]="circle",u[u.cross=2]="cross",u[u.diamond=3]="diamond",u[u.square=4]="square",u[u.star=5]="star",(g=t.PdfTextMarkupAnnotationType||(t.PdfTextMarkupAnnotationType={}))[g.highlight=0]="highlight",g[g.underline=1]="underline",g[g.squiggly=2]="squiggly",g[g.strikeOut=3]="strikeOut",(y=t.PdfPopupIcon||(t.PdfPopupIcon={}))[y.note=0]="note",y[y.comment=1]="comment",y[y.help=2]="help",y[y.insert=3]="insert",y[y.key=4]="key",y[y.newParagraph=5]="newParagraph",y[y.paragraph=6]="paragraph",(b=t.PdfAnnotationState||(t.PdfAnnotationState={}))[b.none=0]="none",b[b.accepted=1]="accepted",b[b.rejected=2]="rejected",b[b.cancel=3]="cancel",b[b.completed=4]="completed",b[b.marked=5]="marked",b[b.unmarked=6]="unmarked",b[b.unknown=7]="unknown",(m=t.PdfAnnotationStateModel||(t.PdfAnnotationStateModel={}))[m.none=0]="none",m[m.marked=1]="marked",m[m.review=2]="review",(v=t.PdfAttachmentIcon||(t.PdfAttachmentIcon={}))[v.pushPin=0]="pushPin",v[v.tag=1]="tag",v[v.graph=2]="graph",v[v.paperClip=3]="paperClip",(w=t.PdfAnnotationIntent||(t.PdfAnnotationIntent={}))[w.none=0]="none",w[w.freeTextCallout=1]="freeTextCallout",w[w.freeTextTypeWriter=2]="freeTextTypeWriter",(S=t.PdfDestinationMode||(t.PdfDestinationMode={}))[S.location=0]="location",S[S.fitToPage=1]="fitToPage",S[S.fitR=2]="fitR",S[S.fitH=3]="fitH",(P=t.DataFormat||(t.DataFormat={}))[P.fdf=0]="fdf",P[P.xfdf=1]="xfdf",P[P.json=2]="json",P[P.xml=3]="xml",(A=t.PdfFormFieldsTabOrder||(t.PdfFormFieldsTabOrder={}))[A.none=0]="none",A[A.row=1]="row",A[A.column=2]="column",A[A.structure=3]="structure",A[A.manual=4]="manual",A[A.widget=5]="widget",(x=t._PdfAnnotationType||(t._PdfAnnotationType={}))[x.highlight=0]="highlight",x[x.underline=1]="underline",x[x.strikeOut=2]="strikeOut",x[x.squiggly=3]="squiggly",x[x.redactionAnnotation=4]="redactionAnnotation",x[x.textAnnotation=5]="textAnnotation",x[x.linkAnnotation=6]="linkAnnotation",x[x.documentLinkAnnotation=7]="documentLinkAnnotation",x[x.uriAnnotation=8]="uriAnnotation",x[x.fileLinkAnnotation=9]="fileLinkAnnotation",x[x.freeTextAnnotation=10]="freeTextAnnotation",x[x.lineAnnotation=11]="lineAnnotation",x[x.circleAnnotation=12]="circleAnnotation",x[x.ellipseAnnotation=13]="ellipseAnnotation",x[x.squareAnnotation=14]="squareAnnotation",x[x.rectangleAnnotation=15]="rectangleAnnotation",x[x.polygonAnnotation=16]="polygonAnnotation",x[x.polyLineAnnotation=17]="polyLineAnnotation",x[x.textMarkupAnnotation=18]="textMarkupAnnotation",x[x.caretAnnotation=19]="caretAnnotation",x[x.rubberStampAnnotation=20]="rubberStampAnnotation",x[x.popupAnnotation=21]="popupAnnotation",x[x.fileAttachmentAnnotation=22]="fileAttachmentAnnotation",x[x.soundAnnotation=23]="soundAnnotation",x[x.movieAnnotation=24]="movieAnnotation",x[x.screenAnnotation=25]="screenAnnotation",x[x.widgetAnnotation=26]="widgetAnnotation",x[x.printerMarkAnnotation=27]="printerMarkAnnotation",x[x.trapNetworkAnnotation=28]="trapNetworkAnnotation",x[x.watermarkAnnotation=29]="watermarkAnnotation",x[x.textWebLinkAnnotation=30]="textWebLinkAnnotation",x[x.inkAnnotation=31]="inkAnnotation",x[x.richMediaAnnotation=32]="richMediaAnnotation",x[x.angleMeasurementAnnotation=33]="angleMeasurementAnnotation",x[x.null=34]="null",(k=t._PdfGraphicsUnit||(t._PdfGraphicsUnit={}))[k.centimeter=0]="centimeter",k[k.pica=1]="pica",k[k.pixel=2]="pixel",k[k.point=3]="point",k[k.inch=4]="inch",k[k.document=5]="document",k[k.millimeter=6]="millimeter",(T=t._FieldFlag||(t._FieldFlag={}))[T.default=0]="default",T[T.readOnly=1]="readOnly",T[T.required=2]="required",T[T.noExport=4]="noExport",T[T.multiLine=4096]="multiLine",T[T.password=8192]="password",T[T.fileSelect=1048576]="fileSelect",T[T.doNotSpellCheck=4194304]="doNotSpellCheck",T[T.doNotScroll=8388608]="doNotScroll",T[T.comb=16777216]="comb",T[T.richText=33554432]="richText",T[T.noToggleToOff=16384]="noToggleToOff",T[T.radio=32768]="radio",T[T.pushButton=65536]="pushButton",T[T.radiosInUnison=33554432]="radiosInUnison",T[T.combo=131072]="combo",T[T.edit=262144]="edit",T[T.sort=524288]="sort",T[T.multiSelect=2097152]="multiSelect",T[T.commitOnSelectChange=67108864]="commitOnSelectChange",(R=t._PdfCheckFieldState||(t._PdfCheckFieldState={}))[R.unchecked=0]="unchecked",R[R.checked=1]="checked",R[R.pressedUnchecked=2]="pressedUnchecked",R[R.pressedChecked=3]="pressedChecked",(F=t.PdfPermissionFlag||(t.PdfPermissionFlag={}))[F.default=0]="default",F[F.print=4]="print",F[F.editContent=8]="editContent",F[F.copyContent=16]="copyContent",F[F.editAnnotations=32]="editAnnotations",F[F.fillFields=256]="fillFields",F[F.accessibilityCopyContent=512]="accessibilityCopyContent",F[F.assembleDocument=1024]="assembleDocument",F[F.fullQualityPrint=2048]="fullQualityPrint",(I=t._FontDescriptorFlag||(t._FontDescriptorFlag={}))[I.fixedPitch=1]="fixedPitch",I[I.serif=2]="serif",I[I.symbolic=4]="symbolic",I[I.script=8]="script",I[I.nonSymbolic=32]="nonSymbolic",I[I.italic=64]="italic",I[I.forceBold=262144]="forceBold",(N=t._TtfCmapFormat||(t._TtfCmapFormat={}))[N.apple=0]="apple",N[N.microsoft=4]="microsoft",N[N.trimmed=6]="trimmed",(C=t._TtfCmapEncoding||(t._TtfCmapEncoding={}))[C.unknown=0]="unknown",C[C.symbol=1]="symbol",C[C.unicode=2]="unicode",C[C.macintosh=3]="macintosh",(M=t._TtfPlatformID||(t._TtfPlatformID={}))[M.appleUnicode=0]="appleUnicode",M[M.macintosh=1]="macintosh",M[M.iSO=2]="iSO",M[M.microsoft=3]="microsoft",(B=t._TtfMicrosoftEncodingID||(t._TtfMicrosoftEncodingID={}))[B[void 0]=0]="undefined",B[B.unicode=1]="unicode",(L=t._TtfMacintoshEncodingID||(t._TtfMacintoshEncodingID={}))[L.roman=0]="roman",L[L.japanese=1]="japanese",L[L.chinese=2]="chinese",(E=t.PdfPageOrientation||(t.PdfPageOrientation={}))[E.portrait=0]="portrait",E[E.landscape=1]="landscape";var D,O=function(){function t(t,e){if(this._crossReference=e,t instanceof In){this._content=t,this._content.dictionary.has("Type")&&this._content.dictionary.has("Subtype")||this._initialize();var i=this._content.dictionary.getArray("BBox");if(i&&i.length>3){var n=li(i);this._size=[n.width,n.height]}this._isReadOnly=!0}else this._size=[t[2],t[3]],this._content=new Cn([]),this._content.dictionary._crossReference=this._crossReference,this._initialize(),this._content.dictionary.set("BBox",[t[0],t[1],t[0]+t[2],t[1]+t[3]]);this._writeTransformation=!0}return Object.defineProperty(t.prototype,"graphics",{get:function(){return this._isReadOnly?null:(void 0===this._g&&(this._g=new Oe(this._size,this._content,this._crossReference,this),this._writeTransformation&&this._g._initializeCoordinates(),this._g._isTemplateGraphics=!0),this._g)},enumerable:!0,configurable:!0}),t.prototype._initialize=function(){this._content.dictionary.set("Type",hn.get("XObject")),this._content.dictionary.set("Subtype",hn.get("Form"))},t}(),j=function(){function e(e,i){this.horizontalScalingFactor=100,this.lineLimit=!0,void 0!==e&&(this.alignment=e),this.lineAlignment=void 0!==i?i:t.PdfVerticalAlignment.top,this.characterSpacing=0,this.wordSpacing=0,this.lineSpacing=0,this.clipPath=!1,this.firstLineIndent=0,this._internalParagraphIndent=0,this.measureTrailingSpaces=!1,this.noClip=!1}return Object.defineProperty(e.prototype,"_paragraphIndent",{get:function(){return this._internalParagraphIndent},set:function(t){this._internalParagraphIndent=t,this.firstLineIndent=t},enumerable:!0,configurable:!0}),e}();(D=t.PdfVerticalAlignment||(t.PdfVerticalAlignment={}))[D.top=0]="top",D[D.middle=1]="middle",D[D.bottom=2]="bottom";var z,V,U=(z=function(t,e){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}z(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),W=function(){function t(){this._lineGap=0}return t.prototype._getAscent=function(){return.001*this._ascent*this._size},t.prototype._getDescent=function(){return.001*this._descent*this._size},t.prototype._getLineGap=function(){return.001*this._lineGap*this._size},t.prototype._getHeight=function(){for(var t=["cambria","candara","constantia","corbel","cariadings"],e=[],i=0;i<t.length;i++)e.push(t[Number.parseInt(i.toString(),10)]);return this._getDescent()<0?this._getAscent()-this._getDescent()+this._getLineGap():this._getAscent()+this._getDescent()+this._getLineGap()},t}(),H=function(){},G=function(t){function e(e){var i=t.call(this)||this;return i.widths=e,i}return U(e,t),e.prototype._itemAt=function(t){if(t<0||t>=this.widths.length)throw new Error("The character is not supported by the font.");return this.widths[Number.parseInt(t.toString(),10)]},e.prototype._toArray=function(){return this.widths},e}(H),q=function(t){function e(e){var i=t.call(this)||this;return i._defaultWidth=e,i.widths=[],i}return U(e,t),e.prototype._itemAt=function(t){var e=this._defaultWidth;return this.widths.forEach((function(i){t>=i._from&&t<=i._to&&(e=i._itemAt(t))})),e},e.prototype._toArray=function(){var t=[];return this.widths.forEach((function(e){e._appendToArray(t)})),t},e.prototype._add=function(t){this.widths.push(t)},e}(H),K=function(){},X=function(t){function e(e,i,n){var r=t.call(this)||this;return r._widthFrom=e,r._widthTo=i,r._width=n,r}return U(e,t),Object.defineProperty(e.prototype,"_from",{get:function(){return this._widthFrom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_to",{get:function(){return this._widthTo},enumerable:!0,configurable:!0}),e.prototype._itemAt=function(t){if(t<this._from||t>this._to)throw new Error("Index is out of range.");return this._width},e.prototype._appendToArray=function(t){t.push(this._from,this._to,this._width)},e}(K),Q=function(t){function e(e,i){var n=t.call(this)||this;return n._widthFrom=e,n._widths=i,n}return U(e,t),Object.defineProperty(e.prototype,"_from",{get:function(){return this._widthFrom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_to",{get:function(){return this._widthFrom+this._widths.length-1},enumerable:!0,configurable:!0}),e.prototype._itemAt=function(t){if(t<this._widthFrom||t>this._to)throw new Error("Index is out of range.");return this._widths[Number.parseInt(t.toString(),10)]},e.prototype._appendToArray=function(t){t.push(this._from),t.forEach((function(e){t.push(e)}))},e}(K),J=function(){function e(){}return e.prototype._layout=function(t,e,i,n){this._initialize(t,e,i,n);var r=this._doLayout();return this._clear(),r},e.prototype._initialize=function(t,e,i,n){this._font=e,this._format=i,this._size=n,this._rectangle=[0,0,n[0],n[1]],this._reader=new nt(t),this._pageHeight=0},e.prototype._clear=function(){this._font=null,this._format=null,this._reader._close(),this._reader=null},e.prototype._doLayout=function(){for(var t=new Y,e=new Y,i=[],n=this._reader._peekLine(),r=this._getLineIndent(!0);null!==n;){if(null!=(e=this._layoutLine(n,r))){var a=0,s=this._copyToResult(t,e,i,a),o=s.success;if(a=s.flag,!o){this._reader._read(a);break}}this._reader._readLine(),n=this._reader._peekLine(),r=this._getLineIndent(!1)}return this._finalizeResult(t,i),t},e.prototype._getLineIndent=function(t){var e=0;return this._format&&(e=t?this._format.firstLineIndent:this._format._paragraphIndent,e=this._size[0]>0?Math.min(this._size[0],e):e),e},e.prototype._getLineHeight=function(){var t=this._font._metrics._getHeight();return this._format&&0!==this._format.lineSpacing&&(t=this._format.lineSpacing+this._font._metrics._getHeight()),t},e.prototype._getLineWidth=function(t){return this._font.getLineWidth(t,this._format)},e.prototype._layoutLine=function(e,i){var n=new Y;n._lineHeight=this._getLineHeight();var r=[],a=this._size[0],s=this._getLineWidth(e)+i,o=t._LineType.firstParagraphLine;if(a<=0||Math.round(s)<=Math.round(a))this._addToLineResult(n,r,e,s,t._LineType.newLineBreak|o);else{var h="",c="";s=i;var _=i,d=new nt(e),l=d._peekWord();for(l.length!==d._length&&" "===l&&(c+=l,h+=l,d._position+=1,l=d._peekWord());null!==l;){c+=l;var p=this._getLineWidth(c.toString())+_;if(" "===c.toString()&&(c="",p=0),p>a)break;h+=l,s=p,d._readWord(),l=d._peekWord()}h.length>0&&this._addToLineResult(n,r,h.toString(),s,t._LineType.newLineBreak|t._LineType.lastParagraphLine),d._close()}n._layoutLines=[];for(var f=0;f<r.length;f++)n._layoutLines.push(r[f]);return r=[],n},e.prototype._addToLineResult=function(t,e,i,n,r){var a=new Z;a._text=i,a._width=n,a._lineType=r,e.push(a);var s=t._actualSize;s[1]=s[1]+this._getLineHeight(),s[0]=Math.max(s[0],n),t._size=s},e.prototype._copyToResult=function(t,e,i,n){var r=!0,a=this._format&&!this._format.lineLimit,s=t._actualSize[1],o=this._size[1];if(this._pageHeight>0&&o+this._rectangle[1]>this._pageHeight&&(o=this._rectangle[1]-this._pageHeight,o=Math.max(o,-o)),n=0,null!==e._lines)for(var h=0,c=e._lines.length;h<c;h++){var _=s+e._lineHeight;if(!(_<=o||o<=0||a)){r=!1;break}var d=e._lines[h];n+=d._text.length,d=this._trimLine(d,0===i.length),i.push(d);var l=t._actualSize;l[0]=Math.max(l[0],d._width),t._size=l,s=_}return s!==t._size[1]&&(t._size=[t._actualSize[0],s]),{success:r,flag:n}},e.prototype._finalizeResult=function(t,e){t._layoutLines=[];for(var i=0;i<e.length;i++)t._layoutLines.push(e[i]);t._lineHeight=this._getLineHeight(),this._reader._end||(t._remainder=this._reader._readToEnd()),e=[]},e.prototype._trimLine=function(e,i){var n=e._text.trim(),r=e._width;return n.length!==e._text.length&&(r=this._getLineWidth(n),(e._lineType&t._LineType.firstParagraphLine)>0&&(r+=this._getLineIndent(i))),e._text=n,e._width=r,e},e}(),Y=function(){function t(){}return Object.defineProperty(t.prototype,"_actualSize",{get:function(){return void 0===this._size&&(this._size=[0,0]),this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_lines",{get:function(){return this._layoutLines},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_empty",{get:function(){return null==this._layoutLines||0===this._layoutLines.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_lineCount",{get:function(){return this._empty?0:this._layoutLines.length},enumerable:!0,configurable:!0}),t}(),Z=function(){};(V=t._LineType||(t._LineType={}))[V.none=0]="none",V[V.newLineBreak=1]="newLineBreak",V[V.layoutBreak=2]="layoutBreak",V[V.firstParagraphLine=4]="firstParagraphLine",V[V.lastParagraphLine=8]="lastParagraphLine";var $,tt,et,it,nt=function(){function t(t){if(this._position=0,null==t)throw new Error("ArgumentNullException:text");this._text=t}return Object.defineProperty(t.prototype,"_length",{get:function(){return this._text.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_end",{get:function(){return this._position===this._text.length},enumerable:!0,configurable:!0}),t.prototype._readLine=function(){for(var t=this._position;t<this._length;){var e=this._text[t],i=void 0;switch(e){case"\r":case"\n":return i=this._text.substring(this._position,t),this._position=t+1,"\r"===e&&this._position<this._length&&"\n"===this._text[this._position]&&this._position++,i}t++}if(t>this._position){var n=this._text.substring(this._position,t);return this._position=t,n}return null},t.prototype._peekLine=function(){var t=this._position,e=this._readLine();return this._position=t,e},t.prototype._readWord=function(){for(var t=this._position;t<this._length;){var e=this._text[t],i=void 0;switch(e){case"\r":case"\n":return i=this._text.substring(this._position,t-this._position),this._position=t+1,"\r"===e&&this._position<this._length&&"\n"===this._text[this._position]&&this._position++,i;case" ":case"\t":return t===this._position&&t++,i=this._text.substring(this._position,t),this._position=t,i}t++}if(t>this._position){var n=this._text.substring(this._position,t);return this._position=t,n}return null},t.prototype._peekWord=function(){var t=this._position,e=this._readWord();return this._position=t,e},t.prototype._read=function(t){if(void 0===t){var e="0";return this._end||(e=this._text[this._position],this._position++),e}for(var i=0,n="";!this._end&&i<t;)n+=this._read(),i++;return n},t.prototype._peek=function(){return this._end?"0":this._text[this._position]},t.prototype._close=function(){this._text=null},t.prototype._readToEnd=function(){var t;return t=0===this._position?this._text:this._text.substring(this._position),this._position=this._length,t},t._whiteSpace=" ",t._tab="\t",t._spaces=[t._whiteSpace,t._tab],t}(),rt=function(){},at=function(){},st=function(){},ot=function(){},ht=function(){},ct=function(){},_t=function(){},dt=function(){},lt=function(){},pt=function(){},ft=function(){},ut=function(){function e(t){this._int32Size=4,this._isTtcFont=!1,this._isMacTtf=!1,this._isMacTTF=!1,this._missedGlyphs=0,this._tableNames=["cvt ","fpgm","glyf","head","hhea","hmtx","loca","maxp","prep"],this._entrySelectors=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4],this._fontData=t,this._initialize()}return Object.defineProperty(e.prototype,"macintosh",{get:function(){return null!==this._macintoshDictionary&&void 0!==this._macintoshDictionary||(this._macintoshDictionary=new pn),this._macintoshDictionary},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_microsoft",{get:function(){return null!==this._microsoftDictionary&&void 0!==this._microsoftDictionary||(this._microsoftDictionary=new pn),this._microsoftDictionary},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_macintoshGlyphs",{get:function(){return null!==this._internalMacintoshGlyphs&&void 0!==this._internalMacintoshGlyphs||(this._internalMacintoshGlyphs=new pn),this._internalMacintoshGlyphs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_microsoftGlyphs",{get:function(){return null!==this._internalMicrosoftGlyphs&&void 0!==this._internalMicrosoftGlyphs||(this._internalMicrosoftGlyphs=new pn),this._internalMicrosoftGlyphs},enumerable:!0,configurable:!0}),e.prototype._initialize=function(){void 0===this._metrics&&(this._metrics=new yt),this._readFontDictionary();var t=this._readNameTable(),e=this._readHeadTable();this._initializeFontName(t),this._metrics._macStyle=e._macStyle},e.prototype._readFontDictionary=function(){this._offset=0,this._checkPreambula();var t=this._readInt16(this._offset);this._readInt16(this._offset),this._readInt16(this._offset),this._readInt16(this._offset),void 0===this._tableDirectory&&(this._tableDirectory=new pn);for(var e=0;e<t;++e){var i=new rt,n=this._readString(this._int32Size);i._checksum=this._readInt32(this._offset),i._offset=this._readInt32(this._offset),i._length=this._readInt32(this._offset),this._tableDirectory.setValue(n,i)}this._lowestPosition=this._offset,this._isTtcFont||this._fixOffsets()},e.prototype._fixOffsets=function(){for(var t=Number.MAX_VALUE,e=this._tableDirectory.keys(),i=0;i<e.length;i++){var n=(s=this._tableDirectory.getValue(e[Number.parseInt(i.toString(),10)]))._offset;if(t>n&&(t=n)<=this._lowestPosition)break}var r=t-this._lowestPosition;if(0!==r){var a=new pn;for(i=0;i<e.length;i++){var s;(s=this._tableDirectory.getValue(e[Number.parseInt(i.toString(),10)]))._offset-=r,a.setValue(e[Number.parseInt(i.toString(),10)],s)}this._tableDirectory=a}},e.prototype._checkPreambula=function(){var t=this._readInt32(this._offset);if(this._isMacTtf=1953658213===t,65536!==t&&1953658213!==t&&1330926671!==t){if(this._isTtcFont=!0,this._offset=0,"ttcf"!==this._readString(4))throw new Error("Can not read TTF font data");if(this._offset+=4,this._readInt32(this._offset)<0)throw new Error("Can not read TTF font data");this._offset=this._readInt32(this._offset),t=this._readInt32(this._offset)}return t},e.prototype._readNameTable=function(){var t=this._getTable("name");this._offset=t._offset;var e=new ot;e._formatSelector=this._readUInt16(this._offset),e._recordsCount=this._readUInt16(this._offset),e._offset=this._readUInt16(this._offset),e._nameRecords=[];for(var i=this._offset,n=0;n<e._recordsCount;n++){this._offset=i;var r=new gt;r._platformID=this._readUInt16(this._offset),r._encodingID=this._readUInt16(this._offset),r._languageID=this._readUInt16(this._offset),r._nameID=this._readUInt16(this._offset),r._length=this._readUInt16(this._offset),r._offset=this._readUInt16(this._offset),this._offset=t._offset+e._offset+r._offset;var a=0===r._platformID||3===r._platformID;r._name=this._readString(r._length,a),e._nameRecords[Number.parseInt(n.toString(),10)]=r,i+=12}return e},e.prototype._readHeadTable=function(){var t=this._getTable("head");this._offset=t._offset;var e=new _t;return e._version=this._readFixed(this._offset),e._fontRevision=this._readFixed(this._offset),e._checkSumAdjustment=this._readUInt32(this._offset),e._magicNumber=this._readUInt32(this._offset),e._flags=this._readUInt16(this._offset),e._unitsPerEm=this._readUInt16(this._offset),e._created=this._readInt64(this._offset),e._modified=this._readInt64(this._offset),e._xMin=this._readInt16(this._offset),e._yMin=this._readInt16(this._offset),e._xMax=this._readInt16(this._offset),e._yMax=this._readInt16(this._offset),e._macStyle=this._readUInt16(this._offset),e._lowestReadableSize=this._readUInt16(this._offset),e._fontDirectionHint=this._readInt16(this._offset),e._indexToLocalFormat=this._readInt16(this._offset),e._glyphDataFormat=this._readInt16(this._offset),e},e.prototype._readHorizontalHeaderTable=function(){var t=this._getTable("hhea");this._offset=t._offset;var e=new ct;return e._version=this._readFixed(this._offset),e._ascender=this._readInt16(this._offset),e._descender=this._readInt16(this._offset),e._lineGap=this._readInt16(this._offset),e._advanceWidthMax=this._readUInt16(this._offset),e._minLeftSideBearing=this._readInt16(this._offset),e._minRightSideBearing=this._readInt16(this._offset),e._xMaxExtent=this._readInt16(this._offset),e._caretSlopeRise=this._readInt16(this._offset),e._caretSlopeRun=this._readInt16(this._offset),this._offset+=10,e._metricDataFormat=this._readInt16(this._offset),e._numberOfHMetrics=this._readUInt16(this._offset),e},e.prototype._readOS2Table=function(){var t=this._getTable("OS/2");this._offset=t._offset;var e=new at;return e._version=this._readUInt16(this._offset),e._xAvgCharWidth=this._readInt16(this._offset),e._usWeightClass=this._readUInt16(this._offset),e._usWidthClass=this._readUInt16(this._offset),e._fsType=this._readInt16(this._offset),e._ySubscriptXSize=this._readInt16(this._offset),e._ySubscriptYSize=this._readInt16(this._offset),e._ySubscriptXOffset=this._readInt16(this._offset),e._ySubscriptYOffset=this._readInt16(this._offset),e._ySuperscriptXSize=this._readInt16(this._offset),e._ySuperscriptYSize=this._readInt16(this._offset),e._ySuperscriptXOffset=this._readInt16(this._offset),e._ySuperscriptYOffset=this._readInt16(this._offset),e._yStrikeoutSize=this._readInt16(this._offset),e._yStrikeoutPosition=this._readInt16(this._offset),e._sFamilyClass=this._readInt16(this._offset),e._panose=this._readBytes(10),e._ulUnicodeRange1=this._readUInt32(this._offset),e._ulUnicodeRange2=this._readUInt32(this._offset),e._ulUnicodeRange3=this._readUInt32(this._offset),e._ulUnicodeRange4=this._readUInt32(this._offset),e._vendorIdentifier=this._readBytes(4),e._fsSelection=this._readUInt16(this._offset),e._usFirstCharIndex=this._readUInt16(this._offset),e._usLastCharIndex=this._readUInt16(this._offset),e._sTypoAscender=this._readInt16(this._offset),e._sTypoDescender=this._readInt16(this._offset),e._sTypoLineGap=this._readInt16(this._offset),e._usWinAscent=this._readUInt16(this._offset),e._usWinDescent=this._readUInt16(this._offset),e._ulCodePageRange1=this._readUInt32(this._offset),e._ulCodePageRange2=this._readUInt32(this._offset),e._version>1?(e._sxHeight=this._readInt16(this._offset),e._sCapHeight=this._readInt16(this._offset),e._usDefaultChar=this._readUInt16(this._offset),e._usBreakChar=this._readUInt16(this._offset),e._usMaxContext=this._readUInt16(this._offset)):(e._sxHeight=0,e._sCapHeight=0,e._usDefaultChar=0,e._usBreakChar=0,e._usMaxContext=0),e},e.prototype._readPostTable=function(){var t=this._getTable("post");this._offset=t._offset;var e=new st;return e._formatType=this._readFixed(this._offset),e._italicAngle=this._readFixed(this._offset),e._underlinePosition=this._readInt16(this._offset),e._underlineThickness=this._readInt16(this._offset),e._isFixedPitch=this._readUInt32(this._offset),e._minType42=this._readUInt32(this._offset),e._maxType42=this._readUInt32(this._offset),e._minType1=this._readUInt32(this._offset),e._maxType1=this._readUInt32(this._offset),e},e.prototype._readWidthTable=function(t,e){var i=this._getTable("hmtx");this._offset=i._offset;for(var n=[],r=0;r<t;r++){var a=new bt;a._advanceWidth=this._readUInt16(this._offset),a._lsb=this._readInt16(this._offset);var s=1e3*a._advanceWidth/e;n.push(Math.floor(s))}return n},e.prototype._readCmapTable=function(){var t=this._getTable("cmap");this._offset=t._offset;var e=new dt;e._version=this._readUInt16(this._offset),e._tablesCount=this._readUInt16(this._offset);for(var i=this._offset,n=[],r=0;r<e._tablesCount;r++){this._offset=i;var a=new lt;a._platformID=this._readUInt16(this._offset),a._encodingID=this._readUInt16(this._offset),a._offset=this._readUInt32(this._offset),i=this._offset,this._readCmapSubTable(a),n[Number.parseInt(r.toString(),10)]=a}return n},e.prototype._readCmapSubTable=function(e){var i=this._getTable("cmap");this._offset=i._offset+e._offset;var n=this._readUInt16(this._offset),r=this._getCmapEncoding(e._platformID,e._encodingID);if(r!==t._TtfCmapEncoding.unknown)switch(n){case t._TtfCmapFormat.apple:this._readAppleCmapTable(e,r);break;case t._TtfCmapFormat.microsoft:this._readMicrosoftCmapTable(e,r);break;case t._TtfCmapFormat.trimmed:this._readTrimmedCmapTable(e,r)}},e.prototype._readAppleCmapTable=function(t,e){var i=this._getTable("cmap");this._offset=i._offset+t._offset;var n=new pt;n._format=this._readUInt16(this._offset),n._length=this._readUInt16(this._offset),n._version=this._readUInt16(this._offset),null!==this._maxMacIndex&&void 0!==this._maxMacIndex||(this._maxMacIndex=0);for(var r=0;r<256;++r){var a=new mt;a._index=this._readByte(this._offset),a._width=this._getWidth(a._index),a._charCode=r,this.macintosh.setValue(r,a),this._addGlyph(a,e),this._maxMacIndex=Math.max(r,this._maxMacIndex)}},e.prototype._readMicrosoftCmapTable=function(e,i){var n=this._getTable("cmap");this._offset=n._offset+e._offset;var r=i===t._TtfCmapEncoding.unicode?this._microsoft:this.macintosh,a=new ht;a._format=this._readUInt16(this._offset),a._length=this._readUInt16(this._offset),a._version=this._readUInt16(this._offset),a._segCountX2=this._readUInt16(this._offset),a._searchRange=this._readUInt16(this._offset),a._entrySelector=this._readUInt16(this._offset),a._rangeShift=this._readUInt16(this._offset);var s=a._segCountX2/2;a._endCount=this._readUshortArray(s),a._reservedPad=this._readUInt16(this._offset),a._startCount=this._readUshortArray(s),a._idDelta=this._readUshortArray(s),a._idRangeOffset=this._readUshortArray(s);var o=a._length/2-8-4*s;a._glyphID=this._readUshortArray(o);for(var h=0,c=0,_=0;_<s;_++)for(var d=a._startCount[Number.parseInt(_.toString(),10)];d<=a._endCount[Number.parseInt(_.toString(),10)]&&65535!==d;d++){if(0===a._idRangeOffset[Number.parseInt(_.toString(),10)])h=d+a._idDelta[Number.parseInt(_.toString(),10)]&65535;else{if((c=_+a._idRangeOffset[Number.parseInt(_.toString(),10)]/2-s+d-a._startCount[Number.parseInt(_.toString(),10)])>=a._glyphID.length)continue;h=a._glyphID[Number.parseInt(c.toString(),10)]+a._idDelta[Number.parseInt(_.toString(),10)]&65535}var l=new mt;l._index=h,l._width=this._getWidth(l._index);var p=i===t._TtfCmapEncoding.symbol&&61440==(65280&d)?255&d:d;l._charCode=p,r.setValue(p,l),this._addGlyph(l,i)}},e.prototype._readTrimmedCmapTable=function(t,e){var i=this._getTable("cmap");this._offset=i._offset+t._offset;var n=new ft;n._format=this._readUInt16(this._offset),n._length=this._readUInt16(this._offset),n._version=this._readUInt16(this._offset),n._firstCode=this._readUInt16(this._offset),n._entryCount=this._readUInt16(this._offset);for(var r=0;r<n._entryCount;++r){var a=new mt;a._index=this._readUInt16(this._offset),a._width=this._getWidth(a._index),a._charCode=r+n._firstCode,this.macintosh.setValue(r,a),this._addGlyph(a,e),this._maxMacIndex=Math.max(r,this._maxMacIndex)}},e.prototype._initializeFontName=function(t){for(var e=0;e<t._recordsCount;e++){var i=t._nameRecords[Number.parseInt(e.toString(),10)];if(1===i._nameID?this._metrics._fontFamily=i._name:6===i._nameID&&(this._metrics._postScriptName=i._name),null!==this._metrics._fontFamily&&void 0!==this._metrics._fontFamily&&null!==this._metrics._postScriptName&&void 0!==this._metrics._postScriptName)break}},e.prototype._getTable=function(t){var e,i=new rt;return this._tableDirectory.containsKey(t)&&(e=this._tableDirectory.getValue(t)),null!=e&&(i=e),i},e.prototype._getWidth=function(t){return t=t<this._width.length?t:this._width.length-1,this._width[Number.parseInt(t.toString(),10)]},e.prototype._getCmapEncoding=function(e,i){var n=t._TtfCmapEncoding.unknown;return e===t._TtfPlatformID.microsoft&&i===t._TtfMicrosoftEncodingID.undefined?n=t._TtfCmapEncoding.symbol:e===t._TtfPlatformID.microsoft&&i===t._TtfMicrosoftEncodingID.unicode?n=t._TtfCmapEncoding.unicode:e===t._TtfPlatformID.macintosh&&i===t._TtfMacintoshEncodingID.roman&&(n=t._TtfCmapEncoding.macintosh),n},e.prototype._addGlyph=function(e,i){var n=null;switch(i){case t._TtfCmapEncoding.unicode:n=this._microsoftGlyphs;break;case t._TtfCmapEncoding.macintosh:case t._TtfCmapEncoding.symbol:n=this._macintoshGlyphs}n.setValue(e._index,e)},e.prototype._initializeMetrics=function(e,i,n,r,a,s){this._initializeFontName(e);for(var o=!1,h=0;h<s.length;h++){var c=s[Number.parseInt(h.toString(),10)];if(this._getCmapEncoding(c._platformID,c._encodingID)===t._TtfCmapEncoding.symbol){o=!0;break}}this._metrics._isSymbol=o,this._metrics._macStyle=i._macStyle,this._metrics._isFixedPitch=0!==a._isFixedPitch,this._metrics._italicAngle=a._italicAngle;var _=1e3/i._unitsPerEm;this._metrics._winAscent=r._sTypoAscender*_,this._metrics._macAscent=n._ascender*_,this._metrics._capHeight=0!==r._sCapHeight?r._sCapHeight:.7*i._unitsPerEm*_,this._metrics._winDescent=r._sTypoDescender*_,this._metrics._macDescent=n._descender*_,this._metrics._leading=(r._sTypoAscender-r._sTypoDescender+r._sTypoLineGap)*_,this._metrics._lineGap=Math.ceil(n._lineGap*_);var d=i._xMin*_,l=Math.ceil(this._metrics._macAscent+this._metrics._lineGap),p=i._xMax*_,f=this._metrics._macDescent;this._metrics._fontBox=[d,l,p,f],this._metrics._stemV=80,this._metrics._widthTable=this._updateWidth(),this._metrics._contains=this._tableDirectory.containsKey("CFF"),this._metrics._subScriptSizeFactor=i._unitsPerEm/r._ySubscriptYSize,this._metrics._superscriptSizeFactor=i._unitsPerEm/r._ySuperscriptYSize},e.prototype._updateWidth=function(){var t=[];if(this._metrics._isSymbol)for(var e=0;e<256;e++){var i=this._getGlyph(String.fromCharCode(Number.parseInt(e.toString(),10)));t[Number.parseInt(e.toString(),10)]=i._empty?0:i._width}else{var n=[],r=String.fromCharCode(32);for(e=0;e<256;e++){n[0]=Number.parseInt(e.toString(),10);var a=this._getString(n,0,n.length),s=a.length>0?a[0]:"?";(i=this._getGlyph(s))._empty?(i=this._getGlyph(r),t[Number.parseInt(e.toString(),10)]=i._empty?0:i._width):t[Number.parseInt(e.toString(),10)]=i._width}}return t},e.prototype._getDefaultGlyph=function(){return this._getGlyph(nt._whiteSpace)},e.prototype._getString=function(t,e,i){for(var n="",r=0;r<i;r++)n+=String.fromCharCode(t[r+e]);return n},e.prototype._createInternals=function(){this._metrics=new yt;var t=this._readNameTable(),e=this._readHeadTable();this._bIsLocaShort=0===e._indexToLocalFormat;var i=this._readHorizontalHeaderTable(),n=this._readOS2Table(),r=this._readPostTable();this._width=this._readWidthTable(i._numberOfHMetrics,e._unitsPerEm);var a=this._readCmapTable();this._initializeMetrics(t,e,i,n,r,a)},e.prototype._getGlyph=function(t){if("number"==typeof t){var e=null;return this._metrics._isSymbol||null==this._microsoftGlyphs?this._metrics._isSymbol&&null!=this._macintoshGlyphs&&this._macintoshGlyphs.containsKey(t)&&(e=this._macintoshGlyphs.getValue(t)):this._microsoftGlyphs.containsKey(t)&&(e=this._microsoftGlyphs.getValue(t)),null!=e?e:this._getDefaultGlyph()}var i=null,n=t.charCodeAt(0);return this._metrics._isSymbol||null===this._microsoft?(this._metrics._isSymbol&&null!==this.macintosh||this._isMacTTF)&&(0!==this._maxMacIndex?n%=this._maxMacIndex+1:n=61440==(65280&n)?255&n:n,this.macintosh.containsKey(n)&&(i=this.macintosh.getValue(n),this._isFontPresent=!0)):this._microsoft.containsKey(n)?(i=this._microsoft.getValue(n),n!==nt._whiteSpace.charCodeAt(0)&&(this._isFontPresent=!0)):n!==nt._whiteSpace.charCodeAt(0)&&(this._isFontPresent=!1),t===nt._whiteSpace&&null===i&&(i=new mt),null!==i?i:this._getDefaultGlyph()},e.prototype._readString=function(t,e){if(void 0===e)return this._readString(t,!1);var i="";if(e)for(var n=0;n<t;n++)n%2!=0&&(i+=String.fromCharCode(this._fontData[this._offset])),this._offset+=1;else for(n=0;n<t;n++)i+=String.fromCharCode(this._fontData[this._offset]),this._offset+=1;return i},e.prototype._readFixed=function(t){return this._readInt16(t)+this._readInt16(t+2)/16384},e.prototype._readInt32=function(t){var e=this._fontData[Number.parseInt(t.toString(),10)+3],i=this._fontData[Number.parseInt(t.toString(),10)+2],n=this._fontData[Number.parseInt(t.toString(),10)+1],r=this._fontData[Number.parseInt(t.toString(),10)];return this._offset+=4,e+(i<<8)+(n<<16)+(r<<24)},e.prototype._readUInt32=function(t){var e=this._fontData[Number.parseInt(t.toString(),10)+3],i=this._fontData[Number.parseInt(t.toString(),10)+2],n=this._fontData[Number.parseInt(t.toString(),10)+1],r=this._fontData[Number.parseInt(t.toString(),10)];return this._offset+=4,e|i<<8|n<<16|r<<24},e.prototype._readInt16=function(t){var e=(this._fontData[Number.parseInt(t.toString(),10)]<<8)+this._fontData[Number.parseInt(t.toString(),10)+1];return e=32768&e?e-65536:e,this._offset+=2,e},e.prototype._readInt64=function(t){var e=this._readInt32(t+4),i=4294967296*this._readInt32(t)+e;return e<0&&(i+=4294967296),i},e.prototype._readUInt16=function(t){var e=this._fontData[Number.parseInt(t.toString(),10)]<<8|this._fontData[Number.parseInt(t.toString(),10)+1];return this._offset+=2,e},e.prototype._readUshortArray=function(t){for(var e=[],i=0;i<t;i++)e[Number.parseInt(i.toString(),10)]=this._readUInt16(this._offset);return e},e.prototype._readBytes=function(t){for(var e=[],i=0;i<t;i++)e.push(this._fontData[Number.parseInt(this._offset.toString(),10)]),this._offset+=1;return e},e.prototype._readByte=function(t){var e=this._fontData[Number.parseInt(t.toString(),10)];return this._offset+=1,e},e}(),gt=function(){},yt=function(){function t(){}return Object.defineProperty(t.prototype,"_isItalic",{get:function(){return 0!=(2&this._macStyle)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_isBold",{get:function(){return 0!=(1&this._macStyle)},enumerable:!0,configurable:!0}),t}(),bt=function(){},mt=function(){function t(){}return Object.defineProperty(t.prototype,"_empty",{get:function(){return this._index===this._width&&this._width===this._charCode&&0===this._charCode},enumerable:!0,configurable:!0}),t}(),vt=function(){function e(t,e){if(this._nameString="ABCDEFGHIJKLMNOPQRSTUVWXYZ",null==t)throw new Error("ArgumentNullException:base64String");this._fontSize=e,this._fontString=t,this._Initialize()}return e.prototype._Initialize=function(){var t=oi(this._fontString);this._fontData=t,this._ttfReader=new ut(this._fontData),this._ttfMetrics=this._ttfReader._metrics},e.prototype._createInternals=function(){this._fontDictionary=new fn,this._descendantFont=new fn,this._metrics=new W,this._ttfReader._createInternals(),this._ttfMetrics=this._ttfReader._metrics,this._initializeMetrics(),this._subsetName=this._getFontName(),this._createDescendantFont(),this._createFontDictionary()},e.prototype._getInternals=function(){return this._fontDictionary},e.prototype._initializeMetrics=function(){var t=this._ttfReader._metrics;this._metrics._ascent=t._macAscent,this._metrics._descent=t._macDescent,this._metrics._height=t._macAscent-t._macDescent+t._lineGap,this._metrics._name=t._fontFamily,this._metrics._postScriptName=t._postScriptName,this._metrics._size=this._fontSize,this._metrics._widthTable=new G(t._widthTable),this._metrics._lineGap=t._lineGap,this._metrics._subScriptSizeFactor=t._subScriptSizeFactor,this._metrics._superscriptSizeFactor=t._superscriptSizeFactor,this._metrics._isBold=t._isBold},e.prototype._getFontName=function(){for(var t="",e=0;e<6;e++){var i=Math.floor(26*Math.random())+0;t+=this._nameString[Number.parseInt(i.toString(),10)]}return t+="+",(t+=this._ttfReader._metrics._postScriptName).toString()},e.prototype._createDescendantFont=function(){this._descendantFont=new fn,this._descendantFont._updated=!0,this._descendantFont.set("Type",new hn("Font")),this._descendantFont.set("Subtype",new hn("CIDFontType2")),this._descendantFont.set("BaseFont",new hn(this._subsetName)),this._descendantFont.set("CIDToGIDMap",new hn("Identity")),this._descendantFont.set("DW",1e3),this._fontDescriptor=this._createFontDescriptor();var t=this._createSystemInfo();this._descendantFont.set("CIDSystemInfo",t)},e.prototype._createFontDescriptor=function(){var t=new fn,e=this._ttfReader._metrics;return t.set("Type",new hn("FontDescriptor")),t.set("FontName",new hn(this._subsetName)),t.set("Flags",this._getDescriptorFlags()),t.set("FontBBox",this._getBoundBox()),t.set("MissingWidth",e._widthTable[32]),t.set("StemV",e._stemV),t.set("ItalicAngle",e._italicAngle),t.set("CapHeight",e._capHeight),t.set("Ascent",e._winAscent),t.set("Descent",e._winDescent),t.set("Leading",e._leading),t.set("AvgWidth",e._widthTable[32]),t.set("MaxWidth",e._widthTable[32]),t.set("XHeight",0),t.set("StemH",0),t._updated=!0,t},e.prototype._getBoundBox=function(){var t=this._ttfReader._metrics._fontBox,e=Math.abs(t[2]-t[0]),i=Math.abs(t[1]-t[3]);return[t[0],t[3],e,i]},e.prototype._createFontDictionary=function(){this._fontDictionary._updated=!0,this._fontDictionary.set("Type",hn.get("Font")),this._fontDictionary.set("Subtype",hn.get("TrueType")),this._fontDictionary.set("BaseFont",new hn(this._subsetName)),this._fontDictionary.set("Encoding",hn.get("Identity-H"))},e.prototype._createSystemInfo=function(){var t=new fn;return t._updated=!0,t.set("Registry","Adobe"),t.set("Ordering","Identity"),t.set("Supplement",0),t},e.prototype._getDescriptorFlags=function(){var e=0,i=this._ttfReader._metrics;return i._isFixedPitch&&(e|=t._FontDescriptorFlag.fixedPitch),i._isSymbol?e|=t._FontDescriptorFlag.symbolic:e|=t._FontDescriptorFlag.nonSymbolic,i._isItalic&&(e|=t._FontDescriptorFlag.italic),i._isBold&&(e|=t._FontDescriptorFlag.forceBold),e},e}(),wt=($=function(t,e){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}$(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),St=function(){function e(t,e){"number"==typeof t&&void 0===e?this._size=t:(this._size=t,this._style=e)}return Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){this._style=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUnderline",{get:function(){return(this.style&t.PdfFontStyle.underline)>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isStrikeout",{get:function(){return(this.style&t.PdfFontStyle.strikeout)>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_metrics",{get:function(){return this._fontMetrics},set:function(t){this._fontMetrics=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBold",{get:function(){return(this.style&t.PdfFontStyle.bold)>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isItalic",{get:function(){return(this.style&t.PdfFontStyle.italic)>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._metrics._getHeight()},enumerable:!0,configurable:!0}),e.prototype._setInternals=function(t){if(null==t)throw new Error("ArgumentNullException:internals");this._pdfFontInternals=t},e.prototype._getCharsCount=function(t,e){if("string"==typeof e){var i=0,n=0;for(n=t.indexOf(e,n);-1!==n;)i++,n++,n=t.indexOf(e,n);return i}for(var r=0,a=0;a<t.length;a++)-1!==e.indexOf(t[a])&&r++;return r},e.prototype.measureString=function(t,e,i,n,r){if("string"==typeof t&&void 0===e)return this.measureString(t,null);if("string"==typeof t&&(e instanceof j||null==e)&&void 0===i&&void 0===n){var a=e;return this.measureString(t,a,0,0)}if("string"==typeof t&&(e instanceof j||null==e)&&"number"==typeof i&&"number"==typeof n){a=e;return this.measureString(t,0,a,i,n)}if("string"==typeof t&&"number"==typeof e&&(i instanceof j||null==i)&&"number"==typeof n&&"number"==typeof r){var s=[e,0],o=i;return this.measureString(t,s,o,n,r)}a=e,o=i;var h=(new J)._layout(t,this,o,a);return n=t.length,r=h._empty?0:h._lines.length,h._actualSize},e.prototype._applyFormatSettings=function(t,e,i){var n=i;return null!=e&&i>0&&(0!==e.characterSpacing&&(n+=(t.length-1)*e.characterSpacing),0!==e.wordSpacing&&(n+=this._getCharsCount(t,[" ","\t"])*e.wordSpacing)),n},e}(),Pt=function(e){function i(i,n,r){var a=e.call(this,n,void 0===r?t.PdfFontStyle.regular:r)||this;return a._fontFamily=i,a._checkStyle(),a._initializeInternals(),a}return wt(i,e),Object.defineProperty(i.prototype,"fontFamily",{get:function(){return this._fontFamily},enumerable:!0,configurable:!0}),i.prototype._checkStyle=function(){this._fontFamily!==t.PdfFontFamily.symbol&&this._fontFamily!==t.PdfFontFamily.zapfDingbats||(this._style&=~(t.PdfFontStyle.bold|t.PdfFontStyle.italic))},i.prototype.getLineWidth=function(t,e){for(var i=0,n=0,r=t.length;n<r;n++)i+=this._getCharWidthInternal(t[Number.parseInt(n.toString(),10)]);return i*=.001*this._metrics._size,i=this._applyFormatSettings(t,e,i)},i.prototype._initializeInternals=function(){this._metrics=kt._getMetrics(this._fontFamily,this._style,this._size),this._dictionary=this._createInternals()},i.prototype._createInternals=function(){var e=new fn;return e._updated=!0,e.set("Type",hn.get("Font")),e.set("Subtype",hn.get("Type1")),e.set("BaseFont",new hn(this._metrics._postScriptName)),this._fontFamily!==t.PdfFontFamily.symbol&&this._fontFamily!==t.PdfFontFamily.zapfDingbats&&e.set("Encoding",new hn("WinAnsiEncoding")),e},i.prototype._getCharWidthInternal=function(t){var e=0;return e=t.charCodeAt(0),"0"!==this._metrics._name&&"1"!==this._metrics._name&&"2"!==this._metrics._name&&"3"!==this._metrics._name&&"4"!==this._metrics._name||(e-=32),e=e>=0&&128!==e?e:0,this._metrics._widthTable._itemAt(e)},i}(St),At=function(e){function i(i,n,r){var a=e.call(this,n,void 0===r?t.PdfFontStyle.regular:r)||this;return a._fontFamily=i,a._size=n,a._initializeInternals(),a}return wt(i,e),Object.defineProperty(i.prototype,"fontFamily",{get:function(){return this._fontFamily},enumerable:!0,configurable:!0}),i.prototype._initializeInternals=function(){this._metrics=Tt._getMetrics(this._fontFamily,this._style,this._size),this._dictionary=this._createInternals()},i.prototype._createInternals=function(){var t=new fn;return t._updated=!0,t.set("Type",hn.get("Font")),t.set("Subtype",hn.get("Type0")),t.set("BaseFont",new hn(this._metrics._postScriptName)),t.set("Encoding",this._getEncoding(this._fontFamily)),t.set("DescendantFonts",this._getDescendantFont()),t},i.prototype._getEncoding=function(e){var i="Unknown";switch(e){case t.PdfCjkFontFamily.hanyangSystemsGothicMedium:case t.PdfCjkFontFamily.hanyangSystemsShinMyeongJoMedium:i="UniKS-UCS2-H";break;case t.PdfCjkFontFamily.heiseiKakuGothicW5:case t.PdfCjkFontFamily.heiseiMinchoW3:i="UniJIS-UCS2-H";break;case t.PdfCjkFontFamily.monotypeHeiMedium:case t.PdfCjkFontFamily.monotypeSungLight:i="UniCNS-UCS2-H";break;case t.PdfCjkFontFamily.sinoTypeSongLight:i="UniGB-UCS2-H"}return new hn(i)},i.prototype._getDescendantFont=function(){var t=new fn;return t._updated=!0,t.set("Type",hn.get("Font")),t.set("Subtype",hn.get("CIDFontType2")),t.set("BaseFont",new hn(this._metrics._postScriptName)),t.set("DW",this._metrics._widthTable._defaultWidth),t.set("W",this._metrics._widthTable._toArray()),t.set("FontDescriptor",Rt._getFontDescriptor(this._fontFamily,this._style,this._metrics)),t.set("CIDSystemInfo",this._getSystemInformation()),[t]},i.prototype._getSystemInformation=function(){var e=new fn;switch(e._updated=!0,e.set("Registry","Adobe"),this._fontFamily){case t.PdfCjkFontFamily.hanyangSystemsGothicMedium:case t.PdfCjkFontFamily.hanyangSystemsShinMyeongJoMedium:e.set("Ordering","Korea1"),e.set("Supplement",1);break;case t.PdfCjkFontFamily.heiseiKakuGothicW5:case t.PdfCjkFontFamily.heiseiMinchoW3:e.set("Ordering","Japan1"),e.set("Supplement",2);break;case t.PdfCjkFontFamily.monotypeHeiMedium:case t.PdfCjkFontFamily.monotypeSungLight:e.set("Ordering","CNS1"),e.set("Supplement","0");break;case t.PdfCjkFontFamily.sinoTypeSongLight:e.set("Ordering","GB1"),e.set("Supplement",2)}return e},i.prototype.getLineWidth=function(t,e){for(var i=0,n=0;n<t.length;n++)i+=this._getCharWidthInternal(t.charCodeAt(n));return i*=.001*this._metrics._size,i=this._applyFormatSettings(t,e,i)},i.prototype._getCharWidthInternal=function(t){return t=t>=0?t:0,this._metrics._widthTable._itemAt(t)},i}(St),xt=function(e){function i(i,n,r){var a=e.call(this,n,void 0===r?t.PdfFontStyle.regular:r)||this;return a._isEmbedFont=!1,a._isUnicode=!0,void 0!==r?a._createFontInternal(i,r):a._createFontInternal(i,t.PdfFontStyle.regular),a}return wt(i,e),Object.defineProperty(i.prototype,"isUnicode",{get:function(){return this._isUnicode},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isEmbed",{get:function(){return this._isEmbedFont},enumerable:!0,configurable:!0}),i.prototype._createFontInternal=function(t,e){this._fontInternal=new vt(t,this._size),this._calculateStyle(e),this._initializeInternals()},i.prototype._calculateStyle=function(e){var i=this._fontInternal._ttfMetrics._macStyle;0!=(e&t.PdfFontStyle.underline)&&(i|=t.PdfFontStyle.underline),0!=(e&t.PdfFontStyle.strikeout)&&(i|=t.PdfFontStyle.strikeout),this.style=i},i.prototype._initializeInternals=function(){var t;this._fontInternal instanceof vt&&(this._fontInternal._isEmbed=this._isEmbedFont),this._fontInternal._createInternals(),t=this._fontInternal._getInternals(),this._metrics=this._fontInternal._metrics,this._metrics._isUnicodeFont=!0,this._setInternals(t)},i.prototype.getLineWidth=function(t,e){for(var i=0,n=0,r=t.length;n<r;n++)i+=this._getCharWidthInternal(t[Number.parseInt(n.toString(),10)]);return i*=.001*this._metrics._size,i=this._applyFormatSettings(t,e,i)},i.prototype._getCharWidthInternal=function(t){var e=0;return e=t.charCodeAt(0),"0"!==this._metrics._name&&"1"!==this._metrics._name&&"2"!==this._metrics._name&&"3"!==this._metrics._name&&"4"!==this._metrics._name||(e-=32),e=e>=0&&128!==e?e:0,this._metrics._widthTable._itemAt(e)},i}(St),kt=function(){function e(){}return e._getMetrics=function(e,i,n){var r=null;switch(e){case t.PdfFontFamily.helvetica:r=this._getHelveticaMetrics(i,n);break;case t.PdfFontFamily.courier:r=this._getCourierMetrics(i,n);break;case t.PdfFontFamily.timesRoman:r=this._getTimesMetrics(i,n);break;case t.PdfFontFamily.symbol:r=this._getSymbolMetrics(n);break;case t.PdfFontFamily.zapfDingbats:r=this._getZapfDingbatsMetrics(n);break;default:r=this._getHelveticaMetrics(i,n)}return r._name=e.toString(),r._subScriptSizeFactor=this._subSuperScriptFactor,r._superscriptSizeFactor=this._subSuperScriptFactor,r},e._getHelveticaMetrics=function(e,i){var n=new W;return(e&t.PdfFontStyle.bold)>0&&(e&t.PdfFontStyle.italic)>0?(n._ascent=this._helveticaBoldItalicAscent,n._descent=this._helveticaBoldItalicDescent,n._postScriptName=this._helveticaBoldItalicName,n._size=i,n._widthTable=new G(this._arialBoldWidth),n._height=n._ascent-n._descent):(e&t.PdfFontStyle.bold)>0?(n._ascent=this._helveticaBoldAscent,n._descent=this._helveticaBoldDescent,n._postScriptName=this._helveticaBoldName,n._size=i,n._widthTable=new G(this._arialBoldWidth),n._height=n._ascent-n._descent):(e&t.PdfFontStyle.italic)>0?(n._ascent=this._helveticaItalicAscent,n._descent=this._helveticaItalicDescent,n._postScriptName=this._helveticaItalicName,n._size=i,n._widthTable=new G(this._arialWidth),n._height=n._ascent-n._descent):(n._ascent=this._helveticaAscent,n._descent=this._helveticaDescent,n._postScriptName=this._helveticaName,n._size=i,n._widthTable=new G(this._arialWidth),n._height=n._ascent-n._descent),n},e._getCourierMetrics=function(e,i){var n=new W;return(e&t.PdfFontStyle.bold)>0&&(e&t.PdfFontStyle.italic)>0?(n._ascent=this._courierBoldItalicAscent,n._descent=this._courierBoldItalicDescent,n._postScriptName=this._courierBoldItalicName,n._size=i,n._widthTable=new G(this._fixedWidth),n._height=n._ascent-n._descent):(e&t.PdfFontStyle.bold)>0?(n._ascent=this._courierBoldAscent,n._descent=this._courierBoldDescent,n._postScriptName=this._courierBoldName,n._size=i,n._widthTable=new G(this._fixedWidth),n._height=n._ascent-n._descent):(e&t.PdfFontStyle.italic)>0?(n._ascent=this._courierItalicAscent,n._descent=this._courierItalicDescent,n._postScriptName=this._courierItalicName,n._size=i,n._widthTable=new G(this._fixedWidth),n._height=n._ascent-n._descent):(n._ascent=this._courierAscent,n._descent=this._courierDescent,n._postScriptName=this._courierName,n._size=i,n._widthTable=new G(this._fixedWidth),n._height=n._ascent-n._descent),n},e._getTimesMetrics=function(e,i){var n=new W;return(e&t.PdfFontStyle.bold)>0&&(e&t.PdfFontStyle.italic)>0?(n._ascent=this._timesBoldItalicAscent,n._descent=this._timesBoldItalicDescent,n._postScriptName=this._timesBoldItalicName,n._size=i,n._widthTable=new G(this._timesRomanBoldItalicWidths),n._height=n._ascent-n._descent):(e&t.PdfFontStyle.bold)>0?(n._ascent=this._timesBoldAscent,n._descent=this._timesBoldDescent,n._postScriptName=this._timesBoldName,n._size=i,n._widthTable=new G(this._timesRomanBoldWidth),n._height=n._ascent-n._descent):(e&t.PdfFontStyle.italic)>0?(n._ascent=this._timesItalicAscent,n._descent=this._timesItalicDescent,n._postScriptName=this._timesItalicName,n._size=i,n._widthTable=new G(this._timesRomanItalicWidth),n._height=n._ascent-n._descent):(n._ascent=this._timesAscent,n._descent=this._timesDescent,n._postScriptName=this._timesName,n._size=i,n._widthTable=new G(this._timesRomanWidth),n._height=n._ascent-n._descent),n},e._getSymbolMetrics=function(t){var e=new W;return e._ascent=this._symbolAscent,e._descent=this._symbolDescent,e._postScriptName=this._symbolName,e._size=t,e._widthTable=new G(this._symbolWidth),e._height=e._ascent-e._descent,e},e._getZapfDingbatsMetrics=function(t){var e=new W;return e._ascent=this._zapfDingbatsAscent,e._descent=this._zapfDingbatsDescent,e._postScriptName=this._zapfDingbatsName,e._size=t,e._widthTable=new G(this._zapfDingbatsWidth),e._height=e._ascent-e._descent,e},e._subSuperScriptFactor=1.52,e._helveticaAscent=931,e._helveticaDescent=-225,e._helveticaName="Helvetica",e._helveticaBoldAscent=962,e._helveticaBoldDescent=-228,e._helveticaBoldName="Helvetica-Bold",e._helveticaItalicAscent=931,e._helveticaItalicDescent=-225,e._helveticaItalicName="Helvetica-Oblique",e._helveticaBoldItalicAscent=962,e._helveticaBoldItalicDescent=-228,e._helveticaBoldItalicName="Helvetica-BoldOblique",e._courierAscent=805,e._courierDescent=-250,e._courierName="Courier",e._courierBoldAscent=801,e._courierBoldDescent=-250,e._courierBoldName="Courier-Bold",e._courierItalicAscent=805,e._courierItalicDescent=-250,e._courierItalicName="Courier-Oblique",e._courierBoldItalicAscent=801,e._courierBoldItalicDescent=-250,e._courierBoldItalicName="Courier-BoldOblique",e._timesAscent=898,e._timesDescent=-218,e._timesName="Times-Roman",e._timesBoldAscent=935,e._timesBoldDescent=-218,e._timesBoldName="Times-Bold",e._timesItalicAscent=883,e._timesItalicDescent=-217,e._timesItalicName="Times-Italic",e._timesBoldItalicAscent=921,e._timesBoldItalicDescent=-218,e._timesBoldItalicName="Times-BoldItalic",e._symbolAscent=1010,e._symbolDescent=-293,e._symbolName="Symbol",e._zapfDingbatsAscent=820,e._zapfDingbatsDescent=-143,e._zapfDingbatsName="ZapfDingbats",e._arialWidth=[278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,0,556,0,222,556,333,1e3,556,556,333,1e3,667,333,1e3,0,611,0,0,222,222,333,333,350,556,1e3,333,1e3,500,333,944,0,500,667,0,333,556,556,556,556,260,556,333,737,370,556,584,0,737,333,400,584,333,333,333,556,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,584,611,556,556,556,556,500,556,500],e._arialBoldWidth=[278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,0,556,0,278,556,500,1e3,556,556,333,1e3,667,333,1e3,0,611,0,0,278,278,500,500,350,556,1e3,333,1e3,556,333,944,0,500,667,0,333,556,556,556,556,280,556,333,737,370,556,584,0,737,333,400,584,333,333,333,611,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,584,611,611,611,611,611,556,611,556],e._fixedWidth=[600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600,600],e._timesRomanWidth=[250,333,408,500,500,833,778,180,333,333,500,564,250,333,250,278,500,500,500,500,500,500,500,500,500,500,278,278,564,564,564,444,921,722,667,667,722,611,556,722,722,333,389,722,611,889,722,722,556,722,667,556,611,722,722,944,722,722,611,333,278,333,469,500,333,444,500,444,500,444,333,500,500,278,278,500,278,778,500,500,500,500,333,389,278,500,500,722,500,500,444,480,200,480,541,0,500,0,333,500,444,1e3,500,500,333,1e3,556,333,889,0,611,0,0,333,333,444,444,350,500,1e3,333,980,389,333,722,0,444,722,0,333,500,500,500,500,200,500,333,760,276,500,564,0,760,333,400,564,300,300,333,500,453,250,333,300,310,500,750,750,750,444,722,722,722,722,722,722,889,667,611,611,611,611,333,333,333,333,722,722,722,722,722,722,722,564,722,722,722,722,722,722,556,500,444,444,444,444,444,444,667,444,444,444,444,444,278,278,278,278,500,500,500,500,500,500,500,564,500,500,500,500,500,500,500,500],e._timesRomanBoldWidth=[250,333,555,500,500,1e3,833,278,333,333,500,570,250,333,250,278,500,500,500,500,500,500,500,500,500,500,333,333,570,570,570,500,930,722,667,722,722,667,611,778,778,389,500,778,667,944,722,778,611,778,722,556,667,722,722,1e3,722,722,667,333,278,333,581,500,333,500,556,444,556,444,333,500,556,278,333,556,278,833,556,500,556,556,444,389,333,556,500,722,500,500,444,394,220,394,520,0,500,0,333,500,500,1e3,500,500,333,1e3,556,333,1e3,0,667,0,0,333,333,500,500,350,500,1e3,333,1e3,389,333,722,0,444,722,0,333,500,500,500,500,220,500,333,747,300,500,570,0,747,333,400,570,300,300,333,556,540,250,333,300,330,500,750,750,750,500,722,722,722,722,722,722,1e3,722,667,667,667,667,389,389,389,389,722,722,778,778,778,778,778,570,778,722,722,722,722,722,611,556,500,500,500,500,500,500,722,444,444,444,444,444,278,278,278,278,500,556,500,500,500,500,500,570,500,556,556,556,556,500,556,500],e._timesRomanItalicWidth=[250,333,420,500,500,833,778,214,333,333,500,675,250,333,250,278,500,500,500,500,500,500,500,500,500,500,333,333,675,675,675,500,920,611,611,667,722,611,611,722,722,333,444,667,556,833,667,722,611,722,611,500,556,722,611,833,611,556,556,389,278,389,422,500,333,500,500,444,500,444,278,500,500,278,278,444,278,722,500,500,500,500,389,389,278,500,444,667,444,444,389,400,275,400,541,0,500,0,333,500,556,889,500,500,333,1e3,500,333,944,0,556,0,0,333,333,556,556,350,500,889,333,980,389,333,667,0,389,556,0,389,500,500,500,500,275,500,333,760,276,500,675,0,760,333,400,675,300,300,333,500,523,250,333,300,310,500,750,750,750,500,611,611,611,611,611,611,889,667,611,611,611,611,333,333,333,333,722,667,722,722,722,722,722,675,722,722,722,722,722,556,611,500,500,500,500,500,500,500,667,444,444,444,444,444,278,278,278,278,500,500,500,500,500,500,500,675,500,500,500,500,500,444,500,444],e._timesRomanBoldItalicWidths=[250,389,555,500,500,833,778,278,333,333,500,570,250,333,250,278,500,500,500,500,500,500,500,500,500,500,333,333,570,570,570,500,832,667,667,667,722,667,667,722,778,389,500,667,611,889,722,722,611,722,667,556,611,722,667,889,667,611,611,333,278,333,570,500,333,500,500,444,500,444,333,500,556,278,278,500,278,778,556,500,500,500,389,389,278,556,444,667,500,444,389,348,220,348,570,0,500,0,333,500,500,1e3,500,500,333,1e3,556,333,944,0,611,0,0,333,333,500,500,350,500,1e3,333,1e3,389,333,722,0,389,611,0,389,500,500,500,500,220,500,333,747,266,500,606,0,747,333,400,570,300,300,333,576,500,250,333,300,300,500,750,750,750,500,667,667,667,667,667,667,944,667,667,667,667,667,389,389,389,389,722,722,722,722,722,722,722,570,722,722,722,722,722,611,611,500,500,500,500,500,500,500,722,444,444,444,444,444,278,278,278,278,500,556,500,500,500,500,500,570,500,556,556,556,556,444,500,444],e._symbolWidth=[250,333,713,500,549,833,778,439,333,333,500,549,250,549,250,278,500,500,500,500,500,500,500,500,500,500,278,278,549,549,549,444,549,722,667,722,612,611,763,603,722,333,631,722,686,889,722,722,768,741,556,592,611,690,439,768,645,795,611,333,863,333,658,500,500,631,549,549,494,439,521,411,603,329,603,549,549,576,521,549,549,521,549,603,439,576,713,686,493,686,494,480,200,480,549,750,620,247,549,167,713,500,753,753,753,753,1042,987,603,987,603,400,549,411,549,549,713,494,460,549,549,549,549,1e3,603,1e3,658,823,686,795,987,768,768,823,768,768,713,713,713,713,713,713,713,768,713,790,790,890,823,549,250,713,603,603,1042,987,603,987,603,494,329,790,790,786,713,384,384,384,384,384,384,494,494,494,494,329,274,686,686,686,384,384,384,384,384,384,494,494,494,-1],e._zapfDingbatsWidth=[278,974,961,974,980,719,789,790,791,690,960,939,549,855,911,933,911,945,974,755,846,762,761,571,677,763,760,759,754,494,552,537,577,692,786,788,788,790,793,794,816,823,789,841,823,833,816,831,923,744,723,749,790,792,695,776,768,792,759,707,708,682,701,826,815,789,789,707,687,696,689,786,787,713,791,785,791,873,761,762,762,759,759,892,892,788,784,438,138,277,415,392,392,668,668,390,390,317,317,276,276,509,509,410,410,234,234,334,334,732,544,544,910,667,760,760,776,595,694,626,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,788,894,838,1016,458,748,924,748,918,927,928,928,834,873,828,924,924,917,930,931,463,883,836,836,867,867,696,696,874,874,760,946,771,865,771,888,967,888,831,873,927,970,918],e}(),Tt=function(){function e(){}return e._getHanyangSystemsGothicMedium=function(e,i){var n=new W,r=new q(1e3);return r._add(new X(1,127,500)),r._add(new X(8094,8190,500)),n._widthTable=r,n._ascent=880,n._descent=-120,n._size=i,n._height=n._ascent-n._descent,0!=(e&t.PdfFontStyle.bold)&&0!=(e&t.PdfFontStyle.italic)?n._postScriptName="HYGoThic-Medium,BoldItalic":0!=(e&t.PdfFontStyle.bold)?n._postScriptName="HYGoThic-Medium,Bold":0!=(e&t.PdfFontStyle.italic)?n._postScriptName="HYGoThic-Medium,Italic":n._postScriptName="HYGoThic-Medium",n},e._getHanyangSystemsShinMyeongJoMedium=function(e,i){var n=new W,r=new q(1e3);return r._add(new X(1,95,500)),r._add(new X(8094,8190,500)),n._widthTable=r,n._ascent=880,n._descent=-120,n._size=i,n._height=n._ascent-n._descent,0!=(e&t.PdfFontStyle.bold)&&0!=(e&t.PdfFontStyle.italic)?n._postScriptName="HYSMyeongJo-Medium,BoldItalic":0!=(e&t.PdfFontStyle.bold)?n._postScriptName="HYSMyeongJo-Medium,Bold":0!=(e&t.PdfFontStyle.italic)?n._postScriptName="HYSMyeongJo-Medium,Italic":n._postScriptName="HYSMyeongJo-Medium",n},e._getHeiseiKakuGothicW5=function(e,i){var n=new W,r=new q(1e3);return r._add(new X(1,95,500)),r._add(new X(231,632,500)),n._widthTable=r,n._ascent=857,n._descent=-125,n._size=i,n._height=n._ascent-n._descent,0!=(e&t.PdfFontStyle.bold)&&0!=(e&t.PdfFontStyle.italic)?n._postScriptName="HeiseiKakuGo-W5,BoldItalic":0!=(e&t.PdfFontStyle.bold)?n._postScriptName="HeiseiKakuGo-W5,Bold":0!=(e&t.PdfFontStyle.italic)?n._postScriptName="HeiseiKakuGo-W5,Italic":n._postScriptName="HeiseiKakuGo-W5",n},e._getHeiseiMinchoW3=function(e,i){var n=new W,r=new q(1e3);return r._add(new X(1,95,500)),r._add(new X(231,632,500)),n._widthTable=r,n._ascent=857,n._descent=-143,n._size=i,n._height=n._ascent-n._descent,0!=(e&t.PdfFontStyle.bold)&&0!=(e&t.PdfFontStyle.italic)?n._postScriptName="HeiseiMin-W3,BoldItalic":0!=(e&t.PdfFontStyle.bold)?n._postScriptName="HeiseiMin-W3,Bold":0!=(e&t.PdfFontStyle.italic)?n._postScriptName="HeiseiMin-W3,Italic":n._postScriptName="HeiseiMin-W3",n},e._getMonotypeHeiMedium=function(e,i){var n=new W,r=new q(1e3);return r._add(new X(1,95,500)),r._add(new X(13648,13742,500)),n._widthTable=r,n._ascent=880,n._descent=-120,n._size=i,n._height=n._ascent-n._descent,0!=(e&t.PdfFontStyle.bold)&&0!=(e&t.PdfFontStyle.italic)?n._postScriptName="MHei-Medium,BoldItalic":0!=(e&t.PdfFontStyle.bold)?n._postScriptName="MHei-Medium,Bold":0!=(e&t.PdfFontStyle.italic)?n._postScriptName="MHei-Medium,Italic":n._postScriptName="MHei-Medium",n},e._getMonotypeSungLight=function(e,i){var n=new W,r=new q(1e3);return r._add(new X(1,95,500)),r._add(new X(13648,13742,500)),n._widthTable=r,n._ascent=880,n._descent=-120,n._size=i,n._height=n._ascent-n._descent,0!=(e&t.PdfFontStyle.bold)&&0!=(e&t.PdfFontStyle.italic)?n._postScriptName="MSung-Light,BoldItalic":0!=(e&t.PdfFontStyle.bold)?n._postScriptName="MSung-Light,Bold":0!=(e&t.PdfFontStyle.italic)?n._postScriptName="MSung-Light,Italic":n._postScriptName="MSung-Light",n},e._getSinoTypeSongLight=function(e,i){var n=new W,r=new q(1e3);return r._add(new X(1,95,500)),r._add(new X(814,939,500)),r._add(new Q(7712,[500])),r._add(new Q(7716,[500])),n._ascent=880,n._descent=-120,n._size=i,n._height=n._ascent-n._descent,0!=(e&t.PdfFontStyle.bold)&&0!=(e&t.PdfFontStyle.italic)?n._postScriptName="STSong-Light,BoldItalic":0!=(e&t.PdfFontStyle.bold)?n._postScriptName="STSong-Light,Bold":0!=(e&t.PdfFontStyle.italic)?n._postScriptName="STSong-Light,Italic":n._postScriptName="STSong-Light",n._widthTable=r,n},e._getMetrics=function(e,i,n){var r;switch(e){case t.PdfCjkFontFamily.hanyangSystemsGothicMedium:(r=this._getHanyangSystemsGothicMedium(i,n))._name="HanyangSystemsGothicMedium";break;case t.PdfCjkFontFamily.hanyangSystemsShinMyeongJoMedium:(r=this._getHanyangSystemsShinMyeongJoMedium(i,n))._name="HanyangSystemsShinMyeongJoMedium";break;case t.PdfCjkFontFamily.heiseiKakuGothicW5:(r=this._getHeiseiKakuGothicW5(i,n))._name="HeiseiKakuGothicW5";break;case t.PdfCjkFontFamily.heiseiMinchoW3:(r=this._getHeiseiMinchoW3(i,n))._name="HeiseiMinchoW3";break;case t.PdfCjkFontFamily.monotypeHeiMedium:(r=this._getMonotypeHeiMedium(i,n))._name="MonotypeHeiMedium";break;case t.PdfCjkFontFamily.monotypeSungLight:(r=this._getMonotypeSungLight(i,n))._name="MonotypeSungLight";break;case t.PdfCjkFontFamily.sinoTypeSongLight:(r=this._getSinoTypeSongLight(i,n))._name="SinoTypeSongLight"}return r._subScriptSizeFactor=this._subSuperScriptFactor,r._superscriptSizeFactor=this._subSuperScriptFactor,r},e._subSuperScriptFactor=1.52,e}(),Rt=function(){function e(){}return e._fillMonotypeSungLight=function(t,e,i){this._fillFontBox(t,{x:-160,y:-249,width:1175,height:1137}),this._fillKnownInformation(t,e,i),t.set("StemV",93),t.set("StemH",93),t.set("AvgWidth",1e3),t.set("MaxWidth",1e3),t.set("CapHeight",880),t.set("XHeight",616),t.set("Leading",250)},e._fillHeiseiKakuGothicW5=function(e,i,n,r){(i&(t.PdfFontStyle.italic|t.PdfFontStyle.bold))!==t.PdfFontStyle.italic?this._fillFontBox(e,{x:-92,y:-250,width:1102,height:1172}):this._fillFontBox(e,{x:-92,y:-250,width:1102,height:1932}),this._fillKnownInformation(e,n,r),e.set("StemV",93),e.set("StemH",93),e.set("AvgWidth",689),e.set("MaxWidth",1e3),e.set("CapHeight",718),e.set("XHeight",500),e.set("Leading",250)},e._fillHanyangSystemsShinMyeongJoMedium=function(t,e,i){this._fillFontBox(t,{x:0,y:-148,width:1001,height:1028}),this._fillKnownInformation(t,e,i),t.set("StemV",93),t.set("StemH",93),t.set("AvgWidth",1e3),t.set("MaxWidth",1e3),t.set("CapHeight",880),t.set("XHeight",616),t.set("Leading",250)},e._fillHeiseiMinchoW3=function(t,e,i){this._fillFontBox(t,{x:-123,y:-257,width:1124,height:1167}),this._fillKnownInformation(t,e,i),t.set("StemV",93),t.set("StemH",93),t.set("AvgWidth",702),t.set("MaxWidth",1e3),t.set("CapHeight",718),t.set("XHeight",500),t.set("Leading",250)},e._fillSinoTypeSongLight=function(t,e,i){this._fillFontBox(t,{x:-25,y:-254,width:1025,height:1134}),this._fillKnownInformation(t,e,i),t.set("StemV",93),t.set("StemH",93),t.set("AvgWidth",1e3),t.set("MaxWidth",1e3),t.set("CapHeight",880),t.set("XHeight",616),t.set("Leading",250)},e._fillMonotypeHeiMedium=function(t,e,i){this._fillFontBox(t,{x:-45,y:-250,width:1060,height:1137}),this._fillKnownInformation(t,e,i),t.set("StemV",93),t.set("StemH",93),t.set("AvgWidth",1e3),t.set("MaxWidth",1e3),t.set("CapHeight",880),t.set("XHeight",616),t.set("Leading",250)},e._fillHanyangSystemsGothicMedium=function(t,e,i){this._fillFontBox(t,{x:-6,y:-145,width:1009,height:1025}),this._fillKnownInformation(t,e,i),t.set("Flags",4),t.set("StemV",93),t.set("StemH",93),t.set("AvgWidth",1e3),t.set("MaxWidth",1e3),t.set("CapHeight",880),t.set("XHeight",616),t.set("Leading",250)},e._fillFontBox=function(t,e){t.set("FontBBox",pi(e))},e._fillKnownInformation=function(e,i,n){switch(e.set("FontName",hn.get(n._postScriptName)),e.set("Type",hn.get("FontDescriptor")),e.set("ItalicAngle",0),e.set("MissingWidth",n._widthTable._defaultWidth),e.set("Ascent",n._ascent),e.set("Descent",n._descent),i){case t.PdfCjkFontFamily.monotypeHeiMedium:case t.PdfCjkFontFamily.hanyangSystemsGothicMedium:case t.PdfCjkFontFamily.heiseiKakuGothicW5:e.set("Flags",4);break;case t.PdfCjkFontFamily.sinoTypeSongLight:case t.PdfCjkFontFamily.monotypeSungLight:case t.PdfCjkFontFamily.hanyangSystemsShinMyeongJoMedium:case t.PdfCjkFontFamily.heiseiMinchoW3:e.set("Flags",6)}},e._getFontDescriptor=function(e,i,n){var r=new fn;switch(r._updated=!0,e){case t.PdfCjkFontFamily.hanyangSystemsGothicMedium:this._fillHanyangSystemsGothicMedium(r,e,n);break;case t.PdfCjkFontFamily.hanyangSystemsShinMyeongJoMedium:this._fillHanyangSystemsShinMyeongJoMedium(r,e,n);break;case t.PdfCjkFontFamily.heiseiKakuGothicW5:this._fillHeiseiKakuGothicW5(r,i,e,n);break;case t.PdfCjkFontFamily.heiseiMinchoW3:this._fillHeiseiMinchoW3(r,e,n);break;case t.PdfCjkFontFamily.monotypeHeiMedium:this._fillMonotypeHeiMedium(r,e,n);break;case t.PdfCjkFontFamily.monotypeSungLight:this._fillMonotypeSungLight(r,e,n);break;case t.PdfCjkFontFamily.sinoTypeSongLight:this._fillSinoTypeSongLight(r,e,n)}return r},e}();(tt=t.PdfFontStyle||(t.PdfFontStyle={}))[tt.regular=0]="regular",tt[tt.bold=1]="bold",tt[tt.italic=2]="italic",tt[tt.underline=4]="underline",tt[tt.strikeout=8]="strikeout",(et=t.PdfFontFamily||(t.PdfFontFamily={}))[et.helvetica=0]="helvetica",et[et.courier=1]="courier",et[et.timesRoman=2]="timesRoman",et[et.symbol=3]="symbol",et[et.zapfDingbats=4]="zapfDingbats",(it=t.PdfCjkFontFamily||(t.PdfCjkFontFamily={}))[it.heiseiKakuGothicW5=0]="heiseiKakuGothicW5",it[it.heiseiMinchoW3=1]="heiseiMinchoW3",it[it.hanyangSystemsGothicMedium=2]="hanyangSystemsGothicMedium",it[it.hanyangSystemsShinMyeongJoMedium=3]="hanyangSystemsShinMyeongJoMedium",it[it.monotypeHeiMedium=4]="monotypeHeiMedium",it[it.monotypeSungLight=5]="monotypeSungLight",it[it.sinoTypeSongLight=6]="sinoTypeSongLight";var Ft,It=function(){function e(){this._fillMode=t._PdfFillMode.winding,this._points=[],this._pathTypes=[],this._isStart=!0}return Object.defineProperty(e.prototype,"_lastPoint",{get:function(){var t=[0,0],e=this._points.length;return this._points.length>0&&(t[0]=this._points[e-1][0],t[1]=this._points[e-1][0]),t},enumerable:!0,configurable:!0}),e.prototype._addLine=function(e,i,n,r){this._addPoints([e,i,n,r],t._PathPointType.line)},e.prototype._addLines=function(e){var i=e[0];if(1===e.length)this._addPoint(e[0],t._PathPointType.line);else for(var n=1;n<e.length;n++){var r=e[Number.parseInt(n.toString(),10)];this._addLine(i[0],i[1],r[0],r[1]),i=r}},e.prototype._addPoints=function(e,i,n,r){for(var a=void 0!==n?n:0,s=void 0!==r?r:e.length,o=a;o<s;o++){var h=[e[Number.parseInt(o.toString(),10)],e[o+1]];o===a?0===this._points.length||this._isStart?(this._addPoint(h,t._PathPointType.start),this._isStart=!1):h[0]!==this._lastPoint[0]&&h[1]!==this._lastPoint[1]&&this._addPoint(h,t._PathPointType.line):this._addPoint(h,i),o++}},e.prototype._addPoint=function(t,e){this._points.push(t),this._pathTypes.push(e)},e.prototype._addArc=function(e,i,n,r,a,s){for(var o=Fi(e,i,e+n,i+r,a,s),h=0;h<o.length;++h){var c=[o[Number.parseInt(h.toString(),10)],o[++h],o[++h],o[++h],o[++h],o[++h],o[++h],o[++h]];this._addPoints(c,t._PathPointType.bezier)}},e.prototype._addRectangle=function(e,i,n,r){this._startFigure(),this._addPoints([e,i,e+n,i,e+n,i+r,e,i+r],t._PathPointType.line),this._closeFigure()},e.prototype._addPolygon=function(e){var i=[];e.forEach((function(t){i.push(t[0],t[1])})),this._startFigure(),this._addPoints(i,t._PathPointType.line),this._closeFigure()},e.prototype._addEllipse=function(t,e,i,n){this._startFigure(),this._addArc(t,e,i,n,0,360),this._closeFigure()},e.prototype._addBezierPoints=function(t){if(t.length<4)throw Error("Incorrect size of array points");var e=0,i=t[Number.parseInt(e.toString(),10)];for(e++;e+3<=t.length;){var n=t[Number.parseInt(e.toString(),10)];e++;var r=t[Number.parseInt(e.toString(),10)];e++;var a=t[Number.parseInt(e.toString(),10)];e++,this._addBezier(i[0],i[1],n[0],n[1],r[0],r[1],a[0],a[1]),i=a}},e.prototype._addBezier=function(e,i,n,r,a,s,o,h){var c=[];c.push(e),c.push(i),c.push(n),c.push(r),c.push(a),c.push(s),c.push(o),c.push(h),this._addPoints(c,t._PathPointType.bezier)},e.prototype._closeFigure=function(e){if(void 0!==e){var i=this._pathTypes[Number.parseInt(e.toString(),10)];i|=t._PathPointType.closePath,this._pathTypes[Number.parseInt(e.toString(),10)]=i}else this._points.length>0&&this._closeFigure(this._points.length-1),this._startFigure()},e.prototype._startFigure=function(){this._isStart=!0},e.prototype._getBounds=function(){var t=[0,0,0,0];if(this._points.length>0){for(var e=this._points[0][0],i=this._points[0][0],n=this._points[0][1],r=this._points[0][1],a=1;a<this._points.length;++a){var s=this._points[Number.parseInt(a.toString(),10)];e=Math.min(s[0],e),i=Math.max(s[0],i),n=Math.min(s[1],n),r=Math.max(s[1],r)}t=[e,n,i-e,r-n]}return t},e}();(Ft=t._PathPointType||(t._PathPointType={}))[Ft.start=0]="start",Ft[Ft.line=1]="line",Ft[Ft.bezier=3]="bezier",Ft[Ft.pathTypeMask=7]="pathTypeMask",Ft[Ft.dashMode=16]="dashMode",Ft[Ft.pathMarker=32]="pathMarker",Ft[Ft.closePath=128]="closePath";var Nt,Ct,Mt,Bt,Lt,Et,Dt,Ot,jt=(Nt=function(t,e){return(Nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Nt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),zt=function(){function e(){this._visible=!0}return Object.defineProperty(e.prototype,"itemsCount",{get:function(){return this._kids?this._kids.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"form",{get:function(){return this._form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){if(void 0===this._name){var t=ci(this._dictionary,"T",!1,!1,"Parent");t&&t.length>0&&(1===t.length?this._name=t[0]:this._name=t.join("."))}return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actualName",{get:function(){if(void 0===this._actualName&&this._dictionary.has("T")){var t=this._dictionary.get("T");t&&"string"==typeof t&&(this._actualName=t)}return this._actualName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mappingName",{get:function(){if(void 0===this._mappingName&&this._dictionary.has("TM")){var t=this._dictionary.get("TM");t&&"string"==typeof t&&(this._mappingName=t)}return this._mappingName},set:function(t){void 0!==this.mappingName&&this._mappingName===t||(this._mappingName=t,this._dictionary.update("TM",t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toolTip",{get:function(){if(void 0===this._alternateName&&this._dictionary.has("TU")){var t=this._dictionary.get("TU");t&&"string"==typeof t&&(this._alternateName=t)}return this._alternateName},set:function(t){void 0!==this.toolTip&&this._alternateName===t||(this._alternateName=t,this._dictionary.update("TU",t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibility",{get:function(){var e;if(this._isLoaded){e=t.PdfFormFieldVisibility.visible;var i=this.itemAt(this._defaultIndex),n=t.PdfAnnotationFlag.default;if(i&&i._hasFlags)n=i.flags;else{if(!this._dictionary.has("F"))return t.PdfFormFieldVisibility.visibleNotPrintable;n=this._dictionary.get("F")}var r=3;switch((n&t.PdfAnnotationFlag.hidden)===t.PdfAnnotationFlag.hidden&&(r=0),(n&t.PdfAnnotationFlag.noView)===t.PdfAnnotationFlag.noView&&(r=1),(n&t.PdfAnnotationFlag.print)!==t.PdfAnnotationFlag.print&&(r&=2),r){case 0:e=t.PdfFormFieldVisibility.hidden;break;case 1:e=t.PdfFormFieldVisibility.hiddenPrintable;break;case 2:e=t.PdfFormFieldVisibility.visibleNotPrintable;break;case 3:e=t.PdfFormFieldVisibility.visible}}else void 0===this._visibility&&(this._visibility=t.PdfFormFieldVisibility.visible),e=this._visibility;return e},set:function(e){var i=this.itemAt(this._defaultIndex);if(this._isLoaded)!i||i._hasFlags&&this.visibility===e?this._dictionary.has("F")&&this.visibility===e||(this._updateVisibility(this._dictionary,e),this._dictionary._updated=!0):(this._updateVisibility(i._dictionary,e),this._dictionary._updated=!0);else if(this.visibility!==e)switch(this._visibility=e,e){case t.PdfFormFieldVisibility.hidden:i.flags=t.PdfAnnotationFlag.hidden;break;case t.PdfFormFieldVisibility.hiddenPrintable:i.flags=t.PdfAnnotationFlag.noView|t.PdfAnnotationFlag.print;break;case t.PdfFormFieldVisibility.visible:i.flags=t.PdfAnnotationFlag.print;break;case t.PdfFormFieldVisibility.visibleNotPrintable:i.flags=t.PdfAnnotationFlag.default}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){var t,e=this.itemAt(this._defaultIndex);return e&&(e._page=this.page),e&&e.bounds?t=e.bounds:this._dictionary.has("Rect")&&(t=di(this._dictionary,this.page)),null==t&&(t={x:0,y:0,width:0,height:0}),t},set:function(t){if(0===t.x&&0===t.y&&0===t.width&&0===t.height)throw new Error("Cannot set empty bounds");var e=this.itemAt(this._defaultIndex);this._isLoaded&&(void 0===e||this._dictionary.has("Rect"))?this._dictionary.update("Rect",fi([t.x,t.y,t.width,t.height],this.page)):(e._page=this.page,e.bounds=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationAngle",{get:function(){var t,e=this.itemAt(this._defaultIndex);if(e&&void 0!==e.rotationAngle)t=e.rotationAngle;else if(this._dictionary.has("R"))t=this._dictionary.get("R");else for(var i=0;i<this._kidsCount&&void 0===t;i++)i!==this._defaultIndex&&(e=this.itemAt(i))&&void 0!==e.rotationAngle&&(t=e.rotationAngle);return void 0===t&&(t=0),t},set:function(t){var e=this.itemAt(this._defaultIndex);e?e.rotationAngle=t:this._dictionary.has("R")&&this._dictionary.get("R")===t||this._dictionary.update("R",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){var t,e=this.itemAt(this._defaultIndex);return e&&e.color?t=e.color:this._defaultAppearance&&(t=this._da.color),t},set:function(t){var e=this.itemAt(this._defaultIndex);if(e&&e.color)e.color=t;else{var i=!1;this._defaultAppearance||(this._da=new Xt(""),i=!0),(i||this._da.color!==t)&&(this._da.color=t,this._dictionary.update("DA",this._da.toString()))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backColor",{get:function(){var t,e=this.itemAt(this._defaultIndex);if(e&&e.backColor)t=e.backColor;else if(this._mkDictionary){var i=this._mkDictionary;if(i&&i.has("BG")){var n=i.getArray("BG");n&&(t=gi(n))}}return null==t&&(t=[255,255,255]),t},set:function(t){var e=this.itemAt(this._defaultIndex);if(e&&e.backColor!==t)e.backColor=t;else{var i=this._mkDictionary;if(void 0===i){var n=new fn(this._crossReference);n.update("BG",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]),this._dictionary.update("MK",n)}else i.has("BG")&&gi(i.getArray("BG"))===t||(i.update("BG",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]),this._dictionary._updated=!0)}this._backColorSet=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borderColor",{get:function(){var t,e=this.itemAt(this._defaultIndex);if(e&&e.borderColor)t=e.borderColor;else if(this._mkDictionary){var i=this._mkDictionary;if(i&&i.has("BC")){var n=i.getArray("BC");n&&(t=gi(n))}}return null==t&&(t=[0,0,0]),t},set:function(t){var e=this.itemAt(this._defaultIndex);if(e&&e.borderColor!==t)e.borderColor=t;else{var i=this._mkDictionary;if(void 0===i){var n=new fn(this._crossReference);n.update("BC",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]),this._dictionary.update("MK",n)}else i.has("BC")&&gi(i.getArray("BC"))===t||(i.update("BC",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]),this._dictionary._updated=!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readOnly",{get:function(){return 0!=(this._fieldFlags&t._FieldFlag.readOnly)},set:function(e){e?this._fieldFlags|=t._FieldFlag.readOnly:(this._fieldFlags===t._FieldFlag.readOnly&&(this._fieldFlags|=t._FieldFlag.default),this._fieldFlags&=~t._FieldFlag.readOnly)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return 0!=(this._fieldFlags&t._FieldFlag.required)},set:function(e){e?this._fieldFlags|=t._FieldFlag.required:this._fieldFlags&=~t._FieldFlag.required},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){if(this._isLoaded){var e=this.itemAt(this._defaultIndex),i=t.PdfAnnotationFlag.default;return e&&e._hasFlags?i=e.flags:this._dictionary.has("F")&&(i=this._dictionary.get("F")),i!==t.PdfAnnotationFlag.hidden}return this._visible},set:function(e){this._isLoaded||this._visible===e||e||(this._visible=e,this.itemAt(this._defaultIndex).flags=t.PdfAnnotationFlag.hidden)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"border",{get:function(){var e,i=this.itemAt(this._defaultIndex);if(i&&i._dictionary.has("BS"))e=i.border;else if((e=new Re)._dictionary=this._dictionary,this._dictionary.has("BS")){var n=this._dictionary.get("BS");if(n){if(n.has("W")&&(e._width=n.get("W")),n.has("S")){var r=n.get("S");if(r)switch(r.name){case"D":e._style=t.PdfBorderStyle.dashed;break;case"B":e._style=t.PdfBorderStyle.beveled;break;case"I":e._style=t.PdfBorderStyle.inset;break;case"U":e._style=t.PdfBorderStyle.underline;break;default:e._style=t.PdfBorderStyle.solid}}n.has("D")&&(e._dash=n.getArray("D"))}}return e},set:function(t){var e=this.itemAt(this._defaultIndex);e?this._updateBorder(e._dictionary,t):this._updateBorder(this._dictionary,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){var e=t.PdfRotationAngle.angle0,i=this.itemAt(this._defaultIndex);return i&&(e=i.rotate),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"export",{get:function(){return!(0!=(this._fieldFlags&t._FieldFlag.noExport))},set:function(e){e?this._fieldFlags&=~t._FieldFlag.noExport:this._fieldFlags|=t._FieldFlag.noExport},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabIndex",{get:function(){for(var t=0;t<this._kids.length;t++){var e=this._kids[Number.parseInt(t.toString(),10)];if(e&&this.page._pageDictionary.has("Annots")){var i=this.page._pageDictionary.get("Annots");if(i){var n=i.indexOf(e);if(-1!==n)return n}}}return-1},set:function(e){this._tabIndex=e;var i=this.page;if(i&&(this.form._tabOrder===t.PdfFormFieldsTabOrder.manual||i.tabOrder===t.PdfFormFieldsTabOrder.manual)&&i._pageDictionary.has("Annots")){var n=i._pageDictionary.get("Annots"),r=new Me(n,this._crossReference,i);i._annotations=r;var a=n.indexOf(this._ref);a<0&&(a=this._annotationIndex);var s=i.annotations._reArrange(this._ref,this._tabIndex,a);i._pageDictionary.update("Annots",s),i._pageDictionary._updated=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){if(!this._page){var t,e=this.itemAt(this._defaultIndex),i=void 0!==e?e._dictionary:this._dictionary;this._crossReference&&(t=this._crossReference._document);var n=void 0;if(i.has("P")){var r=i.getRaw("P");if(r&&t)for(var a=0;a<t.pageCount;a++){var s=t.getPage(a);if(s&&s._ref===r){n=s;break}}}if(!n&&t){var o=void 0!==e?e._ref:this._ref;if(!n&&o&&(n=Ii(t,o)),!n&&this._kids&&this._kids.length>0)for(a=0;a<this._kids.length&&!(n=Ii(t,this._kids[Number.parseInt(a.toString(),10)]));a++);}this._page=n}return this._page},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_grayBrush",{get:function(){return this._gray||(this._gray=new He([128,128,128])),this._gray},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_silverBrush",{get:function(){return this._silver||(this._silver=new He([198,198,198])),this._silver},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_whiteBrush",{get:function(){return this._white||(this._white=new He([255,255,255])),this._white},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_blackBrush",{get:function(){return this._black||(this._black=new He([0,0,0])),this._black},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_kidsCount",{get:function(){return this._kids?this._kids.length:0},enumerable:!0,configurable:!0}),e.prototype.itemAt=function(t){var e;if(t<this._kidsCount)if(this._parsedItems.has(t))e=this._parsedItems.get(t);else{var i=void 0,n=this._kids[Number.parseInt(t.toString(),10)];n&&n instanceof _n&&(i=this._crossReference._fetch(n)),i&&(e=Se._load(i,this._crossReference),this._parsedItems.set(t,e))}return e},e.prototype.setAppearance=function(t){this._setAppearance=t},e.prototype.getValue=function(t){var e;if(!this._dictionary.has(t))throw new Error("PdfException: "+t+" is not found");var i=this._dictionary.get(t);if(i instanceof hn)e=i.name;else{if("string"!=typeof i)throw new Error("PdfException: "+t+" is not found");e=i}return e},e.prototype.setValue=function(t,e){t&&""!==t&&e&&""!==e&&this._dictionary.update(t,e)},Object.defineProperty(e.prototype,"_fieldFlags",{get:function(){return void 0===this._flags&&(this._flags=ci(this._dictionary,"Ff",!1,!0,"Parent"),void 0===this._flags&&(this._flags=t._FieldFlag.default)),this._flags},set:function(t){this._fieldFlags!==t&&(this._flags=t,this._dictionary.update("Ff",t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_defaultAppearance",{get:function(){if(void 0===this._da){var t=ci(this._dictionary,"DA",!1,!0,"Parent");t&&""!==t&&(this._da=new Xt(t))}return this._da},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_mkDictionary",{get:function(){var t;return this._dictionary.has("MK")&&(t=this._dictionary.get("MK")),t},enumerable:!0,configurable:!0}),e.prototype._updateVisibility=function(e,i){switch(e.has("F")&&(delete e._map.F,e._updated=!0),i){case t.PdfFormFieldVisibility.hidden:e.update("F",t.PdfAnnotationFlag.hidden);break;case t.PdfFormFieldVisibility.hiddenPrintable:e.update("F",t.PdfAnnotationFlag.noView|t.PdfAnnotationFlag.print);break;case t.PdfFormFieldVisibility.visible:if(e.has("DV")&&(delete e._map.DV,e._updated=!0),e.has("MK")){var n=e.get("MK");n&&n.has("BG")&&(delete n._map.BG,n._updated=!0)}}},e.prototype._updateBorder=function(e,i){var n,r=!1;e.has("BS")?n=e.get("BS"):(n=new fn(this._crossReference),e.update("BS",n),r=!0),void 0!==i.width?(n.update("W",i.width),e._updated=!0):r&&n.update("W",0),void 0!==i.style?(n.update("S",yi(i.style)),e._updated=!0):r&&n.update("S",yi(t.PdfBorderStyle.solid)),void 0!==i.dash&&(n.update("D",i.dash),e._updated=!0)},e.prototype._checkFieldFlag=function(t){var e=t.get("F");return void 0!==e&&6===e},e.prototype._initializeFont=function(t){this._font=t;var e,i=this._page._fetchResources(),n=!1;if(i.has("Font")){var r=i.getRaw("Font");r&&r instanceof _n?(n=!0,e=this._crossReference._fetch(r)):r instanceof fn&&(e=r)}e||(e=new fn(this._crossReference),i.update("Font",e));var a=hn.get(Ti()),s=this._crossReference._getNextReference();this._crossReference._cacheMap.set(s,this._font._dictionary),e.update(a.name,s),this._fontName=a.name,n&&(i._updated=!0),this._page._hasResourceReference&&(this._page._pageDictionary._updated=!0)},e.prototype._drawRectangularControl=function(e,i){switch(e._drawRectangle(i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3],i.backBrush),this._drawBorder(e,i.bounds,i.borderPen,i.borderStyle,i.borderWidth),i.borderStyle){case t.PdfBorderStyle.inset:this._drawLeftTopShadow(e,i.bounds,i.borderWidth,this._grayBrush),this._drawRightBottomShadow(e,i.bounds,i.borderWidth,this._silverBrush);break;case t.PdfBorderStyle.beveled:this._drawLeftTopShadow(e,i.bounds,i.borderWidth,this._whiteBrush),this._drawRightBottomShadow(e,i.bounds,i.borderWidth,i.shadowBrush)}},e.prototype._drawBorder=function(e,i,n,r,a){n&&a>0&&(r===t.PdfBorderStyle.underline?e._drawLine(n,i[0],i[0]+i[3]-a/2,i[0]+i[2],i[1]+i[3]-a/2):e._drawRectangle(i[0]+a/2,i[1]+a/2,i[2]-a,i[3]-a,n))},e.prototype._drawLeftTopShadow=function(t,e,i,n){var r=new It,a=[];a.push([e[0]+i,e[1]+i]),a.push([e[0]+i,e[1]+e[3]-i]),a.push([e[0]+2*i,e[1]+e[3]-2*i]),a.push([e[0]+2*i,e[1]+2*i]),a.push([e[0]+e[2]-2*i,e[1]+2*i]),a.push([e[0]+e[2]-i,e[1]+i]),r._addPolygon(a),t._drawPath(r,null,n)},e.prototype._drawRightBottomShadow=function(t,e,i,n){var r=new It,a=[];a.push([e[0]+i,e[1]+e[3]-i]),a.push([e[0]+2*i,e[1]+e[3]-2*i]),a.push([e[0]+e[2]-2*i,e[1]+e[3]-2*i]),a.push([e[0]+e[2]-2*i,e[1]+2*i]),a.push([e[0]+e[2]-i,e[1]+i]),a.push([e[0]+e[2]-i,e[1]+e[3]-i]),r._addPolygon(a),t._drawPath(r,null,n)},e.prototype._drawRadioButton=function(e,i,n,r){if("l"===n){var a=i.bounds;switch(r){case t._PdfCheckFieldState.checked:case t._PdfCheckFieldState.unchecked:e._drawEllipse(a[0],a[1],a[2],a[3],i.backBrush);break;case t._PdfCheckFieldState.pressedChecked:case t._PdfCheckFieldState.pressedUnchecked:i.borderStyle===t.PdfBorderStyle.beveled||i.borderStyle===t.PdfBorderStyle.underline?e._drawEllipse(a[0],a[1],a[2],a[3],i.backBrush):e._drawEllipse(a[0],a[1],a[2],a[3],i.shadowBrush)}if(this._drawRoundBorder(e,a,i.borderPen,i.borderWidth),this._drawRoundShadow(e,i,r),r===t._PdfCheckFieldState.checked||r===t._PdfCheckFieldState.pressedChecked){var s=[a[0]+i.borderWidth/2,a[1]+i.borderWidth/2,a[2]-i.borderWidth,a[3]-i.borderWidth];e._drawEllipse(s[0]+s[2]/4,s[1]+s[2]/4,s[2]-s[2]/2,s[3]-s[2]/2,i.foreBrush)}}else this._drawCheckBox(e,i,n,r)},e.prototype._drawRoundBorder=function(t,e,i,n){0===e[0]&&0===e[1]&&0===e[2]&&0===e[3]||t._drawEllipse(e[0]+n/2,e[1]+n/2,e[2]-n,e[3]-n,i)},e.prototype._drawRoundShadow=function(e,i,n){var r,a,s=i.borderWidth,o=-1.5*s,h=i.bounds[0]+o,c=i.bounds[1]+o,_=i.bounds[2]+2*o,d=i.bounds[3]+2*o,l=i.shadowBrush._color;switch(i.borderStyle){case t.PdfBorderStyle.beveled:switch(n){case t._PdfCheckFieldState.pressedChecked:case t._PdfCheckFieldState.pressedUnchecked:r=new Ge(l,s),a=new Ge([255,255,255],s);break;case t._PdfCheckFieldState.checked:case t._PdfCheckFieldState.unchecked:r=new Ge([255,255,255],s),a=new Ge(l,s)}break;case t.PdfBorderStyle.inset:switch(n){case t._PdfCheckFieldState.pressedChecked:case t._PdfCheckFieldState.pressedUnchecked:r=new Ge([0,0,0],s),a=new Ge([0,0,0],s);break;case t._PdfCheckFieldState.checked:case t._PdfCheckFieldState.unchecked:r=new Ge([128,128,128],s),a=new Ge([192,192,192],s)}}r&&a&&(e._drawArc(h,c,_,d,135,180,r),e._drawArc(h,c,_,d,-45,180,a))},e.prototype._drawCheckBox=function(e,i,n,r,a){switch(r){case t._PdfCheckFieldState.unchecked:case t._PdfCheckFieldState.checked:i.borderPen&&e._drawRectangle(i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3],i.backBrush);break;case t._PdfCheckFieldState.pressedChecked:case t._PdfCheckFieldState.pressedUnchecked:i.borderStyle===t.PdfBorderStyle.beveled||i.borderStyle===t.PdfBorderStyle.underline?i.borderPen&&e._drawRectangle(i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3],i.backBrush):i.borderPen&&e._drawRectangle(i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3],i.shadowBrush)}var s=i.bounds;if(this._drawBorder(e,i.bounds,i.borderPen,i.borderStyle,i.borderWidth),r===t._PdfCheckFieldState.pressedChecked||r===t._PdfCheckFieldState.pressedUnchecked)switch(i.borderStyle){case t.PdfBorderStyle.inset:this._drawLeftTopShadow(e,i.bounds,i.borderWidth,this._blackBrush),this._drawRightBottomShadow(e,i.bounds,i.borderWidth,this._whiteBrush);break;case t.PdfBorderStyle.beveled:this._drawLeftTopShadow(e,i.bounds,i.borderWidth,i.shadowBrush),this._drawRightBottomShadow(e,i.bounds,i.borderWidth,this._whiteBrush)}else switch(i.borderStyle){case t.PdfBorderStyle.inset:this._drawLeftTopShadow(e,i.bounds,i.borderWidth,this._grayBrush),this._drawRightBottomShadow(e,i.bounds,i.borderWidth,this._silverBrush);break;case t.PdfBorderStyle.beveled:this._drawLeftTopShadow(e,i.bounds,i.borderWidth,this._whiteBrush),this._drawRightBottomShadow(e,i.bounds,i.borderWidth,i.shadowBrush)}var o=0,h=0;switch(r){case t._PdfCheckFieldState.pressedChecked:case t._PdfCheckFieldState.checked:if(a)a=new Pt(t.PdfFontFamily.zapfDingbats,a._size);else{var c=i.borderStyle===t.PdfBorderStyle.beveled||i.borderStyle===t.PdfBorderStyle.inset,_=i.borderWidth;c&&(_*=2);var d=Math.max(c?2*i.borderWidth:i.borderWidth,1),l=Math.min(_,d),p=(h=i.bounds[2]>i.bounds[3]?i.bounds[3]:i.bounds[2])-2*l;a=new Pt(t.PdfFontFamily.zapfDingbats,p),i.bounds[2]>i.bounds[3]&&(o=(i.bounds[3]-a._metrics._getHeight())/2)}if(0===h&&(h=i.bounds[3]),i.pageRotationAngle!==t.PdfRotationAngle.angle0||i.rotationAngle>0){var f=e._save(),u=e._size;if(i.pageRotationAngle!==t.PdfRotationAngle.angle0)if(i.pageRotationAngle===t.PdfRotationAngle.angle90){e._translateTransform(u[1],0),e._rotateTransform(90);var g=u[1]-(s[0]+s[2]);s=[s[1],g,s[3],s[2]]}else if(i.pageRotationAngle===t.PdfRotationAngle.angle180){e._translateTransform(u[0],u[1]),e._rotateTransform(-180),s=[u[0]-(s[0]+s[2]),g=u[1]-(s[1]+s[3]),s[2],s[3]]}else if(i.pageRotationAngle===t.PdfRotationAngle.angle270){e._translateTransform(0,u[0]),e._rotateTransform(270),s=[u[0]-(s[1]+s[3]),g=s[0],s[3],s[2]]}if(i.rotationAngle>0){if(90===i.rotationAngle)if(i.pageRotationAngle===t.PdfRotationAngle.angle90)e._translateTransform(0,u[1]),e._rotateTransform(-90),s=[u[1]-(s[1]+s[3]),g=s[0],s[3],s[2]];else if(s[2]>s[3])e._translateTransform(0,u[1]),e._rotateTransform(-90),s=[i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3]];else{var y=s[0];s[0]=-(s[1]+s[3]),s[1]=y;var b=s[3];s[3]=s[2]>a._metrics._getHeight()?s[2]:a._metrics._getHeight(),s[2]=b,e._rotateTransform(-90),s=[s[0],s[1],s[2],s[3]]}else if(270===i.rotationAngle){e._translateTransform(u[0],0),e._rotateTransform(-270),s=[s[1],g=u[0]-(s[0]+s[2]),s[3],s[2]]}else if(180===i.rotationAngle){e._translateTransform(u[0],u[1]),e._rotateTransform(-180),s=[u[0]-(s[0]+s[2]),g=u[1]-(s[1]+s[3]),s[2],s[3]]}e._drawString(n,a,[s[0],s[1]-o,s[2],s[3]],null,i.foreBrush,new j(t.PdfTextAlignment.center,t.PdfVerticalAlignment.middle)),e._restore(f)}else e._drawString(n,a,[s[0],s[1]-o,s[2],s[3]],null,i.foreBrush,new j(t.PdfTextAlignment.center,t.PdfVerticalAlignment.middle));break}}},e.prototype._addToKid=function(t){this._dictionary.has("Kids")?this._kids=this._dictionary.get("Kids"):(this._kids=[],this._dictionary.update("Kids",this._kids),this._parsedItems=new Map);var e=this._kidsCount;t._index=e,this._kids.push(t._ref),this._parsedItems.set(e,t)},e.prototype._drawTemplate=function(e,i,n){if(e&&i){var r=i._graphics;r._save(),i.rotation===t.PdfRotationAngle.angle90?(r._translateTransform(r._size[0],r._size[1]),r._rotateTransform(90)):i.rotation===t.PdfRotationAngle.angle180?(r._translateTransform(r._size[0],r._size[1]),r._rotateTransform(-180)):i.rotation===t.PdfRotationAngle.angle270&&(r._translateTransform(r._size[0],r._size[1]),r._rotateTransform(270)),r._sw._setTextRenderingMode(t._TextRenderingMode.fill),r._drawTemplate(e,n),r._restore()}},e.prototype._addToOptions=function(t,e){var i;e instanceof qt&&e._listValues.push(t._text),e._options.push([t._value,t._text]),this._parsedItems.size>0?i=this._parsedItems.get(0)._dictionary:(i=t._create(this.page,this.bounds,this),this._addToKid(t),i.update("MK",new fn(this._crossReference)),t._mkDictionary.update("BC",[0,0,0]),t._mkDictionary.update("BG",[1,1,1]),i.update("DA","/TiRo 0 Tf 0 0 0 rg"))},e.prototype._addAppearance=function(t,e,i){var n=new fn;t.has("AP")?n=t.get("AP"):(n=new fn(this._crossReference),t.update("AP",n));var r=this._crossReference._getNextReference();this._crossReference._cacheMap.set(r,e._content),n.update(i,r)},e.prototype._rotateTextBox=function(e,i,n){var r=[0,0,0,0];return n===t.PdfRotationAngle.angle180?r=[i[0]-(e[0]+e[2]),i[1]-(e[1]+e[3]),e[2],e[3]]:n===t.PdfRotationAngle.angle270?r=[e[1],i[0]-(e[0]+e[2]),e[3],e[2]]:n===t.PdfRotationAngle.angle90&&(r=[i[1]-(e[1]+e[3]),e[0],e[3],e[2]]),r},e.prototype._checkIndex=function(t,e){if(t<0||0!==t&&t>=e)throw Error("Index out of range.")},e.prototype._getAppearanceStateValue=function(){var t;if(this._dictionary.has("Kids"))for(var e=0;e<this._kidsCount;e++){var i=this.itemAt(e);if(i&&i._dictionary&&i._dictionary.has("AS"))if((n=i._dictionary.get("AS"))&&"Off"!==n.name){t=n.name;break}}else if(this._dictionary.has("AS")){var n;(n=this._dictionary.get("AS"))&&"Off"!==n.name&&(t=n.name)}return t},e}(),Vt=function(e){function i(t,i,n){var r=e.call(this)||this;return r._autoResizeText=!1,t&&i&&n&&r._initialize(t,i,n),r}return jt(i,e),i._load=function(t,e,n,r){var a=new i;return a._isLoaded=!0,a._form=t,a._dictionary=e,a._crossReference=n,a._ref=r,a._dictionary.has("Kids")&&(a._kids=a._dictionary.get("Kids")),a._defaultIndex=0,a._parsedItems=new Map,a},Object.defineProperty(i.prototype,"text",{get:function(){if(void 0===this._text)if(this._isLoaded){var t=ci(this._dictionary,"V",!1,!0,"Parent");if(t)this._text=t;else{var e=this.itemAt(this._defaultIndex);e&&(t=e._dictionary.get("V"))&&(this._text=t)}}else this._text="";return this._text},set:function(t){if(this._isLoaded){if(!this.readOnly){this._dictionary.has("V")&&this._dictionary.get("V")===t||this._dictionary.update("V",t);var e=this.itemAt(this._defaultIndex);!e||e._dictionary.has("V")&&e._dictionary.get("V")===t||e._dictionary.update("V",t)}}else this._text!==t&&(this._dictionary.update("V",t),this._text=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textAlignment",{get:function(){if(this._isLoaded){var e=this.itemAt(this._defaultIndex),i=ci(void 0!==e?e._dictionary:this._dictionary,"Q",!1,!0,"Parent");return void 0!==i?i:t.PdfTextAlignment.left}return this._textAlignment},set:function(e){if(this._isLoaded)this._kidsCount>0?this.itemAt(this._defaultIndex)._dictionary.update("Q",e):this._dictionary.update("Q",e);else if(this._textAlignment!==e){this._textAlignment=e,this.itemAt(this._defaultIndex)._dictionary.update("Q",e),this._stringFormat=new j(e,t.PdfVerticalAlignment.middle)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"defaultValue",{get:function(){if(void 0===this._defaultValue){var t=ci(this._dictionary,"DV",!1,!0,"Parent");t&&(this._defaultValue=t)}return this._defaultValue},set:function(t){t!==this.defaultValue&&(this._dictionary.update("DV",t),this._defaultValue=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"multiLine",{get:function(){return 0!=(this._fieldFlags&t._FieldFlag.multiLine)},set:function(e){e?this._fieldFlags|=t._FieldFlag.multiLine:this._fieldFlags&=~t._FieldFlag.multiLine},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"password",{get:function(){return 0!=(this._fieldFlags&t._FieldFlag.password)},set:function(e){e?this._fieldFlags|=t._FieldFlag.password:this._fieldFlags&=~t._FieldFlag.password},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollable",{get:function(){return!(0!=(this._fieldFlags&t._FieldFlag.doNotScroll))},set:function(e){e?this._fieldFlags&=~t._FieldFlag.doNotScroll:this._fieldFlags|=t._FieldFlag.doNotScroll},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"spellCheck",{get:function(){return!(0!=(this._fieldFlags&t._FieldFlag.doNotSpellCheck))},set:function(e){e?this._fieldFlags&=~t._FieldFlag.doNotSpellCheck:this._fieldFlags|=t._FieldFlag.doNotSpellCheck},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"insertSpaces",{get:function(){var e=this._fieldFlags;return 0!=(t._FieldFlag.comb&e)&&0==(e&t._FieldFlag.multiLine)&&0==(e&t._FieldFlag.password)&&0==(e&t._FieldFlag.fileSelect)},set:function(e){e?this._fieldFlags|=t._FieldFlag.comb:this._fieldFlags&=~t._FieldFlag.comb},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"highlightMode",{get:function(){var e,i=this.itemAt(this._defaultIndex);if(i&&void 0!==i.highlightMode)e=i.highlightMode;else if(this._dictionary.has("H")){e=wi(this._dictionary.get("H").name)}return void 0!==e?e:t.PdfHighlightMode.noHighlighting},set:function(t){var e=this.itemAt(this._defaultIndex);!e||void 0!==e.highlightMode&&e.highlightMode===t?this._dictionary.has("H")&&wi(this._dictionary.get("H"))===t||this._dictionary.update("H",Si(t)):e.highlightMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxLength",{get:function(){if(void 0===this._maxLength){var t=ci(this._dictionary,"MaxLen",!1,!0,"Parent");this._maxLength=void 0!==t&&Number.isInteger(t)?t:0}return this._maxLength},set:function(t){this.maxLength!==t&&(this._dictionary.update("MaxLen",t),this._maxLength=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isAutoResizeText",{get:function(){return this._autoResizeText},set:function(t){this._autoResizeText=t;var e=this.itemAt(this._defaultIndex);e&&(e._isAutoResize=t)},enumerable:!0,configurable:!0}),i.prototype._initialize=function(e,i,n){this._crossReference=e._crossReference,this._page=e,this._name=i,this._text="",this._defaultValue="",this._defaultIndex=0,this._spellCheck=!1,this._insertSpaces=!1,this._multiline=!1,this._password=!1,this._scrollable=!1,this._dictionary=new fn(this._crossReference),this._ref=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary.objId=this._ref.toString(),this._dictionary.update("FT",hn.get("Tx")),this._dictionary.update("T",i),this._fieldFlags|=t._FieldFlag.doNotSpellCheck,this._initializeFont(new Pt(t.PdfFontFamily.helvetica,8)),this._createItem(n)},i.prototype._createItem=function(e){var i=new Se;i._create(this._page,e,this),i.textAlignment=t.PdfTextAlignment.left,this._stringFormat=new j(i.textAlignment,t.PdfVerticalAlignment.middle),i._dictionary.update("MK",new fn(this._crossReference)),i._mkDictionary.update("BC",[0,0,0]),i._mkDictionary.update("BG",[1,1,1]),i._mkDictionary.update("CA",this.actualName),i._dictionary.update("DA",this._fontName+" 8 Tf 0 0 0 rg"),this._addToKid(i)},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),t||this._setAppearance||this._form._setAppearance){var e=this._kidsCount;if(this._isLoaded)if(e>0)for(var i=0;i<e;i++){(n=this.itemAt(i))&&this._postProcess(t,n)}else(t||this._form._setAppearance||this._setAppearance)&&!this._checkFieldFlag(this._dictionary)&&this._postProcess(t);else if(t||this._form._setAppearance||this._setAppearance)for(i=0;i<e;i++){var n;if((n=this.itemAt(i))&&!this._checkFieldFlag(n._dictionary)){var r=this._createAppearance(t,n);t?this._drawTemplate(r,n._page,{x:n.bounds.x,y:n.bounds.y,width:r._size[0],height:r._size[1]}):this._addAppearance(n._dictionary,r,"N"),n._dictionary._updated=!t}}t&&(this._dictionary._updated=!1)}},i.prototype._postProcess=function(e,i){var n,r,a=i||this;if(this._form._setAppearance||this._setAppearance||e&&!a._dictionary.has("AP"))n=this._createAppearance(e,a);else if(a._dictionary.has("AP")){var s=void 0,o=a._dictionary.get("AP");if(o&&o.has("N")){s=o.get("N");var h=o.getRaw("N");h&&(s.reference=h),s&&(n=new O(s,this._crossReference))}}if(n)if(e){var c=a instanceof Se?a._getPage():a.page;if(c){var _=c._graphics;_._save(),c.rotation===t.PdfRotationAngle.angle90?(_._translateTransform(_._size[0],_._size[1]),_._rotateTransform(90)):c.rotation===t.PdfRotationAngle.angle180?(_._translateTransform(_._size[0],_._size[1]),_._rotateTransform(-180)):c.rotation===t.PdfRotationAngle.angle270&&(_._translateTransform(_._size[0],_._size[1]),_._rotateTransform(270)),r={x:a.bounds.x,y:a.bounds.y,width:n._size[0],height:n._size[1]},_._drawTemplate(n,r),_._restore()}a._dictionary._updated=!1}else this._addAppearance(a._dictionary,n,"N")},i.prototype._createAppearance=function(e,i){var n=i.bounds,r=new O([0,0,n.width,n.height],this._crossReference);Bi(r,null),r._writeTransformation=!1;var a=r.graphics,s=new Ne;s.bounds=[0,0,n.width,n.height];var o=i.backColor;e&&(s.backBrush=new He(o)),s.foreBrush=new He(i.color);var h=i.border;s.borderPen=new Ge(i.borderColor,h.width),s.borderStyle=h.style,s.borderWidth=h.width;var c=[o[0]-64,o[1]-64,o[2]-64],_=[c[0]>=0?c[0]:0,c[1]>=0?c[1]:0,c[2]>=0?c[2]:0];s.shadowBrush=new He(_),s.rotationAngle=i.rotationAngle,s.insertSpaces=this.insertSpaces;var d=this.text;if(null==d&&(d=""),this.password){for(var l="",p=0;p<d.length;p++)l+="*";d=l}return s.required=this.required,this.required||(a._sw._beginMarkupSequence("Tx"),a._initializeCoordinates()),void 0!==this._font&&null!==this._font||(this._font=new Pt(t.PdfFontFamily.helvetica,8)),void 0!==this._stringFormat&&null!==this._stringFormat||(void 0===this.textAlignment||null===this.textAlignment?this._stringFormat=new j(this.textAlignment,t.PdfVerticalAlignment.middle):this._stringFormat=new j(t.PdfTextAlignment.left,t.PdfVerticalAlignment.middle)),this._drawTextBox(a,s,d,this._font,this._stringFormat,this.multiLine,this.scrollable,this.maxLength),this.required||a._sw._endMarkupSequence(),r},i.prototype._drawTextBox=function(e,i,n,r,a,s,o,h){if(void 0!==h)if(i.insertSpaces){var c=0;if(void 0!==h&&h>0){c=i.bounds[2]/h,e._drawRectangle(i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3],i.borderPen,i.backBrush);for(var _=n,d=0;d<h;d++){if(a.alignment===t.PdfTextAlignment.right)n=h-_.length<=d?_[d-(h-_.length)]:"";else if(a.alignment===t.PdfTextAlignment.center&&_.length<h){var l=h/2-Math.ceil(_.length/2);n=d>=l&&d<l+_.length?_[d-l]:""}else n=_.length>d?_[Number.parseInt(d.toString(),10)]:"";i.bounds[2]=c,a.alignment=t.PdfTextAlignment.center,this._drawTextBox(e,i,n,r,a,s,o),i.bounds[0]=i.bounds[0]+c,i.borderWidth&&e._drawLine(i.borderPen,i.bounds[0],i.bounds[1],i.bounds[0],i.bounds[1]+i.bounds[3])}}else this._drawTextBox(e,i,n,r,a,s,o)}else this._drawTextBox(e,i,n,r,a,s,o);else{e._isTemplateGraphics&&i.required&&(e._save(),e._initializeCoordinates()),i.insertSpaces||this._drawRectangularControl(e,i),e._isTemplateGraphics&&i.required&&(e._restore(),e._save(),e._sw._beginMarkupSequence("Tx"),e._initializeCoordinates());var p=i.bounds;if(i.borderStyle===t.PdfBorderStyle.beveled||i.borderStyle===t.PdfBorderStyle.inset?(p[0]=p[0]+4*i.borderWidth,p[2]=p[2]-8*i.borderWidth):(p[0]=p[0]+2*i.borderWidth,p[2]=p[2]-4*i.borderWidth),s){var f=(null==a||0===a.lineSpacing?r._metrics._getHeight():a.lineSpacing)-r._metrics._getAscent();n.indexOf("\n"),0===p[0]&&1===p[1]&&(p[1]=-(p[1]-f)),i.isAutoFontSize&&0!==i.borderWidth&&(p[1]=p[1]+2.5*i.borderWidth)}if(e._page&&void 0!==e._page.rotation&&e._page.rotation!==t.PdfRotationAngle.angle0||i.rotationAngle>0){var u=e._save();if(void 0!==i.pageRotationAngle&&i.pageRotationAngle!==t.PdfRotationAngle.angle0)if(i.pageRotationAngle===t.PdfRotationAngle.angle90){e._translateTransform(e._size[1],0),e._rotateTransform(90);var g=e._size[1]-(p[0]+p[2]);p=[p[1],g,p[3],p[2]]}else if(i.pageRotationAngle===t.PdfRotationAngle.angle180){e._translateTransform(e._size[0],e._size[1]),e._rotateTransform(-180),p=[e._size[0]-(p[0]+p[2]),g=e._size[1]-(p[1]+p[3]),p[2],p[3]]}else if(i.pageRotationAngle===t.PdfRotationAngle.angle270){e._translateTransform(0,e._size[0]),e._rotateTransform(270),p=[e._size[0]-(p[1]+p[3]),g=p[0],p[3],p[2]]}if(i.rotationAngle)if(90===i.rotationAngle)if(i.pageRotationAngle===t.PdfRotationAngle.angle90)e._translateTransform(0,e._size[1]),e._rotateTransform(-90),p=[e._size[1]-(p[1]+p[3]),g=p[0],p[3],p[2]];else if(p[2]>p[3])e._translateTransform(0,e._size[1]),e._rotateTransform(-90),p=[i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3]];else{var y=p[0];p[0]=-(p[1]+p[3]),p[1]=y;var b=p[3];p[3]=p[2]>r._metrics._getHeight()?p[2]:r._metrics._getHeight(),p[2]=b,e._rotateTransform(-90)}else if(270===i.rotationAngle){e._translateTransform(e._size[0],0),e._rotateTransform(-270),p=[p[1],g=e._size[0]-(p[0]+p[2]),p[3],p[2]]}else if(180===i.rotationAngle){e._translateTransform(e._size[0],e._size[1]),e._rotateTransform(-180),p=[e._size[0]-(p[0]+p[2]),g=e._size[1]-(p[1]+p[3]),p[2],p[3]]}e._drawString(n,r,p,null,i.foreBrush,a),e._restore(u)}else e._drawString(n,r,p,null,i.foreBrush,a);e._isTemplateGraphics&&i.required&&(e._sw._endMarkupSequence(),e._restore())}},i}(zt),Ut=function(e){function i(t,i,n){var r=e.call(this)||this;return t&&i&&n&&r._initialize(t,i,n),r}return jt(i,e),Object.defineProperty(i.prototype,"text",{get:function(){if(this._isLoaded){if(void 0===this._text){var t=this.itemAt(this._defaultIndex);t&&t._mkDictionary&&t._mkDictionary.has("CA")?this._text=t._mkDictionary.get("CA"):this._mkDictionary&&this._mkDictionary.has("CA")&&(this._text=this._mkDictionary.get("CA"))}if(void 0===this._text){var e=ci(this._dictionary,"V",!1,!0,"Parent");e&&(this._text=e)}}return void 0===this._text&&(this._text=""),this._text},set:function(t){this._isLoaded&&!this.readOnly&&((e=this.itemAt(this._defaultIndex))&&e._dictionary?this._assignText(e._dictionary,t):this._assignText(this._dictionary,t));if(!this._isLoaded&&this._text!==t){var e=this.itemAt(this._defaultIndex);this._assignText(e._dictionary,t),this._text=t}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textAlignment",{get:function(){if(this._isLoaded){var e=this.itemAt(this._defaultIndex);e&&e._dictionary&&e._dictionary.has("Q")?this._textAlignment=e._dictionary.get("Q"):this._dictionary.has("Q")?this._textAlignment=this._dictionary.get("Q"):this._textAlignment=t.PdfTextAlignment.left}else void 0===this._textAlignment&&(this._textAlignment=t.PdfTextAlignment.left);return this._textAlignment},set:function(e){if(this._isLoaded&&!this.readOnly){var i=this.itemAt(this._defaultIndex);i&&i._dictionary?i._dictionary.update("Q",e):this._dictionary.update("Q",e)}this._isLoaded||this._textAlignment===e||(this._textAlignment=e,this.itemAt(this._defaultIndex)._dictionary.update("Q",e),this._stringFormat=new j(e,t.PdfVerticalAlignment.middle))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"highlightMode",{get:function(){var e,i=this.itemAt(this._defaultIndex);if(i&&void 0!==i.highlightMode)e=i.highlightMode;else if(this._dictionary.has("H")){e=wi(this._dictionary.get("H").name)}return void 0!==e?e:t.PdfHighlightMode.invert},set:function(t){var e=this.itemAt(this._defaultIndex);!e||void 0!==e.highlightMode&&e.highlightMode===t?this._dictionary.has("H")&&wi(this._dictionary.get("H"))===t||this._dictionary.update("H",Si(t)):e.highlightMode=t},enumerable:!0,configurable:!0}),i.prototype._assignText=function(t,e){var i;t.has("MK")?i=t.get("MK"):(i=new fn(this._crossReference),t.set("MK",i)),i.update("CA",e),t._updated=!0},i._load=function(t,e,n,r){var a=new i;return a._isLoaded=!0,a._form=t,a._dictionary=e,a._crossReference=n,a._ref=r,a._dictionary.has("Kids")&&(a._kids=a._dictionary.get("Kids")),a._defaultIndex=0,a._parsedItems=new Map,a},i.prototype._initialize=function(e,i,n){this._crossReference=e._crossReference,this._page=e,this._name=i,this._defaultIndex=0,this._dictionary=new fn(this._crossReference),this._ref=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary.objId=this._ref.toString(),this._dictionary.update("FT",hn.get("Btn")),this._dictionary.update("T",i),this._fieldFlags|=t._FieldFlag.pushButton,this._initializeFont(new Pt(t.PdfFontFamily.helvetica,8)),this._createItem(n)},i.prototype._createItem=function(e){var i=new Se;i._create(this._page,e,this),i.textAlignment=t.PdfTextAlignment.center,this._stringFormat=new j(i.textAlignment,t.PdfVerticalAlignment.middle),i._dictionary.update("MK",new fn(this._crossReference)),i._mkDictionary.update("BC",[0,0,0]),i._mkDictionary.update("BG",[.827451,.827451,.827451]),i._mkDictionary.update("CA",void 0!==this._name&&null!==this._name?this._name:this._actualName),i._dictionary.update("DA",this._fontName+" 8 Tf 0 0 0 rg"),this._addToKid(i)},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),t||this._setAppearance||this._form._setAppearance){var e=this._kidsCount;if(this._isLoaded)if(e>0)for(var i=0;i<e;i++){(n=this.itemAt(i))&&this._postProcess(t,n)}else(t||this._form._setAppearance||this._setAppearance)&&!this._checkFieldFlag(this._dictionary)&&this._postProcess(t);else if(t||this._form._setAppearance||this._setAppearance)for(i=0;i<e;i++){var n;if((n=this.itemAt(i))&&!this._checkFieldFlag(n._dictionary)){var r=this._createAppearance(n);if(t)this._drawTemplate(r,n._getPage(),{x:n.bounds.x,y:n.bounds.y,width:r._size[0],height:r._size[1]});else{this._addAppearance(n._dictionary,r,"N");var a=this._createAppearance(n,!0);a&&this._addAppearance(n._dictionary,a,"D")}n._dictionary._updated=!t}}t&&(this._dictionary._updated=!1)}},i.prototype._postProcess=function(e,i){var n,r,a=i||this;if(this._form._setAppearance||this._setAppearance||e&&!a._dictionary.has("AP"))n=this._createAppearance(a);else if(a._dictionary.has("AP")){var s=void 0,o=a._dictionary.get("AP");if(o&&o.has("N")){s=o.get("N");var h=o.getRaw("N");h&&(s.reference=h),s&&(n=new O(s,this._crossReference))}}if(n)if(e){var c=a instanceof Se?a._getPage():a.page;if(c){var _=c._graphics;_._save(),c.rotation===t.PdfRotationAngle.angle90?(_._translateTransform(_._size[0],_._size[1]),_._rotateTransform(90)):c.rotation===t.PdfRotationAngle.angle180?(_._translateTransform(_._size[0],_._size[1]),_._rotateTransform(-180)):c.rotation===t.PdfRotationAngle.angle270&&(_._translateTransform(_._size[0],_._size[1]),_._rotateTransform(270)),r={x:a.bounds.x,y:a.bounds.y,width:n._size[0],height:n._size[1]},_._drawTemplate(n,r),_._restore()}a._dictionary._updated=!1}else this._addAppearance(a._dictionary,n,"N")},i.prototype._createAppearance=function(e,i){void 0===i&&(i=!1);var n=e.bounds,r=new O([0,0,n.width,n.height],this._crossReference),a=new Ne;a.bounds=[0,0,n.width,n.height];var s=e.backColor;a.backBrush=new He(s),a.foreBrush=new He(e.color);var o=e.border;a.borderPen=new Ge(e.borderColor,o.width),a.borderStyle=o.style,a.borderWidth=o.width;var h=[s[0]-64,s[1]-64,s[2]-64],c=[h[0]>=0?h[0]:0,h[1]>=0?h[1]:0,h[2]>=0?h[2]:0];return a.shadowBrush=new He(c),a.rotationAngle=e.rotationAngle,void 0!==this._font&&null!==this._font||(this._font=new Pt(t.PdfFontFamily.helvetica,8)),i?this._drawPressedButton(r.graphics,a,this.text,this._font,this._stringFormat):this._drawButton(r.graphics,a,this.text,this._font,this._stringFormat),r},i.prototype._drawButton=function(e,i,n,r,a){this._drawRectangularControl(e,i);var s=i.bounds;if(e._page&&void 0!==e._page.rotation&&e._page.rotation!==t.PdfRotationAngle.angle0||i.rotationAngle>0){var o=e._save();if(void 0!==i.pageRotationAngle&&i.pageRotationAngle!==t.PdfRotationAngle.angle0)if(i.pageRotationAngle===t.PdfRotationAngle.angle90){e._translateTransform(e._size[1],0),e._rotateTransform(90);var h=e._size[1]-(s[0]+s[2]);s=[s[1],h,s[3],s[2]]}else if(i.pageRotationAngle===t.PdfRotationAngle.angle180){e._translateTransform(e._size[0],e._size[1]),e._rotateTransform(-180),s=[e._size[0]-(s[0]+s[2]),h=e._size[1]-(s[1]+s[3]),s[2],s[3]]}else if(i.pageRotationAngle===t.PdfRotationAngle.angle270){e._translateTransform(0,e._size[0]),e._rotateTransform(270),s=[e._size[0]-(s[1]+s[3]),h=s[0],s[3],s[2]]}if(i.rotationAngle)if(90===i.rotationAngle)if(i.pageRotationAngle===t.PdfRotationAngle.angle90)e._translateTransform(0,e._size[1]),e._rotateTransform(-90),s=[e._size[1]-(s[1]+s[3]),h=s[0],s[3],s[2]];else if(s[2]>s[3])e._translateTransform(0,e._size[1]),e._rotateTransform(-90),s=[i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3]];else{var c=s[0];s[0]=-(s[1]+s[3]),s[1]=c;var _=s[3];s[3]=s[2]>r._metrics._getHeight()?s[2]:r._metrics._getHeight(),s[2]=_,e._rotateTransform(-90)}else if(270===i.rotationAngle){e._translateTransform(e._size[0],0),e._rotateTransform(-270),s=[s[1],h=e._size[0]-(s[0]+s[2]),s[3],s[2]]}else if(180===i.rotationAngle){e._translateTransform(e._size[0],e._size[1]),e._rotateTransform(-180),s=[e._size[0]-(s[0]+s[2]),h=e._size[1]-(s[1]+s[3]),s[2],s[3]]}e._drawString(n,r,s,null,i.foreBrush,a),e._restore(o)}else e._drawString(n,r,s,null,i.foreBrush,a)},i.prototype._drawPressedButton=function(e,i,n,r,a){switch(i.borderStyle){case t.PdfBorderStyle.inset:e._drawRectangle(i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3],i.shadowBrush);break;default:e._drawRectangle(i.bounds[0],i.bounds[1],i.bounds[2],i.bounds[3],i.backBrush)}this._drawBorder(e,i.bounds,i.borderPen,i.borderStyle,i.borderWidth);var s=[i.borderWidth,i.borderWidth,i.bounds[2]-i.borderWidth,i.bounds[3]-i.borderWidth];switch(e._drawString(n,r,s,null,i.foreBrush,a),i.borderStyle){case t.PdfBorderStyle.inset:this._drawLeftTopShadow(e,i.bounds,i.borderWidth,this._grayBrush),this._drawRightBottomShadow(e,i.bounds,i.borderWidth,this._silverBrush);break;case t.PdfBorderStyle.beveled:this._drawLeftTopShadow(e,i.bounds,i.borderWidth,i.shadowBrush),this._drawRightBottomShadow(e,i.bounds,i.borderWidth,this._whiteBrush);break;default:this._drawLeftTopShadow(e,i.bounds,i.borderWidth,i.shadowBrush)}},i}(zt),Wt=function(e){function i(t,i,n){var r=e.call(this)||this;return n&&t&&i&&r._initialize(n,t,i),r}return jt(i,e),i._load=function(t,e,n,r){var a=new i;return a._isLoaded=!0,a._form=t,a._dictionary=e,a._crossReference=n,a._ref=r,a._dictionary.has("Kids")&&(a._kids=a._dictionary.get("Kids")),a._defaultIndex=0,a._parsedItems=new Map,a},i.prototype.itemAt=function(t){if(t<0||0!==t&&t>=this._kidsCount)throw Error("Index out of range.");var e;if(this._parsedItems.has(t))e=this._parsedItems.get(t);else{var i=void 0;if(t>=0&&this._kids&&this._kids.length>0&&t<this._kids.length){var n=this._kids[Number.parseInt(t.toString(),10)];n&&n instanceof _n&&(i=this._crossReference._fetch(n)),i&&((e=Pe._load(i,this._crossReference,this))._isLoaded=!0,this._parsedItems.set(t,e))}}return e},Object.defineProperty(i.prototype,"checked",{get:function(){return this._kidsCount>0&&this.itemAt(this._defaultIndex).checked},set:function(t){this.checked!==t&&(this._kidsCount>0&&(this.itemAt(this._defaultIndex).checked=t),t?this._dictionary.update("V",hn.get("Yes")):this._dictionary.has("V")&&delete this._dictionary._map.V,this._dictionary._updated=!0)},enumerable:!0,configurable:!0}),i.prototype._initialize=function(t,e,i){this._crossReference=t._crossReference,this._page=t,this._name=e,this._defaultIndex=0,this._dictionary=new fn(this._crossReference),this._ref=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary.objId=this._ref.toString(),this._dictionary.update("FT",hn.get("Btn")),this._dictionary.update("T",e),this._createItem(i)},i.prototype._createItem=function(e){var i=new Pe;i._create(this._page,e,this),i.textAlignment=t.PdfTextAlignment.center,this._stringFormat=new j(i.textAlignment,t.PdfVerticalAlignment.middle),i._dictionary.update("MK",new fn(this._crossReference)),i._mkDictionary.update("BC",[0,0,0]),i._mkDictionary.update("BG",[1,1,1]),i.style=t.PdfCheckBoxStyle.check,i._dictionary.update("DA","/TiRo 0 Tf 0 0 0 rg"),this._addToKid(i)},i.prototype._doPostProcess=function(e){void 0===e&&(e=!1);var i=this._kidsCount;if(this._isLoaded)if(i>0)for(var n=0;n<i;n++){if(o=this.itemAt(n)){if(!this._checkFieldFlag(o._dictionary))if(e){var r=void 0,a=o.checked?t._PdfCheckFieldState.checked:t._PdfCheckFieldState.unchecked;r=this._setAppearance||this._form._setAppearance||!o._dictionary.has("AP")?this._createAppearance(o,a):Ci(a,this),this._drawTemplate(r,o._getPage(),o.bounds)}else(this._setAppearance||this._form._setAppearance||!o._isLoaded)&&(o._postProcess(o.checked?"Yes":"Off"),this._drawAppearance(o));o._dictionary._updated=!e}}else{var s=this.checked?t._PdfCheckFieldState.checked:t._PdfCheckFieldState.unchecked;this._drawTemplate(Ci(s,this),this.page,this.bounds)}else for(n=0;n<i;n++){var o;if(o=this.itemAt(n)){a=o.checked?t._PdfCheckFieldState.checked:t._PdfCheckFieldState.unchecked;if(o._postProcess(o.checked?"Yes":"Off"),e){r=this._createAppearance(o,a);this._drawTemplate(r,o._getPage(),o.bounds)}else this._drawAppearance(o);o._dictionary._updated=!e}}this._dictionary._updated=!e},i.prototype._createAppearance=function(t,e){var i=t.bounds,n=new Ne;n.bounds=[0,0,i.width,i.height];var r=t.backColor;n.backBrush=new He(r),n.foreBrush=new He(t.color);var a=t.border;n.borderPen=new Ge(t.borderColor,a.width),n.borderStyle=a.style,n.borderWidth=a.width;var s=[r[0]-64,r[1]-64,r[2]-64],o=[s[0]>=0?s[0]:0,s[1]>=0?s[1]:0,s[2]>=0?s[2]:0];n.shadowBrush=new He(o),n.rotationAngle=t.rotationAngle;var h=new O(n.bounds,this._crossReference),c=h.graphics;return this._drawCheckBox(c,n,Li(t._style),e),h},i.prototype._drawAppearance=function(e){var i=new fn;if(e._dictionary.has("AP"))i=e._dictionary.get("AP");else{var n=this._crossReference._getNextReference();i=new fn(this._crossReference),this._crossReference._cacheMap.set(n,i),e._dictionary.update("AP",n)}var r=this._createAppearance(e,t._PdfCheckFieldState.checked),a=this._crossReference._getNextReference();this._crossReference._cacheMap.set(a,r._content);var s=this._createAppearance(e,t._PdfCheckFieldState.unchecked),o=this._crossReference._getNextReference();this._crossReference._cacheMap.set(o,s._content);var h=new fn(this._crossReference);h.update("Yes",a),h.update("Off",o);var c=this._crossReference._getNextReference();this._crossReference._cacheMap.set(c,h),i.update("N",c);var _=this._createAppearance(e,t._PdfCheckFieldState.pressedChecked),d=this._crossReference._getNextReference();this._crossReference._cacheMap.set(d,_._content);var l=this._createAppearance(e,t._PdfCheckFieldState.pressedUnchecked),p=this._crossReference._getNextReference();this._crossReference._cacheMap.set(p,l._content);var f=new fn(this._crossReference);f.update("Yes",d),f.update("Off",p);var u=this._crossReference._getNextReference();this._crossReference._cacheMap.set(u,f),i.update("D",u),e._dictionary._updated=!0},i}(zt),Ht=function(e){function i(t,i){var n=e.call(this)||this;return n._selectedIndex=-1,t&&i&&n._initialize(t,i),n}return jt(i,e),i._load=function(t,e,n,r){var a=new i;return a._isLoaded=!0,a._form=t,a._dictionary=e,a._crossReference=n,a._ref=r,a._dictionary.has("Kids")&&(a._kids=a._dictionary.get("Kids")),a._defaultIndex=0,a._parsedItems=new Map,a._kidsCount>0&&a._retrieveOptionValue(),a},i.prototype.itemAt=function(t){if(t<0||0!==t&&t>=this._kidsCount)throw Error("Index out of range.");var e;if(this._parsedItems.has(t))e=this._parsedItems.get(t);else{var i=void 0;if(t>=0&&this._kids&&this._kids.length>0&&t<this._kids.length){var n=this._kids[Number.parseInt(t.toString(),10)];n&&n instanceof _n&&(i=this._crossReference._fetch(n)),i&&((e=Ae._load(i,this._crossReference,this))._index=t,this._parsedItems.set(t,e))}}return e},Object.defineProperty(i.prototype,"checked",{get:function(){var t=!1;return this._kidsCount>0&&(t=this.itemAt(this._defaultIndex).checked),t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this._isLoaded&&-1===this._selectedIndex&&(this._selectedIndex=this._obtainSelectedIndex()),this._selectedIndex},set:function(t){if(this.selectedIndex!==t){this._selectedIndex=t;for(var e=0;e<this._kidsCount;e++){var i=this.itemAt(e);if(e===t){i._dictionary.update("AS",hn.get(i.value));var n=hn.get(i.value);this._dictionary.update("V",n),this._dictionary.update("DV",n)}else i._dictionary.update("AS",hn.get("Off"))}}},enumerable:!0,configurable:!0}),i.prototype.add=function(t,e){return t instanceof Ae?(t._field=this,t._dictionary.update("Parent",this._ref),t._setField(this),this._kidsCount):new Ae(t,e,this)},i.prototype._initialize=function(e,i){this._defaultIndex=0,this._crossReference=e._crossReference,this._page=e,this._name=i,this._dictionary=new fn(this._crossReference),this._ref=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary.objId=this._ref.toString(),this._dictionary.update("FT",hn.get("Btn")),this._dictionary.update("T",i),this._parsedItems=new Map,this._fieldFlags|=t._FieldFlag.radio},i.prototype._retrieveOptionValue=function(){if(this._dictionary.has("Opt")){var t=this._dictionary.getArray("Opt");if(t&&t.length>0)for(var e=this._kidsCount,i=t.length<=e?t.length:e,n=0;n<i;n++)t[Number.parseInt(n.toString(),10)]&&(this.itemAt(n)._optionValue=t[Number.parseInt(n.toString(),10)])}},i.prototype._obtainSelectedIndex=function(){for(var t=-1,e=0;e<this._kidsCount;++e){var i=this.itemAt(e);if(i){var n=ci(i._dictionary,"V",!1,!0,"Parent");if(n&&i._dictionary.has("AS")){var r=i._dictionary.get("AS");if(r&&"off"!==r.name.toLowerCase())if(n instanceof hn&&"off"!==n.name.toLowerCase()){if(r.name===n.name||i._optionValue===n.name){t=e;break}}else if("string"==typeof n&&"off"!==n.toLowerCase()&&(r.name===n||i._optionValue===n)){t=e;break}}}}return t},i.prototype._doPostProcess=function(e){void 0===e&&(e=!1);var i=this._kidsCount;if(this._isLoaded)if(i>0)for(var n=0;n<i;n++){if((o=this.itemAt(n))&&!this._checkFieldFlag(o._dictionary)){if(e){var r=void 0,a=-1!==this.selectedIndex?t._PdfCheckFieldState.checked:t._PdfCheckFieldState.unchecked;r=this._setAppearance||this._form._setAppearance||!o._dictionary.has("AP")?this._createAppearance(o,a):Ci(a,this),this._drawTemplate(r,o._getPage(),o.bounds)}else(this._setAppearance||this._form._setAppearance||!o._isLoaded)&&(o._postProcess(this.selectedIndex===n?o.value:"Off"),this._drawAppearance(o));o._dictionary._updated=!e}}else{var s=-1!==this.selectedIndex?t._PdfCheckFieldState.checked:t._PdfCheckFieldState.unchecked;this._drawTemplate(Ci(s,this),this.page,this.bounds)}else for(n=0;n<i;n++){var o=this.itemAt(n);a=this.selectedIndex===n?t._PdfCheckFieldState.checked:t._PdfCheckFieldState.unchecked;if(o._dictionary.update("AS",hn.get(this.selectedIndex===n?o.value:"Off")),e){r=this._createAppearance(o,a);this._drawTemplate(r,o._getPage(),o.bounds)}else o._postProcess(this.selectedIndex===n?o.value:"Off"),this._drawAppearance(o);o._dictionary._updated=!e}this._dictionary._updated=!e},i.prototype._createAppearance=function(t,e){var i=t.bounds,n=new Ne;n.bounds=[0,0,i.width,i.height];var r=t.backColor;n.backBrush=new He(r),n.foreBrush=new He(t.color);var a=t.border;n.borderPen=new Ge(t.borderColor,a.width),n.borderStyle=a.style,n.borderWidth=a.width;var s=[r[0]-64,r[1]-64,r[2]-64],o=[s[0]>=0?s[0]:0,s[1]>=0?s[1]:0,s[2]>=0?s[2]:0];n.shadowBrush=new He(o),n.rotationAngle=t.rotationAngle;var h=new O(n.bounds,this._crossReference),c=h.graphics;return this._drawRadioButton(c,n,Li(t._style),e),h},i.prototype._drawAppearance=function(e){var i=new fn;if(e._dictionary.has("AP"))i=e._dictionary.get("AP");else{var n=this._crossReference._getNextReference();i=new fn(this._crossReference),this._crossReference._cacheMap.set(n,i),e._dictionary.update("AP",n)}var r=this._createAppearance(e,t._PdfCheckFieldState.checked),a=this._crossReference._getNextReference();this._crossReference._cacheMap.set(a,r._content);var s=this._createAppearance(e,t._PdfCheckFieldState.unchecked),o=this._crossReference._getNextReference();this._crossReference._cacheMap.set(o,s._content);var h=new fn(this._crossReference);h.update(e.value,a),h.update("Off",o);var c=this._crossReference._getNextReference();this._crossReference._cacheMap.set(c,h),i.update("N",c);var _=this._createAppearance(e,t._PdfCheckFieldState.pressedChecked),d=this._crossReference._getNextReference();this._crossReference._cacheMap.set(d,_._content);var l=this._createAppearance(e,t._PdfCheckFieldState.pressedUnchecked),p=this._crossReference._getNextReference();this._crossReference._cacheMap.set(p,l._content);var f=new fn(this._crossReference);f.update(e.value,d),f.update("Off",p);var u=this._crossReference._getNextReference();this._crossReference._cacheMap.set(u,f),i.update("D",u),e._dictionary._updated=!0},i}(zt),Gt=function(e){function i(t,i,n){var r=e.call(this)||this;return t&&i&&n&&r._initialize(t,i,n),r}return jt(i,e),Object.defineProperty(i.prototype,"itemsCount",{get:function(){return this._options.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bounds",{get:function(){var t,e=this.itemAt(this._defaultIndex);return e&&(e._page=this.page),e&&e.bounds?t=e.bounds:this._dictionary.has("Rect")&&(t=di(this._dictionary,this.page)),t||(this._bounds?this._bounds:t)},set:function(t){if(0===t.x&&0===t.y&&0===t.width&&0===t.height)throw new Error("Cannot set empty bounds");var e=this.itemAt(this._defaultIndex);this._isLoaded?void 0===e||this._dictionary.has("Rect")?this._dictionary.update("Rect",fi([t.x,t.y,t.width,t.height],this.page)):(e._page=this.page,e.bounds=t):e?(e._page=this.page,e.bounds=t):this._bounds=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){var t=this._dictionary.get("I");return 1===t.length?t[0]:t},set:function(t){var e=this,i=this._options.length;"number"==typeof t?(this._checkIndex(t,i),this._dictionary.update("I",[t])):(t.forEach((function(t){e._checkIndex(t,i)})),this._dictionary.update("I",t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"multiSelect",{get:function(){return this._isLoaded?0!=(this._fieldFlags&t._FieldFlag.multiSelect):this._multiSelect},set:function(e){this.multiSelect!==e&&(this._multiSelect=e,e?this._fieldFlags|=t._FieldFlag.multiSelect:this._fieldFlags&=~t._FieldFlag.multiSelect)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_options",{get:function(){return this._optionArray||(this._dictionary.has("Opt")?this._optionArray=this._dictionary.getArray("Opt"):(this._optionArray=[],this._dictionary.update("Opt",this._optionArray))),this._optionArray},enumerable:!0,configurable:!0}),i._load=function(t,e,n,r){var a=new i;a._isLoaded=!0,a._form=t,a._dictionary=e,a._crossReference=n,a._ref=r,a._dictionary.has("Kids")&&(a._kids=a._dictionary.get("Kids"));var s=a._dictionary.getArray("Opt");return null!=s&&(a._listValues=new Array(s.length)),a._defaultIndex=0,a._parsedItems=new Map,a._kidsCount>0&&a._retrieveOptionValue(),a},i.prototype.itemAt=function(t){var e;if(t<this._kidsCount)if(this._parsedItems.has(t))e=this._parsedItems.get(t);else{var i=void 0;(n=this._kids[Number.parseInt(t.toString(),10)])&&n instanceof _n&&(i=this._crossReference._fetch(n)),i&&((e=xe._load(i,this._crossReference,this))._index=t,this._options&&this._options.length>0&&t<this._options.length?e._text=this._options[Number.parseInt(t.toString(),10)][1]:e._text="",this._parsedItems.set(t,e))}else if(this._parsedItems.has(t))e=this._parsedItems.get(t);else{i=void 0;var n=void 0;(n=1===this._kidsCount?this._kids[0]:this._kids[Number.parseInt(t.toString(),10)])&&n instanceof _n&&(i=this._crossReference._fetch(n)),i&&((e=xe._load(i,this._crossReference,this))._index=t,this._options&&this._options.length>0&&t<this._options.length?e._text=this._options[Number.parseInt(t.toString(),10)][1]:e._text="",this._parsedItems.set(t,e))}return e},i.prototype.addItem=function(t){return this._addToOptions(t,this),this._listValues.length-1},i.prototype._initialize=function(e,i,n){this._defaultIndex=0,this._crossReference=e._crossReference,this._page=e,this._name=i,this._dictionary=new fn(this._crossReference),this._ref=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary.objId=this._ref.toString(),this._dictionary.update("FT",hn.get("Ch")),this._dictionary.update("T",i),this._parsedItems=new Map,this._listValues=[],this._kids=[],this.bounds=n,this._fieldFlags|=t._FieldFlag.combo},i.prototype._retrieveOptionValue=function(){if(this._dictionary.has("Opt")){var t=this._dictionary.getArray("Opt");if(t&&t.length>0)for(var e=this._kidsCount,i=t.length<=e?t.length:e,n=0;n<i;n++){var r=t[Number.parseInt(n.toString(),10)][1];r&&(this.itemAt(n)._text=r||"")}}},i.prototype._obtainSelectedValue=function(){var t=[];if(this._dictionary.has("V")){var e=this._dictionary.get("V"),i=this._dictionary.getArray("V");null!=e&&("string"==typeof e?t.push(e):Array.isArray(e)&&i.forEach((function(e){t.push(e)})))}else{var n=this._dictionary.get("I");null!=n&&n.length>0&&n[0]>-1&&this._options&&this._options.length>0&&t.push(this._options[n[0]][0])}return t},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),t||this._setAppearance||this._form._setAppearance){var e=this._kidsCount;if(this._kids&&this._kids.length>0)if(e>1)for(var i=0;i<e;i++){if((a=this.itemAt(i))&&!this._checkFieldFlag(a._dictionary)){var n=this._createAppearance(a);if(t)(r=a._getPage())&&this._drawTemplate(n,r,a.bounds);else this._addAppearance(a._dictionary,n,"N");a._dictionary._updated=!t}}else{var r,a=this.itemAt(0);n=this._createAppearance();if(t)(r=this.page)&&this._drawTemplate(n,r,this.bounds);else this._addAppearance(a._dictionary,n,"N");a._dictionary._updated=!t}this._dictionary._updated=!t}},i.prototype._createAppearance=function(e){var i=new Ne;if(e){var n=e.bounds,r=e._getPage();e._isLoaded&&r&&void 0!==r.rotation&&r.rotation!==t.PdfRotationAngle.angle0?i.bounds=this._rotateTextBox([n.x,n.y,n.width,n.height],r.size,r.rotation):i.bounds=[0,0,n.width,n.height];var a=e.backColor;i.backBrush=new He(a),i.foreBrush=new He(e.color);var s=e.border;i.borderPen=new Ge(e.borderColor,s.width),i.borderStyle=s.style,i.borderWidth=s.width;var o=[(_=[a[0]-64,a[1]-64,a[2]-64])[0]>=0?_[0]:0,_[1]>=0?_[1]:0,_[2]>=0?_[2]:0];i.shadowBrush=new He(o),i.rotationAngle=e.rotationAngle;var h=void 0!==e.textAlignment?e.textAlignment:t.PdfTextAlignment.left,c=this.multiSelect?t.PdfVerticalAlignment.top:t.PdfVerticalAlignment.middle;i.stringFormat=new j(h,c)}else{n=this.bounds;this._isLoaded&&this.page&&void 0!==this.page.rotation&&this.page.rotation!==t.PdfRotationAngle.angle0?i.bounds=this._rotateTextBox([n.x,n.y,n.width,n.height],this.page.size,this.page.rotation):i.bounds=[0,0,n.width,n.height];a=this.backColor;i.backBrush=new He(a),i.foreBrush=new He(this.color);s=this.border;i.borderPen=new Ge(this.borderColor,s.width),i.borderStyle=s.style,i.borderWidth=s.width;var _;o=[(_=[a[0]-64,a[1]-64,a[2]-64])[0]>=0?_[0]:0,_[1]>=0?_[1]:0,_[2]>=0?_[2]:0];i.shadowBrush=new He(o),i.rotationAngle=this.rotationAngle,i.stringFormat=new j(t.PdfTextAlignment.left,t.PdfVerticalAlignment.middle)}i.required=this.required;var d=new O(i.bounds,this._crossReference),l=d.graphics;if(l._sw._clear(),this.required||(l._sw._beginMarkupSequence("Tx"),l._initializeCoordinates()),this._isLoaded){var p=void 0;e&&(p=this._obtainFont(e)),null==p&&(p=new Pt(t.PdfFontFamily.helvetica,10,t.PdfFontStyle.regular)),this._drawComboBox(l,i,p,i.stringFormat)}else this._font||(this._font=new Pt(t.PdfFontFamily.timesRoman,this._getFontHeight(t.PdfFontFamily.helvetica))),this._drawComboBox(l,i,this._font,i.stringFormat);return this.required||l._sw._endMarkupSequence(),d},i.prototype._drawComboBox=function(e,i,n,r){e._isTemplateGraphics&&i.required&&(e._save(),e._initializeCoordinates()),this._drawRectangularControl(e,i),e._isTemplateGraphics&&i.required&&(e._restore(),e._save(),e._sw._beginMarkupSequence("Tx"),e._initializeCoordinates());var a=this._options,s=this._dictionary.get("I"),o=-1;if(s&&s.length>0&&(o=s[0]),o>0&&o<a.length){var h=a[Number.parseInt(o.toString(),10)],c=[0,0],_=i.borderWidth,d=2*_,l=i.borderStyle===t.PdfBorderStyle.inset||i.borderStyle===t.PdfBorderStyle.beveled;l?(c[0]=2*d,c[1]=2*_):(c[0]=d+2,c[1]=1*_+1);var p=i.foreBrush,f=i.bounds,u=f[2]-d,g=f;if(g[3]-=l?d:_,e._setClip(g,t._PdfFillMode.winding),0===i.rotationAngle){var y=f[0]+_;l&&(y+=_,u-=d),p=new He([153,193,218]),e._drawRectangle(y,c[1],u,f[3],p),p=new He([0,0,0])}var b=h[1]?h[1]:h[0],m=[c[0],c[1],u-c[0],f[3]];if(i.rotationAngle>0){var v=e._save();if(90===i.rotationAngle)e._translateTransform(0,e._size[1]),e._rotateTransform(-90),g=[e._size[1]-(g[1]+g[3]),g[0],g[3]+g[2],g[2]];else if(270===i.rotationAngle){e._translateTransform(e._size[0],0),e._rotateTransform(-270),g=[g[1],e._size[0]-(g[0]+g[2]),g[3]+g[2],g[2]]}else if(180===i.rotationAngle){e._translateTransform(e._size[0],e._size[1]),e._rotateTransform(-180),g=[e._size[0]-(g[0]+g[2]),e._size[1]-(g[1]+g[3]),g[2],g[3]]}y=f[0]+_;l&&(y+=_,u-=d),p=new He([153,193,218]),e._drawRectangle(y,c[1],u,f[3],p),p=new He([0,0,0]),e._drawString(b,n,m,null,p,r),e._restore(v)}else e._drawString(b,n,m,null,p,r)}e._isTemplateGraphics&&i.required&&(e._sw._endMarkupSequence(),e._restore())},i.prototype._obtainFont=function(e){var i="",n=1;if(e&&(e._dictionary.has("DS")||e._dictionary.has("DA"))){if(e._dictionary.has("DS"))for(var r=e._dictionary.get("DS").split(";"),a=0;a<r.length;a++){var s=r[Number.parseInt(a.toString(),10)].split(":");if(-1!==r[Number.parseInt(a.toString(),10)].indexOf("font-family"))i=s[1];else if(-1!==r[Number.parseInt(a.toString(),10)].indexOf("font-size"))s[1].endsWith("pt")&&(n=Number.parseFloat(s[1].replace("pt","")));else if(-1===r[Number.parseInt(a.toString(),10)].indexOf("font-style")&&-1!==r[Number.parseInt(a.toString(),10)].indexOf("font")){for(var o=s[1].split(" "),h=0;h<o.length;h++)""===o[Number.parseInt(h.toString(),10)]||o[Number.parseInt(h.toString(),10)].endsWith("pt")||(i+=o[Number.parseInt(h.toString(),10)]+" "),o[Number.parseInt(h.toString(),10)].endsWith("pt")&&(n=Number.parseFloat(o[Number.parseInt(h.toString(),10)].replace("pt","")));for(;" "!==i&&i.endsWith(" ");)i=i.substring(0,i.length-2);-1!==i.indexOf(",")&&(i=i.split(",")[0])}}else{var c=e._dictionary.get("DA");if(c&&""!==c&&-1!==c.indexOf("Tf")){var _=c.split(" ");for(a=0;a<_.length;a++)if(-1!==_[Number.parseInt(a.toString(),10)].indexOf("Tf")){for(i=_[a-2];""!==i&&i.length>1&&"/"===i[0];)i=i.substring(1);n=Number.parseFloat(_[a-1])}var d=0;if(0===n){var l=new Pt(t.PdfFontFamily.helvetica,d);null!==l&&(d=this._getFontHeight(l._fontFamily),(Number.isNaN(d)||0===d)&&(d=12),l._size=d,n=d)}}}switch(i=i.trim()){case"Helv":this._pdfFont=new Pt(t.PdfFontFamily.helvetica,n,t.PdfFontStyle.regular);break;case"Courier":case"Cour":this._pdfFont=new Pt(t.PdfFontFamily.courier,n,t.PdfFontStyle.regular);break;case"Symb":this._pdfFont=new Pt(t.PdfFontFamily.symbol,n,t.PdfFontStyle.regular);break;case"TiRo":this._pdfFont=new Pt(t.PdfFontFamily.timesRoman,n,t.PdfFontStyle.regular);break;case"ZaDb":this._pdfFont=new Pt(t.PdfFontFamily.zapfDingbats,n,t.PdfFontStyle.regular);break;default:this._pdfFont=new Pt(t.PdfFontFamily.helvetica,n,t.PdfFontStyle.regular)}}return this._pdfFont},i.prototype._getFontHeight=function(e){var i,n,r,a,s,o=this._dictionary.get("I"),h=this.border.width;if(this._isLoaded){n=new Pt(e,12),r=new j(t.PdfTextAlignment.center,t.PdfVerticalAlignment.middle),a=this._dictionary.getArray("Opt"),s=this.bounds;var c=[];if(o&&o.length>0)o.forEach((function(t){c.push(n.measureString(a[Number.parseInt(t.toString(),10)][1],[0,0],r,0,0)[0])}));else if(a.length>0)for(var _=n.measureString(a[0][1],[0,0],r,0,0)[0],d=1;d<a.length;++d){var l=n.measureString(a[Number.parseInt(d.toString(),10)][1],[0,0],r,0,0)[0];_=Math.max(_,l),c.push(_)}i=c.length>0?12*(s.width-4*h)/c.sort()[c.length-1]:12}else{if(i=0,!(o&&o.length>0))return i;n=new Pt(e,12),r=new j(t.PdfTextAlignment.center,t.PdfVerticalAlignment.middle),a=this._dictionary.getArray("Opt");l=n.measureString(a[o[0]][1],[0,0],r,0,0)[0];s=this.bounds,i=l?12*(s.width-4*h)/l:12}var p=0;if(o&&o.length>0){if(12!==i){n=new Pt(e,i);var f=a[o[0]][1],u=n.measureString(f,[0,0],r,0,0);if(u[0]>s.width||u[1]>s.height){l=s.width-4*h;var g=s.height-4*h;for(d=1;d<=s.height;d++){n._size=d;var y=n.measureString(f,[0,0],r,0,0);if(y[0]>s.width||y[1]>g){p=d;do{p-=.001,n._size=p;var b=n.getLineWidth(f,r);if(p<.248){n._size=.248;break}if(y=n.measureString(f,[0,0],r,0,0),b<l&&y[1]<g){n._size=p;break}}while(p>.248);i=p;break}}}}}else i>12&&(i=12);return i},i}(zt),qt=function(e){function i(t,i,n){var r=e.call(this)||this;return t&&i&&n&&r._initialize(t,i,n),r}return jt(i,e),Object.defineProperty(i.prototype,"itemsCount",{get:function(){return this._options.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bounds",{get:function(){var t,e=this.itemAt(this._defaultIndex);return e&&(e._page=this.page),e&&e.bounds?t=e.bounds:this._dictionary.has("Rect")&&(t=di(this._dictionary,this.page)),t||(this._bounds?this._bounds:t)},set:function(t){if(0===t.x&&0===t.y&&0===t.width&&0===t.height)throw new Error("Cannot set empty bounds");var e=this.itemAt(this._defaultIndex);this._isLoaded?void 0===e||this._dictionary.has("Rect")?this._dictionary.update("Rect",fi([t.x,t.y,t.width,t.height],this.page)):(e._page=this.page,e.bounds=t):e?(e._page=this.page,e.bounds=t):this._bounds=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){var t=this._dictionary.get("I");return 1===t.length?t[0]:t},set:function(t){var e=this,i=this._options.length;"number"==typeof t?(this._checkIndex(t,i),this._dictionary.update("I",[t])):(t.forEach((function(t){e._checkIndex(t,i)})),this._dictionary.update("I",t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"multiSelect",{get:function(){return this._isLoaded?0!=(this._fieldFlags&t._FieldFlag.multiSelect):this._multiSelect},set:function(e){this.multiSelect!==e&&(this._multiSelect=e,e?this._fieldFlags|=t._FieldFlag.multiSelect:this._fieldFlags&=~t._FieldFlag.multiSelect)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_options",{get:function(){return this._optionArray||(this._dictionary.has("Opt")?this._optionArray=this._dictionary.getArray("Opt"):(this._optionArray=[],this._dictionary.update("Opt",this._optionArray))),this._optionArray},enumerable:!0,configurable:!0}),i._load=function(t,e,n,r){var a=new i;a._isLoaded=!0,a._form=t,a._dictionary=e,a._crossReference=n,a._ref=r,a._dictionary.has("Kids")&&(a._kids=a._dictionary.get("Kids"));var s=a._dictionary.getArray("Opt");return null!=s&&(a._listValues=new Array(s.length)),a._defaultIndex=0,a._parsedItems=new Map,a._kidsCount>0&&a._retrieveOptionValue(),a},i.prototype.itemAt=function(t){var e;if(t<this._kidsCount)if(this._parsedItems.has(t))e=this._parsedItems.get(t);else{var i=void 0;(n=this._kids[Number.parseInt(t.toString(),10)])&&n instanceof _n&&(i=this._crossReference._fetch(n)),i&&((e=xe._load(i,this._crossReference,this))._index=t,this._options&&this._options.length>0&&t<this._options.length?e._text=this._options[Number.parseInt(t.toString(),10)][1]:e._text="",this._parsedItems.set(t,e))}else if(this._parsedItems.has(t))e=this._parsedItems.get(t);else{i=void 0;var n=void 0;(n=1===this._kidsCount?this._kids[0]:this._kids[Number.parseInt(t.toString(),10)])&&n instanceof _n&&(i=this._crossReference._fetch(n)),i&&((e=xe._load(i,this._crossReference,this))._index=t,this._options&&this._options.length>0&&t<this._options.length?e._text=this._options[Number.parseInt(t.toString(),10)][1]:e._text="",this._parsedItems.set(t,e))}return e},i.prototype.addItem=function(t){return this._addToOptions(t,this),this._listValues.length-1},i.prototype._initialize=function(t,e,i){this._defaultIndex=0,this._crossReference=t._crossReference,this._page=t,this._name=e,this._dictionary=new fn(this._crossReference),this._ref=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary.objId=this._ref.toString(),this._dictionary.update("FT",hn.get("Ch")),this._dictionary.update("T",e),this._parsedItems=new Map,this._listValues=[],this._kids=[],this.bounds=i},i.prototype._retrieveOptionValue=function(){if(this._dictionary.has("Opt")){var t=this._dictionary.getArray("Opt");if(t&&t.length>0)for(var e=this._dictionary.get("I"),i=0;i<t.length;i++)null!=e?(this._listValues[Number.parseInt(i.toString(),10)]=t[Number.parseInt(i.toString(),10)][1],i===e?(this.itemAt(i)._text=this._listValues[Number.parseInt(i.toString(),10)],this._selectedIndex=i):this.itemAt(i)._text=this._listValues[Number.parseInt(i.toString(),10)]):this.itemAt(i)._text=""}},i.prototype._obtainSelectedValue=function(){var t=[];if(this._dictionary.has("V")){var e=this._dictionary.get("V"),i=this._dictionary.getArray("V");null!=e&&("string"==typeof e?t.push(e):Array.isArray(e)&&i.forEach((function(e){t.push(e)})))}else{var n=this._dictionary.get("I");null!=n&&n.length>0&&n[0]>-1&&this._options&&this._options.length>0&&t.push(this._options[n[0]][0])}return t},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),t||this._setAppearance||this._form._setAppearance){var e=this._kidsCount;if(this._kids&&this._kids.length>0)if(e>1)for(var i=0;i<e;i++){if((a=this.itemAt(i))&&!this._checkFieldFlag(a._dictionary)){var n=this._createAppearance(a);if(t)(r=a._getPage())&&this._drawTemplate(n,r,a.bounds);else this._addAppearance(a._dictionary,n,"N");a._dictionary._updated=!t}}else{var r,a=this.itemAt(0);n=this._createAppearance();if(t)(r=this.page)&&this._drawTemplate(n,r,this.bounds);else this._addAppearance(a._dictionary,n,"N");a._dictionary._updated=!t}this._dictionary._updated=!t}},i.prototype._createAppearance=function(e){var i=new Ne;if(e){var n=e.bounds,r=e._getPage();e._isLoaded&&r&&void 0!==r.rotation&&r.rotation!==t.PdfRotationAngle.angle0?i.bounds=this._rotateTextBox([n.x,n.y,n.width,n.height],r.size,r.rotation):i.bounds=[0,0,n.width,n.height];var a=e.backColor;i.backBrush=new He(a),i.foreBrush=new He(e.color);var s=e.border;i.borderPen=new Ge(e.borderColor,s.width),i.borderStyle=s.style,i.borderWidth=s.width;var o=[(_=[a[0]-64,a[1]-64,a[2]-64])[0]>=0?_[0]:0,_[1]>=0?_[1]:0,_[2]>=0?_[2]:0];i.shadowBrush=new He(o),i.rotationAngle=e.rotationAngle;var h=void 0!==e.textAlignment?e.textAlignment:t.PdfTextAlignment.left,c=this.multiSelect?t.PdfVerticalAlignment.top:t.PdfVerticalAlignment.middle;i.stringFormat=new j(h,c)}else{n=this.bounds;this._isLoaded&&this.page&&void 0!==this.page.rotation&&this.page.rotation!==t.PdfRotationAngle.angle0?i.bounds=this._rotateTextBox([n.x,n.y,n.width,n.height],this.page.size,this.page.rotation):i.bounds=[0,0,n.width,n.height];a=this.backColor;i.backBrush=new He(a),i.foreBrush=new He(this.color);s=this.border;i.borderPen=new Ge(this.borderColor,s.width),i.borderStyle=s.style,i.borderWidth=s.width;var _;o=[(_=[a[0]-64,a[1]-64,a[2]-64])[0]>=0?_[0]:0,_[1]>=0?_[1]:0,_[2]>=0?_[2]:0];i.shadowBrush=new He(o),i.rotationAngle=this.rotationAngle,i.stringFormat=new j(t.PdfTextAlignment.left,t.PdfVerticalAlignment.middle)}i.required=this.required;var d=new O(i.bounds,this._crossReference),l=d.graphics;if(l._sw._clear(),this.required||(l._sw._beginMarkupSequence("Tx"),l._initializeCoordinates()),this._isLoaded){var p=this._obtainFont(e);p||(p=new Pt(t.PdfFontFamily.helvetica,10,t.PdfFontStyle.regular)),this._drawListBox(l,i,p,i.stringFormat)}else this._font||(this._font=new Pt(t.PdfFontFamily.timesRoman,12)),this._drawListBox(l,i,this._font,i.stringFormat);return this.required||l._sw._endMarkupSequence(),d},i.prototype._drawListBox=function(e,i,n,r){e._isTemplateGraphics&&i.required&&(e._save(),e._initializeCoordinates()),this._drawRectangularControl(e,i),e._isTemplateGraphics&&i.required&&(e._restore(),e._save(),e._sw._beginMarkupSequence("Tx"),e._initializeCoordinates());for(var a=this._options,s=function(s){var h=a[Number.parseInt(s.toString(),10)],c=[],_=i.borderWidth,d=2*_,l=i.borderStyle===t.PdfBorderStyle.inset||i.borderStyle===t.PdfBorderStyle.beveled;l?(c.push(2*d),c.push((s+2)*_+n._metrics._getHeight()*s)):(c.push(d+2),c.push((s+1)*_+n._metrics._getHeight()*s+1));var p=i.foreBrush,f=i.bounds,u=f[2]-d,g=f;g[3]-=l?d:_,e._setClip(g,t._PdfFillMode.winding);var y=!1,b=o._dictionary.get("I");if(null!=b&&b.length>0&&b.forEach((function(t){y=y||t===s})),0===i.rotationAngle&&y){var m=f[0]+_;l&&(m+=_,u-=d),p=new He([153,193,218]),e._drawRectangle(m,c[1],u,n._metrics._getHeight(),p),p=new He([0,0,0])}var v=h[1]?h[1]:h[0],w=[c[0],c[1],u-c[0],n._metrics._getHeight()];if(i.rotationAngle>0){var S=e._save();if(90===i.rotationAngle)e._translateTransform(0,e._size[1]),e._rotateTransform(-90),g=[m=e._size[1]-(g[1]+g[3]),g[0],g[3]+g[2],g[2]];else if(270===i.rotationAngle){e._translateTransform(e._size[0],0),e._rotateTransform(-270),g=[m=g[1],e._size[0]-(g[0]+g[2]),g[3]+g[2],g[2]]}else if(180===i.rotationAngle){e._translateTransform(e._size[0],e._size[1]),e._rotateTransform(-180),g=[m=e._size[0]-(g[0]+g[2]),e._size[1]-(g[1]+g[3]),g[2],g[3]]}if(y){m=f[0]+_;l&&(m+=_,u-=d),p=new He([153,193,218]),e._drawRectangle(m,c[1],u,n._metrics._getHeight(),p),p=new He([0,0,0])}e._drawString(v,n,w,null,p,r),e._restore(S)}else e._drawString(v,n,w,null,p,r)},o=this,h=0;h<a.length;++h)s(h);e._isTemplateGraphics&&i.required&&(e._sw._endMarkupSequence(),e._restore())},i.prototype._obtainFont=function(e){var i="",n=1;if(e&&(e._dictionary.has("DS")||e._dictionary.has("DA"))){if(e._dictionary.has("DS"))for(var r=e._dictionary.get("DS").split(";"),a=0;a<r.length;a++){var s=r[Number.parseInt(a.toString(),10)].split(":");if(-1!==r[Number.parseInt(a.toString(),10)].indexOf("font-family"))i=s[1];else if(-1!==r[Number.parseInt(a.toString(),10)].indexOf("font-size"))s[1].endsWith("pt")&&(n=Number.parseFloat(s[1].replace("pt","")));else if(-1===r[Number.parseInt(a.toString(),10)].indexOf("font-style")&&-1!==r[Number.parseInt(a.toString(),10)].indexOf("font")){for(var o=s[1].split(" "),h=0;h<o.length;h++)""===o[Number.parseInt(h.toString(),10)]||o[Number.parseInt(h.toString(),10)].endsWith("pt")||(i+=o[Number.parseInt(h.toString(),10)]+" "),o[Number.parseInt(h.toString(),10)].endsWith("pt")&&(n=Number.parseFloat(o[Number.parseInt(h.toString(),10)].replace("pt","")));for(;" "!==i&&i.endsWith(" ");)i=i.substring(0,i.length-2);-1!==i.indexOf(",")&&(i=i.split(",")[0])}}else{var c=e._dictionary.get("DA");if(c&&""!==c&&-1!==c.indexOf("Tf")){var _=c.split(" ");for(a=0;a<_.length;a++)if(-1!==_[Number.parseInt(a.toString(),10)].indexOf("Tf")){for(i=_[a-2];""!==i&&i.length>1&&"/"===i[0];)i=i.substring(1);n=Number.parseFloat(_[a-1])}var d=0;if(0===n){var l=new Pt(t.PdfFontFamily.helvetica,d);null!==l&&(d=this._getFontHeight(l._fontFamily),(Number.isNaN(d)||0===d)&&(d=12),l._size=d,n=d)}}}switch(i=i.trim()){case"Helv":this._font=new Pt(t.PdfFontFamily.helvetica,n,t.PdfFontStyle.regular);break;case"Courier":case"Cour":this._font=new Pt(t.PdfFontFamily.courier,n,t.PdfFontStyle.regular);break;case"Symb":this._font=new Pt(t.PdfFontFamily.symbol,n,t.PdfFontStyle.regular);break;case"TiRo":this._font=new Pt(t.PdfFontFamily.timesRoman,n,t.PdfFontStyle.regular);break;case"ZaDb":this._font=new Pt(t.PdfFontFamily.zapfDingbats,n,t.PdfFontStyle.regular);break;default:this._font=new Pt(t.PdfFontFamily.helvetica,n,t.PdfFontStyle.regular)}}return this._font},i.prototype._getFontHeight=function(e){var i=new Pt(e,12,t.PdfFontStyle.regular),n=new j(t.PdfTextAlignment.left,t.PdfVerticalAlignment.middle),r=0;if(this._listValues.length>0){for(var a=i.measureString(this._listValues[0],[0,0],n,0,0)[0],s=1;s<this._listValues.length;++s){var o=i.measureString(this._listValues[Number.parseInt(s.toString(),10)],[0,0],n,0,0)[0];a=a>o?a:o}r=(r=12*(this.bounds.width-4*this.border.width)/a)>12?12:r}return r},i}(zt),Kt=function(e){function i(t,i,n,r){var a=e.call(this)||this;return a._isLoaded=!0,a._form=t,a._dictionary=i,a._crossReference=n,a._ref=r,a._dictionary.has("Kids")&&(a._kids=a._dictionary.get("Kids")),a._defaultIndex=0,a._parsedItems=new Map,a}return jt(i,e),i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),t){var e=this._kidsCount;if(e>0)for(var i=void 0,n=0;n<e;n++){var r=this.itemAt(n);if(r&&r._dictionary){var a=r._getPage();a&&(i||0!==n||(i=this._getItemTemplate(r._dictionary)),this._flattenSignature(r._dictionary,a,r.bounds,i))}}else this._flattenSignature(this._dictionary,this.page,this.bounds)}},i.prototype._flattenSignature=function(e,i,n,r){var a;if(e.has("AP")){var s=e.get("AP");if(s&&s.has("N")){var o=s.get("N"),h=s.getRaw("N");if(h&&o&&(o.reference=h),o&&(a=r||new O(o,this._crossReference))&&i){var c=(_=i._graphics)._save();i.rotation!==t.PdfRotationAngle.angle0?_._drawTemplate(a,this._calculateTemplateBounds(n,i,a,_)):_._drawTemplate(a,n),_._restore(c)}}}else if(r&&i){var _;c=(_=i._graphics)._save();i.rotation!==t.PdfRotationAngle.angle0?_._drawTemplate(a,this._calculateTemplateBounds(n,i,a,_)):_._drawTemplate(a,n),_._restore(c)}},i.prototype._calculateTemplateBounds=function(t,e,i,n){var r=t.x,a=t.y;if(e){var s=this._obtainGraphicsRotation(n._matrix);90===s?(n._translateTransform(i._size[1],0),n._rotateTransform(90),r=t.x,a=-(e._size[1]-t.y-t.height)):180===s?(n._translateTransform(i._size[0],i._size[1]),n._rotateTransform(180),r=-(e._size[0]-(t.x+i._size[0])),a=-(e._size[1]-t.y-i._size[1])):270===s&&(n._translateTransform(0,i._size[0]),n._rotateTransform(270),r=-(e._size[0]-t.x-t.width),a=t.y)}return{x:r,y:a,width:t.width,height:t.height}},i.prototype._obtainGraphicsRotation=function(t){var e=Math.round(180*Math.atan2(t._matrix._elements[2],t._matrix._elements[0])/Math.PI);switch(e){case-90:e=90;break;case-180:e=180;break;case 90:e=270}return e},i.prototype._getItemTemplate=function(t){var e;if(t.has("AP")){var i=t.get("AP");if(i&&i.has("N")){var n=i.get("N"),r=i.getRaw("N");r&&(n.reference=r),n&&(e=new O(n,this._crossReference))}}return e},i}(zt),Xt=function(){function t(t){var e,i="",n=0;if(t&&"string"==typeof t&&""!==t)for(var r=t.split(" "),a=0;a<r.length;a++)switch(r[Number.parseInt(a.toString(),10)]){case"g":e=new Array(Number.parseFloat(r[a-1]));break;case"rg":e=new Array(Number.parseFloat(r[a-3]),Number.parseFloat(r[a-2]),Number.parseFloat(r[a-1]));break;case"k":e=new Array(Number.parseFloat(r[a-4]),Number.parseFloat(r[a-3]),Number.parseFloat(r[a-2]),Number.parseFloat(r[a-1]));break;case"Tf":n=Number.parseFloat(r[a-1]),(i=r[a-2].substring(1)).includes("#2C")&&i.replace("#2C",",")}this.fontName=i,this.fontSize=n,this.color=void 0!==e?gi(e):[0,0,0]}return t.prototype.toString=function(){var t=[Number.parseFloat((this.color[0]/255).toFixed(3)),Number.parseFloat((this.color[1]/255).toFixed(3)),Number.parseFloat((this.color[2]/255).toFixed(3))];return"/"+this.fontName+" "+this.fontSize+" Tf "+t[0].toString()+" "+t[1].toString()+" "+t[2].toString()+" rg"},t}(),Qt=function(){function t(t,e){this._dictionary=new fn,this._annotations=t,this._crossReference=t._crossReference,void 0!==e&&(this._bounds=e),this._initialize()}return Object.defineProperty(t.prototype,"_normal",{get:function(){return!this._templateNormal&&this._dictionary.has("AP")&&(this._templateNormal=this._dictionary.get("N")),this._templateNormal},set:function(t){t&&(this._templateNormal=t,this._dictionary.set("N",this._templateNormal))},enumerable:!0,configurable:!0}),t.prototype._initialize=function(){this._normal=new O(this._bounds,this._crossReference)},t.prototype._getNormalTemplate=function(){return this._templateNormal},t}(),Jt=(Ct=function(t,e){return(Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Ct(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Yt=function(){function e(){this._isImported=!1,this._isLoaded=!1,this._setAppearance=!1,this._opacity=1,this._isAllRotation=!0}return Object.defineProperty(e.prototype,"author",{get:function(){var t;void 0===this._author&&this._dictionary.has("Author")&&((t=this._dictionary.get("Author"))&&(this._author=t));void 0===this._author&&this._dictionary.has("T")&&((t=this._dictionary.get("T"))&&(this._author=t));return this._author},set:function(t){if(this._isLoaded&&"string"==typeof t&&t!==this.author){var e=!1;this._dictionary.has("T")&&(this._dictionary.update("T",t),this._author=t,e=!0),this._dictionary.has("Author")&&(this._dictionary.update("Author",t),this._author=t,e=!0),e||(this._dictionary.update("T",t),this._author=t)}this._isLoaded||"string"!=typeof t||this._dictionary.update("T",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"border",{get:function(){if(void 0===this._border){var e,i=new Fe;if(i._dictionary=this._dictionary,this._dictionary.has("Border"))(e=this._dictionary.getArray("Border"))&&e.length>=3&&(i._hRadius=e[0],i._vRadius=e[1],i._width=e[2]);if(this._dictionary.has("BS"))if(e=this._dictionary.get("BS")){if(e.has("W")){var n=e.get("W");void 0===n||Number.isNaN(n)||(i._width=n)}if(e.has("S")){var r=e.get("S");if(r)switch(r.name){case"D":i._style=t.PdfBorderStyle.dashed;break;case"B":i._style=t.PdfBorderStyle.beveled;break;case"I":i._style=t.PdfBorderStyle.inset;break;case"U":i._style=t.PdfBorderStyle.underline;break;default:i._style=t.PdfBorderStyle.solid}}if(e.has("D")){var a=e.getArray("D");a&&(i._dash=a)}}this._border=i}return this._border},set:function(t){var e,i,n,r,a,s=this.border;if((!this._isLoaded||void 0!==t.width&&s.width!==t.width)&&(e=t.width),(!this._isLoaded||void 0!==t.hRadius&&s.hRadius!==t.hRadius)&&(i=t.hRadius),(!this._isLoaded||void 0!==t.vRadius&&s.vRadius!==t.vRadius)&&(n=t.vRadius),(!this._isLoaded||void 0!==t.style&&s.style!==t.style)&&(r=t.style),void 0!==t.dash&&s.dash!==t.dash&&(a=t.dash),!this._isWidget&&(this._dictionary.has("Border")||e||n||i)&&(this._border._hRadius=void 0!==i?i:s.hRadius,this._border._vRadius=void 0!==n?n:s.vRadius,this._border._width=void 0!==e?e:s.width,this._dictionary.update("Border",[this._border.hRadius,this._border.vRadius,this._border.width])),this._dictionary.has("BS")||e||r||a){this._border._width=void 0!==e?e:s.width,this._border._style=void 0!==r?r:s.style,this._border._dash=void 0!==a?a:s.dash;var o=this._dictionary.has("BS")?this._dictionary.get("BS"):new fn(this._crossReference);o.update("Type",hn.get("Border")),o.update("W",this._border.width),o.update("S",yi(this._border.style)),void 0!==this._border.dash&&o.update("D",this._border.dash),this._dictionary.update("BS",o),this._dictionary._updated=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return void 0===this._annotFlags&&(this._annotFlags=t.PdfAnnotationFlag.default,this._dictionary.has("F")&&(this._annotFlags=this._dictionary.get("F"))),this._annotFlags},set:function(t){void 0!==t&&t!==this._annotFlags&&(this._annotFlags=t,this._dictionary.update("F",t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return void 0===this._color&&this._dictionary.has("C")&&(this._color=gi(this._dictionary.getArray("C"))),this._color},set:function(t){if(void 0!==t&&3===t.length){var e=this.color;this._isLoaded&&void 0!==e&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]||(this._color=t,this._dictionary.update("C",[Number.parseFloat((t[0]/255).toFixed(7)),Number.parseFloat((t[1]/255).toFixed(7)),Number.parseFloat((t[2]/255).toFixed(7))]))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerColor",{get:function(){return void 0===this._innerColor&&this._dictionary.has("IC")&&(this._innerColor=gi(this._dictionary.getArray("IC"))),this._innerColor},set:function(t){if(void 0!==t&&3===t.length){var e=this.innerColor;this._isLoaded&&void 0!==e&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]||(this._innerColor=t,this._dictionary.update("IC",[Number.parseFloat((t[0]/255).toFixed(7)),Number.parseFloat((t[1]/255).toFixed(7)),Number.parseFloat((t[2]/255).toFixed(7))]))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"creationDate",{get:function(){if((void 0===this._creationDate||null===this._creationDate)&&this._dictionary.has("CreationDate")){var t=this._dictionary.get("CreationDate");null!==t&&"string"==typeof t&&(this._creationDate=this._stringToDate(t))}return this._creationDate},set:function(t){this._creationDate=t,this._dictionary.update("CreationDate",this._dateToString(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modifiedDate",{get:function(){if(void 0===this._modifiedDate||null===this._modifiedDate){var t=void 0;this._dictionary.has("ModDate")?t=this._dictionary.get("ModDate"):this._dictionary.has("M")&&(t=this._dictionary.get("M")),null!==t&&"string"==typeof t&&(this._modifiedDate=this._stringToDate(t))}return this._modifiedDate},set:function(t){this._modifiedDate=t,this._dictionary.update("M",this._dateToString(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return this._isLoaded&&(this._bounds=di(this._dictionary,this._page)),this._bounds},set:function(t){if(t)if(this._isBounds=!0,this._isLoaded){if(t.x!==this.bounds.x||t.y!==this.bounds.y||t.width!==this.bounds.width||t.height!==this.bounds.height){var e=this._page.size;if(e){var i=e[1]-(t.y+t.height),n=i+t.height;this._dictionary.update("Rect",[t.x,i,t.x+t.width,n]),this._bounds=t}}}else this._bounds=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caption",{get:function(){if(void 0===this._caption){var e=new ke;if(e._dictionary=this._dictionary,this._dictionary.has("Cap")&&(e._cap=this._dictionary.get("Cap")),this._dictionary.has("CP")){var i=this._dictionary.get("CP");i&&(e._type="Top"===i.name?t.PdfLineCaptionType.top:t.PdfLineCaptionType.inline)}this._dictionary.has("CO")&&(e._offset=this._dictionary.getArray("CO")),this._caption=e}return this._caption},set:function(t){var e=this.caption;t&&(this._isLoaded&&t.cap===e.cap||(this._caption.cap=t.cap),this._isLoaded&&t.type===e.type||(this._caption.type=t.type),this._isLoaded&&t.offset===e.offset||(this._caption.offset=t.offset))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opacity",{get:function(){if(this._dictionary.has("CA")){var t=this._dictionary.get("CA");void 0!==t&&(this._opacity=t)}return this._opacity},set:function(t){void 0===t||Number.isNaN(t)||(t>=0&&t<=1?(this._dictionary.update("CA",t),this._opacity=t):t<0?this._dictionary.update("CA",0):this._dictionary.update("CA",1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subject",{get:function(){return void 0===this._subject&&(this._subject=this._dictionary.get("Subject","Subj")),this._subject},set:function(t){if("string"==typeof t){var e=!1;this._dictionary.has("Subj")&&(this._dictionary.update("Subj",t),this._subject=t,e=!0),e&&!this._dictionary.has("Subject")||(this._dictionary.update("Subject",t),this._subject=t)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return void 0===this._name&&this._dictionary.has("NM")&&(this._name=this._dictionary.get("NM")),this._name},set:function(t){"string"==typeof t&&(this._dictionary.update("NM",t),this._name=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return void 0===this._text&&this._dictionary.has("Contents")&&(this._text=this._dictionary.get("Contents")),this._text},set:function(t){"string"==typeof t&&(this._text=this._dictionary.get("Contents"),t!==this._text&&(this._dictionary.update("Contents",t),this._text=t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return void 0===this._rotate&&this._dictionary.has("Rotate")&&(this._rotate=this._dictionary.get("Rotate")/90),this._rotate},set:function(t){var e=this.rotate;void 0!==t&&void 0!==e&&(t=(t+e)%4),this._dictionary.update("Rotate",90*t),this._rotate=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationAngle",{get:function(){var t=this._getRotationAngle();return t<0&&(t=360+t),t>=360&&(t=360-t),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flattenPopUps",{get:function(){return this._isFlattenPopUps},set:function(t){void 0!==t&&(this._isFlattenPopUps=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_hasFlags",{get:function(){return this._dictionary.has("F")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_degreeToRadian",{get:function(){return void 0===this._ratio&&(this._ratio=Math.PI/180),this._ratio},enumerable:!0,configurable:!0}),e.prototype.setAppearance=function(t){this._setAppearance=t,t&&(this._dictionary._updated=!0)},e.prototype.getValues=function(t){var e=[];if(!this._dictionary.has(t))throw new Error("PdfException: "+t+" is not found");var i=this._dictionary.get(t);if(Array.isArray(i)){i=this._dictionary.getArray(t);for(var n=0;n<i.length;n++){var r=i[Number.parseInt(n.toString(),10)];r instanceof hn?e.push(r.name):"string"==typeof r?e.push(r):"number"==typeof r&&e.push(r.toString())}}else if(i instanceof hn)e.push(i.name);else{if("string"!=typeof i)throw new Error("PdfException: "+t+" is not found");e.push(i)}return e},e.prototype.setValues=function(t,e){t&&""!==t&&e&&""!==e&&this._dictionary.update(t,e)},e.prototype._initialize=function(t,e){this._page=t,this._crossReference=t._crossReference,e&&(this._dictionary=e),this._isLoaded||(this._dictionary.set("P",this._page._ref),this._dictionary.assignXref(this._crossReference))},e.prototype._getRotationAngle=function(){var t=0;return this._dictionary.has("Rotate")?t=this._dictionary.get("Rotate"):this._dictionary.has("Rotation")&&(t=this._dictionary.get("Rotation")),t},e.prototype._getBoundsValue=function(t){var e=t.length,i=[],n=[];if(t&&e>0){for(var r=[],a=0;a<t.length;a++){var s=t[Number.parseInt(a.toString(),10)];r.push(s)}var o=0,h=0;for(a=0;a<r.length;a++)a%2==0?(i[Number.parseInt(o.toString(),10)]=r[Number.parseInt(a.toString(),10)],o++):(n[Number.parseInt(h.toString(),10)]=r[Number.parseInt(a.toString(),10)],h++)}return i.sort((function(t,e){return t>e?1:-1})),n.sort((function(t,e){return t>e?1:-1})),{x:i[0],y:n[0],width:i[i.length-1]-i[0],height:n[n.length-1]-n[0]}},e.prototype._validateTemplateMatrix=function(t,e){var i=!1,n=!0;if(null==e){if(t&&t.has("Matrix")){if((_=t.getArray("Matrix"))&&_.length>3&&void 0!==_[0]&&void 0!==_[1]&&void 0!==_[2]&&void 0!==_[3]&&1===_[0]&&0===_[1]&&0===_[2]&&1===_[3]){i=!0;var r=0,a=0,s=0,o=0;_.length>4&&(s=-_[4],_.length>5&&(o=-_[5]));var h=void 0;this._dictionary.has("Rect")&&(h=this._dictionary.getArray("Rect"))&&h.length>1&&(r=h[0],a=h[1]),r===s&&a===o||0!==s||0!==o||(this._locationDisplaced=!0)}}else i=!0;return i}var c=this.bounds;if(t&&t.has("Matrix")){var _,d=t.getArray("BBox");if((_=t.getArray("Matrix"))&&d&&_.length>3&&d.length>2&&void 0!==_[0]&&void 0!==_[1]&&void 0!==_[2]&&void 0!==_[3]&&1===_[0]&&0===_[1]&&0===_[2]&&1===_[3]&&void 0!==d[0]&&void 0!==d[1]&&void 0!==d[2]&&void 0!==d[3]&&(d[0]!==-_[4]&&d[1]!==-_[5]||0===d[0]&&0==-_[4])){var l=this._page._graphics,p=l._save();void 0!==this.opacity&&this._opacity<1&&l._setTransparency(this._opacity),c.x-=d[0],c.y+=d[1],l._drawTemplate(e,c),l._restore(p),this._removeAnnotationFromPage(this._page,this),n=!1}}return n},e.prototype._flattenAnnotationTemplate=function(e,i){var n=this._page._graphics,r=this.bounds;if(this._type===t._PdfAnnotationType.lineAnnotation&&!this._dictionary.has("AP"))if(r=li([this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height]),this._page){var a=this._page.size,s=this._page.mediaBox,o=this._page.cropBox;o&&Array.isArray(o)&&4===o.length&&this._page._pageDictionary.has("CropBox")?0===o[0]&&0===o[1]&&a[0]!==o[2]&&a[1]!==o[3]||r.x===o[0]?r.y=a[1]-(r.y+r.height):(r.x-=o[0],r.y=o[3]-(r.y+r.height)):s&&Array.isArray(s)&&4===s.length&&this._page._pageDictionary.has("MediaBox")&&(s[0]>0||s[1]>0||a[0]===s[2]||a[1]===s[3])?(r.x-=s[0],r.y=s[3]-(r.y+r.height)):r.y=a[1]-(r.y+r.height)}else r.y=r.y+r.height;if(null!=r){var h=n._save();if(this._page._needInitializeGraphics=!0,this._type===t._PdfAnnotationType.rubberStampAnnotation){var c=!0;if(this._dictionary.has("AP")){var _=this._dictionary.get("AP");if(_&&_.has("N")){var d=_.get("N");if(this.rotationAngle===t.PdfRotationAngle.angle270&&this._page.rotation===t.PdfRotationAngle.angle270&&d.dictionary.has("Matrix"))(f=d.dictionary.getArray("Matrix"))&&6===f.length&&0===f[4]&&0!==f[5]&&(c=!1)}!i&&this.rotationAngle!==t.PdfRotationAngle.angle180&&c&&(e._isAnnotationTemplate=!0,e._needScale=!0)}}i||this._type===t._PdfAnnotationType.rubberStampAnnotation||(e._isAnnotationTemplate=!0,e._needScale=!0),void 0!==this.opacity&&this._opacity<1&&n._setTransparency(this._opacity);var l=this._calculateTemplateBounds(r,this._page,e,i,n);if(this._type===t._PdfAnnotationType.rubberStampAnnotation){var p;a=void 0;this.rotationAngle===t.PdfRotationAngle.angle0?(a=[l.width,l.height],p=[l.x,l.y]):(a=e._size,p=[l.x,l.y]);var f,u=!1;if(this.rotationAngle!==t.PdfRotationAngle.angle0&&e._content)if(e._content.dictionary.has("Matrix"))(f=e._content.dictionary.getArray("Matrix"))&&6===f.length&&0===f[4]&&0!==f[5]&&(u=!0);var g=e._size[0]>0?l.width/e._size[0]:1,y=e._size[1]>0?l.height/e._size[1]:1;c=!(1===g&&1===y);this.rotationAngle!==t.PdfRotationAngle.angle0&&u&&(this.rotationAngle===t.PdfRotationAngle.angle90?this._page.rotation===t.PdfRotationAngle.angle270?!c||0===l.x&&0===l.y?(p[0]+=a[1],p[1]+=a[0]-a[1]+(a[0]-a[1])):(p[0]+=a[0]-a[1],p[1]+=a[0]):c||(p[0]+=a[1]):this.rotationAngle===t.PdfRotationAngle.angle270?this._page.rotation===t.PdfRotationAngle.angle270?c&&e._isAnnotationTemplate?p[1]=l.y-l.width:c&&(p[1]+=a[0]-a[1]):c||0===l.x&&0===l.y?p[1]+=-(a[0]-a[1]):p[1]+=-a[0]:this.rotationAngle===t.PdfRotationAngle.angle180&&(p[0]+=a[0],p[1]+=-a[1]))}n._drawTemplate(e,l),n._restore(h)}this._removeAnnotationFromPage(this._page,this)},e.prototype._calculateTemplateBounds=function(e,i,n,r,a){var s=e,o=e.x,h=e.y,c=e.width,_=e.height;if(!r){var d=this._dictionary.getArray("Rect");d&&(s=li(d))}if(void 0!==i){var l=this._obtainGraphicsRotation(a._matrix);if(90===l)a._translateTransform(n._size[1],0),a._rotateTransform(90),r||void 0!==this._rotate&&this._rotate===t.PdfRotationAngle.angle180?(o=e.x,h=this._locationDisplaced?i._origin&&0!==i._o[1]?e.y+e.height:-(i.size[1]-(e.height+e.y)+(e.height-n._size[1])):-(i.size[1]-e.y-e.height)):(o=e.x,h=-(i.size[1]-(e.height+e.y)+(e.width-n._size[1])),c=e.height,_=e.width);else if(180===l)a._translateTransform(n._size[0],n._size[1]),a._rotateTransform(180),r?(o=-(i.size[0]-(e.x+e.width)),h=-(i.size[1]-e.y-e.height)):(o=-(i.size[0]-(e.x+n._size[0])),h=-(i.size[1]-e.y-n._size[1]),void 0===this.rotate||this._rotate!==t.PdfRotationAngle.angle90&&this._rotate!==t.PdfRotationAngle.angle270||(h=-(i.size[1]-e.y-n._size[1])-(e.width-e.height),c=e.height,_=e.width));else if(270===l)if(a._translateTransform(0,n._size[0]),a._rotateTransform(270),r||void 0!==this.rotate&&this._rotate===t.PdfRotationAngle.angle180)o=-(i.size[0]-e.x-e.width),h=e.y;else{o=-(i.size[0]-s.x-n._size[0]);var p=n._content.dictionary.getArray("Matrix"),f=n._content.dictionary.getArray("BBox");h=p&&f&&p[5]!==f[2]?e.y-(e.height-e.width):e.y+e.height-e.width,c=e.height,_=e.width}else 0===l&&(r||void 0===this.rotate||this.rotate!==t.PdfRotationAngle.angle90&&this.rotate!==t.PdfRotationAngle.angle270||(o=e.x,h=e.y+e.height-e.width,c=e.height,_=e.width))}return{x:o,y:h,width:c,height:_}},e.prototype._obtainGraphicsRotation=function(t){var e=Math.atan2(t._matrix._elements[2],t._matrix._elements[0]),i=Math.round(180*e/Math.PI);switch(i){case-90:i=90;break;case-180:i=180;break;case 90:i=270}return i},e.prototype._removeAnnotationFromPage=function(t,e){var i=[];t._pageDictionary&&t._pageDictionary.has("Annots")&&(i=t._pageDictionary.get("Annots")),e._dictionary.set("P",t._ref);var n=i.indexOf(e._ref);-1!==n&&(i.splice(n,1),this._crossReference._cacheMap.has(e._ref)&&this._crossReference._cacheMap.delete(e._ref)),t._pageDictionary.set("Annots",i)},e.prototype._drawCloudStyle=function(t,e,i,n,r,a,s){if(this._isClockWise(a)){for(var o=[],h=a.length-1;h>=0;h--)o.push(a[Number.parseInt(h.toString(),10)]);a=o}var c=[],_=2*n*r,d=a[a.length-1];for(h=0;h<a.length;h++){var l=a[Number.parseInt(h.toString(),10)],p=l[0]-d[0],f=l[1]-d[1],u=Math.sqrt(p*p+f*f);p/=u,f/=u;for(var g=0;g+.1*_<u;g+=_){var y=new Ce;y.point=[d[0]+g*p,d[1]+g*f],c.push(y)}d=l}var b=c[c.length-1];for(h=0;h<c.length;h++){var m=c[Number.parseInt(h.toString(),10)],v=this._getIntersectionDegrees(b.point,m.point,n);b.endAngle=v[0],m.startAngle=v[1],b=m}var w=new It;for(h=0;h<c.length;h++){var S=(R=c[Number.parseInt(h.toString(),10)]).startAngle%360,P=R.endAngle%360,A=0;if(S>0&&P<0)A=180-S+(180-(P<0?-P:P));else if(S<0&&P>0)A=-S+P;else if(S>0&&P>0){A=S>P?360-(S-P):P-S}else if(S<0&&P<0){A=S>P?360-(S-P):-(S+-P)}A<0&&(A=-A),R.endAngle=A,w._addArc(R.point[0]-n,R.point[1]-n,2*n,2*n,S,A)}w._closeFigure();var x,k=[];if(s)for(h=0;h<w._points.length;h++)k.push([w._points[Number.parseInt(h.toString(),10)][0],-w._points[Number.parseInt(h.toString(),10)][1]]);s?((x=new It)._points=k,x._pathTypes=w._pathTypes):((x=new It)._points=w._points,x._pathTypes=w._pathTypes),null!==e&&t._drawPath(x,null,e);var T=180/(3*Math.PI);w=new It;for(h=0;h<c.length;h++){var R=c[Number.parseInt(h.toString(),10)];w._addArc(R.point[0]-n,R.point[1]-n,2*n,2*n,R.startAngle,R.endAngle+T)}if(w._closeFigure(),k=[],s)for(h=0;h<w._points.length;h++)k.push([w._points[Number.parseInt(h.toString(),10)][0],-w._points[Number.parseInt(h.toString(),10)][1]]);s?((x=new It)._points=k,x._pathTypes=w._pathTypes):((x=new It)._points=w._points,x._pathTypes=w._pathTypes),t._drawPath(x,i,null)},e.prototype._isClockWise=function(t){for(var e=0,i=0;i<t.length;i++){var n=t[Number.parseInt(i.toString(),10)],r=t[(i+1)%t.length];e+=(r[0]-n[0])*(r[1]+n[1])}return e>0},e.prototype._getIntersectionDegrees=function(t,e,i){var n=e[0]-t[0],r=e[1]-t[1],a=.5*Math.sqrt(n*n+r*r)/i;a<-1?a=-1:a>1&&(a=1);var s=Math.atan2(r,n),o=Math.acos(a);return[(s-o)*(180/Math.PI),(Math.PI+s+o)*(180/Math.PI)]},e.prototype._obtainStyle=function(e,i,n,r){var a=this.border.dash;if(a&&a.length>0){for(var s=[],o=!1,h=0;h<a.length;h++)s[Number.parseInt(h.toString(),10)]=a[Number.parseInt(h.toString(),10)],s[Number.parseInt(h.toString(),10)]>0&&(o=!0);o&&this.border.style===t.PdfBorderStyle.dashed&&(e._dashStyle=t._PdfDashStyle.dash,e._dashPattern=s)}if(r)if(r instanceof Ne){var c;if(!this._isBounds&&this._dictionary.has("RD"))(c=this._dictionary.getArray("RD"))&&(i[0]=i[0]+c[0],i[1]=i[1]+n+c[1],i[2]=i[2]-(c[0]+c[2]),i[3]=i[3]-(c[1]+c[3]));else i[0]=i[0]+n,i[1]=i[1]+n,i[2]=i[2]-this.border.width,i[3]=i[3]-this.border.width;r.bounds=i}else if(0!==r.intensity&&r.style===t.PdfBorderEffectStyle.cloudy){var _=5*r.intensity;i[0]=i[0]+_+n,i[1]=i[1]+_+n,i[2]=i[2]-2*_-2*n,i[3]=i[3]-2*_-2*n}else i[0]=i[0]+n,i[1]=i[1]+n,i[2]=i[2]-this.border.width,i[3]=this.bounds.height-this.border.width;else!this._isBounds&&this._dictionary.has("RD")?(c=this._dictionary.getArray("RD"))&&(i[0]=i[0]+c[0],i[1]=i[1]+n+c[1],i[2]=i[2]-2*c[2],i[3]=i[3]-this.border.width,i[3]=i[3]-2*c[3]):(i[1]=i[1]+n,i[3]=this.bounds.height-this.border.width);return i},e.prototype._createRectangleAppearance=function(e){var i=this.border.width,n=this._dictionary.getArray("RD");if(!n&&0!==e.intensity&&e.style===t.PdfBorderEffectStyle.cloudy){var r={x:this.bounds.x-5*e.intensity-i/2,y:this.bounds.y-5*e.intensity-i/2,width:this.bounds.width+10*e.intensity+i,height:this.bounds.height+10*e.intensity+i};n=[(a=5*e.intensity)+i/2,a+i/2,a+i/2,a+i/2],this._dictionary.set("RD",n),this.bounds=r}if(!this._isBounds&&n){r={x:this.bounds.x+n[0],y:this.bounds.y+n[1],width:this.bounds.width-2*n[2],height:this.bounds.height-2*n[3]};if(0!==e.intensity&&e.style===t.PdfBorderEffectStyle.cloudy){r.x=r.x-5*e.intensity-i/2,r.y=r.y-5*e.intensity-i/2,r.width=r.width+10*e.intensity+i,r.height=r.height+10*e.intensity+i;var a=5*e.intensity;this._dictionary.set("RD",[a+i/2,a+i/2,a+i/2,a+i/2])}else delete this._dictionary._map.RD;this.bounds=r}var s=i/2,o=[0,0,this.bounds.width,this.bounds.height],h=new O(o,this._crossReference);Bi(h,this._getRotationAngle()),0!==e.intensity&&e.style===t.PdfBorderEffectStyle.cloudy&&(h._writeTransformation=!1);var c=h.graphics,_=new Ne;this.innerColor&&(_.backBrush=new He(this._innerColor)),i>0&&this.color&&(_.borderPen=new Ge(this._color,i)),this.color&&(_.foreBrush=new He(this._color));var d=this._obtainStyle(_.borderPen,o,s,e);return void 0!==this.opacity&&this._opacity<1&&(c._save(),c._setTransparency(this._opacity)),0!==e.intensity&&e.style===t.PdfBorderEffectStyle.cloudy?this._drawRectangleAppearance(d,c,_,e.intensity):c._drawRectangle(d[0],d[1],d[2],d[3],_.borderPen,_.backBrush),void 0!==this.opacity&&this._opacity<1&&c._restore(),h},e.prototype._drawRectangleAppearance=function(t,e,i,n){var r=new It;r._addRectangle(t[0],t[1],t[2],t[3]);var a=4.25*n;if(a>0){for(var s=[],o=0;o<r._points.length;o++){var h=[r._points[Number.parseInt(o.toString(),10)][0],-r._points[Number.parseInt(o.toString(),10)][1]];s.push(h)}(r=new It)._addPolygon(s),this._drawCloudStyle(e,i.backBrush,i.borderPen,a,.833,r._points,!1)}else e._drawRectangle(t[0],t[1],t[2],t[3],i.borderPen,i.backBrush)},e.prototype._createCircleAppearance=function(){var t=[0,0,this.bounds.width,this.bounds.height],e=new O(t,this._crossReference);Bi(e,this._getRotationAngle()),this._dictionary.has("BE")&&(e._writeTransformation=!1);var i=e.graphics,n=this.border.width,r=new Ge(this.color,n),a=new Ne;this.innerColor&&(a.backBrush=new He(this._innerColor)),n>0&&(a.borderPen=r),this.color&&(a.foreBrush=new He(this._color)),a.borderWidth=n;var s=n/2,o=this._obtainStyle(r,t,s);return void 0!==this.opacity&&this._opacity<1&&(i._save(),i._setTransparency(this._opacity)),this._dictionary.has("BE")?this._drawCircleAppearance(o,s,i,a):i._drawEllipse(o[0]+s,o[1],o[2]-n,o[3],a.borderPen,a.backBrush),void 0!==this._opacity&&this._opacity<1&&i._restore(),e},e.prototype._drawCircleAppearance=function(t,e,i,n){var r=0;if(this._dictionary.has("RD")){var a=this._dictionary.getArray("RD");a&&a.length>0&&(r=a[0])}if(r>0){var s=[t[0]+e,-t[1]-t[3],t[2]-this.border.width,t[3]],o=s[0],h=s[1],c=s[0]+s[2],_=s[1]+s[3],d=[];d.push([c,_]),d.push([o,_]),d.push([o,h]),d.push([c,h]);var l=[];l.push([c,h+s[3]/2]),l.push([o+s[2]/2,_]),l.push([o,h+s[3]/2]),l.push([o+s[2]/2,h]);var p=[];p.push([o+s[2]/2,_]),p.push([o,h+s[3]/2]),p.push([o+s[2]/2,h]),p.push([c,h+s[3]/2]);for(var f=[],u=0;u<d.length;u++)this._createBezier(l[Number.parseInt(u.toString(),10)],d[Number.parseInt(u.toString(),10)],p[Number.parseInt(u.toString(),10)],f);this._drawCloudStyle(i,n.backBrush,n.borderPen,r,.833,f,!1)}else i._drawEllipse(t[0]+e,-t[1],t[2]-this.border.width,-t[3],n.borderPen,n.backBrush)},e.prototype._createBezier=function(t,e,i,n){n.push(t),this._populateBezierPoints(t,e,i,0,n),n.push(i)},e.prototype._populateBezierPoints=function(t,e,i,n,r){if(n<2){var a=this._midPoint(t,e),s=this._midPoint(e,i),o=this._midPoint(a,s);n++,this._populateBezierPoints(t,a,o,n,r),r.push(o),this._populateBezierPoints(o,s,i,n,r)}},e.prototype._midPoint=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]},e.prototype._getAngle=function(t){var e=t[0],i=t[1],n=t[2],r=t[3],a=0;if(n-e==0)a=r>i?90:270;else{var s=(r-i)/(n-e);a=Math.atan(s)*(180/Math.PI),(n-e<0||r-i<0)&&(a+=180),n-e>0&&r-i<0&&(a-=180),a<0&&(a+=360)}return a},e.prototype._getAxisValue=function(t,e,i){return[t[0]+Math.cos(e*this._degreeToRadian)*i,t[1]+Math.sin(e*this._degreeToRadian)*i]},e.prototype._drawLineEndStyle=function(e,i,n,r,a,s,o,h){var c,_,d,l,p,f,u,g;switch(s){case t.PdfLineEndingStyle.square:i._drawRectangle(e[0]-3*o,-(e[1]+3*o),6*o,6*o,r,a);break;case t.PdfLineEndingStyle.circle:i._drawEllipse(e[0]-3*o,-(e[1]+3*o),6*o,6*o,r,a);break;case t.PdfLineEndingStyle.openArrow:c=h?30:150,_=9*o,d=this._getAxisValue(e,n,h?o:-o),l=this._getAxisValue(d,n+c,_),p=this._getAxisValue(d,n-c,_),(g=new It)._pen=r,g._addLine(d[0],-d[1],l[0],-l[1]),g._addLine(d[0],-d[1],p[0],-p[1]),i._stateControl(r,null,null),i._buildUpPath(g._points,g._pathTypes),i._drawGraphicsPath(r,null,g._fillMode,!1);break;case t.PdfLineEndingStyle.closedArrow:c=h?30:150,_=9*o,d=this._getAxisValue(e,n,h?o:-o),l=this._getAxisValue(d,n+c,_),p=this._getAxisValue(d,n-c,_),i._drawPolygon([[d[0],-d[1]],[l[0],-l[1]],[p[0],-p[1]]],r,a);break;case t.PdfLineEndingStyle.rOpenArrow:c=h?150:30,_=9*o,d=this._getAxisValue(e,n,h?-o:o),l=this._getAxisValue(d,n+c,_),p=this._getAxisValue(d,n-c,_),(g=new It)._pen=r,g._addLine(d[0],-d[1],l[0],-l[1]),g._addLine(d[0],-d[1],p[0],-p[1]),i._stateControl(r,null,null),i._buildUpPath(g._points,g._pathTypes),i._drawGraphicsPath(r,null,g._fillMode,!1);break;case t.PdfLineEndingStyle.rClosedArrow:c=h?150:30,_=9*o,d=this._getAxisValue(e,n,h?-o:o),l=this._getAxisValue(d,n+c,_),p=this._getAxisValue(d,n-c,_),i._drawPolygon([[d[0],-d[1]],[l[0],-l[1]],[p[0],-p[1]]],r,a);break;case t.PdfLineEndingStyle.slash:_=9*o,l=this._getAxisValue(d,n+60,_),p=this._getAxisValue(d,n-120,_),i._drawLine(r,e[0],-e[1],l[0],-l[1]),i._drawLine(r,e[0],-e[1],p[0],-p[1]);break;case t.PdfLineEndingStyle.diamond:_=3*o,l=this._getAxisValue(e,180,_),p=this._getAxisValue(e,90,_),f=this._getAxisValue(e,0,_),u=this._getAxisValue(e,-90,_),i._drawPolygon([[l[0],-l[1]],[p[0],-p[1]],[f[0],-f[1]],[u[0],-u[1]]],r,a);break;case t.PdfLineEndingStyle.butt:_=3*o,l=this._getAxisValue(e,n+90,_),p=this._getAxisValue(e,n-90,_),i._drawLine(r,l[0],-l[1],p[0],-p[1])}},e.prototype._drawLineStyle=function(t,e,i,n,r,a,s,o){0===o&&(o=1,r=null),this._drawLineEndStyle(t,i,n,r,a,s.begin,o,!0),this._drawLineEndStyle(e,i,n,r,a,s.end,o,!1)},e.prototype._obtainFontDetails=function(){var e,i="",n=t.PdfFontStyle.regular;if(this._dictionary.has("DS")||this._dictionary.has("DA")){var r=void 0;if(this._dictionary.has("DS"))for(var a=this._dictionary.get("DS").split(";"),s=0;s<a.length;s++){var o=a[Number.parseInt(s.toString(),10)].split(":");if(-1!==a[Number.parseInt(s.toString(),10)].indexOf("font-family"))i=o[1];else if(-1!==a[Number.parseInt(s.toString(),10)].indexOf("font-size"))o[1].endsWith("pt")&&(e=Number.parseFloat(o[1].replace("pt","")));else if(-1!==a[Number.parseInt(s.toString(),10)].indexOf("font-style")||-1!==a[Number.parseInt(s.toString(),10)].indexOf("style"))r=a[Number.parseInt(s.toString(),10)];else if(-1!==a[Number.parseInt(s.toString(),10)].indexOf("font")){for(var h=o[1].split(" "),c=0;c<h.length;c++)""===h[Number.parseInt(c.toString(),10)]||h[Number.parseInt(c.toString(),10)].endsWith("pt")||(i+=h[Number.parseInt(c.toString(),10)]+" "),h[Number.parseInt(c.toString(),10)].endsWith("pt")&&(e=Number.parseFloat(h[Number.parseInt(c.toString(),10)].replace("pt","")));for(;" "!==i&&i.endsWith(" ");)i=i.substring(0,i.length-1);-1!==i.indexOf(",")&&(i=i.split(",")[0])}}else{var _=this._dictionary.get("DA");if(_&&""!==_&&-1!==_.indexOf("Tf")){var d=_.split(" ");for(s=0;s<d.length;s++)if(-1!==d[Number.parseInt(s.toString(),10)].indexOf("Tf")){for(i=d[s-2];""!==i&&i.length>1&&"/"===i[0];)i=i.substring(1);e=Number.parseFloat(d[s-1])}}}if(r&&""!==r)r.split(",").forEach((function(e){switch(e.toLowerCase()){case"bold":n|=t.PdfFontStyle.bold;break;case"italic":n|=t.PdfFontStyle.italic;break;case"strikeout":n|=t.PdfFontStyle.strikeout;break;case"underline":n|=t.PdfFontStyle.underline}}));i&&(i=i.trim())}return{name:i,size:e,style:n}},e.prototype._mapFont=function(e,i,n){var r=e||"",a=void 0!==i?i:1;if(this._dictionary.has("DS")||this._dictionary.has("DA"))switch(r){case"Helvetica":this._pdfFont=new Pt(t.PdfFontFamily.helvetica,a,n);break;case"Courier":this._pdfFont=new Pt(t.PdfFontFamily.courier,a,n);break;case"Symbol":this._pdfFont=new Pt(t.PdfFontFamily.symbol,a,n);break;case"TimesRoman":this._pdfFont=new Pt(t.PdfFontFamily.timesRoman,a,n);break;case"ZapfDingbats":this._pdfFont=new Pt(t.PdfFontFamily.zapfDingbats,a,n);break;case"MonotypeSungLight":this._pdfFont=new At(t.PdfCjkFontFamily.monotypeSungLight,a,n);break;case"SinoTypeSongLight":this._pdfFont=new At(t.PdfCjkFontFamily.sinoTypeSongLight,a,n);break;case"MonotypeHeiMedium":this._pdfFont=new At(t.PdfCjkFontFamily.monotypeHeiMedium,a,n);break;case"HanyangSystemsGothicMedium":this._pdfFont=new At(t.PdfCjkFontFamily.hanyangSystemsGothicMedium,a,n);break;case"HanyangSystemsShinMyeongJoMedium":this._pdfFont=new At(t.PdfCjkFontFamily.hanyangSystemsShinMyeongJoMedium,a,n);break;case"HeiseiKakuGothicW5":this._pdfFont=new At(t.PdfCjkFontFamily.heiseiKakuGothicW5,a,n);break;case"HeiseiMinchoW3":this._pdfFont=new At(t.PdfCjkFontFamily.heiseiMinchoW3,a,n);break;default:this._pdfFont=new Pt(t.PdfFontFamily.helvetica,a,n)}return this._pdfFont},e.prototype._obtainFont=function(){var t=this._obtainFontDetails();return this._mapFont(t.name,t.size,t.style)},e.prototype._getEqualPdfGraphicsUnit=function(e,i){var n;switch(e){case t.PdfMeasurementUnit.inch:n=t._PdfGraphicsUnit.inch,i="in";break;case t.PdfMeasurementUnit.centimeter:n=t._PdfGraphicsUnit.centimeter,i="cm";break;case t.PdfMeasurementUnit.millimeter:n=t._PdfGraphicsUnit.millimeter,i="mm";break;case t.PdfMeasurementUnit.pica:n=t._PdfGraphicsUnit.pica,i="p";break;case t.PdfMeasurementUnit.point:n=t._PdfGraphicsUnit.point,i="pt";break;default:n=t._PdfGraphicsUnit.inch,i="in"}return{graphicsUnit:n,unitString:i}},e.prototype._createMeasureDictionary=function(t){var e=new fn;e.set("C",1),e.set("D",100),e.set("F",hn.get("D")),e.set("RD","."),e.set("RT",""),e.set("SS",""),e.set("U",t);var i=new fn;i.set("C",1),i.set("D",100),i.set("F",hn.get("D")),i.set("RD","."),i.set("RT",""),i.set("SS",""),i.set("U","sq "+t);var n=new fn;"in"===t?n.set("C",.0138889):"cm"===t?n.set("C",.0352778):"mm"===t?n.set("C",.352778):"pt"===t?n.set("C",1):"p"===t&&n.set("C",.0833333),n.set("D",100),n.set("F",hn.get("D")),n.set("RD","."),n.set("RT",""),n.set("SS",""),n.set("U",t);var r=new fn;return r.set("A",[i]),r.set("D",[e]),r.set("R","1 "+t+" = 1 "+t),r.set("Type",hn.get("Measure")),r.set("X",[n]),r},e.prototype._colorToHex=function(t){return t?"#"+this._componentToHex(t[0])+this._componentToHex(t[1])+this._componentToHex(t[2]):"#"+this._componentToHex(0)+this._componentToHex(0)+this._componentToHex(0)},e.prototype._componentToHex=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},e.prototype._getRotatedBounds=function(t,e){if(t.width>0&&t.height>0){var i=new je;i._rotate(e);var n=[];n.push([t.x,t.y]),n.push([t.x+t.width,t.y]),n.push([t.x+t.width,t.y+t.height]),n.push([t.x,t.y+t.height]);for(var r=0;r<n.length;r++)n[Number.parseInt(r.toString(),10)]=i._matrix._transform(n[Number.parseInt(r.toString(),10)]);var a=new It;a._addRectangle(t.x,t.y,t.width,t.height);for(r=0;r<4;r++)a._points[Number.parseInt(r.toString(),10)]=n[Number.parseInt(r.toString(),10)];var s=n[0][0],o=n[3][0],h=n[0][1],c=n[3][1];for(r=0;r<4;r++)n[Number.parseInt(r.toString(),10)][0]<s&&(s=n[Number.parseInt(r.toString(),10)][0]),n[Number.parseInt(r.toString(),10)][0]>o&&(o=n[Number.parseInt(r.toString(),10)][0]),n[Number.parseInt(r.toString(),10)][1]<h&&(h=n[Number.parseInt(r.toString(),10)][1]),n[Number.parseInt(r.toString(),10)][1]>c&&(c=n[Number.parseInt(r.toString(),10)][1]);return{x:t.x,y:t.y,width:o-s,height:c-h}}return t},e.prototype._flattenPopUp=function(){this._flattenPop(this._page,this.color,this.bounds,this.border,this.author,this.subject,this.text)},e.prototype._flattenPop=function(e,i,n,r,a,s,o){var h,c=n,_=[(h=e.size)[0]-180,c.y+142<h[1]?c.y:h[1]-142,180,142];if(this._dictionary.has("Popup")&&this._dictionary.get("Popup")){var d=this._dictionary.getArray("Rect");if(d&&4===d.length){var l=d[0],p=d[1];_=[l,p,d[2]-l,d[3]-p]}}void 0===i&&(i=[0,0,0]);var f=new He(i),u=r.width/2,g=new Ge([0,0,0],1),y=0,b=new He(this._getForeColor(i));if(null!=a&&""!==a)y=this._drawAuthor(a,s,_,f,b,e,y,r);else if(null!=s&&""!==s){var m=[_[0]+u,_[1]+u,_[2]-r.width,40];this._saveGraphics(e,t._PdfBlendMode.hardLight),e._graphics._drawRectangle(m[0],m[1],m[2],m[3],g,f),e._graphics._restore();var v=[m[0]+11,m[1],m[2],m[3]/2];v=[v[0],v[1]+v[3]-2,v[2],m[3]/2],this._saveGraphics(e,t._PdfBlendMode.normal),this._drawSubject(s,v,e),e._graphics._restore(),y=40}else{this._saveGraphics(e,t._PdfBlendMode.hardLight);m=[_[0]+u,_[1]+u,_[2]-r.width,20];e._graphics._drawRectangle(m[0],m[1],m[2],m[3],g,f),y=20,e._graphics._restore()}var w=[_[0]+u,_[1]+u+y,_[2]-r.width,_[3]-(y+r.width)];this._saveGraphics(e,t._PdfBlendMode.hardLight),e._graphics._drawRectangle(w[0],w[1],w[2],w[3],new Ge([0,0,0],1),new He([255,255,255])),w[0]+=11,w[1]+=5,w[2]-=22,e._graphics._restore(),this._saveGraphics(e,t._PdfBlendMode.normal);var S=new Pt(t.PdfFontFamily.helvetica,10.5);null!=o&&""!==o&&e._graphics._drawString(o,S,w,null,new He([0,0,0]),null),e._graphics._restore()},e.prototype._flattenLoadedPopUp=function(){var e="";this._dictionary.has("Contents")&&(e=this._dictionary.get("Contents"));var i=this.author,n=this.subject,r=new Ge([0,0,0],1);if(this._dictionary.has("Popup")){var a=this._getRectangleBoundsValue();void 0===this.color&&(this.color=[0,0,0]);var s=new He(this.color),o=this.border.width/2,h=0,c=new He(this._getForeColor(this.color));if(void 0!==this.author&&null!==this.author&&""!==this.author)h=this._drawAuthor(this.author,this.subject,a,s,c,this._page,h,this.border);else if(void 0!==this.subject&&null!==this.subject&&""!==this.subject){var _=[a[0]+o,a[1]+o,a[2]-this.border.width,40];this._saveGraphics(this._page,t._PdfBlendMode.hardLight),this._page._graphics._drawRectangle(_[0],_[1],_[2],_[3],r,s),this._page._graphics._restore();var d=[_[0]+11,_[1],_[2],_[3]/2];d=[d[0],d[1]+d[3]-2,d[2],_[3]/2],this._saveGraphics(this._page,t._PdfBlendMode.normal),this._drawSubject(this.subject,d,this._page),h=40,this._page._graphics._restore()}else{this._saveGraphics(this._page,t._PdfBlendMode.hardLight);_=[a[0]+o,a[1]+o,a[2]-this.border.width,20];this._page._graphics._drawRectangle(_[0],_[1],_[2],_[3],r,s),h=20,this._page._graphics._restore()}this._saveGraphics(this._page,t._PdfBlendMode.hardLight);var l=[a[0]+o,a[1]+o+h,a[2]-this.border.width,a[3]-(h+this.border.width)];if(this._page._graphics._drawRectangle(l[0],l[1],l[2],l[3],r,new He([255,255,255])),l[0]+=11,l[1]+=5,l[2]-=22,this._page._graphics._restore(),this._saveGraphics(this._page,t._PdfBlendMode.normal),this._page._graphics._restore(),null!=e&&""!==e){var p=new Pt(t.PdfFontFamily.helvetica,10.5);this._page._graphics._drawString(e,p,l,null,new He([0,0,0]),null)}this._page._graphics._restore(),this._removeAnnotationFromPage(this._page,this)}else this._flattenPop(this._page,this.color,this.bounds,this.border,i,n,e),this._removeAnnotationFromPage(this._page,this)},e.prototype._getRectangleBoundsValue=function(){if(this._dictionary.has("Popup")){var t=this._dictionary.get("Popup").getArray("Rect");return null!==t?(null!==this._page?0===t[1]&&0===t[3]?t[1]=t[1]+t[3]:t[1]=this._page._size[1]-(t[1]+t[3]):t[1]=t[1]-t[3],t):[0,0,0,0]}return[0,0,0,0]},e.prototype._getForeColor=function(t){return(t[0]+t[1]+t[2])/3>128?[0,0,0]:[255,255,255]},e.prototype._drawAuthor=function(e,i,n,r,a,s,o,h){var c=this.border.width/2,_=new Ge([0,0,0],1),d=new j(t.PdfTextAlignment.left,t.PdfVerticalAlignment.middle),l=new Pt(t.PdfFontFamily.helvetica,10.5,t.PdfFontStyle.bold),p=[n[0]+c,n[1]+c,n[2]-h.width,20];if(null!=i&&""!==i){p[3]+=20,o=p[3],this._saveGraphics(s,t._PdfBlendMode.hardLight),s._graphics._drawRectangle(p[0],p[1],p[2],p[3],_,r),s._graphics._restore();var f=[p[0]+11,p[1],p[2],p[3]/2];this._saveGraphics(this._page,t._PdfBlendMode.normal),s._graphics._drawString(e,l,f,null,a,d),f=[f[0],f[1]+f[3]-2,f[2],p[3]/2],this._drawSubject(i,f,s),s._graphics._restore()}else{this._saveGraphics(s,t._PdfBlendMode.hardLight),s._graphics._drawRectangle(p[0],p[1],p[2],p[3],_,r),s._graphics._restore();f=[p[0]+11,p[1],p[2],p[3]];this._saveGraphics(s,t._PdfBlendMode.normal),s._graphics._drawString(e,new Pt(t.PdfFontFamily.helvetica,10.5),f,null,a,d),o=p[3],s._graphics._restore()}return o},e.prototype._drawSubject=function(e,i,n){var r=new j(t.PdfTextAlignment.left,t.PdfVerticalAlignment.middle),a=new Pt(t.PdfFontFamily.helvetica,10.5,t.PdfFontStyle.bold);n._graphics._drawString(e,a,i,null,new He([0,0,0]),r)},e.prototype._saveGraphics=function(t,e){t._graphics._save(),t._graphics._setTransparency(.8,.8,e)},e.prototype._getBorderColorString=function(t){return(t[0]/255).toFixed(3)+" "+(t[1]/255).toFixed(3)+" "+(t[2]/255).toFixed(3)+" rg "},e.prototype._stringToDate=function(t){var e=new Date;if("D"===t[0]&&":"===t[1]){var i=(t=t.substring(2,16)).substring(0,4),n=t.substring(4,6),r=t.substring(6,8),a=t.substring(8,10),s=t.substring(10,12),o=t.substring(12,14);e=new Date(i+"-"+n+"-"+r+"T"+a+":"+s+":"+o)}else if(-1!==t.indexOf("/")){var h=t.split("/");i=h[2].split(" ")[0];"10"!==(n=h[0])&&"11"!==n&&"12"!==n&&(n="0"+n);r=h[1],a=h[2].split(" ")[1].split(":")[0],s=h[2].split(" ")[1].split(":")[1],o=h[2].split(" ")[1].split(":")[2];e=new Date(i+"-"+n+"-"+r+"T"+a+":"+s+":"+o)}else e=new Date(t);return e},e.prototype._dateToString=function(t){var e="",i=(t.getMonth()+1).toString();"10"!==i&&"11"!==i&&"12"!==i&&(i="0"+i);var n=t.getDate().toString();Number.parseInt(n)<10&&(n="0"+n);var r=t.getHours().toString();Number.parseInt(r)<10&&(r="0"+r);var a=t.getMinutes().toString();Number.parseInt(a)<10&&(a="0"+a);var s=t.getSeconds().toString();return Number.parseInt(s)<10&&(s="0"+s),e=t.getFullYear().toString()+"-"+i+"-",e+=n+"T"+r+":",e+=a+":"+s},e}(),Zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jt(e,t),Object.defineProperty(e.prototype,"comments",{get:function(){return this._comments?this._comments:this._comments=new Be(this,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reviewHistory",{get:function(){return this._reviewHistory?this._reviewHistory:this._reviewHistory=new Be(this,!0)},enumerable:!0,configurable:!0}),e}(Yt),$t=function(e){function i(i){var n=e.call(this)||this;return n._unit=t.PdfMeasurementUnit.centimeter,n._unitString="",n._dictionary=new fn,n._dictionary.update("Type",hn.get("Annot")),n._dictionary.update("Subtype",hn.get("Line")),void 0!==i&&(n.linePoints=i),n._type=t._PdfAnnotationType.lineAnnotation,n}return Jt(i,e),Object.defineProperty(i.prototype,"linePoints",{get:function(){if(void 0===this._linePoints&&this._dictionary.has("L")){var t=this._dictionary.getArray("L");t&&(this._linePoints=t)}return this._linePoints},set:function(t){if(Array.isArray(t)&&(void 0===this._linePoints||ei(t,this._linePoints))){if(4!==t.length)throw new Error("Line points length should be 4.");this._dictionary.update("L",t),this._linePoints=t}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"leaderExt",{get:function(){if(void 0===this._leaderExt&&this._dictionary.has("LLE")){var t=this._dictionary.get("LLE");void 0!==t&&t>=0&&(this._leaderExt=t)}return this._leaderExt},set:function(t){if(!Number.isNaN(t)){if(!(t>=0))throw new Error("LeaderExt should be non negative number");this._dictionary.update("LLE",t),this._leaderExt=t}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"leaderLine",{get:function(){if(void 0===this._leaderLine&&this._dictionary.has("LL")){var t=this._dictionary.get("LL");void 0!==t&&(this._leaderLine=t)}return this._leaderLine},set:function(t){Number.isNaN(t)||0===this.leaderExt||(this._dictionary.update("LL",t),this._leaderLine=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineEndingStyle",{get:function(){if(void 0===this._lineEndingStyle){var t=new Te;if(t._dictionary=this._dictionary,this._dictionary.has("LE")){var e=this._dictionary.getArray("LE");e&&Array.isArray(e)&&(t._begin=vi(e[0].name),t._end=vi(e[1].name))}this._lineEndingStyle=t}return this._lineEndingStyle},set:function(t){var e=this.lineEndingStyle;e.begin===t.begin&&e.end===t.end||(e.begin=t.begin,e.end=t.end)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"leaderOffset",{get:function(){if(void 0===this._leaderOffset&&this._dictionary.has("LLO")){var t=this._dictionary.get("LLO");void 0!==t&&t>=0&&(this._leaderOffset=t)}return this._leaderOffset},set:function(t){Number.isNaN(t)||(this._dictionary.update("LLO",t),this._leaderOffset=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineIntent",{get:function(){if(void 0===this._lineIntent&&this._dictionary.has("IT")){var e=this._dictionary.get("IT");e&&(this._lineIntent="LineDimension"===e.name?t.PdfLineIntent.lineDimension:t.PdfLineIntent.lineArrow)}return this._lineIntent},set:function(e){void 0!==e&&e!==this.lineIntent&&(this._lineIntent=e,this._dictionary.update("IT",hn.get(e===t.PdfLineIntent.lineDimension?"LineDimension":"LineArrow")))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"measure",{get:function(){return void 0===this._measure&&this._dictionary.has("Measure")&&(this._measure=this._dictionary.get("Measure")),this._measure},set:function(t){t&&(this._isLoaded||(this._measure=t,this.caption.cap=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"unit",{get:function(){if(void 0===this._unit&&(this._unit=t.PdfMeasurementUnit.centimeter,this._dictionary.has("Contents"))){var e=this._dictionary.get("Contents");this._unitString=e.substring(e.length-2),this._unit=Di(this._unitString)}return this._unit},set:function(t){this._measure&&(this._isLoaded||void 0===t||(this._unit=t))},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(t){if(void 0===this.linePoints||null===this.linePoints)throw new Error("Line points cannot be null or undefined");var e;if(this._dictionary.has("Cap")||this._dictionary.set("Cap",!1),this._dictionary.has("CP")||this._dictionary.set("CP",hn.get("Inline")),this._dictionary.has("LE")||(this.lineEndingStyle=new Te),this._dictionary.has("LL")||(this.leaderLine=0),this._dictionary.has("LLE")||(this.leaderExt=0),this._dictionary.has("C")||(this.color=[0,0,0]),this._dictionary.has("BS"))e=this.border.width;else{var i=new fn(this._crossReference);i.set("Type",hn.get("Border")),this._dictionary.set("BS",i)}if(void 0===e&&(e=1),this._measure)this._appearanceTemplate=this._createLineMeasureAppearance(t);else{this._setAppearance&&(this._appearanceTemplate=this._createAppearance());var n=this._obtainLineBounds(),r={x:n[0],y:n[1],width:n[2],height:n[3]};this._bounds=r;var a=[this._bounds.x,this._bounds.y,this._bounds.x+this._bounds.width,this._bounds.y+this._bounds.height];this._dictionary.update("Rect",a)}},i.prototype._doPostProcess=function(t){var e,i;(void 0===t&&(t=!1),this._isLoaded)?((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._dictionary.has("Measure")?this._appearanceTemplate=this._createLineMeasureAppearance(t):this._appearanceTemplate=this._createAppearance()),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"))&&((s=e.getRaw("N"))&&(i.reference=s),this._appearanceTemplate=new O(i,this._crossReference))):(this._postProcess(t),this._appearanceTemplate||t&&(this._dictionary.has("AP")?(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"))&&((s=e.getRaw("N"))&&(i.reference=s),this._appearanceTemplate=new O(i,this._crossReference)):this._appearanceTemplate=this._createAppearance()));if(void 0!==this.flattenPopUps&&this.flattenPopUps&&!this.measure&&(this._isLoaded&&!this._dictionary.has("Measure")?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate){var n=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);this._flattenAnnotationTemplate(this._appearanceTemplate,n)}if(!t&&this._setAppearance&&!this.measure){var r=void 0;if(this._dictionary.has("AP"))r=this._dictionary.get("AP");else{var a=this._crossReference._getNextReference();r=new fn(this._crossReference),this._crossReference._cacheMap.set(a,r),this._dictionary.update("AP",a)}var s=this._crossReference._getNextReference();this._crossReference._cacheMap.set(s,this._appearanceTemplate._content),r.update("N",s)}},i.prototype._createLineMeasureAppearance=function(e){for(var i=[0,0,0,0],n=this._convertToUnit(),r=this._obtainLinePoints(),a=[],s=0;s<r.length;s+=2)a.push([r[Number.parseInt(s.toString(),10)],r[s+1]]);var o=new It;o._points=a,o._pathTypes=[0,1];var h=o._getBounds();this._bounds={x:h[0],y:h[1],width:h[2],height:h[3]};var c,_=this.leaderLine<0?-this._leaderLine:this._leaderLine,d=new Ge(void 0!==this.color?this._color:[0,0,0],this.border.width);this.innerColor&&(c=new He(this._innerColor)),i=this._obtainLineBounds();var l=new O(i,this._crossReference);Bi(l,this._getRotationAngle());var p=new Ne;l._writeTransformation=!1;var f=l.graphics,u=this.border.width/2;p.borderPen=d,p.backBrush=c,p.foreBrush=new He(this.color);var g=this._obtainLinePoints(),y=this._obtainFont();if(void 0!==g&&4===g.length){var b=g[0],m=g[1],v=g[2],w=g[3];this.border.style===t.PdfBorderStyle.dashed?d._dashStyle=t._PdfDashStyle.dash:this.border.style===t.PdfBorderStyle.dot&&(d._dashStyle=t._PdfDashStyle.dot);var S=new He(void 0!==this.color?this.color:[0,0,0]);null==y&&(y=new Pt(t.PdfFontFamily.helvetica,10,t.PdfFontStyle.regular));var P=new j(t.PdfTextAlignment.center,t.PdfVerticalAlignment.middle),A=y.measureString(n.toFixed(2)+" "+this._unitString,[0,0],P,0,0),x=0;x=v-b==0?w>m?90:270:this._getAngle([b,m,v,w]),f._save();var k=[b,m],T=[v,w],R=this._leaderLine<0?x+180:x,F=void 0!==this.leaderOffset?_+this.leaderOffset:_,I=this._getAxisValue(k,R+90,F),N=this._getAxisValue(T,R+90,F),C=Math.sqrt(Math.pow(N[0]-I[0],2)+Math.pow(N[1]-I[1],2)),M=C/2-(A[0]/2+u),B=this._getAxisValue(I,x,M),L=this._getAxisValue(N,x+180,M),E=void 0,D=void 0;E=this.lineEndingStyle.begin===t.PdfLineEndingStyle.openArrow||this.lineEndingStyle.begin===t.PdfLineEndingStyle.closedArrow?this._getAxisValue(I,x,this.border.width):I,D=this.lineEndingStyle.end===t.PdfLineEndingStyle.openArrow||this.lineEndingStyle.end===t.PdfLineEndingStyle.closedArrow?this._getAxisValue(N,x,-this.border.width):N,this.caption.type===t.PdfLineCaptionType.top?f._drawLine(d,E[0],-E[1],D[0],-D[1]):(f._drawLine(d,E[0],-E[1],B[0],-B[1]),f._drawLine(d,D[0],-D[1],L[0],-L[1]));var z=[hn.get(mi(this.lineEndingStyle.begin)),hn.get(mi(this.lineEndingStyle.end))],V=this.bounds.width;this._setLineEndingStyles(I,N,f,x,d,c,z,V);var U=this._getAxisValue(I,R+90,this._leaderExt);f._drawLine(d,I[0],-I[1],U[0],-U[1]);var W=this._getAxisValue(N,R+90,this._leaderExt);f._drawLine(d,N[0],-N[1],W[0],-W[1]);var H=this._getAxisValue(I,R-90,_);f._drawLine(d,I[0],-I[1],H[0],-H[1]);var G=this._getAxisValue(N,R-90,_);f._drawLine(d,N[0],-N[1],G[0],-G[1]);var q=C/2,K=this._getAxisValue(I,x,q),X=void 0;X=this.caption.type===t.PdfLineCaptionType.top?this._getAxisValue(K,x+90,y._metrics._getHeight()):this._getAxisValue(K,x+90,y._metrics._getHeight()/2),f._translateTransform(X[0],-X[1]),f._rotateTransform(this._calculateAngle(g[0],g[1],g[2],g[3])),f._drawString(n.toFixed(2)+" "+this._unitString,y,[-A[0]/2,0,0,0],null,S),f._restore()}if(void 0!==e&&!e||!this._isLoaded){l._content.dictionary._updated=!0;var Q=new fn,J=this._crossReference._getNextReference();this._crossReference._cacheMap.set(J,f._template._content),f._template._content.reference=J,Q.set("N",J),Q._updated=!0,this._dictionary.set("AP",Q);var Y=[this.bounds.x,this.bounds.y+this.bounds.height,this.bounds.width,this.bounds.height],Z=this._page.size;Y[1]=Z[1]-(this.bounds.y+this.bounds.height),this._isBounds&&!this.measure?(i=Y,this._dictionary.update("Rect",[Y[0],Y[1],Y[2],Y[3]])):this._dictionary.update("Rect",[i[0],i[1],i[2],i[3]]);var $="font:"+y._metrics._postScriptName+" "+y._size+"pt; color:"+this._colorToHex(this.color);this._dictionary.update("DS",$);var tt=this._createMeasureDictionary(this._unitString),et=this._crossReference._getNextReference();this._crossReference._cacheMap.set(et,tt),tt._updated=!0,this._dictionary.update("Measure",et);var it=[];if(it.push(hn.get(mi(this.lineEndingStyle.begin))),it.push(hn.get(mi(this.lineEndingStyle.end))),this._dictionary.update("LE",it),null===this._linePoints)throw new Error("LinePoints cannot be null");this._dictionary.update("L",this._linePoints),this._dictionary.update("C",[Number.parseFloat((this.color[0]/255).toFixed(3)),Number.parseFloat((this.color[1]/255).toFixed(3)),Number.parseFloat((this.color[2]/255).toFixed(3))]);F=this._dictionary.has("LLO")?this.leaderOffset:0;this._dictionary.update("Subtype",new hn("Line")),this._dictionary.update("Contents",(this.text?this.text:"")+" "+n.toFixed(2)+" "+this._unitString),this._dictionary.update("IT",new hn("LineDimension")),this._dictionary.update("LLE",this.leaderExt),this._dictionary.update("LLO",F),this._dictionary.update("LL",this.leaderLine),this._dictionary.update("CP",hn.get(this.caption.type===t.PdfLineCaptionType.top?"Top":"Inline")),this._dictionary.update("Cap",this.caption.cap);var nt=[i[0],i[1],i[0]+i[2],i[1]+i[3]];this._dictionary.update("Rect",nt)}return l},i.prototype._calculateAngle=function(t,e,i,n){return-Math.atan2(n-e,i-t)*(180/Math.PI)},i.prototype._setLineEndingStyles=function(t,e,i,n,r,a,s,o){var h=[0,0];0===o&&(o=1,r=null),a&&!a._color&&(a=null);for(var c=0;c<s.length;c++){var _=s[Number.parseInt(c.toString(),10)];if(h=0===c?t:e,null!==_){var d=void 0,l=void 0,p=void 0,f=void 0,u=void 0,g=void 0,y=void 0,b=void 0,m=void 0,v=void 0;switch(_.name){case"Square":d=[h[0]-3*o,-(h[1]+3*o),6*o,6*o],i._drawRectangle(d[0],d[1],d[2],d[3],r,a);break;case"Circle":d=[h[0]-3*o,-(h[1]+3*o),6*o,6*o],i._drawEllipse(d[0],d[1],d[2],d[3],r,a);break;case"OpenArrow":l=0===c?30:150,p=9*o,f=0===c?this._getAxisValue(h,n,o):this._getAxisValue(h,n,-o),u=this._getAxisValue(f,n+l,p),g=this._getAxisValue(f,n-l,p),(m=new It)._pen=r,m._addLine(f[0],-f[1],u[0],-u[1]),m._addLine(f[0],-f[1],g[0],-g[1]),i._drawPath(m,r);break;case"ClosedArrow":l=0===c?30:150,p=9*o,f=0===c?this._getAxisValue(h,n,o):this._getAxisValue(h,n,-o),u=this._getAxisValue(f,n+l,p),g=this._getAxisValue(f,n-l,p),(v=[]).push([f[0],-f[1]]),v.push([u[0],-u[1]]),v.push([g[0],-g[1]]),i._drawPolygon(v,r,a);break;case"ROpenArrow":l=0===c?150:30,p=9*o,f=0===c?this._getAxisValue(h,n,-o):this._getAxisValue(h,n,o),u=this._getAxisValue(f,n+l,p),g=this._getAxisValue(f,n-l,p),(m=new It)._pen=r,m._addLine(f[0],-f[1],u[0],-u[1]),m._addLine(f[0],-f[1],g[0],-g[1]),i._drawPath(m,r);break;case"RClosedArrow":l=0===c?150:30,p=9*o,f=0===c?this._getAxisValue(h,n,-o):this._getAxisValue(h,n,o),u=this._getAxisValue(f,n+l,p),g=this._getAxisValue(f,n-l,p),(v=[]).push([f[0],-f[1]]),v.push([u[0],-u[1]]),v.push([g[0],-g[1]]),i._drawPolygon(v,r,a);break;case"Slash":p=9*o,u=this._getAxisValue(h,n+60,p),g=this._getAxisValue(h,n-120,p),i._drawLine(r,h[0],-h[1],u[0],-u[1]),i._drawLine(r,h[0],-h[1],g[0],-g[1]);break;case"Diamond":p=3*o,u=this._getAxisValue(h,180,p),g=this._getAxisValue(h,90,p),y=this._getAxisValue(h,0,p),b=this._getAxisValue(h,-90,p),(v=[]).push([u[0],-u[1]]),v.push([g[0],-g[1]]),v.push([y[0],-y[1]]),v.push([b[0],-b[1]]),i._drawPolygon(v,r,a);break;case"Butt":p=3*o,u=this._getAxisValue(h,n+90,p),g=this._getAxisValue(h,n-90,p),i._drawLine(r,u[0],-u[1],g[0],-g[1])}}}},i.prototype._calculateLineBounds=function(t,e,i,n,r,a){var s={x:0,y:0,width:0,height:0};if(t&&4===t.length){var o=this._getAngle(t),h=0,c=0;i<0?(h=-i,c=o+180):(h=i,c=o);var _=[t[0],t[1]],d=[t[2],t[3]];if(0!==n){var l=this._getAxisValue(_,c+90,n),p=this._getAxisValue(d,c+90,n);t[0]=l[0],t[1]=l[1],t[2]=p[0],t[3]=p[1]}var f=this._getAxisValue(_,c+90,h+n),u=this._getAxisValue(d,c+90,h+n),g=this._getAxisValue(_,c+90,e+h+n),y=this._getAxisValue(d,c+90,e+h+n),b=this._getLinePoint(r.begin,a),m=this._getLinePoint(r.end,a),v=[],w=[];c>=45&&c<=135||c>=225&&c<=315?(v[0]=b.y,w[0]=b.x,v[1]=m.y,w[1]=m.x):(v[0]=b.x,w[0]=b.y,v[1]=m.x,w[1]=m.y);var S=Math.max(v[0],v[1]),P=Math.max(w[0],w[1]);0===S&&(S=1),0===P&&(P=1),f[0]===Math.min(f[0],u[0])?(f[0]-=S*a,u[0]+=S*a,f[0]=Math.min(f[0],t[0]),f[0]=Math.min(f[0],g[0]),u[0]=Math.max(u[0],t[2]),u[0]=Math.max(u[0],y[0])):(f[0]+=S*a,u[0]-=S*a,f[0]=Math.max(f[0],t[0]),f[0]=Math.max(f[0],g[0]),u[0]=Math.min(u[0],t[2]),u[0]=Math.min(u[0],y[0])),f[1]===Math.min(f[1],u[1])?(f[1]-=P*a,u[1]+=P*a,f[1]=Math.min(f[1],t[1]),f[1]=Math.min(f[1],g[1]),u[1]=Math.max(u[1],t[3]),u[1]=Math.max(u[1],y[1])):(f[1]+=P*a,u[1]-=P*a,f[1]=Math.max(f[1],t[1]),f[1]=Math.max(f[1],g[1]),u[1]=Math.min(u[1],t[3]),u[1]=Math.min(u[1],y[1])),s=this._getBounds([{x:f[0],y:f[1]},{x:u[0],y:u[1]}])}return s},i.prototype._getLinePoint=function(e,i){var n={x:0,y:0};if(e)switch(e){case t.PdfLineEndingStyle.square:case t.PdfLineEndingStyle.circle:case t.PdfLineEndingStyle.diamond:n.x=3,n.y=3;break;case t.PdfLineEndingStyle.openArrow:case t.PdfLineEndingStyle.closedArrow:n.x=1,n.y=5;break;case t.PdfLineEndingStyle.rOpenArrow:case t.PdfLineEndingStyle.rClosedArrow:n.x=9+i/2,n.y=5+i/2;break;case t.PdfLineEndingStyle.slash:n.x=5,n.y=9;break;case t.PdfLineEndingStyle.butt:n.x=1,n.y=3;break;default:n.x=0,n.y=0}return n},i.prototype._getBounds=function(t){var e={x:0,y:0,width:0,height:0};if(t.length>0){for(var i=t[0].x,n=t[0].x,r=t[0].y,a=t[0].y,s=1;s<t.length;++s){var o=t[Number.parseInt(s.toString(),10)];i=Math.min(o.x,i),n=Math.max(o.x,n),r=Math.min(o.y,r),a=Math.max(o.y,a)}e.x=i,e.y=r,e.width=n-i,e.height=a-r}return e},i.prototype._obtainLineBounds=function(){var t=this.bounds;if(void 0!==this.linePoints&&4===this._linePoints.length){var e=this._dictionary.has("LLO")?this.leaderOffset:0,i=this._dictionary.has("LLE")?this.leaderExt:0,n=this._dictionary.has("LL")?this.leaderLine:0;t={x:(t=this._calculateLineBounds(this._linePoints,i,n,e,this.lineEndingStyle,this.border.width)).x-8,y:t.y-8,width:t.width+16,height:t.height+16}}return[t.x,t.y,t.width,t.height]},i.prototype._createAppearance=function(){var e=new O(this._obtainLineBounds(),this._crossReference),i=new Ne;Bi(e,this._getRotationAngle()),e._writeTransformation=!1;var n=e.graphics,r=new Ge(void 0!==this.color?this._color:[0,0,0],this.border.width);this.border.style===t.PdfBorderStyle.dashed?r._dashStyle=t._PdfDashStyle.dash:this.border.style===t.PdfBorderStyle.dot&&(r._dashStyle=t._PdfDashStyle.dot),i.borderPen=r,i.foreBrush=new He(this.color);var a=new He(void 0!==this.innerColor?this._innerColor:[0,0,0]),s=this._obtainFont();null==s&&(s=new Pt(t.PdfFontFamily.helvetica,10,t.PdfFontStyle.regular)),this.text||this._dictionary.has("Contents")||(this.text=this.subject);var o=new j(t.PdfTextAlignment.center,t.PdfVerticalAlignment.middle),h=s.measureString(this.text?this.text:"",[0,0],o,0,0)[0];if(void 0!==this.linePoints&&4===this._linePoints.length){var c=this._getAngle(this._linePoints),_=0,d=0;this.leaderLine<0?(_=-this.leaderLine,d=c+180):(_=this.leaderLine,d=c);var l=void 0!==this.leaderOffset?_+this.leaderOffset:_,p=this._getAxisValue([this._linePoints[0],this._linePoints[1]],d+90,l),f=this._getAxisValue([this._linePoints[2],this._linePoints[3]],d+90,l),u=Math.sqrt(Math.pow(f[0]-p[0],2)+Math.pow(f[1]-p[1],2)),g=u/2-(h/2+this.border.width),y=this._getAxisValue(p,c,g),b=this._getAxisValue(f,c+180,g),m=this.lineEndingStyle.begin===t.PdfLineEndingStyle.openArrow||this.lineEndingStyle.begin===t.PdfLineEndingStyle.closedArrow?this._getAxisValue(p,c,this.border.width):p,v=this.lineEndingStyle.end===t.PdfLineEndingStyle.openArrow||this.lineEndingStyle.end===t.PdfLineEndingStyle.closedArrow?this._getAxisValue(f,c,-this.border.width):f;if(this.opacity&&this._opacity<1){var w=n._save();n._setTransparency(this._opacity),this._drawLine(n,r,m,v,y,b),n._restore(w)}else this._drawLine(n,r,m,v,y,b);this._drawLineStyle(p,f,n,c,r,a,this.lineEndingStyle,this.border.width);var S=void 0!==this.leaderExt?this._leaderExt:0,P=this._getAxisValue(p,d+90,S);n._drawLine(r,p[0],-p[1],P[0],-P[1]);var A=this._getAxisValue(f,d+90,S);n._drawLine(r,f[0],-f[1],A[0],-A[1]);var x=this._getAxisValue(p,d-90,_);n._drawLine(r,p[0],-p[1],x[0],-x[1]);var k=this._getAxisValue(f,d-90,_);n._drawLine(r,f[0],-f[1],k[0],-k[1]);var T=u/2,R=this._getAxisValue(p,c,T),F=void 0,I=s._metrics._getHeight();F=this.caption.type===t.PdfLineCaptionType.top?this._dictionary.has("Measure")?this._getAxisValue(R,c+90,2*I):this._getAxisValue(R,c+90,I):this._dictionary.has("Measure")?this._getAxisValue(R,c+90,I/2*3):this._getAxisValue(R,c+90,I/2),n._translateTransform(F[0],-F[1]),n._rotateTransform(-c),this.caption.cap&&n._drawString(this.text,s,[-h/2,0,0,0],null,i.foreBrush),n._restore();var N=this._obtainLineBounds(),C=pi({x:N[0],y:N[1],width:N[2],height:N[3]});this.bounds={x:C[0],y:C[1],width:C[2],height:C[3]}}return e},i.prototype._drawLine=function(e,i,n,r,a,s){void 0===this.text||""===this._text||this.caption.type===t.PdfLineCaptionType.top||!this.caption.cap&&this.caption.type===t.PdfLineCaptionType.inline?e._drawLine(i,n[0],-n[1],r[0],-r[1]):(e._drawLine(i,n[0],-n[1],a[0],-a[1]),e._drawLine(i,r[0],-r[1],s[0],-s[1]))},i.prototype._convertToUnit=function(){for(var e=this._obtainLinePoints(),i=new Array(e.length/2),n=0,r=0;r<e.length;r+=2)i[Number.parseInt(n.toString(),10)]=[e[Number.parseInt(r.toString(),10)],e[r+1]],n++;var a=Math.sqrt(Math.pow(i[1][0]-i[0][0],2)+Math.pow(i[1][1]-i[0][1],2)),s=this._getEqualPdfGraphicsUnit(this._unit,this._unitString);return this._unitString=s.unitString,(new qe)._convertUnits(a,t._PdfGraphicsUnit.point,s.graphicsUnit)},i.prototype._obtainLinePoints=function(){var t=[];if(this.linePoints)for(var e=0;e<this._linePoints.length;e++)t[Number.parseInt(e.toString(),10)]=this._linePoints[Number.parseInt(e.toString(),10)];return t},i}(Zt),te=function(e){function i(i,n,r,a){var s=e.call(this)||this;return s._unit=t.PdfMeasurementUnit.centimeter,s._measureType=t.PdfCircleMeasurementType.diameter,s._unitString="",s._dictionary=new fn,s._dictionary.update("Type",hn.get("Annot")),s._dictionary.update("Subtype",hn.get("Circle")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==a&&(s.bounds={x:i,y:n,width:r,height:a}),s._type=t._PdfAnnotationType.circleAnnotation,s}return Jt(i,e),Object.defineProperty(i.prototype,"measure",{get:function(){return void 0===this._measure&&this._dictionary.has("Measure")&&(this._measure=this._dictionary.get("Measure")),this._measure},set:function(t){t&&(this._isLoaded||(this._measure=t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"unit",{get:function(){if(void 0===this._unit&&(this._unit=t.PdfMeasurementUnit.centimeter,this._dictionary.has("Contents"))){var e=this._dictionary.get("Contents");this._unitString=e.substring(e.length-2),this._unit=Di(this._unitString)}return this._unit},set:function(t){this._measure&&(this._isLoaded||void 0===t||(this._unit=t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"measureType",{get:function(){if(this._dictionary.has("Contents")){var e=this._dictionary.get("Contents");this._unitString=e.substring(e.length-2),this._unit=Di(this._unitString);var i=e.substring(0,e.length-2);(new qe)._convertUnits(this.bounds.width/2,t._PdfGraphicsUnit.point,zi(this._unitString)).toString()===i?this._measureType=t.PdfCircleMeasurementType.radius:this._measureType=t.PdfCircleMeasurementType.diameter}return this._measureType},set:function(t){this._measure&&(this._isLoaded||void 0===t||(this._measureType=t))},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(t){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var e;if(this._dictionary.has("BS"))e=this.border.width;else{var i=new fn(this._crossReference);i.set("Type",hn.get("Border")),this._dictionary.set("BS",i)}if(this._dictionary.has("C")||(this.color=[0,0,0]),void 0===e&&(e=1),this._measure)this._appearanceTemplate=this._createCircleMeasureAppearance(t);else{(this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createCircleAppearance());var n=this._page.size,r=[this.bounds.x,n[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[r[0],r[1],r[0]+r[2],r[1]+r[3]])}},i.prototype._doPostProcess=function(t){var e;if(void 0===t&&(t=!1),this._isLoaded){if((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._dictionary.has("Measure")?this._appearanceTemplate=this._createCircleMeasureAppearance(t):this._appearanceTemplate=this._createCircleAppearance()),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")){var i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new O(i,this._crossReference))}}else if(this._postProcess(t),!this._appearanceTemplate&&t)if(this._dictionary.has("AP")){if((e=this._dictionary.get("AP"))&&e.has("N")){i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new O(i,this._crossReference))}}else this._appearanceTemplate=this._createCircleAppearance();if(void 0!==this.flattenPopUps&&this.flattenPopUps&&!this.measure&&(this._isLoaded&&!this._dictionary.has("Measure")?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);this._flattenAnnotationTemplate(this._appearanceTemplate,r)}if(!t&&this._setAppearance&&!this.measure){var a=void 0;if(this._dictionary.has("AP"))a=this._dictionary.get("AP");else{var s=this._crossReference._getNextReference();a=new fn(this._crossReference),this._crossReference._cacheMap.set(s,a),this._dictionary.update("AP",s)}n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,this._appearanceTemplate._content),a.update("N",n)}},i.prototype._createCircleMeasureAppearance=function(e){var i=this.border.width,n=this._obtainFont();n||(n=new Pt(t.PdfFontFamily.helvetica,8,t.PdfFontStyle.regular));var r=this._convertToUnit(),a=new j(t.PdfTextAlignment.center,t.PdfVerticalAlignment.middle),s=r.toFixed(2)+" "+this._unitString,o=n.measureString(s,[0,0],a,0,0),h=new Ge(this.color,i),c=[this.bounds.x,this.bounds.y+this.bounds.height,this.bounds.width,this.bounds.height];c[1]=c[1]-c[3];var _=new O(c,this._crossReference),d=new Ne;_._writeTransformation=!1;var l=_.graphics,p=i/2;d.borderPen=h,this.innerColor&&(d.backBrush=new He(this._innerColor)),d.foreBrush=new He(this.color);var f=[c[0],-c[1]-c[3],c[2],c[3]];if(l._save(),l._drawEllipse(f[0]+p,f[1]+p,f[2]-i,f[3]-i,new Ge(this.color,this.border.width)),this._measureType===t.PdfCircleMeasurementType.diameter){l._save(),l._translateTransform(c[0],-c[1]);var u=c[3]/2-o[0]/2;l._drawLine(d.borderPen,0,-c[3]/2,c[0]+c[2],-c[3]/2),l._translateTransform(u,-c[3]/2-n._metrics._getHeight()),l._drawString(r.toFixed(2)+" "+this._unitString,n,[0,0,0,0],null,d.foreBrush),l._restore()}else{l._save(),l._translateTransform(c[0],-c[1]);u=c[2]/2+(c[2]/4-o[0]/2);l._drawLine(d.borderPen,c[2]/2,-c[3]/2,c[0]+c[2],-c[3]/2),l._translateTransform(u,-c[3]/2-n._metrics._getHeight()),l._drawString(r.toFixed(2)+" "+this._unitString,n,[0,0,0,0],null,d.foreBrush),l._restore()}if(l._restore(),void 0!==e&&!e||!this._isLoaded){var g=new fn;l._template._content.dictionary._updated=!0;var y=this._crossReference._getNextReference();this._crossReference._cacheMap.set(y,l._template._content),l._template._content.reference=y,g.set("N",y),g._updated=!0,this._dictionary.set("AP",g);var b=this._page.size,m=[this.bounds.x,b[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];if(this._isBounds&&(c=m),this._dictionary.update("Rect",[m[0],m[1],m[0]+m[2],m[1]+m[3]]),!this._dictionary.has("Measure")){var v=this._createMeasureDictionary(this._unitString),w=this._crossReference._getNextReference();this._crossReference._cacheMap.set(w,v),v._updated=!0,this._dictionary.update("Measure",w)}this._dictionary.update("Subtype",new hn("Circle")),this._dictionary.update("Contents",(this.text?this.text:"")+" "+r.toFixed(2)+" "+this._unitString);var S="font:"+n._metrics._postScriptName+" "+n._size+"pt; color:"+this._colorToHex(this.color);this._dictionary.update("DS",S)}return _},i.prototype._convertToUnit=function(){var e=new qe,i=this._getEqualPdfGraphicsUnit(this._unit,this._unitString);this._unitString=i.unitString;var n=e._convertUnits(this.bounds.width/2,t._PdfGraphicsUnit.point,i.graphicsUnit);return this._measureType===t.PdfCircleMeasurementType.diameter&&(n*=2),n},i}(Zt),ee=function(e){function i(i,n,r,a){var s=e.call(this)||this;return s._dictionary=new fn,s._dictionary.update("Type",hn.get("Annot")),s._dictionary.update("Subtype",hn.get("Circle")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==a&&(s.bounds={x:i,y:n,width:r,height:a}),s._type=t._PdfAnnotationType.ellipseAnnotation,s}return Jt(i,e),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(t){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var e;if(this._dictionary.has("BS"))e=this.border.width;else{var i=new fn(this._crossReference);i.set("Type",hn.get("Border")),this._dictionary.set("BS",i)}this._dictionary.has("C")||(this.color=[0,0,0]),void 0===e&&(e=1),(this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createCircleAppearance());var n=this._page.size,r=[this.bounds.x,n[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[r[0],r[1],r[0]+r[2],r[1]+r[3]])},i.prototype._doPostProcess=function(t){var e;if(void 0===t&&(t=!1),this._isLoaded){if((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createCircleAppearance()),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")){var i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new O(i,this._crossReference))}}else if(this._postProcess(t),!this._appearanceTemplate&&t)if(this._dictionary.has("AP")){if((e=this._dictionary.get("AP"))&&e.has("N")){i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new O(i,this._crossReference))}}else this._appearanceTemplate=this._createCircleAppearance();if(void 0!==this.flattenPopUps&&this.flattenPopUps&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);this._flattenAnnotationTemplate(this._appearanceTemplate,r)}if(!t&&this._setAppearance){var a=void 0;if(this._dictionary.has("AP"))a=this._dictionary.get("AP");else{var s=this._crossReference._getNextReference();a=new fn(this._crossReference),this._crossReference._cacheMap.set(s,a),this._dictionary.update("AP",s)}n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,this._appearanceTemplate._content),a.update("N",n)}},i}(Zt),ie=function(e){function i(i,n,r,a){var s=e.call(this)||this;return s._unit=t.PdfMeasurementUnit.centimeter,s._dictionary=new fn,s._dictionary.update("Type",hn.get("Annot")),s._dictionary.update("Subtype",hn.get("Square")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==a&&(s.bounds={x:i,y:n,width:r,height:a}),s._type=t._PdfAnnotationType.squareAnnotation,s}return Jt(i,e),Object.defineProperty(i.prototype,"borderEffect",{get:function(){if(void 0===this._borderEffect){var t=new Ie;if(t._dictionary=this._dictionary,this._dictionary.has("BE")){var e=this._dictionary.get("BE");t._intensity=e.get("I"),t._style=bi(e.get("S").name)}this._borderEffect=t}return this._borderEffect},set:function(t){void 0!==t&&(this._borderEffect=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"measure",{get:function(){return void 0===this._measure&&this._dictionary.has("Measure")&&(this._measure=this._dictionary.get("Measure")),this._measure},set:function(t){void 0!==t&&(this._isLoaded||(this._measure=t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"unit",{get:function(){if(void 0===this._unit&&(this._unit=t.PdfMeasurementUnit.centimeter,this._dictionary.has("Contents"))){var e=this._dictionary.get("Contents");this._unitString=e.substring(e.length-2),this._unit=Di(this._unitString)}return this._unit},set:function(t){this._measure&&(this._isLoaded||void 0===t||(this._unit=t))},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(e){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var i;this._dictionary.has("BS")?i=this.border.width:((n=new fn(this._crossReference)).set("Type",hn.get("Border")),this._dictionary.set("BS",n));if(this._dictionary.has("C")||(this.color=[0,0,0]),void 0===i&&(i=1),this._measure)this._appearanceTemplate=this._createSquareMeasureAppearance(e);else{(this._setAppearance||e&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createRectangleAppearance(this.borderEffect));var n,r=this._page.size,a=[this.bounds.x,r[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];if(this._dictionary.update("Rect",[a[0],a[1],a[0]+a[2],a[1]+a[3]]),void 0===this._intensity&&void 0!==this._borderEffect&&this._borderEffect.style===t.PdfBorderEffectStyle.cloudy)(n=new fn(this._crossReference)).set("I",this.borderEffect._intensity),this.borderEffect._style===t.PdfBorderEffectStyle.cloudy&&n.set("S",hn.get("C")),this._dictionary.update("BE",n)}},i.prototype._doPostProcess=function(t){var e;if(void 0===t&&(t=!1),this._isLoaded){if((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._dictionary.has("Measure")?this._appearanceTemplate=this._createSquareMeasureAppearance(t):this._appearanceTemplate=this._createRectangleAppearance(this.borderEffect)),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")){var i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new O(i,this._crossReference))}}else if(this._postProcess(t),!this._appearanceTemplate&&t)if(this._dictionary.has("AP")){if((e=this._dictionary.get("AP"))&&e.has("N")){i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new O(i,this._crossReference))}}else this._appearanceTemplate=this._createRectangleAppearance(this.borderEffect);if(void 0!==this.flattenPopUps&&this.flattenPopUps&&!this.measure&&(this._isLoaded&&!this._dictionary.has("Measure")?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);this._flattenAnnotationTemplate(this._appearanceTemplate,r)}if(!t&&this._setAppearance&&!this.measure){var a=void 0;if(this._dictionary.has("AP"))a=this._dictionary.get("AP");else{var s=this._crossReference._getNextReference();a=new fn(this._crossReference),this._crossReference._cacheMap.set(s,a),this._dictionary.update("AP",s)}n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,this._appearanceTemplate._content),a.update("N",n)}},i.prototype._createSquareMeasureAppearance=function(e){var i=this.border.width,n=this._obtainFont();null==n&&(n=new Pt(t.PdfFontFamily.helvetica,8,t.PdfFontStyle.regular));var r,a=this._calculateAreaOfSquare(),s=new j(t.PdfTextAlignment.center,t.PdfVerticalAlignment.middle),o=a.toFixed(2)+" sq "+this._unitString,h=n.measureString(o,[0,0],s,0,0),c=new Ge(this.color,i);this.innerColor&&(r=new He(this._innerColor));var _=[this.bounds.x,this.bounds.y+this.bounds.height,this.bounds.width,this.bounds.height],d=[this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height],l=new Qt(this,d);_[1]=_[1]-_[3],l._normal=new O(_,this._crossReference);var p=l._normal,f=new Ne;p._writeTransformation=!1;var u=l._normal.graphics,g=i/2;f.borderPen=c,f.backBrush=r,f.foreBrush=new He(this.color);var y=[_[0],-_[1]-_[3],_[2],_[3]];u._drawRectangle(y[0]+g,y[1]+g,y[2]-i,y[3]-i,new Ge(this.color,this.border.width)),u._save(),u._translateTransform(_[0],-_[1]);var b=_[2]/2-h[0]/2,m=_[3]/2-h[1]/2;if(u._translateTransform(b,-m-n._metrics._getHeight()),u._drawString(a.toFixed(2)+" sq "+this._unitString,n,[0,0,0,0],null,f.foreBrush),u._restore(),void 0!==e&&!e||!this._isLoaded){var v=new fn,w=u._template._content;w.dictionary._updated=!0;var S=this._crossReference._getNextReference();this._crossReference._cacheMap.set(S,w),u._template._content.reference=S,v.set("N",S),v._updated=!0,this._dictionary.set("AP",v);var P=[this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height],A=this._page.size;if(P[1]=A[1]-(this.bounds.y+this.bounds.height),P[2]=this.bounds.x+this.bounds.width,P[3]=A[1]-this.bounds.y,this._isBounds&&(_=P),this._dictionary.update("Rect",[P[0],P[1],P[2],P[3]]),!this._dictionary.has("Measure")){var x=this._crossReference._getNextReference(),k=this._createMeasureDictionary(this._unitString);this._crossReference._cacheMap.set(x,k),k._updated=!0,this._dictionary.update("Measure",x)}var T="font:"+n._metrics._postScriptName+" "+n._size+"pt; color:"+this._colorToHex(this.color);this._dictionary.update("DS",T);var R=this.text?this.text:"";this._dictionary.update("Contents",R+" "+a.toFixed(2)+" sq "+this._unitString),this._dictionary.update("Subject","Area Measurement"),void 0===this.subject&&this._dictionary.update("Subject","Area Measurement"),this._dictionary.update("MeasurementTypes",129),this._dictionary.update("Subtype",new hn("Square")),this._dictionary.update("IT",new hn("SquareDimension"));var F=this._dictionary.getArray("Rect"),I=new Array(2*F.length);I[0]=F[0],I[1]=F[3],I[2]=F[0],I[3]=F[1],I[4]=F[2],I[5]=F[1],I[6]=F[2],I[7]=F[3],this._dictionary.update("Vertices",I)}return p},i.prototype._calculateAreaOfSquare=function(){var e,i,n=new qe;if(this.bounds.width===this.bounds.height){i=this._getEqualPdfGraphicsUnit(this._unit,this._unitString),this._unitString=i.unitString,e=(r=n._convertUnits(this.bounds.width,t._PdfGraphicsUnit.point,i.graphicsUnit))*r}else{i=this._getEqualPdfGraphicsUnit(this._unit,this._unitString),this._unitString=i.unitString;var r=n._convertUnits(this.bounds.width,t._PdfGraphicsUnit.point,i.graphicsUnit);i=this._getEqualPdfGraphicsUnit(this._unit,this._unitString),this._unitString=i.unitString,e=r*n._convertUnits(this.bounds.height,t._PdfGraphicsUnit.point,i.graphicsUnit)}return e},i}(Zt),ne=function(e){function i(i,n,r,a){var s=e.call(this)||this;return s._dictionary=new fn,s._dictionary.update("Type",hn.get("Annot")),s._dictionary.update("Subtype",hn.get("Square")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==a&&(s.bounds={x:i,y:n,width:r,height:a}),s._type=t._PdfAnnotationType.rectangleAnnotation,s}return Jt(i,e),Object.defineProperty(i.prototype,"borderEffect",{get:function(){if(void 0===this._borderEffect){var t=new Ie;if(t._dictionary=this._dictionary,this._dictionary.has("BE")){var e=this._dictionary.get("BE");t._intensity=e.get("I"),t._style=bi(e.get("S").name)}this._borderEffect=t}return this._borderEffect},set:function(t){void 0!==t&&(this._borderEffect=t)},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(e){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var i;this._dictionary.has("BS")?i=this.border.width:((n=new fn(this._crossReference)).set("Type",hn.get("Border")),this._dictionary.set("BS",n));this._dictionary.has("C")||(this.color=[0,0,0]),void 0===i&&(i=1),(this._setAppearance||e&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createRectangleAppearance(this.borderEffect));var n,r=this._page.size,a=[this.bounds.x,r[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];(this._dictionary.update("Rect",[a[0],a[1],a[0]+a[2],a[1]+a[3]]),void 0===this._intensity&&void 0!==this._borderEffect&&this._borderEffect.style===t.PdfBorderEffectStyle.cloudy)&&((n=new fn(this._crossReference)).set("I",this.borderEffect._intensity),this.borderEffect._style===t.PdfBorderEffectStyle.cloudy&&n.set("S",hn.get("C")),this._dictionary.update("BE",n))},i.prototype._doPostProcess=function(e){var i;if(void 0===e&&(e=!1),this._isLoaded){if((this._setAppearance||e&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createRectangleAppearance(this.borderEffect)),!this._appearanceTemplate&&e&&this._dictionary.has("AP")&&(i=this._dictionary.get("AP"))&&i.has("N")){var n=i.get("N"),r=i.getRaw("N");n&&(r&&(n.reference=r),this._appearanceTemplate=new O(n,this._crossReference))}}else if(this._postProcess(e),!this._appearanceTemplate&&e)if(this._dictionary.has("AP")){if((i=this._dictionary.get("AP"))&&i.has("N")){n=i.get("N"),r=i.getRaw("N");n&&(r&&(n.reference=r),this._appearanceTemplate=new O(n,this._crossReference))}}else this._appearanceTemplate=this._createRectangleAppearance(this.borderEffect);if(void 0!==this.flattenPopUps&&this.flattenPopUps&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),e&&this._appearanceTemplate){var a=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);(a&&this._page.rotation!==t.PdfRotationAngle.angle0||this._isValidTemplateMatrix(this._appearanceTemplate._content.dictionary,this.bounds,this._appearanceTemplate))&&this._flattenAnnotationTemplate(this._appearanceTemplate,a)}if(!e&&this._setAppearance){var s=void 0;if(this._dictionary.has("AP"))s=this._dictionary.get("AP");else{var o=this._crossReference._getNextReference();s=new fn(this._crossReference),this._crossReference._cacheMap.set(o,s),this._dictionary.update("AP",o)}r=this._crossReference._getNextReference();this._crossReference._cacheMap.set(r,this._appearanceTemplate._content),s.update("N",r)}},i.prototype._isValidTemplateMatrix=function(t,e,i){var n=!0,r=e;if(t&&t.has("Matrix")){var a=t.getArray("BBox"),s=t.getArray("Matrix");if(s&&a&&s.length>3&&a.length>2&&void 0!==s[0]&&void 0!==s[1]&&void 0!==s[2]&&void 0!==s[3]&&1===s[0]&&0===s[1]&&0===s[2]&&1===s[3]&&void 0!==a[0]&&void 0!==a[1]&&void 0!==a[2]&&void 0!==a[3]&&(Math.round(a[0])!==Math.round(-s[4])&&Math.round(a[1])!==Math.round(-s[5])||0===a[0]&&0===Math.round(-s[4]))){var o=this._page._graphics,h=o._save();void 0!==this.opacity&&this._opacity<1&&o._setTransparency(this._opacity),r.x-=a[0],r.y+=a[1],o._drawTemplate(i,r),o._restore(h),this._removeAnnotationFromPage(this._page,this),n=!1}}return n},i}(Zt),re=function(e){function i(i){var n=e.call(this)||this;return n._dictionary=new fn,n._dictionary.update("Type",hn.get("Annot")),n._dictionary.update("Subtype",hn.get("Polygon")),void 0!==i&&(n._points=i),n._type=t._PdfAnnotationType.polygonAnnotation,n}return Jt(i,e),Object.defineProperty(i.prototype,"borderEffect",{get:function(){if(void 0===this._borderEffect){var t=new Ie;if(t._dictionary=this._dictionary,this._dictionary.has("BE")){var e=this._dictionary.get("BE");t._intensity=e.get("I"),t._style=bi(e.get("S").name)}this._borderEffect=t}return this._borderEffect},set:function(t){void 0!==t&&(this._borderEffect=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineExtension",{get:function(){if(void 0===this._lineExtension&&this._dictionary.has("LLE")){var t=this._dictionary.get("LLE");void 0!==t&&t>=0&&(this._lineExtension=t)}return this._lineExtension},set:function(t){if(!Number.isNaN(t)){if(!(t>=0))throw new Error("LineExtension should be non negative number");this._dictionary.update("LLE",t),this._lineExtension=t}},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(e){if(void 0===this._points||null===this._points)throw new Error("Points cannot be null or undefined");var i;(this._dictionary.has("LLE")||(this.lineExtension=0),this._dictionary.has("C")||(this.color=[0,0,0]),this._dictionary.has("BS"))?i=this.border.width:((s=new fn(this._crossReference)).set("Type",hn.get("Border")),this._dictionary.set("BS",s));void 0===i&&(i=1);for(var n=[],r=0;r<this._points.length;r++){var a=this._points[Number.parseInt(r.toString(),10)];n.push(a)}n[0]===n[n.length-2]&&n[1]===n[n.length-1]||(n[n.length]=this._points[0],n[n.length]=this._points[1]),this._points=n;var s,o=this._getBoundsValue(this._points),h=[o.x,o.y,o.x+o.width,o.y+o.height];(this._dictionary.update("Rect",h),this._dictionary.update("LLE",this._lineExtension),(this._setAppearance||e&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createPolygonAppearance(e)),this._dictionary.update("Vertices",this._points),void 0===this._intensity&&void 0!==this._borderEffect&&this._borderEffect.style===t.PdfBorderEffectStyle.cloudy)&&((s=new fn(this._crossReference)).set("I",this.borderEffect._intensity),this.borderEffect._style===t.PdfBorderEffectStyle.cloudy&&s.set("S",hn.get("C")),this._dictionary.update("BE",s))},i.prototype._doPostProcess=function(t){var e;if(void 0===t&&(t=!1),this._isLoaded){if((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createPolygonAppearance(t)),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")){var i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new O(i,this._crossReference))}}else if(this._postProcess(t),!this._appearanceTemplate&&t)if(this._dictionary.has("AP")){if((e=this._dictionary.get("AP"))&&e.has("N")){i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new O(i,this._crossReference))}}else this._appearanceTemplate=this._createPolygonAppearance(t);if(void 0!==this.flattenPopUps&&this.flattenPopUps&&this._isLoaded&&this._flattenLoadedPopUp(),t&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);if(!this._appearanceTemplate._content.dictionary.has("Matrix")){var a=this._appearanceTemplate._content.dictionary.getArray("BBox");a&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-a[0],-a[1]])}this._flattenAnnotationTemplate(this._appearanceTemplate,r)}if(!t&&this._setAppearance){var s=void 0;if(this._dictionary.has("AP"))s=this._dictionary.get("AP");else{var o=this._crossReference._getNextReference();s=new fn(this._crossReference),this._crossReference._cacheMap.set(o,s),this._dictionary.update("AP",o)}n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,this._appearanceTemplate._content),s.update("N",n)}},i.prototype._createPolygonAppearance=function(e){if(void 0!==e&&e){var i=void 0;this.color&&this.border.width>0&&(i=new Ge(this.color,this.border.width));var n=void 0;this.innerColor&&(n=new He(this.innerColor));var r=this._page._graphics;if(i||n){var a=void 0;if(void 0!==this.opacity&&this._opacity<1&&(a=r._save(),r._setTransparency(this._opacity)),0!==this.borderEffect.intensity&&this.borderEffect.style===t.PdfBorderEffectStyle.cloudy){var s=4*this.borderEffect.intensity+.5*this.border.width;(l=new It)._addPolygon(this._getLinePoints()),this._drawCloudStyle(r,n,i,s,.833,l._points,!1)}else r._drawPolygon(this._getLinePoints(),i,n);void 0!==this.opacity&&this._opacity<1&&r._restore(a)}return r._template}var o=void 0,h={x:0,y:0,width:0,height:0};void 0===this._points&&this._dictionary.has("Vertices")?(this._points=this._dictionary.get("Vertices"),o=this._getBoundsValue(this._points)):o=this._getBoundsValue(this._points),void 0!==this._borderEffect&&void 0!==this.borderEffect.intensity&&0!==this.borderEffect.intensity&&this._borderEffect.style===t.PdfBorderEffectStyle.cloudy?(h.x=o.x-5*this.borderEffect.intensity-this.border.width,h.y=o.y-5*this.borderEffect.intensity-this.border.width,h.width=o.width+10*this.borderEffect.intensity+2*this.border.width,h.height=o.height+10*this.borderEffect.intensity+2*this.border.width):(h.x=o.x-this.border.width,h.y=o.y-this.border.width,h.width=o.width+2*this.border.width,h.height=o.height+2*this.border.width);var c=new Qt(this,[h.x,h.y,h.width,h.height]);c._normal=new O([h.x,h.y,h.width,h.height],this._crossReference);var _=c._normal;Bi(_,this._getRotationAngle()),_._writeTransformation=!1;r=c._normal.graphics;var d=new Ne;if(this.innerColor&&(d.backBrush=new He(this._innerColor)),this.border.width>0&&this.color&&(d.borderPen=new Ge(this._color,this.border.width)),this.color&&(d.foreBrush=new He(this._color)),void 0!==this.opacity&&this._opacity<1?(r._save(),r._setTransparency(this._opacity)):r._save(),0!==this.borderEffect.intensity&&this.borderEffect.style===t.PdfBorderEffectStyle.cloudy){var l;s=4*this.borderEffect.intensity+.5*this.border.width;(l=new It)._addPolygon(this._getLinePoints()),this._drawCloudStyle(r,d.backBrush,d.borderPen,s,.833,l._points,!1)}else r._drawPolygon(this._getLinePoints(),d.borderPen,d.backBrush);return void 0!==this.opacity&&this._opacity<1&&r._restore(),r._restore(),this._isBounds&&(_._content.dictionary._updated=!0,this._dictionary.update("LLE",this.lineExtension),this._dictionary.update("Vertices",this._points)),this._dictionary.update("Rect",[h.x,h.y,h.x+h.width,h.y+h.height]),_},i.prototype._getLinePoints=function(){var e,i=this._page.size,n=i[1],r=i[0];if(this._dictionary.has("Vertices")&&!this._isBounds){var a=void 0;this._page._pageDictionary.has("Rotate")&&(a=this._page._pageDictionary.get("Rotate")),this._page.rotation&&(this._page.rotation===t.PdfRotationAngle.angle90?a=90:this._page.rotation===t.PdfRotationAngle.angle180?a=180:this._page.rotation===t.PdfRotationAngle.angle270&&(a=270));var s=this._dictionary.getArray("Vertices");if(s){var o=[];s.forEach((function(t){o.push(t)})),e=[];for(var h=0;h<o.length;h+=2)e.push([o[Number.parseInt(h.toString(),10)],n-o[h+1]]);if(a)if(270===a)for(var c=0;c<e.length;c++){var _=e[Number.parseInt(c.toString(),10)][0];e[Number.parseInt(c.toString(),10)][0]=e[Number.parseInt(c.toString(),10)][1],e[Number.parseInt(c.toString(),10)][1]=r-_}else if(90===a)for(c=0;c<e.length;c++){_=e[Number.parseInt(c.toString(),10)][0];0!==this._page._origin[1]?e[Number.parseInt(c.toString(),10)][0]=n-(e[Number.parseInt(c.toString(),10)][1]-n):e[Number.parseInt(c.toString(),10)][0]=n-e[Number.parseInt(c.toString(),10)][1],e[Number.parseInt(c.toString(),10)][1]=_}else if(180===a)for(c=0;c<e.length;c++){_=e[Number.parseInt(c.toString(),10)][0];e[Number.parseInt(c.toString(),10)][0]=r-_,e[Number.parseInt(c.toString(),10)][1]=n-e[Number.parseInt(c.toString(),10)][1]}}}else if(null!==this._points){var d=[];this._points.forEach((function(t){d.push(t)})),e=[];for(h=0;h<d.length;h+=2)e.push([d[Number.parseInt(h.toString(),10)],-d[h+1]])}return e},i}(Zt),ae=function(e){function i(i){var n=e.call(this)||this;return n._beginLine=t.PdfLineEndingStyle.none,n._endLine=t.PdfLineEndingStyle.none,n._dictionary=new fn,n._dictionary.update("Type",hn.get("Annot")),n._dictionary.update("Subtype",hn.get("PolyLine")),void 0!==i&&(n._points=i),n._type=t._PdfAnnotationType.polyLineAnnotation,n}return Jt(i,e),Object.defineProperty(i.prototype,"beginLineStyle",{get:function(){if(this._dictionary.has("LE")){var t=this._dictionary.getArray("LE");t&&Array.isArray(t)&&(this._beginLine=vi(t[0].name))}return this._beginLine},set:function(t){if(t!==this._beginLine&&(this._beginLine=t,this._dictionary)){var e=[];e.push(hn.get(mi(t))),e.push(hn.get(mi(this.endLineStyle))),this._dictionary.update("LE",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"endLineStyle",{get:function(){if(this._dictionary.has("LE")){var t=this._dictionary.getArray("LE");t&&Array.isArray(t)&&(this._endLine=vi(t[1].name))}return this._endLine},set:function(t){if(t!==this._endLine&&(this._endLine=t,this._dictionary)){var e=[];e.push(hn.get(mi(this.beginLineStyle))),e.push(hn.get(mi(t))),this._dictionary.update("LE",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineExtension",{get:function(){if(void 0===this._lineExtension&&this._dictionary.has("LLE")){var t=this._dictionary.get("LLE");void 0!==t&&t>=0&&(this._lineExtension=t)}return this._lineExtension},set:function(t){if(!Number.isNaN(t)){if(!(t>=0))throw new Error("LineExtension should be non negative number");this._dictionary.update("LLE",t),this._lineExtension=t}},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(t){if(void 0===this._points||null===this._points)throw new Error("Points cannot be null or undefined");var e;if(this._dictionary.has("LLE")||(this.lineExtension=0),this._dictionary.has("C")||(this.color=[0,0,0]),this._dictionary.has("BS"))e=this.border.width;else{var i=new fn(this._crossReference);i.set("Type",hn.get("Border")),this._dictionary.set("BS",i)}void 0===e&&(e=1);var n=this._getLinePoints(),r=[];r.push(0);for(var a=1;a<n.length;a++)r.push(1);this._polylinePoints=n,this._pathTypes=r;var s=new It;s._points=n,s._pathTypes=r,this._dictionary.update("Vertices",this._points);var o=[];o.push(hn.get(mi(this.beginLineStyle))),o.push(hn.get(mi(this.endLineStyle))),this._dictionary.update("LE",o),this._dictionary.update("LLE",this._lineExtension);var h=this._getBoundsValue(this._points),c=[h.x,h.y,h.x+h.width,h.y+h.height];this._dictionary.update("Rect",c),(this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createPolyLineAppearance(t))},i.prototype._doPostProcess=function(t){var e;if(void 0===t&&(t=!1),this._isLoaded){if((this._setAppearance||t&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createPolyLineAppearance(t)),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")){var i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new O(i,this._crossReference))}}else if(this._postProcess(t),!this._appearanceTemplate&&t)if(this._dictionary.has("AP")){if((e=this._dictionary.get("AP"))&&e.has("N")){i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new O(i,this._crossReference))}}else this._appearanceTemplate=this._createPolyLineAppearance(t);if(void 0!==this.flattenPopUps&&this.flattenPopUps&&this._isLoaded&&this._flattenLoadedPopUp(),t&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);if(!this._appearanceTemplate._content.dictionary.has("Matrix")){var a=this._appearanceTemplate._content.dictionary.getArray("BBox");a&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-a[0],-a[1]])}this._flattenAnnotationTemplate(this._appearanceTemplate,r)}if(!t&&this._setAppearance){var s=void 0;if(this._dictionary.has("AP"))s=this._dictionary.get("AP");else{var o=this._crossReference._getNextReference();s=new fn(this._crossReference),this._crossReference._cacheMap.set(o,s),this._dictionary.update("AP",o)}n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,this._appearanceTemplate._content),s.update("N",n)}},i.prototype._createPolyLineAppearance=function(t){if(void 0!==t&&t){var e=void 0;this.color&&this.border.width>0&&(e=new Ge(this.color,this.border.width));var i=this._page._graphics;if(e){var n=void 0;void 0!==this.opacity&&this._opacity<1&&(n=i._save(),i._setTransparency(this._opacity));var r=this._getLinePoints(),a=[];if(a.push(0),r&&r.length>0){for(var s=1;s<r.length;s++)a.push(1);(l=new It)._points=r,l._pathTypes=a,i._drawPath(l,e),void 0!==this.opacity&&this._opacity<1&&i._restore(n)}}return i._template}var o=void 0,h={x:0,y:0,width:0,height:0};void 0===this._points&&this._dictionary.has("Vertices")?(this._points=this._dictionary.get("Vertices"),o=this._getBoundsValue(this._points)):o=this._getBoundsValue(this._points),h.x=o.x-this.border.width,h.y=o.y-this.border.width,h.width=o.width+2*this.border.width,h.height=o.height+2*this.border.width;var c=new Qt(this,[h.x,h.y,h.width,h.height]);c._normal=new O([h.x,h.y,h.width,h.height],this._crossReference);var _=c._normal;Bi(_,this._getRotationAngle()),_._writeTransformation=!1;i=c._normal.graphics;var d=new Ne;this.innerColor&&(d.backBrush=new He(this._innerColor)),this.border.width>0&&this.color&&(d.borderPen=new Ge(this._color,this.border.width)),this.color&&(d.foreBrush=new He(this._color)),void 0!==this.opacity&&this._opacity<1?(i._save(),i._setTransparency(this._opacity)):i._save();var l=new It;if(void 0!==this._polylinePoints&&null!==this._polylinePoints?l._points=this._polylinePoints:l._points=this._getLinePoints(),void 0!==this._pathTypes&&null!==this._polylinePoints)l._pathTypes=this._pathTypes;else{this._pathTypes=[],this._pathTypes.push(0);for(s=1;s<l._points.length;s++)this._pathTypes.push(1);l._pathTypes=this._pathTypes}if(i._drawPath(l,d.borderPen,d.backBrush),void 0!==this.opacity&&this._opacity<1&&i._restore(),i._restore(),this._isBounds){_._content.dictionary._updated=!0;var p=[];p.push(hn.get(mi(this.beginLineStyle))),p.push(hn.get(mi(this.endLineStyle))),this._dictionary.update("LE",p),this._dictionary.update("LLE",this.lineExtension),this._dictionary.update("Vertices",this._points)}return this._dictionary.update("Rect",[h.x,h.y,h.x+h.width,h.y+h.height]),_},i.prototype._getLinePoints=function(){var t;if(this._dictionary.has("Vertices")&&!this._isBounds){var e=this._dictionary.getArray("Vertices");if(e){t=[];for(var i=this._page.size[1],n=0;n<e.length;n+=2)t.push([e[Number.parseInt(n.toString(),10)],i-e[n+1]])}}else if(this._points){var r=[];this._points.forEach((function(t){r.push(t)})),t=[];for(n=0;n<r.length;n+=2)t.push([r[Number.parseInt(n.toString(),10)],-r[n+1]])}return t},i}(Zt),se=function(e){function i(i){var n=e.call(this)||this;if(n._linePoints=[],n._firstIntersectionPoint=[0,0],n._secondIntersectionPoint=[0,0],n._dictionary=new fn,n._dictionary.update("Type",hn.get("Annot")),n._dictionary.update("Subtype",hn.get("PolyLine")),void 0!==i&&i.length>0){if(i.length>6)throw new Error("Points length should not be greater than 3");n._pointArray=i;for(var r=0;r<i.length;r++)n._linePoints.push(i[Number.parseInt(r.toString(),10)][0]),n._linePoints.push(i[Number.parseInt(r.toString(),10)][1])}return n._type=t._PdfAnnotationType.angleMeasurementAnnotation,n}return Jt(i,e),Object.defineProperty(i.prototype,"measure",{get:function(){return void 0===this._measure&&this._dictionary.has("Measure")&&(this._measure=this._dictionary.get("Measure")),this._measure},set:function(t){t&&!this._isLoaded&&(this._measure=t,this.caption.cap=!0)},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(!this._pointArray)throw new Error("Points cannot be null or undefined");var t;if(this._dictionary.has("BS"))t=this.border.width;else{var e=new fn(this._crossReference);e.set("Type",hn.get("Border")),this._dictionary.set("BS",e)}this._dictionary.has("C")||(this.color=[0,0,0]),void 0===t&&(t=1),this._appearanceTemplate=this._createAngleMeasureAppearance()},i.prototype._doPostProcess=function(t){var e;if(void 0===t&&(t=!1),this._isLoaded){if(!t&&this._setAppearance&&(this._appearanceTemplate=this._createAngleMeasureAppearance()),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")){var i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new O(i,this._crossReference))}}else if(this._postProcess(),!this._appearanceTemplate&&t)if(this._dictionary.has("AP")){if((e=this._dictionary.get("AP"))&&e.has("N")){i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new O(i,this._crossReference))}}else this._appearanceTemplate=this._createAngleMeasureAppearance();if(t&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);if(!this._appearanceTemplate._content.dictionary.has("Matrix")){var a=this._appearanceTemplate._content.dictionary.getArray("BBox");a&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-a[0],-a[1]])}this._flattenAnnotationTemplate(this._appearanceTemplate,r)}},i.prototype._createAngleMeasureAppearance=function(){var e=this.border.width,i=this._obtainFont();null==i&&(i=new Pt(t.PdfFontFamily.helvetica,8,t.PdfFontStyle.regular));var n=new j(t.PdfTextAlignment.center,t.PdfVerticalAlignment.middle),r=this._calculateAngle()*(180/Math.PI);r<0&&(r=-r),r>180&&(r=360-r),this._dictionary.update("Vertices",this._linePoints);var a="font:"+i._metrics._postScriptName+" "+i._size+"pt; color:"+this._colorToHex(this.color);this._dictionary.update("DS",a),(this.text===" "+r.toFixed(2)+""||this.text)&&this._dictionary.update("Contents",this.text),void 0===this.subject&&this._dictionary.update("Subject","Angle Measurement"),this._dictionary.update("MeasurementTypes",1152),this._dictionary.update("Subtype",new hn("PolyLine")),this._dictionary.update("IT",new hn("PolyLineAngle"));var s=new fn,o=[],h=[],c=[],_=[],d=[];s.set("Type",hn.get("measureDictionary")),s.set("R","1 in = 1 in"),s.set("Subtype","RL"),s.set("TargetUnitConversion",.1388889);var l=new fn;l.set("U","in"),l.set("Type","NumberFormat"),l.set("C",1),l.set("D",1),l.set("SS",""),o.push(l);var p=new fn;p.set("U",""),p.set("Type","NumberFormat"),p.set("C",1),p.set("D",1),p.set("FD",!0),p.set("SS",""),h.push(p);var f=new fn;f.set("U","sq in"),f.set("Type","NumberFormat"),f.set("C",1),f.set("D",1),f.set("FD",!0),f.set("SS",""),c.push(f);var u=new fn;u.set("U","cu in"),u.set("Type","NumberFormat"),u.set("C",1),u.set("D",1),u.set("FD",!0),u.set("SS",""),d.push(u);var g=new fn;g.set("U","in"),g.set("Type","NumberFormat"),g.set("C",1),g.set("D",1),g.set("SS",""),_.push(g),s.set("D",o),s.set("T",h),s.set("A",c),s.set("X",_),s.set("V",d);var y=this._crossReference._getNextReference();this._crossReference._cacheMap.set(y,s),s._updated=!0,this._dictionary.update("Measure",y);var b=[0,0,0,0],m=this._getAngleBoundsValue(),v=this._obtainLinePoints(),w=[];w.push(0);for(var S=1;S<v.length;S++)w.push(1);(new It)._addRectangle(v[1][0]-this._radius,-(v[1][1]+this._radius),2*this._radius,2*this._radius);var P=i.measureString(r.toString()+"",[0,0],n,0,0),A=[(this._firstIntersectionPoint[0]+this._secondIntersectionPoint[0])/2,(this._firstIntersectionPoint[1]+this._secondIntersectionPoint[1])/2],x=[v[1][0],-v[1][1]],k=v[1][0]+this._radius*Math.cos((this._startAngle+this._sweepAngle/2)*(Math.PI/180)),T=v[1][1]+this._radius*Math.sin((this._startAngle+this._sweepAngle/2)*(Math.PI/180)),R=[A[0],A[1]],F=R[0]-x[0],I=R[1]-x[1],N=Math.atan2(I,F)*(180/Math.PI),C=!1,M=!1,B=!1,L=!1;N>0?N<45?M=!0:N>=45&&N<135?B=!0:C=!0:0===(N=-N)?(new It)._addRectangle(m[0],m[1],m[2],m[3]):N<45?M=!0:N>=45&&N<135?L=!0:C=!0,0===b[0]&&0===b[1]&&0===b[2]&&0===b[3]&&(b=m,this.bounds={x:m[0],y:m[1],width:m[2],height:m[3]});var E=new It;E._pathTypes=w,E._points=v,this._dictionary.set("Rect",[b[0],b[1],b[0]+b[2],b[1]+b[3]]);var D=new Qt(this,m);D._normal=new O(b,this._crossReference);var z=D._normal;z._writeTransformation=!1;var V=D._normal.graphics,U=e/2,W=new Ge(this._color,U);this.border.style===t.PdfBorderStyle.dashed&&(W._dashStyle=t._PdfDashStyle.dash);var H=new He(this._color);V._save(),E._addArc(v[1][0]-this._radius,v[1][1]-this._radius,2*this._radius,2*this._radius,this._startAngle,this._sweepAngle),V._drawPath(E,W),B?V._drawString(r.toString()+"",i,[k-P[0]/2,-(-T+i._metrics._getHeight()+2),0,0],null,H):M?V._drawString(r.toString()+"",i,[k+2,-(-T+i._metrics._getHeight()/2),0,0],null,H):C?V._drawString(r.toString()+"",i,[k-P[0]-2,-(-T+i._metrics._getHeight()/2),0,0],null,H):L&&V._drawString(r.toString()+"",i,[k-P[0]/2,T+2,0,0],null,H),V._restore(),V._template._content.dictionary._updated=!0;var G=this._crossReference._getNextReference();this._crossReference._cacheMap.set(G,V._template._content),V._template._content.reference=G;var q=new fn;return q.set("N",G),q._updated=!0,this._dictionary.set("AP",q),z},i.prototype._getAngleBoundsValue=function(){for(var t=this._obtainLinePoints(),e=0;e<t.length;e++)t[Number.parseInt(e.toString(),10)][1]=-t[Number.parseInt(e.toString(),10)][1];var i=new It;return i._points=t,i._pathTypes=[0,1,1],i._getBounds()},i.prototype._obtainLinePoints=function(){var t,e;if(this._linePoints){t=new Array(this._linePoints.length);for(var i=0;i<this._linePoints.length;i++)t[Number.parseInt(i.toString(),10)]=this._linePoints[Number.parseInt(i.toString(),10)];e=new Array(t.length/2);for(var n=0,r=0;r<t.length;r+=2)e[Number.parseInt(n.toString(),10)]=[t[Number.parseInt(r.toString(),10)],-t[r+1]],n++}return e},i.prototype._calculateAngle=function(){var t=[0,0];void 0!==this._linePoints&&0===this._linePoints.length&&this._isLoaded&&this._dictionary.has("Vertices")&&(this._linePoints=this._dictionary.get("Vertices"));for(var e=0;e<this._linePoints.length;e++)t[Number.parseInt(e.toString(),10)]=this._linePoints[Number.parseInt(e.toString(),10)];for(var i=[],n=0;n<t.length;n+=2)i.push([t[Number.parseInt(n.toString(),10)],t[n+1]]);var r=i[0],a=i[1],s=i[2],o=Math.sqrt(Math.pow(a[0]-r[0],2)+Math.pow(a[1]-r[1],2)),h=Math.sqrt(Math.pow(a[0]-s[0],2)+Math.pow(a[1]-s[1],2));this._radius=Math.min(o,h)/4;var c,_,d=new It;d._points=i,d._pathTypes=[0,1,1];var l=this._findLineCircleIntersectionPoints(a[0],a[1],this._radius,r,a,c,_);c=l.first,_=l.second,0===this._firstIntersectionPoint[0]&&0===this._firstIntersectionPoint[1]&&(this._firstIntersectionPoint=_),c=[0,0],_=[0,0],c=(l=this._findLineCircleIntersectionPoints(a[0],a[1],this._radius,s,a,c,_)).first,_=l.second,0===this._secondIntersectionPoint[0]&&0===this._secondIntersectionPoint[1]&&(this._secondIntersectionPoint=_);var p=this._firstIntersectionPoint[0]-a[0],f=this._firstIntersectionPoint[1]-a[1],u=Math.atan2(f,p)*(180/Math.PI);p=this._secondIntersectionPoint[0]-a[0],f=this._secondIntersectionPoint[1]-a[1];var g=Math.atan2(f,p)*(180/Math.PI);return g=g>0?g=360-g:-g,180===(u=u>0?u=360-u:-u)&&0===g?(this._startAngle=u,this._sweepAngle=180):0===u&&180===g?(this._startAngle=g,this._sweepAngle=180):u<180?u>g?(this._startAngle=g,this._sweepAngle=u-g):u+180<g?(this._startAngle=g,this._sweepAngle=360-g+u):(this._startAngle=u,this._sweepAngle=g-u):u<g?(this._startAngle=u,this._sweepAngle=g-u):u-180>g?(this._startAngle=u,this._sweepAngle=360-u+g):(this._startAngle=g,this._sweepAngle=u-g),Math.atan2(s[0]-a[0],s[1]-a[1])-Math.atan2(r[0]-a[0],r[1]-a[1])},i.prototype._findLineCircleIntersectionPoints=function(t,e,i,n,r,a,s){var o=r[0]-n[0],h=r[1]-n[1],c=o*o+h*h,_=2*(o*(n[0]-t)+h*(n[1]-e)),d=_*_-4*c*((n[0]-t)*(n[0]-t)+(n[1]-e)*(n[1]-e)-i*i);if(c<=1e-7||d<0)a=[Number.NaN,Number.NaN],s=[Number.NaN,Number.NaN];else if(0===d){var l=-_/(2*c);a=[n[0]+l*o,n[1]+l*h],s=[Number.NaN,Number.NaN]}else{l=(-_+Math.sqrt(d))/(2*c);a=[n[0]+l*o,n[1]+l*h],l=(-_-Math.sqrt(d))/(2*c),s=[n[0]+l*o,n[1]+l*h]}return{first:a,second:s}},i}(Yt),oe=function(e){function i(i,n){var r=e.call(this)||this;return r._inkPointsCollection=[],r._dictionary=new fn,r._dictionary.update("Type",hn.get("Annot")),r._dictionary.update("Subtype",hn.get("Ink")),void 0!==i&&(r._points=i,r.bounds={x:i[0],y:i[1],width:i[2],height:i[3]}),void 0!==n&&(r._linePoints=n),r._type=t._PdfAnnotationType.inkAnnotation,r}return Jt(i,e),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(void 0===this._points||null===this._points)throw new Error("Points cannot be null or undefined");var t;this._dictionary.has("BS")?t=this.border.width:((a=new fn(this._crossReference)).set("Type",hn.get("Border")),this._dictionary.set("BS",a));this._dictionary.has("C")||(this.color=[0,0,0]),void 0===t&&(t=1);var e=this._addInkPoints(),i=[e[0],e[1],e[0]+e[2],e[1]+e[3]];if(this._dictionary.update("Rect",i),this._setAppearance){var n=new Qt(this,e);n._normal=new O(e,this._crossReference);var r=n._normal;Bi(r,this._getRotationAngle()),r._writeTransformation=!1,this._appearanceTemplate=this._createInkAppearance(r);var a=new fn;this._appearanceTemplate._content.dictionary._updated=!0;var s=this._crossReference._getNextReference();this._crossReference._cacheMap.set(s,this._appearanceTemplate._content),this._appearanceTemplate._content.reference=s,a.set("N",s),a._updated=!0,this._dictionary.set("AP",a)}},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),this._isFlatten=t,this._isLoaded){if(this._setAppearance||t&&!this._dictionary.has("AP")){0===this._inkPointsCollection.length&&(this._inkPointsCollection=this._obtainInkListCollection());var e=this._getInkBoundsValue();if(Bi(a=new O(e,this._crossReference),this._getRotationAngle()),a._writeTransformation=!1,this._appearanceTemplate=this._createInkAppearance(a),this._dictionary.update("Rect",[e[0],e[1],e[0]+e[2],e[1]+e[3]]),!t){var i=new fn;this._appearanceTemplate._content.dictionary._updated=!0;var n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,this._appearanceTemplate._content),this._appearanceTemplate._content.reference=n,i.set("N",n),i._updated=!0,this._dictionary.set("AP",i)}}if(!this._appearanceTemplate&&t&&this._dictionary.has("AP"))if((i=this._dictionary.get("AP"))&&i.has("N")){var r=i.get("N");n=i.getRaw("N");r&&(n&&(r.reference=n),this._appearanceTemplate=new O(r,this._crossReference))}}else if(this._postProcess(),!this._appearanceTemplate&&t)if(this._dictionary.has("AP")){if((i=this._dictionary.get("AP"))&&i.has("N")){r=i.get("N"),n=i.getRaw("N");r&&(n&&(r.reference=n),this._appearanceTemplate=new O(r,this._crossReference))}}else{0===this._inkPointsCollection.length&&(this._inkPointsCollection=this._obtainInkListCollection());var a;e=this._getInkBoundsValue();Bi(a=new O(e,this._crossReference),this._getRotationAngle()),a._writeTransformation=!1,this._appearanceTemplate=this._createInkAppearance(a),this._dictionary.update("Rect",[e[0],e[1],e[0]+e[2],e[1]+e[3]])}if(void 0!==this.flattenPopUps&&this.flattenPopUps&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),t&&this._appearanceTemplate&&null!==this._appearanceTemplate._size&&void 0!==this._appearanceTemplate._size){var s=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);if(!this._appearanceTemplate._content.dictionary.has("Matrix")){var o=this._appearanceTemplate._content.dictionary.getArray("BBox");o&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-o[0],-o[1]])}this._flattenAnnotationTemplate(this._appearanceTemplate,s)}},i.prototype._createInkAppearance=function(e){var i=e.graphics;if(null!==this._inkPointsCollection&&this._inkPointsCollection.length>0&&null!==this.color&&void 0!==this._color)for(var n=0;n<this._inkPointsCollection.length;n++)if(this._inkPointsCollection[Number.parseInt(n.toString(),10)].length%2==0){var r=this._inkPointsCollection[Number.parseInt(n.toString(),10)];if(2===r.length)r=[r[0]-.5,r[1]-.5,r[0]+.5,r[1]+.5];for(var a=new Array(r.length/2),s=0,o=0;o<r.length;o+=2)a[Number.parseInt(s.toString(),10)]=[r[Number.parseInt(o.toString(),10)],r[o+1]],s++;var h=s+2*s-2,c=new Array(h),_=[],d=[],l=this._getControlPoints(a,_,d);_=l.controlP1,d=l.controlP2;for(var p=0,f=0;f<h-1;f+=3)c[Number.parseInt(f.toString(),10)]=a[Number.parseInt(p.toString(),10)],c[f+1]=_[Number.parseInt(p.toString(),10)],c[f+2]=d[Number.parseInt(p.toString(),10)],p++;if(c[h-1]=a[a.length-1],null!==c){for(var u=c,g=0;g<u.length;g++){var y=u[Number.parseInt(g.toString(),10)];u[Number.parseInt(g.toString(),10)]=[y[0],-y[1]]}var b=new It,m=null;if(2===a.length){var v=a[1][0]-a[0][0],w=a[1][1]-a[0][1];b._addEllipse(a[0][0]+.5,-(a[0][1]+w+.5),v,w),(m=new It)._pathTypes=b._pathTypes,m._points=b._points}else b._addBezierPoints(u),(m=new It)._pathTypes=b._pathTypes,m._points=u;var S=new Ge(this.color,this.border.width);if(void 0!==this.opacity&&this._opacity<1){var P=i._save();i._setTransparency(this._opacity),S._lineCap=t._PdfLineCap.round,i._drawPath(m,S),i._restore(P)}else i._drawPath(m,S)}}return e},i.prototype._getControlPoints=function(t,e,i){if(null===t)throw new Error("pointCollection");var n=t.length-1;if(n<1)throw new Error("At least two knot PointFs required pointCollection");1===n&&(i=[[2*(e=[[(2*t[0][0]+t[1][0])/3,(2*t[0][1]+t[1][1])/3]])[0][0]-t[0][0],2*e[0][1]-t[0][1]]]);for(var r=[],a=1;a<n-1;++a)r[Number.parseInt(a.toString(),10)]=4*t[Number.parseInt(a.toString(),10)][0]+2*t[a+1][0];r[0]=t[0][0]+2*t[1][0],r[n-1]=(8*t[n-1][0]+t[Number.parseInt(n.toString(),10)][0])/2;var s=this._getSingleControlPoint(r);for(a=1;a<n-1;++a)r[Number.parseInt(a.toString(),10)]=4*t[Number.parseInt(a.toString(),10)][1]+2*t[a+1][1];r[0]=t[0][1]+2*t[1][1],r[n-1]=(8*t[n-1][1]+t[Number.parseInt(n.toString(),10)][1])/2;var o=this._getSingleControlPoint(r);e=new Array(n),i=new Array(n);for(a=0;a<n;++a)if(e[Number.parseInt(a.toString(),10)]=[s[Number.parseInt(a.toString(),10)],o[Number.parseInt(a.toString(),10)]],a<n-1)i[Number.parseInt(a.toString(),10)]=[2*t[a+1][0]-s[a+1],2*t[a+1][1]-o[a+1]];else{var h=(t[Number.parseInt(n.toString(),10)][0]+s[n-1])/2,c=(t[Number.parseInt(n.toString(),10)][1]+o[n-1])/2;i[Number.parseInt(a.toString(),10)]=[h,c]}return{controlP1:e,controlP2:i}},i.prototype._getSingleControlPoint=function(t){var e=t.length,i=[],n=[],r=2;i[0]=t[0]/r;for(var a=1;a<e;a++)n[Number.parseInt(a.toString(),10)]=1/r,r=(a<e-1?4:3.5)-n[Number.parseInt(a.toString(),10)],i[Number.parseInt(a.toString(),10)]=(t[Number.parseInt(a.toString(),10)]-i[a-1])/r;for(a=1;a<e;a++)i[e-a-1]-=n[e-a]*i[e-a];return i},i.prototype._addInkPoints=function(){var t=[];if(null!==this._linePoints&&this._inkPointsCollection.push(this._linePoints),null!==this._inkPointsCollection)for(var e=0;e<this._inkPointsCollection.length;e++){var i=this._inkPointsCollection[Number.parseInt(e.toString(),10)];t.push(i)}return this._dictionary.update("InkList",t),this._getInkBoundsValue()},i.prototype._getInkBoundsValue=function(){var t=[0,0,0,0];t=void 0===this.bounds?[this._points[0],this._points[1],this._points[2],this._points[3]]:[this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height];var e=this.border.width;if(null!==this._inkPointsCollection&&this._inkPointsCollection.length>0){for(var i=[],n=0;n<this._inkPointsCollection.length;n++){var r=this._inkPointsCollection[Number.parseInt(n.toString(),10)];if(null!==r&&r.length%2==0)for(var a=0;a<r.length;a++)i.push(r[Number.parseInt(a.toString(),10)])}var s=!1;this._isLoaded||2!==i.length||(s=!0,i.push(i[0]+1),i.push(i[1]+1));var o=new Array(i.length/2),h=0;for(a=0;a<i.length;a+=2)o[Number.parseInt(h.toString(),10)]=[i[Number.parseInt(a.toString(),10)],i[a+1]],h++;if(this._isLoaded)if(o.length>0){var c=0,_=0,d=0,l=0,p=!0;for(n=0;n<o.length;n++){var f=o[Number.parseInt(n.toString(),10)];p?(c=f[0],_=f[1],p=!1):(f[0]<c?c=f[0]:f[0]>d&&(d=f[0]),f[1]<_?_=f[1]:f[1]>l&&(l=f[1]))}t=[c,_,d-c,l-_],this.bounds={x:t[0],y:t[1],width:t[2],height:t[3]},(this._isFlatten||this._setAppearance)&&(t[0]=this.bounds.x-e,t[1]=this.bounds.y-e,t[2]=this.bounds.width+2*e,t[3]=this.bounds.height+2*e)}else t=this._points?this._points:o.length>0?this._dictionary.get("Rect"):[this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height];else t=this._calculateInkBounds(o,t,e,s);this.bounds={x:t[0],y:t[1],width:t[2],height:t[3]}}return t},i.prototype._calculateInkBounds=function(t,e,i,n){if(t.length>5){for(var r=0,a=0,s=0,o=0,h=!0,c=0;c<t.length;c++){var _=t[Number.parseInt(c.toString(),10)];h?(r=_[0],a=_[1],s=_[0],o=_[1],h=!1):(_[0]<r?r=_[0]:_[0]>s&&(s=_[0]),_[1]<a?a=_[1]:_[1]>o&&(o=_[1]))}if(e[2]<s&&(s=e[2]),e[3]<o&&(o=e[3]),e=[r,a,s,o],this._isFlatten||this._setAppearance){var d=n?2:3;e[0]=e[0]-i,e[1]=e[1]-i,e[2]=e[2]+d*i,e[3]=e[3]+d*i}}else e=void 0===this._points&&t.length>0?this._dictionary.get("Rect"):this._points;return e},i.prototype._obtainInkListCollection=function(){var t=[];if(this._dictionary.has("InkList"))for(var e=this._dictionary.getArray("InkList"),i=[],n=0;n<e.length;n++){for(var r=e[Number.parseInt(n.toString(),10)],a=0;a<r.length;a++)i.push(r[Number.parseInt(a.toString(),10)]);t.push(i)}return t},i}(Zt),he=function(e){function i(i,n,r,a,s){var o=e.call(this)||this;return o._icon=t.PdfPopupIcon.note,o._iconString="",o._stateModel=t.PdfAnnotationStateModel.none,o._state=t.PdfAnnotationState.none,o._open=!1,o._isReview=!1,o._isComment=!1,o._dictionary=new fn,o._dictionary.update("Type",hn.get("Annot")),o._dictionary.update("Subtype",hn.get("Text")),void 0!==i&&(o.text=i),void 0!==n&&void 0!==r&&void 0!==a&&void 0!==s&&(o.bounds={x:n,y:r,width:a,height:s}),o._type=t._PdfAnnotationType.popupAnnotation,o}return Jt(i,e),Object.defineProperty(i.prototype,"open",{get:function(){return this._dictionary.has("Open")&&(this._open=this._dictionary.get("Open")),this._open},set:function(t){void 0!==t&&(this._open=t,this._dictionary.update("Open",this._open))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"icon",{get:function(){return this._dictionary.has("Name")&&(this._icon=Ui(this._dictionary.get("Name").name)),this._icon},set:function(t){void 0!==t&&(this._icon=t,this._dictionary.update("Name",hn.get(this._obtainIconName(this._icon))))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stateModel",{get:function(){return this._dictionary.has("StateModel")&&(this._stateModel=qi(this._dictionary.get("StateModel"))),this._stateModel},set:function(t){void 0!==t&&(this._stateModel=t,this._dictionary.update("StateModel",Gi(this._stateModel)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"state",{get:function(){return this._dictionary.has("State")&&(this._state=Hi(this._dictionary.get("State"))),this._state},set:function(t){void 0!==t&&(this._state=t,this._dictionary.update("State",Wi(this._state)))},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),e.has("IRT")&&(n._isReview=Zi(e),n._isReview||(n._isComment=$i(e))),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var t;this._dictionary.has("BS")?t=this.border.width:((i=new fn(this._crossReference)).set("Type",hn.get("Border")),this._dictionary.set("BS",i));void 0===t&&(t=1);var e=[this.bounds.x,this.bounds.y,this.bounds.x+this.bounds.width,this.bounds.y+this.bounds.height];if(this._dictionary.update("Rect",e),this._setAppearance){this._appearanceTemplate=this._createPopupAppearance();var i=new fn;this._appearanceTemplate._content.dictionary._updated=!0;var n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,this._appearanceTemplate._content),this._appearanceTemplate._content.reference=n,i.set("N",n),i._updated=!0,this._dictionary.set("AP",i)}var r=this._page.size,a=[this.bounds.x,r[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[a[0],a[1],a[0]+a[2],a[1]+a[3]])},i.prototype._doPostProcess=function(t){var e;if(void 0===t&&(t=!1),this._isLoaded){if(!this._appearanceTemplate&&this._isFlattenPopUps&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")){var i=e.get("N"),n=e.getRaw("N");if(i&&(n&&(i.reference=n),this._appearanceTemplate=new O(i,this._crossReference)),null!==this._appearanceTemplate){var r=this._page._graphics._save();this.opacity<1&&this._page._graphics._setTransparency(this.opacity),this._page._graphics._drawTemplate(this._appearanceTemplate,this.bounds),this._page._graphics._restore(r)}}}else if(this._postProcess(),!this._appearanceTemplate&&t)if(this._dictionary.has("AP")){if((e=this._dictionary.get("AP"))&&e.has("N")){i=e.get("N"),n=e.getRaw("N");i&&(n&&(i.reference=n),this._appearanceTemplate=new O(i,this._crossReference))}}else this._appearanceTemplate=this._createPopupAppearance();void 0!==this.flattenPopUps&&this.flattenPopUps&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),t&&null!==this._page&&void 0!==this._page&&this._removeAnnotationFromPage(this._page,this)},i.prototype._createPopupAppearance=function(){var t=[0,0,this.bounds.width,this.bounds.height],e=new Qt(this,t);e._normal=new O(t,this._crossReference);var i=e._normal;Bi(i,this._getRotationAngle());var n=e._normal.graphics;if(this._dictionary.has("Name")&&("Comment"===this._dictionary.get("Name").name&&this._dictionary.has("Rect")&&null!==this._dictionary.getArray("Rect"))){var r=new Ge([0,0,0],.3),a=new He(this.color),s=new Ge([255,255,255],1),o=new Array;o.push([6,8]),o.push([9,8]),o.push([4,12]);var h=new It;0===this.color[0]&&0===this.color[0]&&0===this.color[0]&&(a=new He([255,215,0])),n._save();var c=new O([0,0,15,14],this._crossReference);c.graphics._drawRectangle(0,0,15,14,r,a),c.graphics._drawPolygon(o,r,new He([255,255,255])),h._addEllipse(2,2,11,8),c.graphics._drawPath(h,r,new He([255,255,255])),c.graphics._drawArc(2,2,11,8,108,12.7,s),c.graphics._drawLine(r,4,12,6.5,10),n._drawTemplate(c,{x:0,y:0,width:this.bounds.width,height:this.bounds.height}),n._restore()}return i},i.prototype._obtainIconName=function(e){switch(e){case t.PdfPopupIcon.note:this._iconString="Note";break;case t.PdfPopupIcon.comment:this._iconString="Comment";break;case t.PdfPopupIcon.help:this._iconString="Help";break;case t.PdfPopupIcon.insert:this._iconString="Insert";break;case t.PdfPopupIcon.key:this._iconString="Key";break;case t.PdfPopupIcon.newParagraph:this._iconString="NewParagraph";break;case t.PdfPopupIcon.paragraph:this._iconString="Paragraph"}return this._iconString},i}(Zt),ce=function(e){function i(i,n,r,a,s){var o=e.call(this)||this;return o._dictionary=new fn,o._dictionary.update("Type",hn.get("Annot")),o._dictionary.update("Subtype",hn.get("Link")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==a&&(o.bounds={x:i,y:n,width:r,height:a}),null!=s&&(o._fileName=s),o._type=t._PdfAnnotationType.fileLinkAnnotation,o}return Jt(i,e),Object.defineProperty(i.prototype,"action",{get:function(){if(void 0===this._action&&this._dictionary.has("A")){var t=this._dictionary.get("A");if(t&&t.has("Next")){var e=t.get("Next");if(Array.isArray(e))for(var i=0;i<e.length;i++){var n=e[Number.parseInt(i.toString(),10)];if(n&&n instanceof _n){var r=this._crossReference._fetch(n);r.has("JS")&&(this._action=r.get("JS"))}}}}return this._action},set:function(t){if(this._isLoaded||"string"!=typeof t||(this._action=t),this._isLoaded&&"string"==typeof t&&this.action!==t&&this._dictionary.has("A")){var e=this._dictionary.get("A");if(e&&e.has("Next")){var i=e.get("Next");if(Array.isArray(i))for(var n=0;n<i.length;n++){var r=i[Number.parseInt(n.toString(),10)];if(r&&r instanceof _n){var a=this._crossReference._fetch(r);a.has("JS")&&(a.update("JS",t),this._action=t,this._dictionary._updated=!0)}}}}},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var t;if(this._dictionary.has("BS"))t=this.border.width;else{var e=new fn(this._crossReference);e.set("Type",hn.get("Border")),this._dictionary.set("BS",e)}void 0===t&&(t=1),this._addAction();var i=this._page.size,n=[this.bounds.x,i[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[n[0],n[1],n[0]+n[2],n[1]+n[3]])},i.prototype._addAction=function(){var t=new fn;t.set("Type",hn.get("Action")),t.set("S",hn.get("Launch"));var e=new fn;if(e.set("Type",hn.get("Filespec")),e.set("UF",this._fileName),void 0!==this._action&&null!==this._action){var i=new fn;i.set("Type",hn.get("Action")),i.set("S",hn.get("JavaScript")),i.set("JS",this._action);var n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,i),i._updated=!0,t.set("Next",[n])}var r=this._crossReference._getNextReference();this._crossReference._cacheMap.set(r,e),e._updated=!0,t.set("F",r),t._updated=!0,this._dictionary.set("A",t)},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),this._isLoaded||this._postProcess(),t){var e=void 0;if(this._dictionary.has("AP")){var i=this._dictionary.get("AP");if(i&&i.has("N")){e=i.get("N");var n=i.getRaw("N");n&&e&&(e.reference=n)}}if(e){var r=new O(e,this._crossReference),a=this._validateTemplateMatrix(r._content.dictionary);this._flattenAnnotationTemplate(r,a)}}},i}(Yt),_e=function(e){function i(i,n,r,a,s){var o=e.call(this)||this;return o._dictionary=new fn,o._dictionary.update("Type",hn.get("Annot")),o._dictionary.update("Subtype",hn.get("Link")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==a&&(o.bounds={x:i,y:n,width:r,height:a}),null!=s&&(o._uri=s),o._type=t._PdfAnnotationType.uriAnnotation,o}return Jt(i,e),Object.defineProperty(i.prototype,"uri",{get:function(){if(void 0===this._uri&&this._dictionary.has("A")){var t=this._dictionary.get("A");t.has("URI")&&(this._uri=t.get("URI"))}return this._uri},set:function(t){if("string"==typeof t)if(this._isLoaded&&this._dictionary.has("A")&&t!==this.uri){var e=this._dictionary.get("A");e.has("URI")&&(this._uri=t,e.update("URI",t),this._dictionary._updated=!0)}else this._uri=t},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var t;if(this._dictionary.has("BS"))t=this.border.width;else{var e=new fn(this._crossReference);e.set("Type",hn.get("Border")),this._dictionary.set("BS",e)}void 0===t&&(t=1),this._addAction();var i=this._page.size,n=[this.bounds.x,i[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[n[0],n[1],n[0]+n[2],n[1]+n[3]])},i.prototype._addAction=function(){var t=new fn;t.set("Type",hn.get("Action")),t.set("S",hn.get("URI")),void 0!==this._uri&&t.set("URI",this._uri),t._updated=!0,this._dictionary.set("A",t),this._dictionary.update("Border",[this.border.hRadius,this.border.vRadius,this.border.width])},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),this._isLoaded||this._postProcess(),t){var e=void 0;if(this._dictionary.has("AP")){var i=this._dictionary.get("AP");if(i&&i.has("N")){e=i.get("N");var n=i.getRaw("N");n&&e&&(e.reference=n)}}if(e){var r=new O(e,this._crossReference),a=this._validateTemplateMatrix(r._content.dictionary);this._flattenAnnotationTemplate(r,a)}}},i}(Yt),de=function(e){function i(i,n,r,a){var s=e.call(this)||this;return s._dictionary=new fn,s._dictionary.update("Type",hn.get("Annot")),s._dictionary.update("Subtype",hn.get("Link")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==a&&(s.bounds={x:i,y:n,width:r,height:a}),s._type=t._PdfAnnotationType.documentLinkAnnotation,s}return Jt(i,e),Object.defineProperty(i.prototype,"destination",{get:function(){return this._isLoaded&&(this.destination=this._obtainDestination()),this._destination},set:function(t){null!==t&&(this._destination=t)},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");this._addDocument();var t=this._page.size,e=[this.bounds.x,t[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[e[0],e[1],e[0]+e[2],e[1]+e[3]])},i.prototype._obtainDestination=function(){if(this._dictionary.has("Dest")){var e=this._dictionary.get("Dest"),i=void 0;if(e[0]instanceof _n&&(i=e[0]),null==i&&"number"==typeof e[0]){var n=e[0],r=this._crossReference._document.getPage(n);if("XYZ"===(p=e[1]).name){var a=e[2],s=e[3],o=e[4],h=null!=s?this._page.size[1]-s:0,c=null!=a?a:0;this._destination=new Ee(r,[c,h]),null!=o&&(this._destination.zoom=o),(void 0===a&&null===a||void 0===s&&null===s||void 0===o&&null===o)&&this._destination._setValidation(!1)}else r&&(this._destination=new Ee(r),this._destination.mode=t.PdfDestinationMode.fitToPage)}if(i)if(e[1]instanceof hn)if(p=e[1])if("XYZ"===p.name){a=e[2];var _=e[3];o=e[4],h=null!=_?this._page.size[1]-_:0,c=null!=a?a:0;this._destination=new Ee(this._page,[c,h]),null!=o&&(this._destination.zoom=o),(void 0===a&&null===a||void 0===_&&null===_||void 0===o&&null===o)&&this._destination._setValidation(!1)}else this._page&&"Fit"===p.name&&(this._destination=new Ee(this._page),this._destination.mode=t.PdfDestinationMode.fitToPage)}else if(this._dictionary.has("A")&&!this._destination){var d=this._dictionary.get("A");if(d.has("D")){var l=d.get("D");if(l){var p,f=this._crossReference._fetch(l),u=void 0;if(Array.isArray(f)&&(u=f),u)if(u[0]instanceof _n)if(this._page)if("FitBH"===(p=u[1]).name||"FitH"===p.name){var g=u[2];h=null!=g?this._page.size[1]-g:0;this._destination=new Ee(this._page,[0,h]),null==g&&this._destination._setValidation(!1)}else if("XYZ"===p.name){a=u[2];var y=u[3];o=u[4];if(this._page){h=null!=y?this._page.size[1]-y:0,c=null!=a?a:0;this._destination=new Ee(this._page,[c,h]),null!=o&&(this._destination.zoom=o),null==a&&null==y&&null==o||this._destination._setValidation(!1)}}else if("FitR"===p.name){if(6===u.length){a=u[2];var b=u[3],m=u[4],v=u[5];this._destination=new Ee(this._page,[a,b,m,v])}}else this._page&&"Fit"===p.name&&(this._destination=new Ee(this._page),this._destination.mode=t.PdfDestinationMode.fitToPage)}}}return this._destination},i.prototype._addDocument=function(){this.destination&&this._dictionary.set("Dest",this.destination._array)},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),this._isLoaded||this._postProcess(),t){var e=void 0;if(this._dictionary.has("AP")){var i=this._dictionary.get("AP");if(i&&i.has("N")){e=i.get("N");var n=i.getRaw("N");n&&e&&(e.reference=n)}}if(e){var r=new O(e,this._crossReference),a=this._validateTemplateMatrix(r._content.dictionary);this._flattenAnnotationTemplate(r,a)}}},i}(Yt),le=function(e){function i(i,n,r,a,s,o,h,c){var _=e.call(this)||this;return _._dictionary=new fn,_._dictionary.update("Type",hn.get("Annot")),_._dictionary.update("Subtype",hn.get("Link")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==a&&(_.bounds={x:i,y:n,width:r,height:a}),_._textWebLink=null!=c?c:"",null!=s&&(_._brush=new He(s)),null!=o&&(_._pen=new Ge(o,h||1)),_._type=t._PdfAnnotationType.textWebLinkAnnotation,_}return Jt(i,e),Object.defineProperty(i.prototype,"font",{get:function(){return this._font},set:function(t){this._font=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"url",{get:function(){if(void 0===this._url&&this._dictionary.has("A")){var t=this._dictionary.get("A");t.has("URI")&&(this._url=t.get("URI"))}return this._url},set:function(t){if("string"==typeof t)if(this._isLoaded&&this._dictionary.has("A")){var e=this._dictionary._get("A"),i=this._dictionary.get("A");i&&i.has("URI")&&(this._url=t,i.update("URI",t),e instanceof _n||(this._dictionary._updated=i._updated))}else this._url=t},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");this._addAction();var t=this._page.size,e=[this.bounds.x,t[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[e[0],e[1],e[0]+e[2],e[1]+e[3]])},i.prototype._addAction=function(){var e=[this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height];void 0!==this.font&&null!==this.font||(this.font=new Pt(t.PdfFontFamily.helvetica,10,t.PdfFontStyle.regular),this._font=this.font);var i=new j(t.PdfTextAlignment.left,t.PdfVerticalAlignment.top);this._page._graphics._drawString(this._textWebLink,this.font,e,this._pen,this._brush,i);var n=new fn;n.set("Type",hn.get("Action")),n.set("S",hn.get("URI")),void 0!==this._url&&n.set("URI",this._url),n._updated=!0,this._dictionary.set("A",n),this._dictionary.update("Border",[0,0,0])},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),this._isLoaded||this._postProcess(),t){var e=void 0;if(this._dictionary.has("AP")){var i=this._dictionary.get("AP");if(i&&i.has("N")){e=i.get("N");var n=i.getRaw("N");n&&e&&(e.reference=n)}}if(e){var r=new O(e,this._crossReference),a=this._validateTemplateMatrix(r._content.dictionary);this._flattenAnnotationTemplate(r,a)}else this._isLoaded&&null!==this._page&&void 0!==this._page&&this._removeAnnotationFromPage(this._page,this)}},i}(Yt),pe=function(e){function i(i,n,r,a,s,o){var h=e.call(this)||this;return h._icon=t.PdfAttachmentIcon.pushPin,h._iconString="",h._dictionary=new fn,h._dictionary.update("Type",hn.get("Annot")),h._dictionary.update("Subtype",hn.get("FileAttachment")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==a&&(h.bounds={x:i,y:n,width:r,height:a}),void 0!==s&&(h._fileName=s),h._stream=new Nn("string"==typeof o?oi(o):o),h._type=t._PdfAnnotationType.fileAttachmentAnnotation,h}return Jt(i,e),Object.defineProperty(i.prototype,"icon",{get:function(){return this._dictionary.has("Name")&&(this._icon=Ki(this._dictionary.get("Name").name)),this._icon},set:function(t){void 0!==t&&(this._icon=t,this._dictionary.update("Name",hn.get(this._obtainIconName(this._icon))))},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var t=this._page.size,e=[this.bounds.x,t[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[e[0],e[1],e[0]+e[2],e[1]+e[3]]),this._addAttachment()},i.prototype._addAttachment=function(){var t=new fn;t.set("Type",hn.get("Filespec")),t.set("Desc",this._fileName),t.set("F",this._fileName),t.set("UF",this._fileName);var e=new fn;e.set("Type",hn.get("EmbeddedFile"));var i=new fn,n=new Date;i.set("CreationDate",n.toTimeString()),i.set("ModDate",(new Date).toTimeString()),i.set("Size",this._stream.length),e.set("Params",i),this._stream.dictionary=new fn,this._stream.dictionary=e,e._crossReference=this._crossReference;var r=[this._crossReference._newLine.charCodeAt(0),this._crossReference._newLine.charCodeAt(1),37,80,68,70,45];e._crossReference._writeObject(this._stream,r);var a=this._crossReference._getNextReference();this._crossReference._cacheMap.set(a,this._stream),e._updated=!0;var s=new fn;s.set("F",a),t.set("EF",s);var o=this._crossReference._getNextReference();this._crossReference._cacheMap.set(o,t),t._updated=!0,this._dictionary.update("FS",o)},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),this._isLoaded||this._postProcess(),t){var e=void 0;if(this._dictionary.has("AP")){var i=this._dictionary.get("AP");if(i&&i.has("N")){e=i.get("N");var n=i.getRaw("N");n&&e&&(e.reference=n)}}if(e){var r=new O(e,this._crossReference),a=this._validateTemplateMatrix(r._content.dictionary);this._flattenAnnotationTemplate(r,a)}}},i.prototype._obtainIconName=function(e){switch(e){case t.PdfAttachmentIcon.pushPin:this._iconString="PushPin";break;case t.PdfAttachmentIcon.tag:this._iconString="Tag";break;case t.PdfAttachmentIcon.graph:this._iconString="Graph";break;case t.PdfAttachmentIcon.paperClip:this._iconString="Paperclip"}return this._iconString},i}(Zt),fe=function(e){function i(){var i=e.call(this)||this;return i._type=t._PdfAnnotationType.movieAnnotation,i}return Jt(i,e),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),t){var e=void 0;if(this._dictionary.has("AP")){var i=this._dictionary.get("AP");if(i&&i.has("N")){e=i.get("N");var n=i.getRaw("N");n&&e&&(e.reference=n)}}if(e){var r=new O(e,this._crossReference),a=this._validateTemplateMatrix(r._content.dictionary);this._flattenAnnotationTemplate(r,a)}}},i}(Yt),ue=function(e){function i(i,n,r,a,s){var o=e.call(this)||this;return o._textMarkupType=t.PdfTextMarkupAnnotationType.highlight,o._quadPoints=new Array(8),o._boundsCollection=[],o._dictionary=new fn,o._dictionary.update("Type",hn.get("Annot")),void 0!==i&&(o._text=i),void 0!==n&&void 0!==r&&void 0!==a&&void 0!==s&&(o.bounds={x:n,y:r,width:a,height:s},o._boundsCollection.push([o.bounds.x,o.bounds.y,o.bounds.width,o.bounds.height])),o._type=t._PdfAnnotationType.textMarkupAnnotation,o}return Jt(i,e),Object.defineProperty(i.prototype,"textMarkUpColor",{get:function(){return void 0===this._textMarkUpColor&&this._dictionary.has("C")&&(this._textMarkUpColor=gi(this._dictionary.getArray("C"))),this._textMarkUpColor},set:function(t){if(void 0!==t&&3===t.length){var e=this.color;this._isLoaded&&void 0!==e&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]||(this._color=t,this._textMarkUpColor=t,this._dictionary.update("C",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]))}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textMarkupType",{get:function(){if(this._dictionary.has("Subtype")){var t=this._dictionary.get("Subtype");this._textMarkupType=Oi(t.name)}return this._textMarkupType},set:function(t){void 0!==t&&(this._textMarkupType=t,this._dictionary.update("Subtype",hn.get(ji(t))))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"boundsCollection",{get:function(){if(this._isLoaded){var t=[];if(this._dictionary.has("QuadPoints")){var e=this._dictionary.getArray("QuadPoints");if(e&&e.length>0)for(var i=e.length/8,n=0;n<i;n++){var r=e[4+8*n]-e[8*n],a=e[5+8*n]-e[1+8*n],s=Math.sqrt(r*r+a*a);r=e[6+8*n]-e[4+8*n],a=e[7+8*n]-e[5+8*n];var o=Math.sqrt(r*r+a*a),h=[e[8*n],this._page.size[1]-e[1+8*n],o,s];t.push(h)}}return t}return this._boundsCollection},set:function(t){if(!this._isLoaded&&void 0!==t)if(this._boundsCollection.length>0){this._quadPoints=new Array(8+8*t.length);for(var e=0;e<t.length;e++)this._boundsCollection.push(t[Number.parseInt(e.toString(),10)])}else this._quadPoints=new Array(8),this._boundsCollection=t;if(this._isLoaded&&void 0!==t){var i=!1;if(this.boundsCollection.length===t.length){for(e=0;e<t.length;e++)for(var n=t[Number.parseInt(e.toString(),10)],r=0;r<n.length;r++)if(t[Number.parseInt(e.toString(),10)][Number.parseInt(r.toString(),10)]!==this.boundsCollection[Number.parseInt(e.toString(),10)][Number.parseInt(r.toString(),10)]){i=!0;break}}else i=!0;if(i){this._quadPoints=new Array(8*t.length);var a=this._page.size[1];for(e=0;e<t.length;e++)this._quadPoints[0+8*Number.parseInt(e.toString(),10)]=t[Number.parseInt(e.toString(),10)][0],this._quadPoints[1+8*Number.parseInt(e.toString(),10)]=a-t[Number.parseInt(e.toString(),10)][1],this._quadPoints[2+8*Number.parseInt(e.toString(),10)]=t[Number.parseInt(e.toString(),10)][0]+t[Number.parseInt(e.toString(),10)][2],this._quadPoints[3+8*Number.parseInt(e.toString(),10)]=a-t[Number.parseInt(e.toString(),10)][1],this._quadPoints[4+8*Number.parseInt(e.toString(),10)]=t[Number.parseInt(e.toString(),10)][0],this._quadPoints[5+8*Number.parseInt(e.toString(),10)]=this._quadPoints[1+8*e]-t[Number.parseInt(e.toString(),10)][3],this._quadPoints[6+8*Number.parseInt(e.toString(),10)]=t[Number.parseInt(e.toString(),10)][0]+t[Number.parseInt(e.toString(),10)][2],this._quadPoints[7+8*Number.parseInt(e.toString(),10)]=this._quadPoints[5+8*Number.parseInt(e.toString(),10)];this._dictionary.update("QuadPoints",this._quadPoints)}}},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var t;this._dictionary.has("BS")?t=this.border.width:((n=new fn(this._crossReference)).set("Type",hn.get("Border")),n.set("W",this.border.width),this._dictionary.set("BS",n));void 0===t&&(t=1);var e=this._page.size;this._setQuadPoints(e);var i=[this.bounds.x,e[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];if(this._dictionary.update("Subtype",hn.get(ji(this._textMarkupType))),this._dictionary.update("Rect",[i[0],i[1],i[0]+i[2],i[1]+i[3]]),this._setAppearance){this._appearanceTemplate=this._createMarkupAppearance();var n=new fn;this._appearanceTemplate._content.dictionary._updated=!0;var r=this._crossReference._getNextReference();this._crossReference._cacheMap.set(r,this._appearanceTemplate._content),this._appearanceTemplate._content.reference=r,n.set("N",r),n._updated=!0,this._dictionary.set("AP",n)}void 0!==this._text&&null!==this._text&&this._dictionary.set("Contents",this._text)},i.prototype._doPostProcess=function(e){if(void 0===e&&(e=!1),this._isLoaded){if((this._setAppearance||e&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createMarkupAppearance(),!e)){var i=new fn;this._appearanceTemplate._content.dictionary._updated=!0;var n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,this._appearanceTemplate._content),this._appearanceTemplate._content.reference=n,i.set("N",n),i._updated=!0,this._dictionary.set("AP",i)}if(!this._appearanceTemplate&&e&&this._dictionary.has("AP"))if((i=this._dictionary.get("AP"))&&i.has("N"))if(r=i.get("N"))(n=i.getRaw("N"))&&(r.reference=n),this._appearanceTemplate=new O(r,this._crossReference)}else{var r;if(this._postProcess(),!this._appearanceTemplate)if(e)if(this._dictionary.has("AP")){if((i=this._dictionary.get("AP"))&&i.has("N"))if(r=i.get("N"))(n=i.getRaw("N"))&&(r.reference=n),this._appearanceTemplate=new O(r,this._crossReference)}else this._appearanceTemplate=this._createMarkupAppearance()}if(void 0!==this.flattenPopUps&&this.flattenPopUps&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),e&&this._appearanceTemplate){var a=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);if(!this._appearanceTemplate._content.dictionary.has("Matrix")&&!this._isLoaded){var s=this._appearanceTemplate._content.dictionary.getArray("BBox");s&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-s[0],-s[1]])}(a&&void 0!==this._page.rotation&&this._page.rotation!==t.PdfRotationAngle.angle0||a&&this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary,this._appearanceTemplate)||!this._dictionary.has("AP")&&this._appearanceTemplate)&&this._flattenAnnotationTemplate(this._appearanceTemplate,a)}},i.prototype._createMarkupAppearance=function(){var e,i,n=0;if(this.boundsCollection.length>1){for(var r=new It,a=0;a<this.boundsCollection.length;a++){(S=[])[0]=this.boundsCollection[Number.parseInt(a.toString(),10)][0],S[1]=this.boundsCollection[Number.parseInt(a.toString(),10)][1],S[2]=this.boundsCollection[Number.parseInt(a.toString(),10)][2],S[3]=this.boundsCollection[Number.parseInt(a.toString(),10)][3],r._addRectangle(S[0],S[1],S[2],S[3])}i={x:(l=r._getBounds())[0],y:l[1],width:l[2],height:l[3]},this.bounds=i,e=i.width,n=i.height}else if(this._dictionary.has("QuadPoints")){var s=this._dictionary.get("QuadPoints");if(null!==this._quadPoints)for(a=0;a<s.length/8;a++)if(this._isLoaded){for(var o=new Array,h=0,c=0;c<s.length;){var _=s[Number.parseInt(c.toString(),10)],d=s[c+1];o[Number.parseInt(h.toString(),10)]=[_,d],c+=2,h++}var l,p=new It;p._addLines(o),e=(i={x:(l=p._getBounds())[0],y:l[1],width:l[2],height:l[3]}).width,n=i.height}else{var f=Math.floor(s[4+8*a])-Math.floor(s[0+8*a]),u=Math.floor(s[5+8*a])-Math.floor(s[1+8*a]);n=Math.sqrt(f*f+u*u),f=Math.floor(s[6+8*a])-Math.floor(s[4+8*a]),u=Math.floor(s[7+8*a])-Math.floor(s[5+8*a]),e=Math.sqrt(f*f+u*u),this.bounds={x:this.bounds.x,y:this.bounds.y,width:e,height:n}}}var g=new O([0,0,e,n],this._crossReference);Bi(g,this._getRotationAngle());var y=g.graphics;if(void 0!==this.opacity&&y._setTransparency(this.opacity,this.opacity,t._PdfBlendMode.multiply),this.textMarkUpColor){var b=new Ge(this.textMarkUpColor,this.border.width),m=new He(this.textMarkUpColor),v=(_=0,d=0,0),w=0;if(this.boundsCollection.length>1)for(a=0;a<this.boundsCollection.length;a++){var S;(S=[])[0]=this.boundsCollection[Number.parseInt(a.toString(),10)][0],S[1]=this.boundsCollection[Number.parseInt(a.toString(),10)][1],S[2]=this.boundsCollection[Number.parseInt(a.toString(),10)][2],S[3]=this.boundsCollection[Number.parseInt(a.toString(),10)][3],this.textMarkupType===t.PdfTextMarkupAnnotationType.highlight?y._drawRectangle(S[0]-i.x,S[1]-i.y,S[2],S[3],m):this.textMarkupType===t.PdfTextMarkupAnnotationType.underline?(_=S[0]-i.x,d=S[1]-i.y+(S[3]-S[3]/2/3),v=S[2]+(S[0]-i.x),w=S[1]-i.y+(S[3]-S[3]/2/3),y._drawLine(b,_,d,v,w)):this.textMarkupType===t.PdfTextMarkupAnnotationType.strikeOut?(_=S[0]-i.x,d=S[1]-i.y+(S[3]-S[3]/2),v=S[2]+(S[0]-i.x),w=S[1]-i.y+(S[3]-S[3]/2),y._drawLine(b,_,d,v,w)):this.textMarkupType===t.PdfTextMarkupAnnotationType.squiggly&&(b._width=.02*S[3],y._save(),y._translateTransform(S[0]-i.x,S[1]-i.y),y._setClip([0,0,S[2],S[3]]),y._drawPath(this._drawSquiggly(S[2],S[3]),b),y._restore())}else this.textMarkupType===t.PdfTextMarkupAnnotationType.highlight?y._drawRectangle(0,0,e,n,m):this.textMarkupType===t.PdfTextMarkupAnnotationType.underline?y._drawLine(b,0,n-n/2/3,e,n-n/2/3):this.textMarkupType===t.PdfTextMarkupAnnotationType.strikeOut?y._drawLine(b,0,n/2,e,n/2):this.textMarkupType===t.PdfTextMarkupAnnotationType.squiggly&&(b._width=.02*n,y._drawPath(this._drawSquiggly(Math.round(e),Math.round(n)),b)),this._dictionary.update("Rect",[i.x,i.y,i.x+i.width,i.y+i.height])}return g},i.prototype._drawSquiggly=function(t,e){(Math.floor(t)%2!=0||Math.round(t)>t)&&(t=Math.floor(t)+1);for(var i=new It,n=new Array,r=Math.ceil(t/e*16),a=t/(r/2),s=parseFloat((.6*(a+a)).toFixed(2)),o=s,h=0,c=0;c<r;c++){var _=[h,parseFloat((e-s+o-.02*e).toFixed(2))];n.push(_),o=0===o?s:0,h+=a}return i._addLines(n),i},i.prototype._setQuadPoints=function(t){var e=[],i=t[1];this._boundsCollection[0]=[this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height];for(var n=this._quadPoints.length/8,r=0;r<n;r++){var a=this._boundsCollection[Number.parseInt(r.toString(),10)][0],s=this._boundsCollection[Number.parseInt(r.toString(),10)][1];e[0+8*r]=a,e[1+8*r]=i-s,e[2+8*r]=a+this._boundsCollection[Number.parseInt(r.toString(),10)][2],e[3+8*r]=i-s,e[4+8*r]=a,e[5+8*r]=e[1+8*r]-this._boundsCollection[Number.parseInt(r.toString(),10)][3],e[6+8*r]=a+this._boundsCollection[Number.parseInt(r.toString(),10)][2],e[7+8*r]=e[5+8*r]}this._points=e,this._dictionary.set("QuadPoints",this._points)},i}(Zt),ge=function(e){function i(i,n,r,a,s){var o=e.call(this)||this;return o._watermarkText="",o._dictionary=new fn,o._dictionary.update("Type",hn.get("Annot")),o._dictionary.update("Subtype",hn.get("Watermark")),void 0!==i&&(o._watermarkText=i,o.text=i),void 0!==n&&void 0!==r&&void 0!==a&&void 0!==s&&(o.bounds={x:n,y:r,width:a,height:s}),o._type=t._PdfAnnotationType.watermarkAnnotation,o}return Jt(i,e),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var t;if(this._dictionary.has("BS"))t=this.border.width;else{var e=new fn(this._crossReference);e.set("Type",hn.get("Border")),this._dictionary.set("BS",e)}void 0===t&&(t=1),void 0===this.color&&(this.color=[0,0,0]),this._appearanceTemplate=this._createWatermarkAppearance();var i=this._page.size,n=[this.bounds.x,i[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[n[0],n[1],n[0]+n[2],n[1]+n[3]]),void 0!==this.opacity&&1!==this._opacity&&this._dictionary.set("CA",this._opacity)},i.prototype._createWatermarkAppearance=function(){var e=this._obtainFont();e||(e=new Pt(t.PdfFontFamily.helvetica,10,t.PdfFontStyle.regular)),this._rotateAngle=this._getRotationAngle(),(void 0!==this.rotate&&this._rotate!==t.PdfRotationAngle.angle0||this._rotateAngle!==t.PdfRotationAngle.angle0)&&(0===this._rotateAngle&&(this._rotateAngle=90*this.rotate),this.bounds=this._getRotatedBounds(this.bounds,this._rotateAngle));var i=[0,0,this.bounds.width,this.bounds.height],n=new Qt(this,i);n._normal=new O(i,this._crossReference);var r=n._normal;Bi(r,this._rotateAngle);var a,s=n._normal.graphics,o=this.border.width/2,h=new j(t.PdfTextAlignment.left,t.PdfVerticalAlignment.top),c=new Ge(this.color,o);this.innerColor&&(a=new He(this._innerColor)),this._isLoaded?(this._dictionary.has("Contents")&&(this._watermarkText=this._dictionary.get("Contents")),this._dictionary.update("Contents",this._watermarkText)):this._dictionary.update("Contents",this._watermarkText),void 0!==this._watermarkText&&s._drawString(this._watermarkText,e,[0,0,0,0],c,a,h);var _=new fn;s._template._content.dictionary._updated=!0;var d=this._crossReference._getNextReference();return this._crossReference._cacheMap.set(d,s._template._content),s._template._content.reference=d,_.set("N",d),_._updated=!0,this._dictionary.set("AP",_),r},i.prototype._doPostProcess=function(t){var e,i,n;(void 0===t&&(t=!1),this._isLoaded)?(t||(this._appearanceTemplate=this._createWatermarkAppearance()),!this._appearanceTemplate&&t&&this._dictionary.has("AP")&&(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"))&&((n=e.getRaw("N"))&&(i.reference=n),this._appearanceTemplate=new O(i,this._crossReference))):(this._postProcess(),this._appearanceTemplate||t&&(this._dictionary.has("AP")?(e=this._dictionary.get("AP"))&&e.has("N")&&(i=e.get("N"))&&((n=e.getRaw("N"))&&(i.reference=n),this._appearanceTemplate=new O(i,this._crossReference)):this._appearanceTemplate=this._createWatermarkAppearance()));if(t&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);if(!this._appearanceTemplate._content.dictionary.has("Matrix")){var a=this._appearanceTemplate._content.dictionary.getArray("BBox");a&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-a[0],-a[1]])}this._flattenAnnotationTemplate(this._appearanceTemplate,r)}},i}(Yt),ye=function(e){function i(i,n,r,a){var s=e.call(this)||this;return s._icon=t.PdfRubberStampAnnotationIcon.draft,s._stampWidth=0,s._iconString="",s.rotateAngle=0,s._dictionary=new fn,s._dictionary.update("Type",hn.get("Annot")),s._dictionary.update("Subtype",hn.get("Stamp")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==a&&(s.bounds={x:i,y:n,width:r,height:a}),s._type=t._PdfAnnotationType.rubberStampAnnotation,s}return Jt(i,e),Object.defineProperty(i.prototype,"icon",{get:function(){return this._dictionary.has("Name")&&(this._icon=Vi(this._dictionary.get("Name").name)),this._icon},set:function(t){void 0!==t&&(this._icon=t,this._dictionary.update("Name",hn.get("#"+this._obtainIconName(this._icon))))},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(){var t;if(this._dictionary.has("BS"))t=this.border.width;else{var e=new fn(this._crossReference);e.set("Type",hn.get("Border")),this._dictionary.set("BS",e)}void 0===t&&(t=1),this._setAppearance&&(this._appearanceTemplate=this._createRubberStampAppearance())},i.prototype._transformBBox=function(t,e){var i=[],n=[],r=this._transformPoint(t.x,t.height,e);i[0]=r[0],n[0]=r[1];var a=this._transformPoint(t.width,t.y,e);i[1]=a[0],n[1]=a[1];var s=this._transformPoint(t.x,t.y,e);i[2]=s[0],n[2]=s[1];var o=this._transformPoint(t.width,t.height,e);return i[3]=o[0],n[3]=o[1],[this._minValue(i),this._minValue(n),this._maxValue(i),this._maxValue(n)]},i.prototype._transformPoint=function(t,e,i){var n=[];return n[0]=t*i[0]+e*i[2]+i[4],n[1]=t*i[1]+e*i[3]+i[5],n},i.prototype._minValue=function(t){for(var e=t[0],i=1;i<t.length;i++)t[Number.parseInt(i.toString(),10)]<e&&(e=t[Number.parseInt(i.toString(),10)]);return e},i.prototype._maxValue=function(t){for(var e=t[0],i=1;i<t.length;i++)t[Number.parseInt(i.toString(),10)]>e&&(e=t[Number.parseInt(i.toString(),10)]);return e},i.prototype._doPostProcess=function(e){void 0===e&&(e=!1);var i,n,r=!1;if(this._isLoaded&&(this._setAppearance||e)){if(e||(this._appearanceTemplate=this._createRubberStampAppearance()),!this._appearanceTemplate&&e&&this._dictionary.has("AP")&&(i=this._dictionary.get("AP"))&&i.has("N")&&(n=i.get("N"))){var a;(a=i.getRaw("N"))&&(n.reference=a);var s=!1;if(this._type===t._PdfAnnotationType.rubberStampAnnotation){var o=!1,h=void 0,c=void 0;if(n&&((o=this._page.rotation===t.PdfRotationAngle.angle0&&this.rotateAngle===t.PdfRotationAngle.angle0)||(o=this._page.rotation!==t.PdfRotationAngle.angle0&&this.rotateAngle===t.PdfRotationAngle.angle0)),this._appearanceTemplate=new O(n,this._crossReference),s=!0,r=!!o){var _=n.dictionary.getArray("Matrix");if(_){for(var d=[],l=0;l<_.length;l++){var p=_[Number.parseInt(l.toString(),10)];d[Number.parseInt(l.toString(),10)]=p}var f=n.dictionary.getArray("BBox");if(f&&f.length>3){c=li(f);var u=this._transformBBox(c,d);h=[u[2],u[3]],this._appearanceTemplate._size=h}else h=[c.width,c.height]}}else h=[c.width,c.height]}s||(this._appearanceTemplate=new O(n,this._crossReference))}}else this._postProcess(),this._appearanceTemplate||e&&(this._dictionary.has("AP")?(i=this._dictionary.get("AP"))&&i.has("N")&&(n=i.get("N"))&&((a=i.getRaw("N"))&&(n.reference=a),this._appearanceTemplate=new O(n,this._crossReference)):this._appearanceTemplate=this._createRubberStampAppearance());if(void 0!==this.flattenPopUps&&this.flattenPopUps&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),e&&this._appearanceTemplate){var g=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);if(!this._appearanceTemplate._content.dictionary.has("Matrix")){var y=this._appearanceTemplate._content.dictionary.getArray("BBox");y&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-y[0],-y[1]])}r?this._flattenAnnotationTemplate(this._appearanceTemplate,r):this._flattenAnnotationTemplate(this._appearanceTemplate,g)}},i.prototype._createRubberStampAppearance=function(){var e=[0,0,this.bounds.width,this.bounds.height],i=new He(this._obtainBackGroundColor()),n=new Ge(this._obtainBorderColor(),this.border.width);this._iconString=this._obtainIconName(this._icon),this._dictionary.update("Name",hn.get("#"+this._iconString));var r=this._obtainFont();null==r&&(r=new Pt(t.PdfFontFamily.helvetica,8,t.PdfFontStyle.regular));var a=new j;a.alignment=t.PdfTextAlignment.center,a.lineAlignment=t.PdfVerticalAlignment.middle;var s=new Qt(this,e);s._normal=new O(e,this._crossReference);var o=s._normal;void 0===this._rotate||this._rotate===t.PdfRotationAngle.angle0&&0===this._getRotationAngle()||(this.rotateAngle=this._getRotationAngle(),0===this.rotateAngle&&(this.rotateAngle=90*this.rotate),this.bounds=this._getRotatedBounds(this.bounds,this.rotateAngle)),Bi(o,this.rotateAngle);var h=o.graphics;h._save(),h._scaleTransform(o._size[0]/(this._stampWidth+4),o._size[1]/28);var c=new Pt(t.PdfFontFamily.helvetica,20,t.PdfFontStyle.italic|t.PdfFontStyle.bold);this._drawRubberStamp(h,n,i,c,a),h._restore();var _=new fn;h._template._content.dictionary._updated=!0;var d=this._crossReference._getNextReference();this._crossReference._cacheMap.set(d,h._template._content),h._template._content.reference=d,_.set("N",d),_._updated=!0,this._dictionary.set("AP",_),this._dictionary.set("Border",[this.border.hRadius,this.border.vRadius,this.border.width]);var l=this._page.size,p=[this.bounds.x,this.bounds.y+this.bounds.height,this.bounds.width,this.bounds.height];return p[1]=l[1]-(this.bounds.y+this.bounds.height),this._dictionary.set("Rect",[p[0],p[1],p[0]+p[2],p[1]+p[3]]),o},i.prototype._obtainIconName=function(e){switch(e){case t.PdfRubberStampAnnotationIcon.approved:this._iconString="Approved",this._stampWidth=126;break;case t.PdfRubberStampAnnotationIcon.asIs:this._iconString="AsIs",this._stampWidth=75;break;case t.PdfRubberStampAnnotationIcon.confidential:this._iconString="Confidential",this._stampWidth=166;break;case t.PdfRubberStampAnnotationIcon.departmental:this._iconString="Departmental",this._stampWidth=186;break;case t.PdfRubberStampAnnotationIcon.draft:this._iconString="Draft",this._stampWidth=90;break;case t.PdfRubberStampAnnotationIcon.experimental:this._iconString="Experimental",this._stampWidth=176;break;case t.PdfRubberStampAnnotationIcon.expired:this._iconString="Expired",this._stampWidth=116;break;case t.PdfRubberStampAnnotationIcon.final:this._iconString="Final",this._stampWidth=90;break;case t.PdfRubberStampAnnotationIcon.forComment:this._iconString="ForComment",this._stampWidth=166;break;case t.PdfRubberStampAnnotationIcon.forPublicRelease:this._iconString="ForPublicRelease",this._stampWidth=240;break;case t.PdfRubberStampAnnotationIcon.notApproved:this._iconString="NotApproved",this._stampWidth=186;break;case t.PdfRubberStampAnnotationIcon.notForPublicRelease:this._iconString="NotForPublicRelease",this._stampWidth=290;break;case t.PdfRubberStampAnnotationIcon.sold:this._iconString="Sold",this._stampWidth=75;break;case t.PdfRubberStampAnnotationIcon.topSecret:this._iconString="TopSecret",this._stampWidth=146;break;case t.PdfRubberStampAnnotationIcon.completed:this._iconString="Completed",this._stampWidth=136;break;case t.PdfRubberStampAnnotationIcon.void:this._iconString="Void",this._stampWidth=75;break;case t.PdfRubberStampAnnotationIcon.informationOnly:this._iconString="InformationOnly",this._stampWidth=230;break;case t.PdfRubberStampAnnotationIcon.preliminaryResults:this._iconString="PreliminaryResults",this._stampWidth=260}return this._iconString},i.prototype._obtainBackGroundColor=function(){return this._icon===t.PdfRubberStampAnnotationIcon.notApproved||this._icon===t.PdfRubberStampAnnotationIcon.void?[251,222,221]:this._icon===t.PdfRubberStampAnnotationIcon.approved||this._icon===t.PdfRubberStampAnnotationIcon.final||this._icon===t.PdfRubberStampAnnotationIcon.completed?[229,238,222]:[219,227,240]},i.prototype._obtainBorderColor=function(){return this._icon===t.PdfRubberStampAnnotationIcon.notApproved||this._icon===t.PdfRubberStampAnnotationIcon.void?[151,23,15]:this._icon===t.PdfRubberStampAnnotationIcon.approved||this._icon===t.PdfRubberStampAnnotationIcon.final||this._icon===t.PdfRubberStampAnnotationIcon.completed?[73,110,38]:[24,37,100]},i.prototype._drawRubberStamp=function(t,e,i,n,r){t._drawRoundedRectangle(2,1,this._stampWidth,26,3,e,i);var a=new He(this._obtainBorderColor());t._drawString(this._iconString.toUpperCase(),n,[this._stampWidth/2+1,15,0,0],null,a,r)},i}(Zt),be=function(e){function i(){var i=e.call(this)||this;return i._type=t._PdfAnnotationType.soundAnnotation,i}return Jt(i,e),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),t){var e=void 0;if(this._dictionary.has("AP")){var i=this._dictionary.get("AP");if(i&&i.has("N")){e=i.get("N");var n=i.getRaw("N");n&&e&&(e.reference=n)}}if(e){var r=new O(e,this._crossReference),a=this._validateTemplateMatrix(r._content.dictionary);this._flattenAnnotationTemplate(r,a)}}},i}(Zt),me=function(e){function i(i,n,r,a){var s=e.call(this)||this;return s._intentString="",s._textAlignment=t.PdfTextAlignment.left,s._cropBoxValueX=0,s._cropBoxValueY=0,s._dictionary=new fn,s._dictionary.update("Type",hn.get("Annot")),s._dictionary.update("Subtype",hn.get("FreeText")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==a&&(s.bounds={x:i,y:n,width:r,height:a}),s._type=t._PdfAnnotationType.freeTextAnnotation,s}return Jt(i,e),Object.defineProperty(i.prototype,"calloutLines",{get:function(){return void 0===this._calloutLines&&(this._calloutLines=this._getCalloutLinePoints()),this._calloutLines},set:function(t){this._isLoaded||(this._calloutLines=t);var e=!1;if(this._isLoaded&&t.length>=2)if(this._calloutLines.length===t.length){for(var i=0;i<t.length;i++)for(var n=t[Number.parseInt(i.toString(),10)],r=0;r<n.length;r++)if(t[Number.parseInt(i.toString(),10)][Number.parseInt(r.toString(),10)]!==this._calloutLines[Number.parseInt(i.toString(),10)][Number.parseInt(r.toString(),10)]){e=!0;break}}else e=!0;if(e){var a=this._page.size[1],s=[];for(i=0;i<t.length&&i<t.length;i++)s.push(t[Number.parseInt(i.toString(),10)][0]+this._cropBoxValueX),s.push(a+this._cropBoxValueY-t[Number.parseInt(i.toString(),10)][1]);this._calloutLines=t,this._dictionary.update("CL",s)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineEndingStyle",{get:function(){return this._lineEndingStyle=this._obtainLineEndingStyle(),this._lineEndingStyle},set:function(t){void 0!==t&&this._dictionary.update("LE",hn.get(mi(t))),this._lineEndingStyle=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textMarkUpColor",{get:function(){if(void 0===this._textMarkUpColor){var t=void 0;if(this._dictionary.has("TextColor"))return this._textMarkUpColor=gi(this._dictionary.getArray("TextColor")),this._textMarkUpColor;if(this._dictionary.has("DS"))for(var e=this._dictionary.get("DS").split(";"),i=0;i<e.length;i++)if(-1!==e[Number.parseInt(i.toString(),10)].indexOf("color"))return(t=e[Number.parseInt(i.toString(),10)].split(":")[1]).startsWith("#")&&(t=t.substring(1)),this._textMarkUpColor=ui(t),this._textMarkUpColor;!this._textMarkUpColor&&this._dictionary.has("RC")}return this._textMarkUpColor},set:function(t){if(void 0!==t&&3===t.length){this._textMarkUpColor=t;var e="font:"+this.font._metrics._postScriptName+" "+this.font._size+"pt;style:"+Qi(this.font._style)+";color:"+this._colorToHex(t);this._dictionary.update("DS",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textAlignment",{get:function(){return this._dictionary.has("Q")&&(this._textAlignment=this._dictionary.get("Q")),this._textAlignment},set:function(t){this._textAlignment!==t&&this._dictionary.update("Q",t),this._textAlignment=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"font",{get:function(){return this._font||(this._font=this._obtainFont()),this._font},set:function(t){this._font=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"borderColor",{get:function(){return void 0===this._borderColor&&this._dictionary.has("DA")&&(this._borderColor=this._obtainColor()),this._borderColor},set:function(t){void 0!==t&&3===t.length&&(this._borderColor=t,this._dictionary.update("DA",this._getBorderColorString(this.borderColor)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"annotationIntent",{get:function(){return this._dictionary.has("IT")&&(this._annotationIntent=Xi(this._dictionary.get("IT").name)),this._annotationIntent},set:function(t){void 0!==t&&(this._annotationIntent=t,this._dictionary.update("IT",hn.get(this._obtainAnnotationIntent(this._annotationIntent))))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_mkDictionary",{get:function(){var t;return this._dictionary.has("MK")&&(t=this._dictionary.get("MK")),t},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(t){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var e;if(this._dictionary.has("BS"))e=this.border.width;else{var i=new fn(this._crossReference);i.set("Type",hn.get("Border")),this._dictionary.set("BS",i)}if(void 0===e&&(e=1),this._updateCropBoxValues(),(t||this._setAppearance)&&(this._appearanceTemplate=this._createAppearance()),!t){var n=this._page.size,r=[this.bounds.x,n[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[r[0],r[1],r[0]+r[2],r[1]+r[3]]),this._saveFreeTextDictionary()}},i.prototype._updateCropBoxValues=function(){if(this._page){var t=void 0;this._page._pageDictionary.has("CropBox")?t=this._page._pageDictionary.getArray("CropBox"):this._page._pageDictionary.has("MediaBox")&&(t=this._page._pageDictionary.getArray("MediaBox")),t&&(this._cropBoxValueX=t[0],this._cropBoxValueY=t[1])}},i.prototype._doPostProcess=function(e){var i,n;(void 0===e&&(e=!1),this._isLoaded)?((this._setAppearance||e&&!this._dictionary.has("AP"))&&(this._appearanceTemplate=this._createAppearance()),!this._appearanceTemplate&&e&&this._dictionary.has("AP")&&(i=this._dictionary.get("AP"))&&i.has("N")&&(n=i.get("N"))&&((h=i.getRaw("N"))&&(n.reference=h),this._appearanceTemplate=new O(n,this._crossReference))):(this._postProcess(e),this._appearanceTemplate||e&&(this._dictionary.has("AP")?(i=this._dictionary.get("AP"))&&i.has("N")&&(n=i.get("N"))&&((h=i.getRaw("N"))&&(n.reference=h),this._appearanceTemplate=new O(n,this._crossReference)):this._appearanceTemplate=this._createAppearance()));if(void 0!==this.flattenPopUps&&this.flattenPopUps&&(this._isLoaded?this._flattenLoadedPopUp():this._flattenPopUp()),e&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);if(!this._appearanceTemplate._content.dictionary.has("Matrix")&&!this._isLoaded){var a=this._appearanceTemplate._content.dictionary.getArray("BBox");a&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-a[0],-a[1]])}(r&&void 0!==this._page.rotation&&this._page.rotation!==t.PdfRotationAngle.angle0||this._appearanceTemplate&&!this._dictionary.has("AP")||this._dictionary.has("AP")&&this._isValidTemplateMatrix(this._appearanceTemplate._content.dictionary,this.bounds,this._appearanceTemplate))&&this._flattenAnnotationTemplate(this._appearanceTemplate,r)}if(!e&&this._setAppearance){var s=void 0;if(this._dictionary.has("AP"))s=this._dictionary.get("AP");else{var o=this._crossReference._getNextReference();s=new fn(this._crossReference),this._crossReference._cacheMap.set(o,s),this._dictionary.update("AP",o)}var h=this._crossReference._getNextReference();this._crossReference._cacheMap.set(h,this._appearanceTemplate._content),s.update("N",h)}},i.prototype._isValidTemplateMatrix=function(t,e,i){var n=!0,r=e;if(t&&t.has("Matrix")){var a=t.getArray("BBox"),s=t.getArray("Matrix");if(s&&a&&s.length>3&&a.length>2&&void 0!==s[0]&&void 0!==s[1]&&void 0!==s[2]&&void 0!==s[3]&&1===s[0]&&0===s[1]&&0===s[2]&&1===s[3]&&void 0!==a[0]&&void 0!==a[1]&&void 0!==a[2]&&void 0!==a[3]&&(Math.round(a[0])!==Math.round(-s[4])&&Math.round(a[1])!==Math.round(-s[5])||0===a[0]&&0===Math.round(-s[4]))){var o=this._page._graphics,h=o._save();void 0!==this.opacity&&this._opacity<1&&o._setTransparency(this._opacity),r.x-=a[0],r.y+=a[1],o._drawTemplate(i,r),o._restore(h),this._removeAnnotationFromPage(this._page,this),n=!1}}return n},i.prototype._createAppearance=function(){var e,i=this.border.width/2,n=this._obtainAppearanceBounds(),r=this.rotationAngle;0!==r&&90!==r&&180!==r&&270!==r||(this._isAllRotation=!1),Bi(e=r>0&&this._isAllRotation?new O([0,0,n[2],n[3]],this._crossReference):new O(n,this._crossReference),this._getRotationAngle());var a=new Ne,s=this._obtainText();e._writeTransformation=!1;var o=e.graphics,h=this._obtainTextAlignment(),c=this._obtainColor(),_=new Ge(c,this.border.width);this.border.width>0&&(a.borderPen=_);var d=this._obtainStyle(_,n,i,a);if(this.color&&(a.foreBrush=new He(this._color)),this.textMarkUpColor&&(a.backBrush=new He(this._textMarkUpColor)),a.borderWidth=this.border.width,this.calloutLines&&this._calloutLines.length>=2){if(this._drawCallOuts(o,_),this._isLoaded&&void 0===this._lineEndingStyle&&(this._lineEndingStyle=this.lineEndingStyle),this._lineEndingStyle!==t.PdfLineEndingStyle.none){var l=this._obtainLinePoints(),p=this._getAngle(l),f=this._getAxisValue([l[2],l[3]],90,0);this._drawLineEndStyle(f,o,p,_,a.foreBrush,this.lineEndingStyle,this.border.width,!1)}(d=this._dictionary.has("RD")?[d[0],-d[1],d[2],-d[3]]:[this.bounds.x,-(this._page.size[1]-(this.bounds.y+this.bounds.height)),this.bounds.width,-this.bounds.height])[0]=d[0]+this._cropBoxValueX,d[1]=d[1]-this._cropBoxValueY,this._calculateRectangle(d),a.bounds=d}else d=[d[0],-d[1],d[2],-d[3]],a.bounds=d;for(var u=this._obtainAppearanceBounds(),g=[d[0]-u[0],-d[1]-u[1],d[2]-u[2],-d[1]-u[1]-d[3]-u[3]],y=0;y<g.length;y++)g[Number.parseInt(y.toString(),10)]<0&&(g[Number.parseInt(y.toString(),10)]=-g[Number.parseInt(y.toString(),10)]);this._dictionary.update("RD",g),this.opacity&&this._opacity<1&&(o._save(),o._setTransparency(this._opacity)),this.rotate&&this._rotate!==t.PdfRotationAngle.angle0&&o._save(),this._drawFreeTextRectangle(o,a,d,h),this._drawFreeMarkUpText(o,a,d,s,h),this.opacity&&this._opacity<1&&o._restore(),this.rotate&&this._rotate!==t.PdfRotationAngle.angle0&&o._restore();var b=this._obtainAppearanceBounds();return this._dictionary.set("Rect",[b[0],b[1],b[0]+b[2],b[1]+b[3]]),e},i.prototype._calculateRectangle=function(t){for(var e=this._obtainAppearanceBounds(),i=[t[0]-e[0],-t[1]-e[1],t[2]-e[2],-t[1]-e[1]-t[3]-e[3]],n=0;n<4;n++)i[Number.parseInt(n.toString(),10)]<0&&(i[Number.parseInt(n.toString(),10)]=-i[Number.parseInt(n.toString(),10)]);this._dictionary.set("RD",i)},i.prototype._obtainAnnotationIntent=function(e){switch(e){case t.PdfAnnotationIntent.none:this._intentString="None";break;case t.PdfAnnotationIntent.freeTextCallout:this._intentString="FreeTextCallout";break;case t.PdfAnnotationIntent.freeTextTypeWriter:this._intentString="FreeTextTypeWriter"}return this._intentString},i.prototype._obtainFont=function(){var t=this._obtainFontDetails();return!t.size&&this._dictionary.has("RC"),this._mapFont(t.name,t.size,t.style)},i.prototype._drawFreeMarkUpText=function(e,i,n,r,a){var s=!1,o=this.rotationAngle;if(this.rotate!==t.PdfRotationAngle.angle90||this._isAllRotation?this.rotate!==t.PdfRotationAngle.angle180||this._isAllRotation?this.rotate!==t.PdfRotationAngle.angle270||this._isAllRotation?0!==o||this._isAllRotation||(n=[n[0],n[1]+n[3],n[2],n[3]]):n=[n[1]+n[3],-(n[0]+n[2]),-n[3],n[2]]:n=[-(n[0]+n[2]),-n[3],n[2],-n[3]]:n=[-n[1],n[0],-n[3],n[2]],o>0&&this._isAllRotation){s=!0;var h=this.bounds,c=new j(t.PdfTextAlignment.center,t.PdfVerticalAlignment.middle),_=this._font.measureString(r,[0,0],c,0,0);o>0&&o<=91?e._translateTransform(_[1],-h.height):o>91&&o<=181?e._translateTransform(h.width-_[1],-(h.height-_[1])):o>181&&o<=271?e._translateTransform(h.width-_[1],-_[1]):o>271&&o<360&&e._translateTransform(_[1],-_[1]),e._rotateTransform(o),i.bounds=[0,0,i.bounds[2],i.bounds[3]]}var d=n;i.borderWidth>0&&(n=[n[0]+1.5*i.borderWidth,n[1]+1.5*i.borderWidth,n[2]-3*i.borderWidth,n[3]>0?n[3]-3*i.borderWidth:-n[3]-3*i.borderWidth]),void 0!==this.font&&null!==this._font||(this._font=new Pt(t.PdfFontFamily.helvetica,7,t.PdfFontStyle.regular));var l=this._font._metrics._getHeight()>(n[3]>0?n[3]:-n[3]),p=this._font._metrics._getHeight()<=(d[3]>0?d[3]:-d[3]),f=l&&p;this._drawFreeTextAnnotation(e,i,r,this._font,f?d:n,!0,a,s)},i.prototype._drawFreeTextRectangle=function(e,i,n,r){if(this._dictionary.has("BE")){for(var a=0;a<n.length;a++)n[Number.parseInt(a.toString(),10)]<0&&(n[Number.parseInt(a.toString(),10)]=-n[Number.parseInt(a.toString(),10)]);this._drawAppearance(e,i,n),this.rotate!==t.PdfRotationAngle.angle90||this._isAllRotation?this.rotate!==t.PdfRotationAngle.angle180||this._isAllRotation?this.rotate!==t.PdfRotationAngle.angle270||this._isAllRotation||e._rotateTransform(-270):e._rotateTransform(-180):e._rotateTransform(-90)}else this.rotate!==t.PdfRotationAngle.angle90||this._isAllRotation?this.rotate!==t.PdfRotationAngle.angle180||this._isAllRotation?this.rotate!==t.PdfRotationAngle.angle270||this._isAllRotation||(e._rotateTransform(-270),i.bounds=[n[1]+n[3],-n[0],-n[3],-n[2]]):(e._rotateTransform(-180),i.bounds=[-(n[2]+n[0]),-(n[3]+n[1]),n[2],n[3]]):(e._rotateTransform(-90),i.bounds=[-n[1],n[2]+n[0]-n[3],-n[2]]),this._drawFreeTextAnnotation(e,i,"",this._font,i.bounds,!1,r,!1)},i.prototype._drawAppearance=function(t,e,i){var n=new It;if(n._addRectangle(i[0],i[1],i[2],i[3]),this._dictionary.has("BE")){var r=this._dictionary.get("BE");if(r&&r.has("I")){var a=1===r.get("I")?4:9;this._drawCloudStyle(t,e.foreBrush,e.borderPen,a,.833,n._points,!0)}}},i.prototype._drawFreeTextAnnotation=function(e,i,n,r,a,s,o,h){if(s){var c=new j;c.lineAlignment=t.PdfVerticalAlignment.top,c.alignment=o,c.lineSpacing=0,h?e._drawString(n,r,i.bounds,null,i.backBrush,c):e._drawString(n,r,a,null,i.backBrush,c)}else e._drawRectangle(a[0],a[1],a[2],a[3],i.borderPen,i.foreBrush)},i.prototype._getCalloutLinePoints=function(){if(this._dictionary.has("CL")){var t=this._dictionary.getArray("CL");if(t){this._calloutLines=[];for(var e=0;e<t.length;e+=2){var i=[t[Number.parseInt(e.toString(),10)],this._page.size[1]-t[e+1]];this._calloutLines.push(i)}}}return this._calloutLines},i.prototype._obtainAppearanceBounds=function(){var e=[0,0,0,0];if(this.calloutLines&&this._calloutLines.length>0){for(var i=new It,n=[],r=2===this._calloutLines.length?2:3,a=0;a<r;a++)n.push([0,0]);if(this._calloutLines.length>=2){this._obtainCallOutsNative();for(a=0;a<this._calloutLines.length&&a<3;a++)n[Number.parseInt(a.toString(),10)]=[this._calloutsClone[Number.parseInt(a.toString(),10)][0],this._calloutsClone[Number.parseInt(a.toString(),10)][1]]}n.length>0&&(this.lineEndingStyle!==t.PdfLineEndingStyle.none&&this._expandAppearance(n),i._addLines(n)),i._addRectangle(this.bounds.x-2,this._page.size[1]-(this.bounds.y+this.bounds.height)-2,this.bounds.width+4,this.bounds.height+4),e=i._getBounds()}else{var s=_i(this._dictionary);e=[s.x,s.y,s.width,s.height]}return e},i.prototype._obtainCallOutsNative=function(){if(this.calloutLines&&this._calloutLines.length>0){var t=this._page.size;this._calloutsClone=[];for(var e=0;e<this._calloutLines.length;e++)this._calloutsClone.push([this._calloutLines[Number.parseInt(e.toString(),10)][0],t[1]-this._calloutLines[Number.parseInt(e.toString(),10)][1]])}},i.prototype._obtainLinePoints=function(){var t=this._page.size[1];return[this.calloutLines[1][0],t-this.calloutLines[1][1],this.calloutLines[0][0],t-this.calloutLines[0][1]]},i.prototype._obtainLineEndingStyle=function(){var e=t.PdfLineEndingStyle.square;return this._dictionary.has("LE")&&(e=vi(this._dictionary.get("LE").name,e)),e},i.prototype._obtainText=function(){var t="";if(this._dictionary.has("Contents")){var e=this._dictionary.get("Contents");return e&&(t=e),t&&""!==t&&(this._text=t),t}return this._dictionary.has("RC")?t=this._rcText:t},i.prototype._obtainTextAlignment=function(){var e,i=t.PdfTextAlignment.left;this._dictionary.has("Q")?void 0!==(n=this._dictionary.get("Q"))&&(i=n,e=!0):this._dictionary.has("RC");if(!e&&this._dictionary.has("DS"))for(var n,r=(n=this._dictionary.get("DS")).split(";"),a=0;a<r.length;a++)if(-1!==r[Number.parseInt(a.toString(),10)].indexOf("text-align"))switch(r[Number.parseInt(a.toString(),10)]){case"left":i=t.PdfTextAlignment.left;break;case"right":i=t.PdfTextAlignment.right;break;case"center":i=t.PdfTextAlignment.center;break;case"justify":i=t.PdfTextAlignment.justify}return i},i.prototype._obtainColor=function(){var t;if(this._isLoaded)if(this._dictionary.has("DA")){var e=this._dictionary.get("DA");Array.isArray(e)&&e.length>0?t=[e[0],e[1],e[2]]:"string"==typeof e&&(this._da=new Xt(e),t=this._da.color)}else if(this._dictionary.has("MK")){var i=this._mkDictionary;i&&i.has("BC")&&(t=gi(i.getArray("BC")))}else t=[0,0,0];else t=this.borderColor?this._borderColor:[0,0,0];return t},i.prototype._expandAppearance=function(e){var i=e[0][1],n=e[0][0];i>this.bounds.y?this.lineEndingStyle!==t.PdfLineEndingStyle.openArrow&&(e[0][1]-=11*this.border.width):e[0][1]+=11*this.border.width,n<=this.bounds.x?e[0][0]-=11*this.border.width:e[0][0]+=11*this.border.width},i.prototype._drawCallOuts=function(t,e){for(var i=new It,n=[],r=2===this._calloutLines.length?2:3,a=0;a<r;a++)n.push([0,0]);if(this._calloutLines.length>=2){this._obtainCallOutsNative();for(a=0;a<this._calloutLines.length&&a<3;a++)n[Number.parseInt(a.toString(),10)]=[this._calloutsClone[Number.parseInt(a.toString(),10)][0],-this._calloutsClone[Number.parseInt(a.toString(),10)][1]]}n.length>0&&i._addLines(n),t._drawPath(i,e)},i.prototype._saveFreeTextDictionary=function(){void 0!==this.font&&null!==this.font||(this.font=new Pt(t.PdfFontFamily.helvetica,7,t.PdfFontStyle.regular),this._font=this.font),this._dictionary.update("Contents",this.text),this._isLoaded&&(this._textAlignment=this.textAlignment),this._dictionary.update("Q",this._textAlignment),this.annotationIntent===t.PdfAnnotationIntent.none?this._dictionary.update("Subj","Text Box"):this._dictionary.update("IT",hn.get(this._obtainAnnotationIntent(this._annotationIntent)));var e="font:"+this.font._metrics._postScriptName+" "+this.font._size+"pt;style:"+Qi(this.font._style)+";color:"+this._colorToHex(this.textMarkUpColor);this._dictionary.update("DS",e),this._dictionary.update("DA",this._getBorderColorString(this.borderColor?this._borderColor:[0,0,0]));if(this._dictionary.update("RC",'<?xml version="1.0"?><body xmlns="http://www.w3.org/1999/xhtml"><p dir="ltr">'+(this.text?this._getXmlFormattedString(this.text):"")+"</p></body>"),this._calloutLines&&this._calloutLines.length>=2){for(var i=this._page.size[1],n=[],r=0;r<this._calloutLines.length&&r<3;r++)n.push(this._calloutLines[Number.parseInt(r.toString(),10)][0]+this._cropBoxValueX),n.push(i+this._cropBoxValueY-this._calloutLines[Number.parseInt(r.toString(),10)][1]);this._dictionary.update("CL",n)}if(this._setAppearance){var a=this._obtainAppearanceBounds();this._dictionary.update("Rect",[a[0],a[1],a[0]+a[2],a[1]+a[3]])}},i.prototype._getXmlFormattedString=function(t){return t=(t=(t=t.replace("&","&amp;")).replace("<","&lt;")).replace(">","&gt;")},i}(Zt),ve=function(e){function i(i,n,r,a){var s=e.call(this)||this;return s._textAlignment=t.PdfTextAlignment.left,s._dictionary=new fn,s._dictionary.update("Type",hn.get("Annot")),s._dictionary.update("Subtype",hn.get("Redact")),void 0!==i&&void 0!==n&&void 0!==r&&void 0!==a&&(s.bounds={x:i,y:n,width:r,height:a}),s._type=t._PdfAnnotationType.redactionAnnotation,s}return Jt(i,e),Object.defineProperty(i.prototype,"repeatText",{get:function(){return void 0===this._repeat&&this._dictionary.has("Repeat")&&(this._repeat=this._dictionary.get("Repeat")),this._repeat},set:function(t){t!==this._repeat&&(this._repeat=t,this._dictionary&&this._dictionary.update("Repeat",t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textAlignment",{get:function(){return this._dictionary.has("Q")&&(this._textAlignment=this._dictionary.get("Q")),this._textAlignment},set:function(t){this._textAlignment!==t&&this._dictionary.update("Q",t),this._textAlignment=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textColor",{get:function(){return void 0===this._textColor&&this._dictionary.has("C")&&(this._textColor=gi(this._dictionary.getArray("C"))),this._textColor},set:function(t){if(void 0!==t&&3===t.length){var e=this.textColor;this._isLoaded&&void 0!==e&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]||(this._textColor=t,this._dictionary.update("C",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]))}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"borderColor",{get:function(){return void 0===this._borderColor&&this._dictionary.has("OC")&&(this._borderColor=gi(this._dictionary.getArray("OC"))),this._borderColor},set:function(t){if(void 0!==t&&3===t.length){var e=this.borderColor;this._isLoaded&&void 0!==e&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]||(this._borderColor=t,this._dictionary.update("OC",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]))}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"overlayText",{get:function(){return void 0===this._overlayText&&this._dictionary.has("OverlayText")&&(this._overlayText=this._dictionary.get("OverlayText")),this._overlayText},set:function(t){"string"==typeof t&&(this._dictionary.update("OverlayText",t),this._overlayText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"font",{get:function(){return this._font},set:function(t){this._font=t},enumerable:!0,configurable:!0}),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._postProcess=function(t){if(void 0===this.bounds||null===this.bounds)throw new Error("Bounds cannot be null or undefined");var e;if(this._dictionary.has("BS"))e=this.border.width;else{var i=new fn(this._crossReference);i.set("Type",hn.get("Border")),this._dictionary.set("BS",i)}void 0===e&&(e=1),this._setAppearance&&(this._appearanceTemplate=this._createRedactionAppearance(t));var n=this._page.size,r=[this.bounds.x,n[1]-(this.bounds.y+this.bounds.height),this.bounds.width,this.bounds.height];this._dictionary.update("Rect",[r[0],r[1],r[0]+r[2],r[1]+r[3]])},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),!this._isImported){if(this._isLoaded)this._appearanceTemplate=this._createRedactionAppearance(t);else if(this._postProcess(t),!this._appearanceTemplate&&t)if(this._dictionary.has("AP")){var e=this._dictionary.get("AP");if(e&&e.has("N")){var i=e.get("N");if(i){var n=e.getRaw("N");n&&(i.reference=n),this._appearanceTemplate=new O(i,this._crossReference)}}}else this._appearanceTemplate=this._createRedactionAppearance(t);if(t&&this._appearanceTemplate){var r=this._validateTemplateMatrix(this._appearanceTemplate._content.dictionary);if(!this._appearanceTemplate._content.dictionary.has("Matrix")){var a=this._appearanceTemplate._content.dictionary.getArray("BBox");a&&this._appearanceTemplate._content.dictionary.update("Matrix",[1,0,0,1,-a[0],-a[1]])}this._flattenAnnotationTemplate(this._appearanceTemplate,r)}}},i.prototype._createRedactionAppearance=function(t){var e=this._createNormalAppearance();if(t)this._isLoaded&&null!==this._page&&this._removeAnnotationFromPage(this._page,this);else{var i=this._createBorderAppearance(),n=new fn(this._crossReference);i._content.dictionary._updated=!0;var r=this._crossReference._getNextReference();this._crossReference._cacheMap.set(r,i._content),i._content.reference=r,n.set("N",r),e._content.dictionary._updated=!0;var a=this._crossReference._getNextReference();this._crossReference._cacheMap.set(a,e._content),e._content.reference=a,n.set("R",a),n._updated=!0,this._dictionary.set("AP",n)}return e},i.prototype._createBorderAppearance=function(){var t,e=[0,0,this.bounds.width,this.bounds.height],i=new O(e,this._crossReference),n=this.border.width/2,r=i.graphics,a=this.border.width;this.border.width>0&&this.borderColor&&(t=new Ge(this.borderColor,a));var s=[e[0],e[1],e[2],e[3]];if(this.opacity<1){var o=r._save();r._setTransparency(this.opacity),r._drawRectangle(s[0]+n,s[1]+n,s[2]-a,s[3]-a,t,null),r._restore(o)}else r._drawRectangle(s[0]+n,s[1]+n,s[2]-a,s[3]-a,t,null);return i},i.prototype._createNormalAppearance=function(){var e=[0,0,this.bounds.width,this.bounds.height],i=new O(e,this._crossReference);Bi(i,this._getRotationAngle());var n,r,a,s=this.border.width/2,o=i.graphics,h=new Ne;this.textColor&&this.border.width>0&&(n=new Ge(this.textColor,this.border.width)),this.innerColor&&(r=new He(this.innerColor)),a=this.textColor?new He(this.textColor):new He([128,128,128]),h.backBrush=r,h.borderWidth=s;var c=this.border.width,_=[e[0],e[1],e[2],e[3]];if(this.opacity<1){var d=o._save();o._setTransparency(this.opacity),o._drawRectangle(_[0]+s,_[1]+s,_[2]-c,_[3]-c,n,r),o._restore(d)}else o._drawRectangle(_[0]+s,_[1]+s,_[2]-c,_[3]-c,n,r);if(o._restore(),this.overlayText&&""!==this._overlayText){var l=0,p=0;void 0!==this.font&&null!==this.font||(this.font=new Pt(t.PdfFontFamily.helvetica,10,t.PdfFontStyle.regular));var f=0,u=0,g=0,y=void 0;this._isLoaded&&(this._textAlignment=this.textAlignment);var b=new j(this._textAlignment,t.PdfVerticalAlignment.middle),m=this.font.measureString(this.overlayText,[0,0],b,0,0);if(this._isLoaded&&void 0===this._repeat&&(this._repeat=this.repeatText),this._repeat){m[0]<=0&&(m[0]=1),l=this.bounds.width/m[0],p=Math.floor(this.bounds.height/this.font._size),g=Math.abs(this.bounds.width-Math.floor(l)*m[0]),this._textAlignment===t.PdfTextAlignment.center&&(u=g/2),this._textAlignment===t.PdfTextAlignment.right&&(u=g);for(var v=1;v<l;v++){for(var w=0;w<p;w++)y=[u,f,0,0],o._drawString(this.overlayText,this.font,y,null,a,null),f+=this.font._size;u+=m[0],f=0}}else g=Math.abs(this.bounds.width-m[0]),this._textAlignment===t.PdfTextAlignment.center&&(u=g/2),this._textAlignment===t.PdfTextAlignment.right&&(u=g),y=[u,0,0,0],o._drawString(this.overlayText,this.font,y,null,a,null)}return i},i}(Yt),we=function(e){function i(){var i=e.call(this)||this;return i._type=t._PdfAnnotationType.richMediaAnnotation,i}return Jt(i,e),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._initialize(t,e),n},i.prototype._initialize=function(t,i){e.prototype._initialize.call(this,t,i)},i.prototype._doPostProcess=function(t){if(void 0===t&&(t=!1),void 0!==this.flattenPopUps&&this.flattenPopUps&&this._flattenPopUp(),t){var e=void 0;if(this._dictionary.has("AP")){var i=this._dictionary.get("AP");if(i&&i.has("N")){e=i.get("N");var n=i.getRaw("N");n&&e&&(e.reference=n)}}if(e){var r=new O(e,this._crossReference),a=this._validateTemplateMatrix(r._content.dictionary);this._flattenAnnotationTemplate(r,a)}}},i}(Yt),Se=function(e){function i(){var i=e.call(this)||this;return i._isAutoResize=!1,i._isWidget=!0,i._type=t._PdfAnnotationType.widgetAnnotation,i}return Jt(i,e),i._load=function(t,e){var n=new i;return n._isLoaded=!0,n._dictionary=t,n._crossReference=e,n},Object.defineProperty(i.prototype,"color",{get:function(){return void 0===this._color&&this._defaultAppearance&&(this._color=this._da.color),this._color},set:function(t){void 0!==this.color&&this._color===t||(this._color=t);var e=!1;this._defaultAppearance||(this._da=new Xt(""),e=!0),(e||this._da.color!==t)&&(this._da.color=t,this._dictionary.update("DA",this._da.toString()))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"backColor",{get:function(){if(void 0===this._backColor){var t=this._mkDictionary;if(t&&t.has("BG")){var e=t.getArray("BG");e&&(this._backColor=gi(e))}}return void 0!==this._backColor&&null!==this._backColor||(this._backColor=[255,255,255]),this._backColor},set:function(t){void 0!==this.backColor&&this.backColor===t||(void 0===this._mkDictionary&&this._dictionary.update("MK",new fn(this._crossReference)),this._mkDictionary.update("BG",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]),this._backColor=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"borderColor",{get:function(){if(void 0===this._borderColor){var t=this._mkDictionary;if(t&&t.has("BC")){var e=t.getArray("BC");e&&(this._borderColor=gi(e))}}return void 0!==this._borderColor&&null!==this._borderColor||(this._borderColor=[0,0,0]),this._borderColor},set:function(t){void 0!==this.borderColor&&this.borderColor===t||(void 0===this._mkDictionary&&this._dictionary.update("MK",new fn(this._crossReference)),this._mkDictionary.update("BC",[Number.parseFloat((t[0]/255).toFixed(3)),Number.parseFloat((t[1]/255).toFixed(3)),Number.parseFloat((t[2]/255).toFixed(3))]),this._borderColor=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rotationAngle",{get:function(){return void 0===this._rotationAngle&&(this._mkDictionary&&this._mkDictionary.has("R")?this._rotationAngle=this._mkDictionary.get("R"):this._dictionary.has("R")&&(this._rotationAngle=this._dictionary.get("R"))),this._rotationAngle},set:function(t){void 0!==this.rotationAngle&&this._rotationAngle===t||(void 0===this._mkDictionary&&this._dictionary.update("MK",new fn(this._crossReference)),this._mkDictionary.update("R",t),this._rotationAngle=t,this._dictionary._updated=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"highlightMode",{get:function(){if(void 0===this._highlightMode&&this._dictionary.has("H")){var t=this._dictionary.get("H");this._highlightMode=wi(t.name)}return this._highlightMode},set:function(t){this._highlightMode!==t&&this._dictionary.update("H",Si(t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bounds",{get:function(){return this._isLoaded&&void 0===this._bounds&&(this._bounds=di(this._dictionary,this._getPage())),void 0!==this._bounds&&null!==this._bounds||(this._bounds={x:0,y:0,width:0,height:0}),this._bounds},set:function(t){if(0===t.x&&0===t.y&&0===t.width&&0===t.height)throw new Error("Cannot set empty bounds");this._bounds=t,this._dictionary.update("Rect",fi([t.x,t.y,t.width,t.height],this._getPage()))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textAlignment",{get:function(){return void 0===this._textAlignment&&this._dictionary.has("Q")&&(this._textAlignment=this._dictionary.get("Q")),this._textAlignment},set:function(t){void 0!==this._textAlignment&&this._textAlignment===t||this._dictionary.update("Q",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_defaultAppearance",{get:function(){if(void 0===this._da&&this._dictionary.has("DA")){var t=this._dictionary.get("DA");t&&""!==t&&(this._da=new Xt(t))}return this._da},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"_mkDictionary",{get:function(){var t;return this._dictionary.has("MK")&&(t=this._dictionary.get("MK")),t},enumerable:!0,configurable:!0}),i.prototype._create=function(e,i,n){return this._page=e,this._crossReference=e._crossReference,this._ref=this._crossReference._getNextReference(),this._dictionary=new fn(this._crossReference),this._crossReference._cacheMap.set(this._ref,this._dictionary),this._dictionary._currentObj=this,this._dictionary.objId=this._ref.toString(),this._dictionary.update("Type",hn.get("Annot")),this._dictionary.update("Subtype",hn.get("Widget")),this.flags|=t.PdfAnnotationFlag.print,this._dictionary.update("P",e._ref),e._addWidget(this._ref),this.border=new Fe,this.bounds=i,n&&(this._field=n,this._dictionary.update("Parent",this._field._ref)),this._dictionary},i.prototype._doPostProcess=function(e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),e||i){var n=void 0;if(i||e&&this._dictionary.has("AP"),!n&&this._dictionary.has("AP")){var r=this._dictionary.get("AP");if(r&&r.has("N"))n=r.get("N"),(d=r.getRaw("N"))&&n&&(n.reference=d)}if(n){var a=void 0;if(e){var s=new O(n,this._crossReference),o=this._getPage();if(o){var h=o._graphics;h._save(),o.rotation===t.PdfRotationAngle.angle90?(h._translateTransform(h._size[0],h._size[1]),h._rotateTransform(90)):o.rotation===t.PdfRotationAngle.angle180?(h._translateTransform(h._size[0],h._size[1]),h._rotateTransform(-180)):o.rotation===t.PdfRotationAngle.angle270&&(h._translateTransform(h._size[0],h._size[1]),h._rotateTransform(270)),a={x:this.bounds.x,y:this.bounds.y,width:s._size[0],height:s._size[1]},h._drawTemplate(s,a),h._restore()}}else{var c=void 0;if(this._dictionary.has("AP"))c=this._dictionary.get("AP");else{var _=this._crossReference._getNextReference();c=new fn(this._crossReference),this._crossReference._cacheMap.set(_,c),this._dictionary.update("AP",_)}var d=this._crossReference._getNextReference();this._crossReference._cacheMap.set(d,n),c.update("N",d)}}this._dictionary._updated=!1}},i.prototype._getPage=function(){if(!this._page){var t;this._crossReference&&(t=this._crossReference._document);var e=void 0;if(this._dictionary.has("P")){var i=this._dictionary.getRaw("P");if(i&&t)for(var n=0;n<t.pageCount;n++){var r=t.getPage(n);if(r&&r._ref===i){e=r;break}}}!e&&t&&this._ref&&(e=Ii(t,this._ref)),this._page=e}return this._page},i.prototype._beginSave=function(){if(!this._isLoaded){var t=this._bounds;this._dictionary.update("Rect",fi([t.x,t.y,t.width,t.height],this._page)),this._da&&!this._isAutoResize&&this._dictionary.update("DA",this._da.toString())}},i}(Yt),Pe=function(e){function i(){return e.call(this)||this}return Jt(i,e),i._load=function(t,e,n){var r=new i;return r._isLoaded=!0,r._dictionary=t,r._crossReference=e,r._field=n,r},Object.defineProperty(i.prototype,"checked",{get:function(){var t=!1;if(this._dictionary.has("AS")){var e=this._dictionary.get("AS");if(e)t="Off"!==e.name;else{var i=this._field._dictionary.get("V");i&&(t=i.name===Ni(this._dictionary))}}return t},set:function(t){this.checked!==t&&this._dictionary.update("AS",hn.get(t?"Yes":"Off"))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){if(this._isLoaded){var e=this._mkDictionary;e&&e.has("CA")?this._style=Ei(e.get("CA")):this._style=t.PdfCheckBoxStyle.check}return this._style},set:function(t){if(this.style!==t){this._style=t;var e=this._mkDictionary;e||(e=new fn(this._crossReference),this._dictionary.update("MK",e)),e.update("CA",Li(t))}},enumerable:!0,configurable:!0}),i.prototype._doPostProcess=function(){var e=Ci(this.checked?t._PdfCheckFieldState.checked:t._PdfCheckFieldState.unchecked,this);if(e){var i=this._getPage();if(i){var n=i._graphics;n._save(),i.rotation===t.PdfRotationAngle.angle90?(n._translateTransform(n._size[0],n._size[1]),n._rotateTransform(90)):i.rotation===t.PdfRotationAngle.angle180?(n._translateTransform(n._size[0],n._size[1]),n._rotateTransform(-180)):i.rotation===t.PdfRotationAngle.angle270&&(n._translateTransform(n._size[0],n._size[1]),n._rotateTransform(270)),n._sw._setTextRenderingMode(t._TextRenderingMode.fill),n._drawTemplate(e,this.bounds),n._restore()}}this._dictionary._updated=!1},i.prototype._postProcess=function(t){var e=this._field;t||(t=e&&e.checked?"Yes":"Off"),this._dictionary.update("AS",hn.get(t))},i.prototype._setField=function(e){this._field=e,this._field._stringFormat=new j(this.textAlignment,t.PdfVerticalAlignment.middle),this._field._addToKid(this)},i}(Se),Ae=function(e){function i(t,i,n){var r=e.call(this)||this;return n&&t&&i&&(n instanceof zt?r._initializeItem(t,i,n.page,n):r._initializeItem(t,i,n)),r}return Jt(i,e),i._load=function(t,e,n){var r=new i;return r._isLoaded=!0,r._dictionary=t,r._crossReference=e,r._field=n,r},Object.defineProperty(i.prototype,"selected",{get:function(){return this._index===this._field.selectedIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._isLoaded&&!this._optionValue&&(this._optionValue=Ni(this._dictionary)),this._optionValue},set:function(t){this._optionValue=t},enumerable:!0,configurable:!0}),i.prototype._initializeItem=function(e,i,n,r){this._optionValue=e,this._page=n,this._create(this._page,i,this._field),this.textAlignment=t.PdfTextAlignment.left,this._dictionary.update("MK",new fn(this._crossReference)),this._mkDictionary.update("BC",[0,0,0]),this._mkDictionary.update("BG",[1,1,1]),this.style=t.PdfCheckBoxStyle.circle,this._dictionary.update("DA","/TiRo 0 Tf 0 0 0 rg"),r&&(this._setField(r),this._dictionary.update("Parent",r._ref))},i.prototype._postProcess=function(t){var e=this._field;!t&&e&&-1!==e.selectedIndex&&(t=e.itemAt(e.selectedIndex).value),this.value===t?this._dictionary.update("AS",hn.get(this.value)):this._dictionary.update("AS",hn.get("Off"))},i}(Pe),xe=function(t){function e(e,i,n){var r=t.call(this)||this;return e&&i&&r._initializeItem(e,i,n),r}return Jt(e,t),e._load=function(t,i,n){var r=new e;return r._isLoaded=!0,r._dictionary=t,r._crossReference=i,r._field=n,r},Object.defineProperty(e.prototype,"text",{get:function(){return void 0===this._text&&void 0!==this._field&&(this._field instanceof qt||this._field instanceof Gt)&&(this._text=this._field._options[Number.parseInt(this._index.toString(),10)][1]),this._text},set:function(t){"string"==typeof t&&void 0!==this._field&&(this._field instanceof qt||this._field instanceof Gt)&&t!==this._field._options[Number.parseInt(this._index.toString(),10)][1]&&(this._field._options[Number.parseInt(this._index.toString(),10)][1]=t,this._text=t,this._field._dictionary._updated=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this._index===this._field.selectedIndex},enumerable:!0,configurable:!0}),e.prototype._initializeItem=function(t,e,i){this._text=t,this._value=e,i&&i instanceof qt&&i._addToOptions(this,i)},e}(Pe),ke=function(){function e(e,i,n){this._cap=void 0!==e&&e,this._type=void 0!==i?i:t.PdfLineCaptionType.inline,this._offset=void 0!==n?n:[0,0]}return Object.defineProperty(e.prototype,"cap",{get:function(){return this._cap},set:function(t){t!==this._cap&&(this._cap=t,this._dictionary&&this._dictionary.update("Cap",t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){e!==this._type&&(this._type=e,this._dictionary&&this._dictionary.update("CP",hn.get(e===t.PdfLineCaptionType.top?"Top":"Inline")))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(t){ei(t,this._offset)&&(this._offset=t,this._dictionary&&this._dictionary.update("CO",t))},enumerable:!0,configurable:!0}),e}(),Te=function(){function e(e,i){this._begin=void 0!==e?e:t.PdfLineEndingStyle.none,this._end=void 0!==i?i:t.PdfLineEndingStyle.none}return Object.defineProperty(e.prototype,"begin",{get:function(){return this._begin},set:function(t){t!==this._begin&&(this._begin=t,this._dictionary&&this._dictionary.update("LE",[hn.get(mi(t)),hn.get(mi(this._end))]))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},set:function(t){t!==this._end&&(this._end=t,this._dictionary&&this._dictionary.update("LE",[hn.get(mi(this._begin)),hn.get(mi(t))]))},enumerable:!0,configurable:!0}),e}(),Re=function(){function e(e,i,n){this._width=void 0!==e?e:1,this._style=void 0!==i?i:t.PdfBorderStyle.solid,void 0!==n&&Array.isArray(n)&&(this._dash=n)}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){if(t!==this._width&&(this._width=t,this._dictionary)){var e=this._dictionary.has("BS")?this._dictionary.get("BS"):new fn(this._crossReference);e.update("Type",hn.get("Border")),e.update("W",this._width),e.update("S",yi(this._style)),this._dash&&e.update("D",this._dash),this._dictionary.update("BS",e),this._dictionary._updated=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){if(t!==this._style&&(this._style=t,this._dictionary)){var e=this._dictionary.has("BS")?this._dictionary.get("BS"):new fn(this._crossReference);e.update("Type",hn.get("Border")),e.update("W",this._width),e.update("S",yi(this._style)),this._dash&&e.update("D",this._dash),this._dictionary.update("BS",e),this._dictionary._updated=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dash",{get:function(){return this._dash},set:function(t){if((void 0===this._dash||ei(t,this._dash))&&(this._dash=t,this._dictionary)){var e=this._dictionary.has("BS")?this._dictionary.get("BS"):new fn(this._crossReference);e.update("Type",hn.get("Border")),e.update("W",this._width),e.update("S",yi(this._style)),e.update("D",this._dash),this._dictionary.update("BS",e),this._dictionary._updated=!0}},enumerable:!0,configurable:!0}),e}(),Fe=function(t){function e(e,i,n,r,a){var s=t.call(this,e,r,a)||this;return s._hRadius=void 0!==i?i:0,s._vRadius=void 0!==n?n:0,s}return Jt(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){if(t!==this._width&&(this._width=t,this._dictionary)){this._dictionary.update("Border",[this._hRadius,this._vRadius,this._width]);var e=this._dictionary.has("BS")?this._dictionary.get("BS"):new fn(this._crossReference);e.update("Type",hn.get("Border")),e.update("W",this._width),e.update("S",yi(this._style)),this._dash&&e.update("D",this._dash),this._dictionary.update("BS",e),this._dictionary._updated=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hRadius",{get:function(){return this._hRadius},set:function(t){t!==this._hRadius&&(this._hRadius=t,this._dictionary&&this._dictionary.update("Border",[this._hRadius,this._vRadius,this._width]))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vRadius",{get:function(){return this._vRadius},set:function(t){t!==this._vRadius&&(this._vRadius=t,this._dictionary&&this._dictionary.update("Border",[this._hRadius,this._vRadius,this._width]))},enumerable:!0,configurable:!0}),e}(Re),Ie=function(){function e(t){if(this._intensity=0,null!=t){if(t.has("BE")){var e=this._dictionary.get("BE");e&&(e.has("I")&&(this._intensity=e.get("I")),e.has("S")&&(this._style=this._getBorderEffect(e.get("S"))))}}else this._dictionary=new fn,this._dictionary.set("I",this._intensity),this._dictionary.set("S",this._styleToEffect(this._style))}return Object.defineProperty(e.prototype,"intensity",{get:function(){return this._intensity},set:function(t){if(t!==this._intensity){if(this._intensity=t,this._dictionary){var e=this._dictionary.has("BE")?this._dictionary.get("BE"):new fn(this._crossReference);e.update("I",this._intensity),e.update("S",this._styleToEffect(this._style)),this._dictionary.update("BE",e),this._dictionary._updated=!0}this._dictionary._updated=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){if(t!==this._style&&(this._style=t,this._dictionary)){var e=this._dictionary.has("BE")?this._dictionary.get("BE"):new fn(this._crossReference);e.update("I",this._intensity),e.update("S",this._styleToEffect(this._style)),this._dictionary.update("BE",e),this._dictionary._updated=!0}},enumerable:!0,configurable:!0}),e.prototype._getBorderEffect=function(e){return"/C"===e?t.PdfBorderEffectStyle.cloudy:t.PdfBorderEffectStyle.solid},e.prototype._styleToEffect=function(e){return e===t.PdfBorderEffectStyle.cloudy?"C":"S"},e}(),Ne=function(){this.borderWidth=1},Ce=function(){this.startAngle=0,this.endAngle=0},Me=function(){function t(t,e,i){this._annotations=t,this._page=i,this._crossReference=e,this._parsedAnnotations=new Map,this._comments=[]}return Object.defineProperty(t.prototype,"count",{get:function(){return this._annotations.length},enumerable:!0,configurable:!0}),t.prototype.at=function(t){if(t<0||t>=this._annotations.length)throw Error("Index out of range.");if(!this._parsedAnnotations.has(t)){var e=this._annotations[Number.parseInt(t.toString(),10)];if(void 0!==e&&e instanceof _n&&(e=this._crossReference._fetch(e)),void 0!==e&&e instanceof fn){var i=this._parseAnnotation(e);i&&(i._ref=this._annotations[Number.parseInt(t.toString(),10)],this._parsedAnnotations.set(t,i))}}return this._parsedAnnotations.get(t)},t.prototype.add=function(t){if(null==t)throw Error("annotation cannot be null or undefined");if(t._isLoaded)throw Error("cannot add an existing annotation");t._initialize(this._page);var e=this._crossReference._getNextReference();this._crossReference._cacheMap.set(e,t._dictionary),t._ref=e;var i=this._annotations.length;return this._annotations.push(e),this._parsedAnnotations.set(i,t),this._page._pageDictionary.set("Annots",this._annotations),this._page._pageDictionary._updated=!0,t instanceof Zt&&this._addCommentsAndReview(t,t._dictionary.get("F")),i},t.prototype.remove=function(t){if(t._ref){var e=this._annotations.indexOf(t._ref);e>-1&&this.removeAt(e)}},t.prototype.removeAt=function(t){if(t<0||t>=this._annotations.length)throw Error("Index out of range.");var e=this._annotations[Number.parseInt(t.toString(),10)];if(e&&this._page){var i=this._page._getProperty("Annots"),n=i.indexOf(e);n>-1&&i.splice(n,1),this._page._pageDictionary.set("Annots",i),this._page._pageDictionary._updated=!0,this._annotations.indexOf(e)>-1&&this._annotations.splice(t,1),this._parsedAnnotations.has(t)&&this._parsedAnnotations.delete(t);var r=this._page._crossReference;r&&r._cacheMap.has(e)&&r._cacheMap.delete(e)}},t.prototype._addCommentsAndReview=function(t,e){this._updateChildReference(t,t.comments,e),this._updateChildReference(t,t.reviewHistory,e)},t.prototype._updateChildReference=function(t,e,i){if(e&&e.count>0){if(30===i)throw new Error("Could not add comments/reviews to the review");for(var n=0;n<e.count;n++){var r=e._collection[Number.parseInt(n.toString(),10)];r&&!r._dictionary.has("IRT")&&(0!==n&&e._isReview?r._dictionary.update("IRT",e._collection[n-1]._ref):r._dictionary.update("IRT",t._ref),e._isReview?r._isReview=!0:r._isComment=!0,this.add(r))}}},t.prototype._parseAnnotation=function(t){var e;if(t.has("Subtype")){var i=t.get("Subtype"),n=t.get("Rect");if(i){var r=void 0;switch(i.name){case"Line":e=$t._load(this._page,t);break;case"Circle":if(t.has("Measure"))e=te._load(this._page,t);else e=n[2]-n[0]===n[3]-n[1]?te._load(this._page,t):ee._load(this._page,t);break;case"Square":e=n[2]===n[3]?ie._load(this._page,t):ne._load(this._page,t);break;case"Polygon":e=re._load(this._page,t);break;case"PolyLine":e=t.has("Measure")?se._load(this._page,t):ae._load(this._page,t);break;case"Ink":e=oe._load(this._page,t);break;case"Popup":case"Text":e=he._load(this._page,t);break;case"Link":if(t.has("A")&&(r=t.get("A")),r&&r.has("S")){var a=r.get("S").name;if(a){var s=this._hasValidBorder(t.getArray("Border"));"URI"===a?e=s?le._load(this._page,t):this._getLinkAnnotation(t):"Launch"===a?e=ce._load(this._page,t):"GoToR"===a?e=this._getLinkAnnotation(t):"GoTo"===a&&(e=de._load(this._page,t))}}else"Link"===i.name&&(e=de._load(this._page,t));break;case"FileAttachment":e=pe._load(this._page,t);break;case"_3D":e=fe._load(this._page,t);break;case"FreeText":e=me._load(this._page,t);break;case"Redact":e=ve._load(this._page,t);break;case"RichMedia":e=we._load(this._page,t);break;case"Watermark":e=ge._load(this._page,t);break;case"Stamp":e=ye._load(this._page,t);break;case"Sound":e=be._load(this._page,t);break;case"Highlight":case"Squiggly":case"StrikeOut":case"Underline":e=ue._load(this._page,t)}}}return e},t.prototype._getLinkAnnotation=function(t){var e;if(t.has("A")){var i=t.get("A");if(i&&i.has("S")){var n=i.get("S");n&&"GoToR"===n.name&&i.has("F")?e=ce._load(this._page,t):n&&"URI"===n.name&&(e=_e._load(this._page,t))}}else e=_e._load(this._page,t);return e},t.prototype._hasValidBorder=function(t){if(null==t)return!1;for(var e=0;e<t.length;e++){var i=0,n=t[Number.parseInt(e.toString(),10)];if(null!=n&&(i=n),i>0)return!1}return!0},t.prototype._doPostProcess=function(t){for(var e=this.count-1;e>=0;e--){var i=this.at(e);i&&i._doPostProcess(t)}},t.prototype._reArrange=function(t,e,i){if(this._annotations){e>this._annotations.length&&(e=0),i>=this._annotations.length&&(i=this._annotations.indexOf(t));var n=this._crossReference._fetch(this._annotations[Number.parseInt(i.toString(),10)]);if(n.has("Parent")){var r=n.getRaw("Parent");if(r&&r===t||t===this._annotations[Number.parseInt(i.toString(),10)]){var a=this._annotations[Number.parseInt(i.toString(),10)];this._annotations[Number.parseInt(i.toString(),10)]=this._annotations[Number.parseInt(e.toString(),10)],this._annotations[Number.parseInt(e.toString(),10)]=a}}}return this._annotations},t}(),Be=function(){function e(t,e){this._collection=[],this._annotation=t,this._isReview=e,(this._annotation._isLoaded||void 0!==t._page)&&(this._page=t._page,this._parentDictionary=t._dictionary,this._annotation._isLoaded&&this._parseCommentsOrReview())}return Object.defineProperty(e.prototype,"count",{get:function(){return this._collection.length},enumerable:!0,configurable:!0}),e.prototype.at=function(t){if(t<0||t>=this._collection.length)throw Error("Index out of range.");return this._collection[Number.parseInt(t.toString(),10)]},e.prototype.add=function(e){if(30===this._annotation._dictionary.get("F"))throw new Error("Could not add comments/reviews to the review");if(e._dictionary.update("F",this._annotation.flags===t.PdfAnnotationFlag.locked?128:this._isReview?30:28),this._annotation&&(this._annotation._isLoaded||this._page&&this._annotation._ref)){this._page.annotations.add(e);var i=this._collection.length;0!==i&&this._isReview?e._dictionary.update("IRT",this._collection[Number.parseInt((i-1).toString(),10)]._ref):e._dictionary.update("IRT",this._annotation._ref),this._isReview?e._isReview=!0:e._isComment=!0}this._collection.push(e)},e.prototype.remove=function(t){var e=this._collection.indexOf(t);e>-1&&this.removeAt(e)},e.prototype.removeAt=function(t){if(!(t>-1&&t<this._collection.length))throw new Error("Index out of range.");var e=this._collection[Number.parseInt(t.toString(),10)];if(this._isReview&&t<this._collection.length-1){var i=this._collection[Number.parseInt((t+1).toString(),10)],n=e._dictionary._get("IRT");i._dictionary.set("IRT",n),i._dictionary._updated=!0}this._collection.splice(t,1),this._page.annotations.remove(e)},e.prototype._parseCommentsOrReview=function(){this._isReview?this._parseReview():this._parseComments()},e.prototype._parseReview=function(){var t=this._page.annotations,e=new Map;if(e.set(this._annotation._ref,this._annotation),t._comments&&t._comments.length>0){for(var i=[],n=0;n<t._comments.length;n++){var r=(s=t._comments[Number.parseInt(n.toString(),10)])._dictionary._get("IRT");s._isReview&&r&&e.has(r)?(this._collection.push(s),e.set(s._ref,s)):i.push(s)}i.length>0?t._comments=i:t._comments=[]}else{var a=t.count;for(n=0;n<a;n++){var s;if((s=t.at(n))&&s instanceof he){var o=s._dictionary;if(s._dictionary.has("IRT")){r=o._get("IRT");s._isReview&&r&&e.has(r)?(this._collection.push(s),e.set(s._ref,s)):t._comments.push(s)}}}}e.clear()},e.prototype._parseComments=function(){var t=this._page.annotations;if(t._comments&&t._comments.length>0){for(var e=[],i=0;i<t._comments.length;i++){var n=Zi(s=(a=t._comments[Number.parseInt(i.toString(),10)])._dictionary);(o=s._get("IRT"))&&o===this._annotation._ref&&!n?this._collection.push(a):e.push(a)}e.length>0?t._comments=e:t._comments=[]}else{var r=t.count;for(i=0;i<r;i++){var a;if((a=t.at(i))&&a instanceof he){var s=a._dictionary;if(a._dictionary.has("IRT")){var o;n=Zi(s);(o=s._get("IRT"))&&o===this._annotation._ref&&!n?this._collection.push(a):t._comments.push(a)}}}}},e}(),Le=function(){function e(t,e,i,n){this._isAnnotationParsed=!1,this._pageIndex=e,this._pageDictionary=i,this._crossReference=t,this._ref=n}return Object.defineProperty(e.prototype,"annotations",{get:function(){if(void 0===this._annotations){if(this._pageDictionary.has("Annots")){var t=this._getProperty("Annots");if(t&&Array.isArray(t)){var e=this._crossReference._document.form._parseWidgetReferences();if(e&&e.length>0){var i=[];t.forEach((function(t){-1===e.indexOf(t)&&i.push(t)})),this._annotations=new Me(i,this._crossReference,this)}else this._annotations=new Me(t,this._crossReference,this)}}void 0===this._annotations&&(this._annotations=new Me([],this._crossReference,this))}return this._annotations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(void 0===this._size){var t=this.mediaBox,e=0,i=0;t&&(e=t[2]-t[0],i=0!==t[3]?t[3]-t[1]:t[1]),i<0&&(i=-i),e<0&&(e=-e),this._size=[e,i]}return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){var e=0;return void 0===this._rotation&&(e=ci(this._pageDictionary,"Rotate",!1,!0,"Parent")),e<0&&(e+=360),void 0!==e?e/90:t.PdfRotationAngle.angle0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabOrder",{get:function(){return this._obtainTabOrder()},set:function(e){this._tabOrder=e;var i="";this._tabOrder!==t.PdfFormFieldsTabOrder.none&&(this._tabOrder===t.PdfFormFieldsTabOrder.row?i="R":this._tabOrder===t.PdfFormFieldsTabOrder.column?i="C":this._tabOrder===t.PdfFormFieldsTabOrder.structure&&(i="S")),this._pageDictionary.update("Tabs",hn.get(i))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cropBox",{get:function(){return void 0===this._cBox&&(this._cBox=ci(this._pageDictionary,"CropBox",!1,!0,"Parent","P")),this._cBox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mediaBox",{get:function(){return void 0===this._mBox&&(this._mBox=ci(this._pageDictionary,"MediaBox",!1,!0,"Parent","P")),this._mBox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){if(void 0===this._orientation&&void 0!==this.size){var e=this.size;e[0]>e[1]?this._orientation=t.PdfPageOrientation.landscape:this._orientation=t.PdfPageOrientation.portrait}return this._orientation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_origin",{get:function(){return(void 0===this._o||0===this._o[0]&&0===this._o[1])&&(this._o=[this.mediaBox[0],this._mBox[1]]),this._o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_graphics",{get:function(){return(void 0===this._g||this._needInitializeGraphics)&&this._parseGraphics(),this._g},enumerable:!0,configurable:!0}),e.prototype._addWidget=function(t){var e;this._pageDictionary.has("Annots")&&(e=this._getProperty("Annots")),e&&Array.isArray(e)?e.push(t):this._pageDictionary.update("Annots",[t]),this._pageDictionary._updated=!0},e.prototype._getProperty=function(t,e){void 0===e&&(e=!1);var i=ci(this._pageDictionary,t,e,!1);return Array.isArray(i)?1!==i.length&&i[0]instanceof fn?fn.merge(this._crossReference,i):i[0]:i},e.prototype._parseGraphics=function(){this._loadContents();var t=new Cn([32,113,32,10]),e=this._crossReference._getNextReference();this._crossReference._cacheMap.set(e,t),this._contents.splice(0,0,e);var i=new Cn([32,81,32,10]),n=this._crossReference._getNextReference();this._crossReference._cacheMap.set(n,i),this._contents.push(n);var r=new Cn([]),a=this._crossReference._getNextReference();this._crossReference._cacheMap.set(a,r),this._contents.push(a),this._pageDictionary.set("Contents",this._contents),this._pageDictionary._updated=!0,this._initializeGraphics(r)},e.prototype._loadContents=function(){var t,e=this._pageDictionary.getRaw("Contents");null!=e&&e instanceof _n&&(t=e,e=this._crossReference._fetch(t)),e&&e instanceof In?this._contents=[t]:e&&Array.isArray(e)?this._contents=e:this._contents=[]},e.prototype._initializeGraphics=function(e){var i,n=!1,r=0,a=0,s=0,o=0,h=this.size,c=this.mediaBox;if(c&&c.length>=4&&(r=c[0],a=c[1],s=c[2],o=c[3]),this._pageDictionary.has("CropBox"))if((i=this.cropBox)&&i.length>=4){var _=i[0],d=i[1],l=i[2],p=i[3];(_<0||d<0||l<0||p<0)&&Math.floor(Math.abs(d))===Math.floor(Math.abs(h[1]))&&Math.floor(Math.abs(_))===Math.floor(Math.abs(h[0]))?this._g=new Oe([Math.max(_,l),Math.max(d,p)],e,this._crossReference,this):(this._g=new Oe(h,e,this._crossReference,this),this._g._cropBox=i)}else this._g=new Oe(h,e,this._crossReference,this);else if((r<0||a<0||s<0||o<0)&&Math.floor(Math.abs(a))===Math.floor(Math.abs(h[1]))&&Math.floor(Math.abs(s))===Math.floor(Math.abs(h[0]))){var f=Math.max(r,s),u=Math.max(a,o);(f<=0||u<=0)&&(n=!0,r<0&&(r=-r),a<0&&(a=-a),s<0&&(s=-s),o<0&&(o=-o),f=Math.max(r,s),u=Math.max(a,o)),this._g=new Oe([f,u],e,this._crossReference,this)}else this._g=new Oe(h,e,this._crossReference,this);this._pageDictionary.has("MediaBox")&&(this._g._mediaBoxUpperRightBound=n?-a:o),this._graphicsState=this._g._save();var g=this._origin;g[0]>=0&&g[1]>=0||Math.sign(g[0])!==Math.sign(g[1])?this._g._initializeCoordinates():this._g._initializeCoordinates(this);var y=this.rotation;if(!Number.isNaN(y)&&(y!==t.PdfRotationAngle.angle0||this._pageDictionary.has("Rotate"))){var b=void 0;b=this._pageDictionary.has("Rotate")?this._pageDictionary.get("Rotate"):90*y;var m=this._g._clipBounds;90===b?(this._g._translateTransform(0,h[1]),this._g._rotateTransform(-90),this._g._clipBounds=[m[0],m[1],h[0],h[1]]):180===b?(this._g._translateTransform(h[0],h[1]),this._g._rotateTransform(-180)):270===b&&(this._g._translateTransform(h[0],0),this._g._rotateTransform(-270),this._g._clipBounds=[m[0],m[1],h[1],h[0]])}this._needInitializeGraphics=!1},e.prototype._fetchResources=function(){if(void 0===this._resourceObject)if(this._pageDictionary&&this._pageDictionary.has("Resources")){var t=this._pageDictionary.getRaw("Resources");null!=t&&t instanceof _n?(this._hasResourceReference=!0,this._resourceObject=this._crossReference._fetch(t)):t instanceof fn&&(this._resourceObject=t)}else this._resourceObject=new fn(this._crossReference),this._pageDictionary.update("Resources",this._resourceObject);return this._resourceObject},e.prototype._getCropOrMediaBox=function(){var t;return this._pageDictionary.has("CropBox")?t=this._pageDictionary.getArray("CropBox"):this._pageDictionary.has("MediaBox")&&(t=this._pageDictionary.getArray("MediaBox")),t},e.prototype._beginSave=function(){void 0!==this._graphicsState&&(this._graphics._restore(this._graphicsState),this._graphicsState=null,this._needInitializeGraphics=!0)},e.prototype._destroy=function(){this._pageDictionary=void 0,this._size=void 0,this._mBox=void 0,this._cBox=void 0,this._o=void 0,this._g=void 0,this._graphicsState=void 0,this._contents=void 0},e.prototype._obtainTabOrder=function(){if(this._pageDictionary.has("Tabs")){var e=this._pageDictionary.get("Tabs");e===hn.get("R")?this._tabOrder=t.PdfFormFieldsTabOrder.row:e===hn.get("C")?this._tabOrder=t.PdfFormFieldsTabOrder.column:e===hn.get("S")?this._tabOrder=t.PdfFormFieldsTabOrder.structure:e===hn.get("W")&&(this._tabOrder=t.PdfFormFieldsTabOrder.widget)}return this._tabOrder},e}(),Ee=function(){function e(e,i){this._location=[0,0],this._destinationMode=t.PdfDestinationMode.location,this._zoom=0,this._isValid=!0,this._index=0,this._destinationBounds=[0,0,0,0],this._array=Array(),null!=e&&(e.rotation===t.PdfRotationAngle.angle180?this._location=[e._graphics._size[0],this._location[1]]:e.rotation===t.PdfRotationAngle.angle90?this._location=[0,0]:e.rotation===t.PdfRotationAngle.angle270?this._location=[e._graphics._size[0],0]:this._location=[0,this._location[1]],this._page=e),void 0!==i&&2===i.length&&(this._location=i),void 0!==i&&4===i.length&&(this._location=[i[0],i[1]],this._destinationBounds=i)}return Object.defineProperty(e.prototype,"zoom",{get:function(){return this._zoom},set:function(t){t!==this._zoom&&(this._zoom=t,this._initializePrimitive())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return this._page},set:function(t){t!==this._page&&(this._page=t,this._initializePrimitive())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageIndex",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return this._destinationMode},set:function(t){t!==this._destinationMode&&(this._destinationMode=t,this._initializePrimitive())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"location",{get:function(){return this._location},set:function(t){t!==this._location&&(this._location=t,this._initializePrimitive())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destinationBounds",{get:function(){return this._destinationBounds},set:function(t){t!==this._destinationBounds&&(this._destinationBounds=t,this._initializePrimitive())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isValid",{get:function(){return this._isValid},enumerable:!0,configurable:!0}),e.prototype._setValidation=function(t){this._isValid=t},e.prototype._initializePrimitive=function(){this._array=[];var e=this._page,i=this._page._pageDictionary;switch(null!=i&&this._array.push(this._page._ref),this._destinationMode){case t.PdfDestinationMode.location:this._array.push(hn.get("XYZ")),null!=e?(this._array.push(this._location[0]),this._array.push(this._page._graphics._size[1]-this._location[1])):(this._array.push(0),this._array.push(0)),this._array.push(this._zoom);break;case t.PdfDestinationMode.fitToPage:this._array.push(hn.get("Fit"));break;case t.PdfDestinationMode.fitR:this._array.push(hn.get("FitR")),this._array.push(this._destinationBounds[0]),this._array.push(this._destinationBounds[1]),this._array.push(this._destinationBounds[2]),this._array.push(this._destinationBounds[3]);break;case t.PdfDestinationMode.fitH:this._array.push(hn.get("FitH")),this._array.push(null!=e?e._size[1]-this._location[1]:0)}},e}(),De=function(){function t(t){this._newLine="\r\n",this._whiteSpace=" ",this._stream=t}return t.prototype._writeOperator=function(t){this._stream.write(t),this._stream.write(this._newLine)},t.prototype._saveGraphicsState=function(){this._writeOperator("q")},t.prototype._restoreGraphicsState=function(){this._writeOperator("Q")},t.prototype._writeComment=function(t){t&&t.length>0&&this._writeOperator("% "+t)},t.prototype._setGraphicsState=function(t){this._stream.write("/"+Ri(t.name)+" "),this._writeOperator("gs")},t.prototype._modifyCtm=function(t){this._stream.write(t._toString()+" "),this._writeOperator("cm")},t.prototype._modifyTM=function(t){this._stream.write(t._toString()+" "),this._writeOperator("Tm")},t.prototype._setColorSpace=function(t,e){this._stream.write("/"+t+" "),this._writeOperator(e?"CS":"cs")},t.prototype._setColor=function(t,e){this._stream.write((t[0]/255).toFixed(3)+" "+(t[1]/255).toFixed(3)+" "+(t[2]/255).toFixed(3)+" "),this._writeOperator(e?"RG":"rg")},t.prototype._appendRectangle=function(t,e,i,n){this._writePoint(t,e),this._writePoint(i,n),this._writeOperator("re")},t.prototype._writePoint=function(t,e){this._stream.write(t.toFixed(3)+" "+(-e).toFixed(3)+" ")},t.prototype._clipPath=function(t){this._stream.write((t?"W*":"W")+" n"+this._newLine)},t.prototype._fillPath=function(t){this._writeOperator(t?"f*":"f")},t.prototype._closeFillPath=function(t){this._writeOperator("h"),this._fillPath(t)},t.prototype._strokePath=function(){this._writeOperator("S")},t.prototype._closeStrokePath=function(){this._writeOperator("s")},t.prototype._fillStrokePath=function(t){this._writeOperator(t?"B*":"B")},t.prototype._closeFillStrokePath=function(t){this._writeOperator(t?"b*":"b")},t.prototype._endPath=function(){this._writeOperator("n")},t.prototype._setFont=function(t,e){this._stream.write("/"+t+" "+e.toFixed(3)+" "),this._writeOperator("Tf")},t.prototype._setTextScaling=function(t){this._stream.write(t.toFixed(3)+" "),this._writeOperator("Tz")},t.prototype._closePath=function(){this._writeOperator("h")},t.prototype._startNextLine=function(t,e){void 0===t?this._writeOperator("T*"):(this._writePoint(t,e),this._writeOperator("Td"))},t.prototype._setLeading=function(t){this._stream.write(t.toFixed(3)+" "),this._writeOperator("TL")},t.prototype._beginText=function(){this._writeOperator("BT")},t.prototype._endText=function(){this._writeOperator("ET")},t.prototype._beginPath=function(t,e){this._writePoint(t,e),this._writeOperator("m")},t.prototype._appendLineSegment=function(t,e){this._writePoint(t,e),this._writeOperator("l")},t.prototype._appendBezierSegment=function(t,e,i,n,r,a){this._writePoint(t,e),this._writePoint(i,n),this._writePoint(r,a),this._writeOperator("c")},t.prototype._setTextRenderingMode=function(t){this._stream.write(t.toString()+" "),this._writeOperator("Tr")},t.prototype._setCharacterSpacing=function(t){this._stream.write(t.toFixed(3)+" "),this._writeOperator("Tc")},t.prototype._setWordSpacing=function(t){this._stream.write(t.toFixed(3)+" "),this._writeOperator("Tw")},t.prototype._showNextLineText=function(t){this._stream.write(t),this._writeOperator("'")},t.prototype._setLineDashPattern=function(t,e){var i="[";if(t.length>1)for(var n=0;n<t.length;n++)n===t.length-1?i+=t[n].toString():i+=t[n].toString()+" ";i+="] ",i+=e.toString(),i+=" d",this._writeOperator(i)},t.prototype._setMiterLimit=function(t){this._stream.write(t.toFixed(3)+" "),this._writeOperator("M")},t.prototype._setLineWidth=function(t){this._stream.write(t.toFixed(3)+" "),this._writeOperator("w")},t.prototype._setLineCap=function(t){this._stream.write(t+" "),this._writeOperator("J")},t.prototype._setLineJoin=function(t){this._stream.write(t+" "),this._writeOperator("j")},t.prototype._executeObject=function(t){this._stream.write("/"+t.name+" "),this._writeOperator("Do")},t.prototype._beginMarkupSequence=function(t){this._stream.write("/"+t+" "),this._writeOperator("BMC")},t.prototype._endMarkupSequence=function(){this._writeOperator("EMC")},t.prototype._clear=function(){this._stream._bytes=[]},t}(),Oe=function(){function e(t,e,i,n){if(this._hasResourceReference=!1,n instanceof Le?(this._source=n._pageDictionary,this._page=n):n instanceof O&&(this._source=n._content.dictionary,this._template=n),this._source&&this._source.has("Resources")){var r=this._source.getRaw("Resources");r instanceof _n?(this._hasResourceReference=!0,this._resourceObject=i._fetch(r)):r instanceof fn&&(this._resourceObject=r)}else this._resourceObject=new fn,this._source.update("Resources",this._resourceObject);this._crossReference=i,this._sw=new De(e),this._size=t,ki("PDF",this._resourceObject),this._initialize()}return Object.defineProperty(e.prototype,"_matrix",{get:function(){return void 0===this._m&&(this._m=new je),this._m},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_resources",{get:function(){var t=this;if(void 0===this._resourceMap){if(this._resourceMap=new Map,this._resourceObject.has("Font")){var e=this._resourceObject.get("Font");e&&e.size>0&&e.forEach((function(e,i){null!=i&&i instanceof _n&&t._resourceMap.set(i,hn.get(e))}))}if(this._resourceObject.has("XObject")){var i=this._resourceObject.get("XObject");i&&i.size>0&&i.forEach((function(e,i){null!=i&&i instanceof _n&&t._resourceMap.set(i,hn.get(e))}))}if(this._resourceObject.has("ExtGState")){var n=this._resourceObject.get("ExtGState");n&&n.size>0&&(this._transparencies||(this._transparencies=new Map),n.forEach((function(e,i){null!=i&&i instanceof _n&&t._setTransparencyData(i,hn.get(e))})))}}return this._resourceMap},enumerable:!0,configurable:!0}),e.prototype._save=function(){var t=new Ve(this,this._matrix);return t._textRenderingMode=this._textRenderingMode,t._charSpacing=this._characterSpacing,t._textScaling=this._textScaling,t._wordSpacing=this._wordSpacing,t._currentBrush=this._currentBrush,t._currentPen=this._currentPen,t._currentFont=this._currentFont,this._graphicsState.push(t),this._sw._saveGraphicsState(),t},e.prototype._restore=function(t){if(this._graphicsState.length>0)if(void 0===t)this._doRestore();else if(this._graphicsState.length>0&&-1!==this._graphicsState.indexOf(t))for(;this._graphicsState.length>0&&this._doRestore()!==t;);},e.prototype._doRestore=function(){var t=this._graphicsState.pop();return this._m=t._transformationMatrix,this._currentBrush=t._currentBrush,this._currentPen=t._currentPen,this._currentFont=t._currentFont,this._characterSpacing=t._charSpacing,this._wordSpacing=t._wordSpacing,this._textScaling=t._textScaling,this._textRenderingMode=t._textRenderingMode,this._sw._restoreGraphicsState(),t},e.prototype._drawRectangle=function(t,e,i,n,r,a){var s,o;r instanceof Ge?(s=r,a&&(o=a)):o=r,this._stateControl(s,o),this._sw._appendRectangle(t,e,i,n),this._drawGraphicsPath(s,o)},e.prototype._drawPolygon=function(e,i,n){if(e.length>0){var r=void 0,a=void 0;i instanceof Ge?(r=i,n&&(a=n)):a=i,this._stateControl(r,a),this._sw._beginPath(e[0][0],e[0][1]);for(var s=1;s<e.length;s++)this._sw._appendLineSegment(e[Number.parseInt(s.toString(),10)][0],e[Number.parseInt(s.toString(),10)][1]);this._drawGraphicsPath(r,a,t._PdfFillMode.winding,!0)}},e.prototype._drawEllipse=function(e,i,n,r,a,s){var o,h;a instanceof Ge?(o=a,s&&(h=s)):h=a,this._stateControl(o,h),this._constructArcPath(e,i,e+n,i+r,0,360),this._drawGraphicsPath(o,h,t._PdfFillMode.winding,!0)},e.prototype._drawArc=function(e,i,n,r,a,s,o){0!==s&&(this._stateControl(o),this._constructArcPath(e,i,e+n,i+r,a,s),this._drawGraphicsPath(o,null,t._PdfFillMode.winding,!1))},e.prototype._drawTemplate=function(t,e){var i,n,r=this,a=t&&t._size[0]>0?e.width/t._size[0]:1,s=t&&t._size[1]>0?e.height/t._size[1]:1,o=!(1===a&&1===s);this._page&&(i=this._page.cropBox,n=this._page.mediaBox,this._page._pageDictionary.has("CropBox")&&this._page._pageDictionary.has("MediaBox")&&i[0]>0&&i[1]>0&&n[0]<0&&n[1]<0&&(this._translateTransform(i[0],-i[1]),e.x=-i[0],e.y=i[1]));var h,c=this._save(),_=new je;if(this._page){var d=this._page._pageDictionary.has("CropBox")&&this._page._pageDictionary.has("MediaBox")&&i&&n&&i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]||this._page._pageDictionary.has("MediaBox")&&n&&0===n[3];_._translate(e.x,-(e.y+(this._page._origin[0]>=0||d?e.height:0)))}else _._translate(e.x,-(e.y+e.height));if(o)if(t._isAnnotationTemplate&&t._needScale){var l=!1;if(t._content&&t._content.dictionary){var p=t._content.dictionary;if(p.has("Matrix")&&p.has("BBox")){var f=p.getArray("Matrix"),u=p.getArray("BBox");if(f&&u&&f.length>5&&u.length>3){var g=Number.parseFloat(ti(-f[1])),y=Number.parseFloat(ti(f[2])),b=Number.parseFloat(ti(a)),m=Number.parseFloat(ti(s));b===g&&m===y&&u[2]===t._size[0]&&u[3]===t._size[1]&&((_=new je)._translate(e.x-f[4],e.y+f[5]),_._scale(1,1),l=!0)}}}l||_._scale(a,s)}else _._scale(a,s);this._sw._modifyCtm(_);var v,w,S=!1,P=!0;if(this._resourceObject.has("XObject")){var A=this._resourceObject.getRaw("XObject");A instanceof _n?(S=!0,h=this._crossReference._fetch(A)):A instanceof fn&&(h=A),h&&(P=!1,this._resources.forEach((function(e,i){if(i&&i instanceof _n){var n=r._crossReference._fetch(i);n&&t&&n===t._content&&(v=e,w=i)}})))}P&&(h=new fn(this._crossReference),this._resourceObject.update("XObject",h)),void 0===v&&(v=hn.get(Ti()),w=t&&t._content.reference?t._content.reference:this._crossReference._getNextReference(),this._crossReference._cacheMap.has(w)||t&&t._content&&this._crossReference._cacheMap.set(w,t._content),h.update(v.name,w),this._resources.set(w,v),this._resourceObject._updated=!0),S&&(this._resourceObject._updated=!0),this._hasResourceReference&&(this._source._updated=!0),this._sw._executeObject(v),this._restore(c),ki("ImageB",this._resourceObject),ki("ImageC",this._resourceObject),ki("ImageI",this._resourceObject),ki("Text",this._resourceObject)},e.prototype._drawPath=function(t,e,i){(e||i)&&(this._stateControl(e,i,null),this._buildUpPath(t._points,t._pathTypes),this._drawGraphicsPath(e,i,t._fillMode,!1))},e.prototype._drawRoundedRectangle=function(t,e,i,n,r,a,s){if(null===a)throw new Error("pen");if(null===s)throw new Error("brush");var o=[t,e,i,n],h=2*r,c=[h,h],_=[o[0],o[1],c[0],c[1]],d=new It;0===r?(d._addRectangle(o[0],o[1],o[2],o[3]),this._drawPath(d,a,s)):(d._addArc(_[0],_[1],_[2],_[3],180,90),_[0]=o[0]+o[2]-h,d._addArc(_[0],_[1],_[2],_[3],270,90),_[1]=o[1]+o[3]-h,d._addArc(_[0],_[1],_[2],_[3],0,90),_[0]=o[0],d._addArc(_[0],_[1],_[2],_[3],90,90),d._closeFigure(),this._drawPath(d,a,s))},e.prototype._constructArcPath=function(t,e,i,n,r,a){var s=Fi(t,e,i,n,r,a);if(8!==s.length){var o=[s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7]];this._sw._beginPath(o[0],o[1]);for(var h=0;h<s.length;h+=8)o=[s[Number.parseInt(h.toString(),10)],s[h+1],s[h+2],s[h+3],s[h+4],s[h+5],s[h+6],s[h+7]],this._sw._appendBezierSegment(o[2],o[3],o[4],o[5],o[6],o[7])}},e.prototype._writePen=function(t){for(var e=t._width,i=t._dashPattern,n=0;n<i.length;++n)i[n]*=t._width;this._sw._setLineDashPattern(i,t._dashOffset*e),this._sw._setLineWidth(t._width),this._sw._setLineJoin(t._lineJoin),this._sw._setLineCap(t._lineCap),t._miterLimit>0&&this._sw._setMiterLimit(t._miterLimit),this._sw._setColor(t._color,!0)},e.prototype._drawString=function(t,e,i,n,r,a){var s=(new J)._layout(t,e,a,[i[2],i[3]]);if(!s._empty){var o=this._checkCorrectLayoutRectangle(s._actualSize,i[0],i[1],a);i[2]<=0&&(i[0]=o[0],i[2]=o[2]),i[3]<=0&&(i[1]=o[1],i[3]=o[3]),this._drawStringLayoutResult(s,e,n,r,i,a)}ki("Text",this._resourceObject)},e.prototype._buildUpPath=function(e,i){for(var n=0;n<e.length;n++){var r=e[Number.parseInt(n.toString(),10)],a=i[Number.parseInt(n.toString(),10)];switch(15&a){case t._PathPointType.start:this._sw._beginPath(r[0],r[1]);break;case t._PathPointType.bezier:var s=this._getBezierPoint(e,i,n);n=s.index;var o=s.point;n=(s=this._getBezierPoint(e,i,n)).index;var h=s.point;this._sw._appendBezierSegment(r[0],r[1],o[0],o[1],h[0],h[1]);break;case t._PathPointType.line:this._sw._appendLineSegment(r[0],r[1]);break;default:throw new Error("Incorrect path formation.")}((a=i[Number.parseInt(n.toString(),10)])&t._PathPointType.closePath)===t._PathPointType.closePath&&this._sw._closePath()}},e.prototype._getBezierPoint=function(e,i,n){if(i[Number.parseInt(n.toString(),10)]!==t._PathPointType.bezier)throw new Error("Malforming path.");return{index:++n,point:e[Number.parseInt(n.toString(),10)]}},e.prototype._initialize=function(){this._mediaBoxUpperRightBound=0,this._characterSpacing=-1,this._wordSpacing=-1,this._textScaling=-100,this._textRenderingMode=-1,this._graphicsState=[],this._clipBounds=[0,0,this._size[0],this._size[1]],this._colorSpaceInitialized=!1,this._startCutIndex=-1},e.prototype._initializeCurrentColorSpace=function(){this._colorSpaceInitialized||(this._sw._setColorSpace("DeviceRGB",!0),this._sw._setColorSpace("DeviceRGB",!1),this._colorSpaceInitialized=!0)},e.prototype._brushControl=function(t){this._sw._setColor(t._color,!1),this._currentBrush=t},e.prototype._penControl=function(t){this._currentPen=t,this._writePen(t),this._currentPen=t},e.prototype._fontControl=function(t){var e,i=this,n=t._metrics._size;this._currentFont=t;var r,a,s=!1,o=!0;if(this._resourceObject.has("Font")){var h=this._resourceObject.getRaw("Font");null!=h&&(h instanceof _n?(s=!0,e=this._crossReference._fetch(h)):h instanceof fn&&(e=h)),null!=e&&(o=!1,this._resources.forEach((function(e,n){if(null!=n){var s=i._crossReference._fetch(n);s&&s===t._dictionary&&(r=e,a=n)}})))}if(o&&(e=new fn(this._crossReference),this._resourceObject.update("Font",e)),void 0===r)if(r=hn.get(Ti()),a=this._crossReference._getNextReference(),t._dictionary)this._crossReference._cacheMap.set(a,t._dictionary),e.update(r.name,a),this._resources.set(a,r);else if(t instanceof xt){var c=t._fontInternal;c&&c._fontDictionary&&this._crossReference._cacheMap.set(a,c._fontDictionary),e.update(r.name,a),this._resources.set(a,r),c&&c._fontDescriptor&&(a=this._crossReference._getNextReference(),this._crossReference._cacheMap.set(a,c._fontDescriptor),c._fontDictionary.update("FontDescriptor",a))}s&&(this._resourceObject._updated=!0),this._hasResourceReference&&(this._source._updated=!0),this._sw._setFont(r.name,n)},e.prototype._stateControl=function(t,e,i){(t||e)&&this._initializeCurrentColorSpace(),t&&this._penControl(t),e&&this._brushControl(e),i&&this._fontControl(i)},e.prototype._drawStringLayoutResult=function(e,i,n,r,a,s){if(!e._empty){var o=s&&void 0!==s.lineLimit&&!s.lineLimit,h=void 0===s||s&&void 0!==s.noClip&&!s.noClip,c=o&&h,_=void 0;if(c){_=this._save();var d=[a[0],a[1],e._actualSize[0],e._actualSize[1]];a[2]>0&&(d[2]=a[2]),s.lineAlignment===t.PdfVerticalAlignment.middle?d[1]+=(a[3]-d[3])/2:s.lineAlignment===t.PdfVerticalAlignment.bottom&&(d[1]+=a[3]-d[3]),this._setClip(d)}this._applyStringSettings(i,n,r,s);var l=null!=s?s.horizontalScalingFactor:100;l!==this._textScaling&&(this._sw._setTextScaling(l),this._textScaling=l);var p=this._getTextVerticalAlignShift(e._actualSize[1],a[3],s),f=null==s||0===s.lineSpacing?i._metrics._getHeight():s.lineSpacing+i._metrics._getHeight(),u=f-i._metrics._getAscent();s&&s.lineAlignment===t.PdfVerticalAlignment.bottom&&a[3]-e._actualSize[1]!=0&&a[3]-e._actualSize[1]<i._metrics._size/2-1&&Number.parseFloat(ti(a[3]))<=Number.parseFloat(ti(i._metrics._getHeight()))&&(u=-f/i._metrics._size);var g=new je;g._translate(a[0],-(a[1]+i._metrics._getHeight())-(i._metrics._getDescent()>0?-i._metrics._getDescent():i._metrics._getDescent())-p),this._sw._modifyTM(g),a[3]<i._metrics._size&&e._actualSize[1]-a[3]<i._metrics._size/2-1&&(p=0),0!==p&&null!==s&&s.lineAlignment===t.PdfVerticalAlignment.bottom&&a[3]-e._actualSize[1]!=0&&a[3]-e._actualSize[1]>i._metrics._size/2-1&&(p-=(u-(f-i._metrics._size))/2),this._drawLayoutResult(e,i,s,a),0!==p&&this._sw._startNextLine(0,-(p-e._lineHeight)),ki("Text",this._resourceObject),this._sw._endText(),this._underlineStrikeoutText(r,e,i,a,s),c&&this._restore(_)}},e.prototype._getNextPage=function(){var t,e=this._crossReference._document.pageCount;return this._page._pageIndex<e-2&&(t=this._crossReference._document.getPage(this._page._pageIndex+1)),t},e.prototype._applyStringSettings=function(e,i,n,r){var a=t._TextRenderingMode.fill;null!=i&&null!=n?a=t._TextRenderingMode.fillStroke:i?a=t._TextRenderingMode.stroke:n&&(a=t._TextRenderingMode.fill),r&&r.clipPath&&(a|=t._TextRenderingMode.clipFlag),this._sw._beginText(),this._stateControl(i,n,e),a!==this._textRenderingMode&&(this._sw._setTextRenderingMode(a),this._textRenderingMode=a);var s=null!=r?r.characterSpacing:0;s!==this._characterSpacing&&(this._sw._setCharacterSpacing(s),this._characterSpacing=s);var o=null!=r?r.wordSpacing:0;o!==this._wordSpacing&&(this._sw._setWordSpacing(o),this._wordSpacing=o)},e.prototype._drawLayoutResult=function(t,e,i,n){for(var r=null==i||0===i.lineSpacing?e._metrics._getHeight():i.lineSpacing+e._metrics._getHeight(),a=t._lines,s=0,o=a.length;s<o&&s!==this._startCutIndex;s++){var h=a[Number.parseInt(s.toString(),10)],c=h._width,_=this._getHorizontalAlignShift(c,n[2],i)+this._getLineIndent(h,i,n[2],0===s);if(0!==_&&this._sw._startNextLine(_,0),this._drawAsciiLine(h,n[2],i,e),s+1!==o){var d=this._getTextVerticalAlignShift(t._actualSize[1],n[3],i),l=new je,p=-(n[1]+e._metrics._getHeight())-e._metrics._getDescent()-d-r*(s+1);l._translate(n[0],p),this._sw._modifyTM(l)}}},e.prototype._getTextVerticalAlignShift=function(e,i,n){var r=0;if(i>=0&&null!=n&&n.lineAlignment!==t.PdfVerticalAlignment.top)switch(n.lineAlignment){case t.PdfVerticalAlignment.middle:r=(i-e)/2;break;case t.PdfVerticalAlignment.bottom:r=i-e}return r},e.prototype._getHorizontalAlignShift=function(e,i,n){var r=0;if(i>=0&&null!=n&&n.alignment!==t.PdfTextAlignment.left)switch(n.alignment){case t.PdfTextAlignment.center:r=(i-e)/2;break;case t.PdfTextAlignment.right:r=i-e}return r},e.prototype._getLineIndent=function(e,i,n,r){var a=0,s=(e._lineType&t._LineType.firstParagraphLine)>0;return i&&s&&(a=r?i.firstLineIndent:i._paragraphIndent,a=n>0?Math.min(n,a):a),a},e.prototype._drawAsciiLine=function(t,e,i,n){this._justifyLine(t,e,i,n);var r="";if(-1!==t._text.indexOf("(")||-1!==t._text.indexOf(")"))for(var a=0;a<t._text.length;a++)"("===t._text[Number.parseInt(a.toString(),10)]?r+="\\(":")"===t._text[Number.parseInt(a.toString(),10)]?r+="\\)":r+=t._text[Number.parseInt(a.toString(),10)];""===r&&(r=t._text),this._sw._showNextLineText("("+r+")")},e.prototype._justifyLine=function(e,i,n,r){var a=e._text,s=e._width,o=this._shouldJustify(e,i,n,r),h=n&&0!==n.wordSpacing,c=r._getCharsCount(a,[" ","\t"]),_=0;return o?(h&&(s-=c*n.wordSpacing),_=(i-s)/c,this._sw._setWordSpacing(_)):n&&n.alignment===t.PdfTextAlignment.justify&&this._sw._setWordSpacing(0),_},e.prototype._shouldJustify=function(e,i,n,r){var a=e._text,s=e._width,o=n&&n.alignment===t.PdfTextAlignment.justify,h=i>=0&&s<i,c=r._getCharsCount(a,[" ","\t"])>0&&" "!==a[0],_=(e._lineType&t._LineType.layoutBreak)>0;return o&&h&&c&&(_||n.alignment===t.PdfTextAlignment.justify)},e.prototype._underlineStrikeoutText=function(t,e,i,n,r){if(i.isUnderline||i.isStrikeout){var a=this._createUnderlineStrikeoutPen(t,i);if(null!=a)for(var s=this._getTextVerticalAlignShift(e._actualSize[1],n[3],r),o=n[1]+s+i._metrics._getAscent()+1.5*a._width,h=n[1]+s+i._metrics._getHeight()/2+1.5*a._width,c=e._lines,_=0;_<e._lineCount;_++){var d=c[Number.parseInt(_.toString(),10)],l=d._width,p=this._getHorizontalAlignShift(l,n[2],r),f=this._getLineIndent(d,r,n[2],0===_),u=n[0]+p,g=this._shouldJustify(d,n[2],r,i)?u+n[2]-f:u+l-f;i.isUnderline&&(this._drawLine(a,u,o,g,o),o+=e._lineHeight),i.isStrikeout&&(this._drawLine(a,u,h,g,h),h+=e._lineHeight)}}},e.prototype._drawLine=function(t,e,i,n,r){this._stateControl(t),this._sw._beginPath(e,i),this._sw._appendLineSegment(n,r),this._sw._strokePath(),ki("PDF",this._resourceObject)},e.prototype._createUnderlineStrikeoutPen=function(t,e){return new Ge(t._color,e._metrics._size/20)},e.prototype._checkCorrectLayoutRectangle=function(e,i,n,r){var a=[i,n,e[0],e[0]];if(r){switch(r.alignment){case t.PdfTextAlignment.center:a[0]=a[0]-a[2]/2;break;case t.PdfTextAlignment.right:a[0]=a[0]-a[2]}switch(r.lineAlignment){case t.PdfVerticalAlignment.middle:a[1]=a[1]-a[3]/2;break;case t.PdfVerticalAlignment.bottom:a[1]=a[1]-a[3]}}return a},e.prototype._drawGraphicsPath=function(e,i,n,r){void 0===n&&(n=t._PdfFillMode.winding);var a=null!=i,s=null!=e,o=n===t._PdfFillMode.alternate;s&&a?r?this._sw._closeFillStrokePath(o):this._sw._fillStrokePath(o):s||a?s?r?this._sw._closeStrokePath():this._sw._strokePath():r?this._sw._closeFillPath(o):this._sw._fillPath(o):this._sw._endPath()},e.prototype._initializeCoordinates=function(t){var e;if(t){var i=[0,0],n=!1;if(t._pageDictionary.has("CropBox")&&t._pageDictionary.has("MediaBox")){e=t._pageDictionary.getArray("CropBox");var r=t._pageDictionary.getArray("MediaBox");e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&(n=!0),e[0]>0&&e[3]>0&&r[0]<0&&r[1]<0?(this._translateTransform(e[0],-e[3]),i[0]=-e[0],i[1]=e[3]):t._pageDictionary.has("CropBox")||(n=!0),n&&(this._sw._writeComment("Change co-ordinate system to left/top."),this._cropBox?this._translateTransform(this._cropBox[0],-this._cropBox[3]):-t._origin[1]<this._mediaBoxUpperRightBound||0===this._mediaBoxUpperRightBound?this._translateTransform(0,-this._size[1]):this._translateTransform(0,-this._mediaBoxUpperRightBound))}}else this._sw._writeComment("Change co-ordinate system to left/top."),this._mediaBoxUpperRightBound!==-this._size[1]&&(this._cropBox&&((e=this._cropBox)[0]>0||e[1]>0||this._size[0]===e[2]||this._size[1]===e[3])?this._translateTransform(e[0],-e[3]):this._mediaBoxUpperRightBound===this._size[1]||0===this._mediaBoxUpperRightBound?this._translateTransform(0,-this._size[1]):this._translateTransform(0,-this._mediaBoxUpperRightBound))},e.prototype._scaleTransform=function(t,e){var i=new je;i._scale(t,e),this._sw._modifyCtm(i),this._matrix._multiply(i)},e.prototype._translateTransform=function(t,e){var i=new je;i._translate(t,-e),this._sw._modifyCtm(i),this._matrix._multiply(i)},e.prototype._rotateTransform=function(t){var e=new je;e._rotate(-t),this._sw._modifyCtm(e),this._matrix._multiply(e)},e.prototype._setClip=function(e,i){void 0===i&&(i=t._PdfFillMode.winding),this._sw._appendRectangle(e[0],e[1],e[2],e[3]),this._sw._clipPath(i===t._PdfFillMode.alternate)},e.prototype._setTransparency=function(e,i,n){void 0===i&&(i=e),void 0===n&&(n=t._PdfBlendMode.normal),void 0===this._transparencies&&(this._transparencies=new Map);var r,a="CA:"+e.toString()+"_ca:"+i.toString()+"_BM:"+n.toString();if(this._transparencies.size>0&&this._transparencies.forEach((function(t,e){t===a&&(r=e)})),!r){r=new Ue;var s=new fn;s.update("CA",e),s.update("ca",i),s.update("BM",Pi(n));var o=this._crossReference._getNextReference();this._crossReference._cacheMap.set(o,s),r._dictionary=s,r._key=a,r._name=hn.get(Ti()),r._reference=o;var h=void 0,c=!1;if(this._resourceObject.has("ExtGState")){var _=this._resourceObject.getRaw("ExtGState");null!=_&&(_ instanceof _n?(c=!0,h=this._crossReference._fetch(_)):_ instanceof fn&&(h=_))}else h=new fn(this._crossReference),this._resourceObject.update("ExtGState",h);h.update(r._name.name,o),c&&(this._resourceObject._updated=!0),this._hasResourceReference&&(this._source._updated=!0)}this._sw._setGraphicsState(r._name)},e.prototype._setTransparencyData=function(t,e){this._resourceMap.set(t,e);var i=this._crossReference._fetch(t),n=0,r=0,a=0;i.has("CA")&&(n=i.get("CA")),i.has("ca")&&(r=i.get("ca")),i.has("ca")&&(r=i.get("ca")),i.has("BM")&&(a=Ai(i.get("BM")));var s="CA:"+n.toString()+"_ca:"+r.toString()+"_BM:"+a.toString(),o=new Ue;o._dictionary=i,o._key=s,o._name=e,o._reference=t,this._transparencies.set(o,s)},e}(),je=function(){function t(){this._matrix=new ze(1,0,0,1,0,0)}return t.prototype._translate=function(t,e){this._matrix._translate(t,e)},t.prototype._scale=function(t,e){this._matrix._elements[0]=t,this._matrix._elements[3]=e},t.prototype._rotate=function(t){t=t*Math.PI/180,this._matrix._elements[0]=Math.cos(t),this._matrix._elements[1]=Math.sin(t),this._matrix._elements[2]=-Math.sin(t),this._matrix._elements[3]=Math.cos(t)},t.prototype._multiply=function(t){this._matrix._multiply(t._matrix)},t.prototype._toString=function(){for(var t="",e=0,i=this._matrix._elements.length;e<i;e++)t+=xi(this._matrix._elements[Number.parseInt(e.toString(),10)])+" ";return t},t}(),ze=function(){function t(t,e,i,n,r,a){this._elements=void 0===t?[]:"number"==typeof t?[t,e,i,n,r,a]:t}return Object.defineProperty(t.prototype,"_offsetX",{get:function(){return this._elements[4]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_offsetY",{get:function(){return this._elements[5]},enumerable:!0,configurable:!0}),t.prototype._clone=function(){return new t(this._elements.slice())},t.prototype._translate=function(t,e){this._elements[4]=t,this._elements[5]=e},t.prototype._transform=function(t){var e=t[0],i=t[1];return[e*this._elements[0]+i*this._elements[2]+this._offsetX,e*this._elements[1]+i*this._elements[3]+this._offsetY]},t.prototype._multiply=function(t){this._elements=[this._elements[0]*t._elements[0]+this._elements[1]*t._elements[2],this._elements[0]*t._elements[1]+this._elements[1]*t._elements[3],this._elements[2]*t._elements[0]+this._elements[3]*t._elements[2],this._elements[2]*t._elements[1]+this._elements[3]*t._elements[3],this._offsetX*t._elements[0]+this._offsetY*t._elements[2]+t._offsetX,this._offsetX*t._elements[1]+this._offsetY*t._elements[3]+t._offsetY]},t}(),Ve=function(e,i){e&&(this._g=e,this._transformationMatrix=i),this._charSpacing=0,this._wordSpacing=0,this._textScaling=100,this._textRenderingMode=t._TextRenderingMode.fill},Ue=function(){};(Mt=t._PdfBlendMode||(t._PdfBlendMode={}))[Mt.normal=0]="normal",Mt[Mt.multiply=1]="multiply",Mt[Mt.screen=2]="screen",Mt[Mt.overlay=3]="overlay",Mt[Mt.darken=4]="darken",Mt[Mt.lighten=5]="lighten",Mt[Mt.colorDodge=6]="colorDodge",Mt[Mt.colorBurn=7]="colorBurn",Mt[Mt.hardLight=8]="hardLight",Mt[Mt.softLight=9]="softLight",Mt[Mt.difference=10]="difference",Mt[Mt.exclusion=11]="exclusion",Mt[Mt.hue=12]="hue",Mt[Mt.saturation=13]="saturation",Mt[Mt.color=14]="color",Mt[Mt.luminosity=15]="luminosity",(Bt=t._TextRenderingMode||(t._TextRenderingMode={}))[Bt.fill=0]="fill",Bt[Bt.stroke=1]="stroke",Bt[Bt.fillStroke=2]="fillStroke",Bt[Bt.none=3]="none",Bt[Bt.clipFlag=4]="clipFlag",Bt[Bt.clipFill=4]="clipFill",Bt[Bt.clipStroke=5]="clipStroke",Bt[Bt.clipFillStroke=6]="clipFillStroke",Bt[Bt.clip=7]="clip",(Lt=t._PdfFillMode||(t._PdfFillMode={}))[Lt.winding=0]="winding",Lt[Lt.alternate=1]="alternate",(Et=t._PdfDashStyle||(t._PdfDashStyle={}))[Et.solid=0]="solid",Et[Et.dash=1]="dash",Et[Et.dot=2]="dot",Et[Et.dashDot=3]="dashDot",Et[Et.dashDotDot=4]="dashDotDot",Et[Et.custom=5]="custom",(Dt=t._PdfLineCap||(t._PdfLineCap={}))[Dt.flat=0]="flat",Dt[Dt.round=1]="round",Dt[Dt.square=2]="square",(Ot=t._PdfLineJoin||(t._PdfLineJoin={}))[Ot.miter=0]="miter",Ot[Ot.round=1]="round",Ot[Ot.bevel=2]="bevel";var We,He=function(t){this._color=void 0!==t?t:[0,0,0]},Ge=function(e,i){this._color=e,this._width=i,this._dashOffset=0,this._dashPattern=[],this._dashStyle=t._PdfDashStyle.solid,this._miterLimit=0,this._lineCap=t._PdfLineCap.flat,this._lineJoin=t._PdfLineJoin.miter},qe=function(){function t(){this._horizontalResolution=96,this._proportions=this._updateProportions(this._horizontalResolution)}return t.prototype._updateProportions=function(t){return[t/2.54,t/6,1,t/72,t,t/300,t/25.4]},t.prototype._convertUnits=function(t,e,i){return this._convertFromPixels(this._convertToPixels(t,e),i)},t.prototype._convertFromPixels=function(t,e){var i=e;return t/this._proportions[Number.parseInt(i.toString(),10)]},t.prototype._convertToPixels=function(t,e){var i=e;return t*this._proportions[Number.parseInt(i.toString(),10)]},t}(),Ke=(We=function(t,e){return(We=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}We(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function Xe(e){var i=[];return 0!=(e&t.PdfAnnotationFlag.hidden)&&i.push("hidden"),0!=(e&t.PdfAnnotationFlag.invisible)&&i.push("invisible"),0!=(e&t.PdfAnnotationFlag.locked)&&i.push("locked"),0!=(e&t.PdfAnnotationFlag.noRotate)&&i.push("norotate"),0!=(e&t.PdfAnnotationFlag.noView)&&i.push("noview"),0!=(e&t.PdfAnnotationFlag.noZoom)&&i.push("nozoom"),0!=(e&t.PdfAnnotationFlag.print)&&i.push("print"),0!=(e&t.PdfAnnotationFlag.readOnly)&&i.push("readonly"),0!=(e&t.PdfAnnotationFlag.toggleNoView)&&i.push("togglenoview"),0!=(e&t.PdfAnnotationFlag.default)&&i.push("default"),i.join(",")}function Qe(e){switch(e){case"hidden":return t.PdfAnnotationFlag.hidden;case"invisible":return t.PdfAnnotationFlag.invisible;case"locked":return t.PdfAnnotationFlag.locked;case"norotate":return t.PdfAnnotationFlag.noRotate;case"noview":return t.PdfAnnotationFlag.noView;case"nozoom":return t.PdfAnnotationFlag.noZoom;case"print":return t.PdfAnnotationFlag.print;case"readonly":return t.PdfAnnotationFlag.readOnly;case"togglenoview":return t.PdfAnnotationFlag.toggleNoView;default:return t.PdfAnnotationFlag.default}}function Je(t){if(t.charCodeAt(0)>="".charCodeAt(0)){var e=void 0;if(""===t[0]&&""===t[1]&&""===t[2]?e="utf-8":""===t[0]&&""===t[1]?e="utf-16le":""===t[0]&&""===t[1]&&(e="utf-16be"),e)try{return new TextDecoder(e,{fatal:!0}).decode(Ye(t))}catch(t){}}for(var i=[],n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364],r=0;r<t.length;r++){var a=n[t.charCodeAt(r)];i.push(a?String.fromCharCode(a):t.charAt(r))}return i.join("")}function Ye(t,e){void 0===e&&(e=!1);for(var i=[],n=0;n<t.length;++n)i.push(255&t.charCodeAt(n));return e?i:new Uint8Array(i)}function Ze(t,e){for(var i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}function $e(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[Number.parseInt(i.toString(),10)]!==e[Number.parseInt(i.toString(),10)])return!1;return!0}function ti(t){return Number.isInteger(t)?t.toString():t.toFixed(7)}function ei(t,e){var i=!1;if(t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n]){i=!0;break}return i}function ii(t){var e=t.length;if(e<8192)return String.fromCharCode.apply(null,t);for(var i=[],n=0;n<e;n+=8192){var r=Math.min(n+8192,e),a=t.subarray(n,r);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function ni(t){for(var e,i=[],n=0;n<t.length;n++)(e=t[Number.parseInt(n.toString(),10)].toString(16).toUpperCase()).length<2&&(e="0"+e),i.push(e);return i.join("")}function ri(t,e){void 0===e&&(e=!1);var i=[];if(t)for(var n=0;n<t.length;n+=2)i.push(Number.parseInt(t.substring(n,n+2),16));return e?i:new Uint8Array(i)}function ai(t){var e="";if(t){"#"===t[0]&&(t=t.substring(1));for(var i=0;i<t.length;i+=2)e+=String.fromCharCode(Number.parseInt(t.substring(i,i+2),16))}return e}function si(t){return 32===t||9===t||13===t||10===t}function oi(t,e){void 0===e&&(e=!1);var i,n,r,a,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=0,c=0,_=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;t.charAt(t.length-1)===o.charAt(64)&&_--;for(var d=new Array(0|_);h<t.length;)i=o.indexOf(t.charAt(h++))<<2|(a=o.indexOf(t.charAt(h++)))>>4,n=(15&a)<<4|(s=o.indexOf(t.charAt(h++)))>>2,r=(3&s)<<6|o.indexOf(t.charAt(h++)),c<_&&(d[c++]=i),c<_&&(d[c++]=n),c<_&&(d[c++]=r);return e?d:new Uint8Array(d)}function hi(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",n=0,r=0;r<t.length;r++)r%3==0?(n=t[Number.parseInt(r.toString(),10)]>>2,i+=e[Number.parseInt(n.toString(),10)],n=t[Number.parseInt(r.toString(),10)]<<4&63):r%3==1?(n+=t[Number.parseInt(r.toString(),10)]>>4,i+=e[Number.parseInt(n.toString(),10)],n=t[Number.parseInt(r.toString(),10)]<<2&63):r%3==2&&(n+=t[Number.parseInt(r.toString(),10)]>>6,i+=e[Number.parseInt(n.toString(),10)],n=63&t[Number.parseInt(r.toString(),10)],i+=e[Number.parseInt(n.toString(),10)]);return t.length%3==1&&(i+=e[Number.parseInt(n.toString(),10)]+"=="),t.length%3==2&&(i+=e[Number.parseInt(n.toString(),10)]+"="),i}function ci(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!0);for(var r,a=[],s=4;s<arguments.length;s++)a[s-4]=arguments[s];for(var o=new Set;t instanceof fn&&t.objId&&!o.has(t.objId);){t.objId&&o.add(t.objId);var h=i?t.getArray(e):t.get(e);if(void 0!==h){if(n)return h;r||(r=[]),r.push(h)}for(var c=0,_=!1;c<a.length;){var d=a[c];if(t.has(d)){t=t.get(d),_=!0;break}c++}if(!_)break}return r}function _i(t,e){var i={x:0,y:0,width:0,height:0},n=t.getArray("Rect");if(n&&Array.isArray(n)){var r=n[0],a=n[1],s=n[2],o=n[3];void 0!==r&&void 0!==a&&void 0!==s&&void 0!==o&&(i.x=Math.min(r,s),i.y=Math.min(a,o),i.width=Math.max(r,s)-i.x,i.height=Math.max(a,o)-i.y,e&&(i.height=parseFloat(i.height.toFixed(3)),n[1]<0&&(i.y=n[1],n[1]>n[3]&&(i.y-=i.height))))}return i}function di(t,e){var i;if(t.has("Rect"))if(i=_i(t),e){var n=e.size,r=e.mediaBox,a=e.cropBox;a&&Array.isArray(a)&&4===a.length&&e._pageDictionary.has("CropBox")?0===a[0]&&0===a[1]&&n[0]!==a[2]&&n[1]!==a[3]||i.x===a[0]?i.y=n[1]-(i.y+i.height):(i.x-=a[0],i.y=a[3]-(i.y+i.height)):r&&Array.isArray(r)&&4===r.length&&e._pageDictionary.has("MediaBox")&&(r[0]>0||r[1]>0||n[0]===r[2]||n[1]===r[3])?(i.x-=r[0],i.y=r[3]-(i.y+i.height)):i.y=n[1]-(i.y+i.height)}else i.y=i.y+i.height;return i}function li(t){return{x:Math.min(t[0],t[2]),y:Math.min(t[1],t[3]),width:Math.abs(t[0]-t[2]),height:Math.abs(t[1]-t[3])}}function pi(t){return[t.x,t.y,t.x+t.width,t.y+t.height]}function fi(t,e){var i=t[0],n=t[1],r=t[2],a=t[3];if(e){var s=e.size,o=s[0],h=s[1],c=e.mediaBox,_=e.cropBox;_&&Array.isArray(_)&&4===_.length?0!==_[0]||0!==_[1]||o===_[2]||h===_[3]?(i+=_[0],n=_[3]-(n+a)):n=h-(n+a):c&&Array.isArray(c)&&4===c.length&&(c[0]>0||c[1]>0||o===c[2]||h===c[3])?(i-=c[0],n=c[3]-(n+a)):n=h-(n+a)}return[i,n,i+r,n+a]}function ui(t){var e=Mi(t);if(!e){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);i&&(e=[Number.parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)])}return e}function gi(t){var e;if(t)if(1===t.length){var i=t[0];if(void 0!==i){var n=Math.round(255*i);e=[n,n,n]}}else if(3===t.length){var r=t[0],a=t[1],s=t[2];void 0!==r&&void 0!==a&&void 0!==s&&(e=[Math.round(255*r),Math.round(255*a),Math.round(255*s)])}else if(4===t.length){var o=t[0],h=t[1],c=t[2],_=t[3];if(void 0!==o&&void 0!==h&&void 0!==c&&void 0!==_){var d=255*_;e=[Math.round(255-Math.min(255,o*(255-d)+d)),Math.round(255-Math.min(255,h*(255-d)+d)),Math.round(255-Math.min(255,c*(255-d)+d))]}}return e}function yi(e){var i="S";switch(e){case t.PdfBorderStyle.dot:case t.PdfBorderStyle.dashed:i="D";break;case t.PdfBorderStyle.beveled:i="B";break;case t.PdfBorderStyle.inset:i="I";break;case t.PdfBorderStyle.underline:i="U"}return hn.get(i)}function bi(e){var i=t.PdfBorderEffectStyle.solid;switch(e){case"C":i=t.PdfBorderEffectStyle.cloudy}return i}function mi(e){var i="None";if(void 0!==e)switch(e){case t.PdfLineEndingStyle.openArrow:i="OpenArrow";break;case t.PdfLineEndingStyle.closedArrow:i="ClosedArrow";break;case t.PdfLineEndingStyle.rOpenArrow:i="ROpenArrow";break;case t.PdfLineEndingStyle.rClosedArrow:i="RClosedArrow";break;case t.PdfLineEndingStyle.butt:i="Butt";break;case t.PdfLineEndingStyle.diamond:i="Diamond";break;case t.PdfLineEndingStyle.circle:i="Circle";break;case t.PdfLineEndingStyle.square:i="Square";break;case t.PdfLineEndingStyle.slash:i="Slash"}return i}function vi(e,i){var n=void 0!==i?i:t.PdfLineEndingStyle.none;switch(e.toLowerCase()){case"openarrow":n=t.PdfLineEndingStyle.openArrow;break;case"closedarrow":n=t.PdfLineEndingStyle.closedArrow;break;case"ropenarrow":n=t.PdfLineEndingStyle.rOpenArrow;break;case"rclosedarrow":n=t.PdfLineEndingStyle.rClosedArrow;break;case"butt":n=t.PdfLineEndingStyle.butt;break;case"diamond":n=t.PdfLineEndingStyle.diamond;break;case"circle":n=t.PdfLineEndingStyle.circle;break;case"square":n=t.PdfLineEndingStyle.square;break;case"slash":n=t.PdfLineEndingStyle.slash}return n}function wi(e){switch(e){case"P":return t.PdfHighlightMode.push;case"N":return t.PdfHighlightMode.noHighlighting;case"O":return t.PdfHighlightMode.outline;default:return t.PdfHighlightMode.invert}}function Si(e){switch(e){case t.PdfHighlightMode.push:return hn.get("P");case t.PdfHighlightMode.noHighlighting:return hn.get("N");case t.PdfHighlightMode.outline:return hn.get("O");default:return hn.get("I")}}function Pi(e){var i="Normal";switch(e){case t._PdfBlendMode.multiply:i="Multiply";break;case t._PdfBlendMode.screen:i="Screen";break;case t._PdfBlendMode.overlay:i="Overlay";break;case t._PdfBlendMode.darken:i="Darken";break;case t._PdfBlendMode.lighten:i="Lighten";break;case t._PdfBlendMode.colorDodge:i="ColorDodge";break;case t._PdfBlendMode.colorBurn:i="ColorBurn";break;case t._PdfBlendMode.hardLight:i="HardLight";break;case t._PdfBlendMode.softLight:i="SoftLight";break;case t._PdfBlendMode.difference:i="Difference";break;case t._PdfBlendMode.exclusion:i="Exclusion";break;case t._PdfBlendMode.hue:i="Hue";break;case t._PdfBlendMode.saturation:i="Saturation";break;case t._PdfBlendMode.color:i="Color";break;case t._PdfBlendMode.luminosity:i="Luminosity";break;default:i="Normal"}return hn.get(i)}function Ai(e){var i=t._PdfBlendMode.normal;switch(e.name){case"Multiply":i=t._PdfBlendMode.multiply;break;case"Screen":i=t._PdfBlendMode.screen;break;case"Overlay":i=t._PdfBlendMode.overlay;break;case"Darken":i=t._PdfBlendMode.darken;break;case"Lighten":i=t._PdfBlendMode.lighten;break;case"ColorDodge":i=t._PdfBlendMode.colorDodge;break;case"ColorBurn":i=t._PdfBlendMode.colorBurn;break;case"HardLight":i=t._PdfBlendMode.hardLight;break;case"SoftLight":i=t._PdfBlendMode.softLight;break;case"Difference":i=t._PdfBlendMode.difference;break;case"Exclusion":i=t._PdfBlendMode.exclusion;break;case"Hue":i=t._PdfBlendMode.hue;break;case"Saturation":i=t._PdfBlendMode.saturation;break;case"Color":i=t._PdfBlendMode.color;break;case"Luminosity":i=t._PdfBlendMode.luminosity;break;default:i=t._PdfBlendMode.normal}return i}function xi(t){var e=t.toFixed(2);return"0.00"===e&&(e=".00"),e}function ki(t,e){var i=hn.get(t);if(e.has("ProcSet")){var n=e.getArray("ProcSet");n&&-1===n.indexOf(i)&&(n.push(i),e.update("ProcSet",n))}else e.update("ProcSet",[i])}function Ti(){return"aaaaaaaa-aaaa-4aaa-baaa-aaaaaaaaaaaa".replace(/[ab]/g,(function(t){var e=16*Math.random()|0;return("a"===t?e:3&e|8).toString(16)}))}function Ri(t){for(var e=[],i=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);(r<33||r>126||35===r||40===r||41===r||60===r||62===r||91===r||93===r||123===r||125===r||47===r||37===r)&&(i<n&&e.push(t.substring(i,n)),e.push("#"+r.toString(16)),i=n+1)}return 0===e.length?t:(i<t.length&&e.push(t.substring(i,t.length)),e.join(""))}function Fi(t,e,i,n,r,a){if(t>i){var s=t;t=i,i=s}if(n>e){s=e;e=n,n=s}var o,h;Math.abs(a)<=90?(o=a,h=1):o=a/(h=Math.ceil(Math.abs(a)/90));for(var c=(t+i)/2,_=(e+n)/2,d=(i-t)/2,l=(n-e)/2,p=o*(Math.PI/360),f=Math.abs(4/3*(1-Math.cos(p))/Math.sin(p)),u=[],g=0;g<h;g++){var y=(r+g*o)*(Math.PI/180),b=(r+(g+1)*o)*(Math.PI/180),m=Math.cos(y),v=Math.cos(b),w=Math.sin(y),S=Math.sin(b);o>0?(u.push(c+d*m),u.push(_-l*w),u.push(c+d*(m-f*w)),u.push(_-l*(w+f*m)),u.push(c+d*(v+f*S)),u.push(_-l*(S-f*v)),u.push(c+d*v),u.push(_-l*S)):(u.push(c+d*m),u.push(_-l*w),u.push(c+d*(m+f*w)),u.push(_-l*(w-f*m)),u.push(c+d*(v-f*S)),u.push(_-l*(S+f*v)),u.push(c+d*v),u.push(_-l*S))}return u}function Ii(t,e){for(var i,n=0;n<t.pageCount&&void 0===i;n++){var r=t.getPage(n);if(r&&r._pageDictionary.has("Annots")){var a=r._pageDictionary.get("Annots");if(null!=a&&a.length>0)for(var s=0;s<a.length&&void 0===i;s++){var o=a[Number.parseInt(s.toString(),10)];null!=o&&o instanceof _n&&o===e&&(i=r)}}}return i}function Ni(t){var e,i="";if(t.has("AS")&&null!==(e=t.get("AS"))&&"Off"!==e.name&&(i=e.name),""===i&&t.has("AP")){var n=t.get("AP");if(n&&n.has("N")){var r=n.get("N");if(r instanceof In&&(r=r.dictionary),r&&r instanceof fn){var a=[];r.forEach((function(t,e){a.push(t)}));for(var s=0;s<a.length;s++)if("Off"!==a[Number.parseInt(s.toString(),10)]){i=a[Number.parseInt(s.toString(),10)];break}}}}return i}function Ci(e,i){var n,r=e===t._PdfCheckFieldState.checked?Ni(i._dictionary):"Off";if(i._dictionary.has("AP")){var a=i._dictionary.get("AP");if(a&&a.has("N")){var s=a.get("N");if(s&&s instanceof In&&(s=s.dictionary),s&&s instanceof fn&&r&&""!==r&&s.has(r)){var o=s.get(r),h=s.getRaw(r);h&&(o.reference=h),o&&(n=new O(o,i._crossReference))}}}return n}function Mi(t){var e;switch(t){case"transparent":e=[255,255,255];break;case"aliceblue":e=[240,248,255];break;case"antiquewhite":e=[250,235,215];break;case"aqua":e=[0,255,255];break;case"aquamarine":e=[127,255,212];break;case"azure":e=[240,255,255];break;case"beige":e=[245,245,220];break;case"bisque":e=[255,228,196];break;case"black":e=[0,0,0];break;case"blanchedalmond":e=[255,235,205];break;case"blue":e=[0,0,255];break;case"blueviolet":e=[138,43,226];break;case"brown":e=[165,42,42];break;case"burlywood":e=[222,184,135];break;case"cadetBlue":e=[95,158,160];break;case"chartreuse":e=[127,255,0];break;case"chocolate":e=[210,105,30];break;case"coral":e=[255,127,80];break;case"cornflowerblue":e=[100,149,237];break;case"cornsilk":e=[255,248,220];break;case"crimson":e=[220,20,60];break;case"cyan":e=[0,255,255];break;case"darkblue":e=[0,0,139];break;case"darkcyan":e=[0,139,139];break;case"darkgoldenrod":e=[184,134,11];break;case"darkgray":e=[169,169,169];break;case"darkgreen":e=[0,100,0];break;case"darkkhaki":e=[189,183,107];break;case"darkmagenta":e=[139,0,139];break;case"darkolivegreen":e=[85,107,47];break;case"darkorange":e=[255,140,0];break;case"darkorchid":e=[153,50,204];break;case"darkred":e=[139,0,0];break;case"darksalmon":e=[233,150,122];break;case"darkseagreen":e=[143,188,139];break;case"darkslateblue":e=[72,61,139];break;case"darkslategray":e=[47,79,79];break;case"darkturquoise":e=[0,206,209];break;case"darkviolet":e=[148,0,211];break;case"deeppink":e=[255,20,147];break;case"deepskyblue":e=[0,191,255];break;case"dimgray":e=[105,105,105];break;case"dodgerblue":e=[30,144,255];break;case"firebrick":e=[178,34,34];break;case"floralwhite":e=[255,250,240];break;case"forestgreen":e=[34,139,34];break;case"fuchsia":e=[255,0,255];break;case"gainsboro":e=[220,220,220];break;case"ghostwhite":e=[248,248,255];break;case"gold":e=[255,215,0];break;case"goldenrod":e=[218,165,32];break;case"gray":e=[128,128,128];break;case"green":e=[0,128,0];break;case"greenyellow":e=[173,255,47];break;case"honeydew":e=[240,255,240];break;case"hotpink":e=[255,105,180];break;case"indianred":e=[205,92,92];break;case"indigo":e=[75,0,130];break;case"ivory":e=[255,255,240];break;case"khaki":e=[240,230,140];break;case"lavender":e=[230,230,250];break;case"lavenderblush":e=[255,240,245];break;case"lawngreen":e=[124,252,0];break;case"lemonchiffon":e=[255,250,205];break;case"lightblue":e=[173,216,230];break;case"lightcoral":e=[240,128,128];break;case"lightcyan":e=[224,255,255];break;case"lightgoldenrodyellow":e=[250,250,210];break;case"lightgreen":e=[144,238,144];break;case"lightgray":e=[211,211,211];break;case"LightPink":e=[255,182,193];break;case"lightsalmon":e=[255,160,122];break;case"lightseagreen":e=[32,178,170];break;case"lightskyblue":e=[135,206,250];break;case"lightslategray":e=[119,136,153];break;case"lightsteelblue":e=[176,196,222];break;case"lightyellow":e=[255,255,224];break;case"lime":e=[0,255,0];break;case"limeGreen":e=[50,205,50];break;case"linen":e=[250,240,230];break;case"magenta":e=[255,0,255];break;case"maroon":e=[128,0,0];break;case"mediumaquamarine":e=[102,205,170];break;case"mediumblue":e=[0,0,205];break;case"mediumorchid":e=[186,85,211];break;case"mediumpurple":e=[147,112,219];break;case"mediumseagreen":e=[60,179,113];break;case"mediumslateblue":e=[123,104,238];break;case"mediumspringgreen":e=[0,250,154];break;case"mediumturquoise":e=[72,209,204];break;case"mediumvioletred":e=[199,21,133];break;case"midnightblue":e=[25,25,112];break;case"mintcream":e=[245,255,250];break;case"mistyrose":e=[255,228,225];break;case"moccasin":e=[255,228,181];break;case"navajowhite":e=[255,222,173];break;case"navy":e=[0,0,128];break;case"oldLace":e=[253,245,230];break;case"olive":e=[128,128,0];break;case"olivedrab":e=[107,142,35];break;case"orange":e=[255,165,0];break;case"orangered":e=[255,69,0];break;case"orchid":e=[218,112,214];break;case"palegoldenrod":e=[238,232,170];break;case"palegreen":e=[152,251,152];break;case"paleturquoise":e=[175,238,238];break;case"palebioletred":e=[219,112,147];break;case"papayawhip":e=[255,239,213];break;case"peachpuff":e=[255,218,185];break;case"peru":e=[205,133,63];break;case"pink":e=[255,192,203];break;case"plum":e=[221,160,221];break;case"powderblue":e=[176,224,230];break;case"purple":e=[128,0,128];break;case"red":e=[255,0,0];break;case"rosybrown":e=[188,143,143];break;case"royalblue":e=[65,105,225];break;case"saddlebrown":e=[139,69,19];break;case"salmon":e=[250,128,114];break;case"sandybrown":e=[244,164,96];break;case"seagreen":e=[46,139,87];break;case"seashell":e=[255,245,238];break;case"sienna":e=[160,82,45];break;case"silver":e=[192,192,192];break;case"skyblue":e=[135,206,235];break;case"slateblue":e=[106,90,205];break;case"slategray":e=[112,128,144];break;case"snow":e=[255,250,250];break;case"springgreen":e=[0,255,127];break;case"steelblue":e=[70,130,180];break;case"tan":e=[210,180,140];break;case"teal":e=[0,128,128];break;case"thistle":e=[216,191,216];break;case"tomato":e=[255,99,71];break;case"turquoise":e=[64,224,208];break;case"violet":e=[238,130,238];break;case"wheat":e=[245,222,179];break;case"white":e=[255,255,255];break;case"whitesmoke":e=[245,245,245];break;case"yellow":e=[255,255,0];break;case"yellowgreen":e=[154,205,50]}return e}function Bi(t,e){var i=t._content.dictionary.getArray("BBox");if(i&&null!=e)if(0===e)t._content.dictionary.set("Matrix",[1,0,0,1,-i[0],-i[1]]);else{var n=new je;n._rotate(e),t._content.dictionary.set("Matrix",n._matrix._elements)}}function Li(e){var i="4";switch(e){case t.PdfCheckBoxStyle.circle:i="l";break;case t.PdfCheckBoxStyle.cross:i="8";break;case t.PdfCheckBoxStyle.diamond:i="u";break;case t.PdfCheckBoxStyle.square:i="n";break;case t.PdfCheckBoxStyle.star:i="H"}return i}function Ei(e){var i=t.PdfCheckBoxStyle.check;switch(e){case"l":i=t.PdfCheckBoxStyle.circle;break;case"8":i=t.PdfCheckBoxStyle.cross;break;case"u":i=t.PdfCheckBoxStyle.diamond;break;case"n":i=t.PdfCheckBoxStyle.square;break;case"H":i=t.PdfCheckBoxStyle.star}return i}function Di(e){var i;switch(e){case"cm":i=t.PdfMeasurementUnit.centimeter;break;case"in":i=t.PdfMeasurementUnit.inch;break;case"mm":i=t.PdfMeasurementUnit.millimeter;break;case"p":i=t.PdfMeasurementUnit.pica;break;case"pt":i=t.PdfMeasurementUnit.point;break;default:i=t.PdfMeasurementUnit.centimeter}return i}function Oi(e){var i;switch(e){case"Highlight":i=t.PdfTextMarkupAnnotationType.highlight;break;case"Squiggly":i=t.PdfTextMarkupAnnotationType.squiggly;break;case"StrikeOut":i=t.PdfTextMarkupAnnotationType.strikeOut;break;case"Underline":i=t.PdfTextMarkupAnnotationType.underline;break;default:i=t.PdfTextMarkupAnnotationType.highlight}return i}function ji(e){var i="Highlight";switch(e){case t.PdfTextMarkupAnnotationType.highlight:i="Highlight";break;case t.PdfTextMarkupAnnotationType.squiggly:i="Squiggly";break;case t.PdfTextMarkupAnnotationType.strikeOut:i="StrikeOut";break;case t.PdfTextMarkupAnnotationType.underline:i="Underline";break;default:i="Highlight"}return i}function zi(e){var i;switch(e){case"cm":i=t._PdfGraphicsUnit.centimeter;break;case"in":i=t._PdfGraphicsUnit.inch;break;case"mm":i=t._PdfGraphicsUnit.millimeter;break;case"p":i=t._PdfGraphicsUnit.pica;break;case"pt":i=t._PdfGraphicsUnit.point;break;default:i=t._PdfGraphicsUnit.centimeter}return i}function Vi(e){var i;switch(e){case"#Approved":i=t.PdfRubberStampAnnotationIcon.approved;break;case"#AsIs":i=t.PdfRubberStampAnnotationIcon.asIs;break;case"#Completed":i=t.PdfRubberStampAnnotationIcon.completed;break;case"#Confidential":i=t.PdfRubberStampAnnotationIcon.confidential;break;case"#Departmental":i=t.PdfRubberStampAnnotationIcon.departmental;break;case"#Draft":i=t.PdfRubberStampAnnotationIcon.draft;break;case"#Experimental":i=t.PdfRubberStampAnnotationIcon.experimental;break;case"#Expired":i=t.PdfRubberStampAnnotationIcon.expired;break;case"#Final":i=t.PdfRubberStampAnnotationIcon.final;break;case"#ForComment":i=t.PdfRubberStampAnnotationIcon.forComment;break;case"#ForPublicRelease":i=t.PdfRubberStampAnnotationIcon.forPublicRelease;break;case"#InformationOnly":i=t.PdfRubberStampAnnotationIcon.informationOnly;break;case"#NotApproved":i=t.PdfRubberStampAnnotationIcon.notApproved;break;case"#NotForPublicRelease":i=t.PdfRubberStampAnnotationIcon.notForPublicRelease;break;case"#PreliminaryResults":i=t.PdfRubberStampAnnotationIcon.preliminaryResults;break;case"#Sold":i=t.PdfRubberStampAnnotationIcon.sold;break;case"#TopSecret":i=t.PdfRubberStampAnnotationIcon.topSecret;break;case"#Void":i=t.PdfRubberStampAnnotationIcon.void;break;default:i=t.PdfRubberStampAnnotationIcon.draft}return i}function Ui(e){var i;switch(e){case"Note":i=t.PdfPopupIcon.note;break;case"Comment":i=t.PdfPopupIcon.comment;break;case"Help":i=t.PdfPopupIcon.help;break;case"Insert":i=t.PdfPopupIcon.insert;break;case"Key":i=t.PdfPopupIcon.key;break;case"NewParagraph":i=t.PdfPopupIcon.newParagraph;break;case"Paragraph":i=t.PdfPopupIcon.paragraph;break;default:i=t.PdfPopupIcon.note}return i}function Wi(e){var i="None";switch(e){case t.PdfAnnotationState.none:i="None";break;case t.PdfAnnotationState.accepted:i="Accepted";break;case t.PdfAnnotationState.rejected:i="Rejected";break;case t.PdfAnnotationState.cancel:i="Cancelled";break;case t.PdfAnnotationState.completed:i="Completed";break;case t.PdfAnnotationState.marked:i="Marked";break;case t.PdfAnnotationState.unmarked:i="Unmarked";break;case t.PdfAnnotationState.unknown:i="Unknown";break;default:i="None"}return i}function Hi(e){var i=t.PdfAnnotationState.none;switch(e){case"None":i=t.PdfAnnotationState.none;break;case"Accepted":i=t.PdfAnnotationState.accepted;break;case"Rejected":i=t.PdfAnnotationState.rejected;break;case"Cancelled":i=t.PdfAnnotationState.cancel;break;case"Completed":i=t.PdfAnnotationState.completed;break;case"Marked":i=t.PdfAnnotationState.marked;break;case"Unmarked":i=t.PdfAnnotationState.unmarked;break;case"Unknown":i=t.PdfAnnotationState.unknown}return i}function Gi(e){var i="None";switch(e){case t.PdfAnnotationStateModel.none:i="None";break;case t.PdfAnnotationStateModel.marked:i="Marked";break;case t.PdfAnnotationStateModel.review:i="Review";break;default:i="None"}return i}function qi(e){var i=t.PdfAnnotationStateModel.none;switch(e){case"None":i=t.PdfAnnotationStateModel.none;break;case"Marked":i=t.PdfAnnotationStateModel.marked;break;case"Review":i=t.PdfAnnotationStateModel.review}return i}function Ki(e){var i;switch(e){case"PushPin":i=t.PdfAttachmentIcon.pushPin;break;case"Tag":i=t.PdfAttachmentIcon.tag;break;case"Graph":i=t.PdfAttachmentIcon.graph;break;case"Paperclip":i=t.PdfAttachmentIcon.paperClip;break;default:i=t.PdfAttachmentIcon.pushPin}return i}function Xi(e){var i;switch(e){case"None":i=t.PdfAnnotationIntent.none;break;case"FreeTextCallout":i=t.PdfAnnotationIntent.freeTextCallout;break;case"FreeTextTypeWriter":i=t.PdfAnnotationIntent.freeTextTypeWriter;break;default:i=t.PdfAnnotationIntent.none}return i}function Qi(e){var i="";switch(e){case t.PdfFontStyle.regular:i="Regular";break;case t.PdfFontStyle.bold:i="Bold";break;case t.PdfFontStyle.italic:i="Italic";break;case t.PdfFontStyle.underline:i="Underline";break;case t.PdfFontStyle.strikeout:i="Strikeout";break;default:i="Regular"}return i}function Ji(t){var e;switch(t){case"head2right":e="";break;case"aacute":e="a";break;case"eacute":e="e";break;case"iacute":e="i";break;case"oacute":e="o";break;case"uacute":e="u";break;case"circleright":e="";break;case"bleft":e="";break;case"bright":e="";break;case"bup":e="";break;case"bdown":e="";break;case"barb4right":e="";break;case"bleftright":e="";break;case"bupdown":e="";break;case"bnw":e="";break;case"bne":e="";break;case"bsw":e="";break;case"bse":e="";break;case"bdash1":e="";break;case"bdash2":e="";break;case"xmarkbld":e="";break;case"checkbld":e="";break;case"boxxmarkbld":e="";break;case"boxcheckbld":e="";break;case"space":e=" ";break;case"pencil":e="";break;case"scissors":e="";break;case"scissorscutting":case"readingglasses":case"bell":case"book":case"telephonesolid":case"telhandsetcirc":case"envelopeback":e="";break;case"hourglass":e="";break;case"keyboard":e="";break;case"tapereel":e="";break;case"handwrite":e="";break;case"handv":e="";break;case"handptleft":e="";break;case"handptright":e="";break;case"handptup":e="";break;case"handptdown":e="";break;case"smileface":e="";break;case"frownface":e="";break;case"skullcrossbones":e="";break;case"flag":e="";break;case"pennant":e="9";break;case"airplane":e="";break;case"sunshine":e="";break;case"droplet":e="7";break;case"snowflake":e="";break;case"crossshadow":e="";break;case"crossmaltese":e="";break;case"starofdavid":e="";break;case"crescentstar":e="";break;case"yinyang":e="";break;case"om":e="";break;case"wheel":e="";break;case"aries":e="";break;case"taurus":e="";break;case"gemini":e="";break;case"cancer":e="";break;case"leo":e="";break;case"virgo":e="";break;case"libra":e="";break;case"scorpio":e="";break;case"saggitarius":e="";break;case"capricorn":e="";break;case"aquarius":e="";break;case"pisces":e="";break;case"ampersanditlc":case"ampersandit":e="&";break;case"circle6":e="";break;case"circleshadowdwn":e="";break;case"square6":e="";break;case"box3":e="";break;case"boxshadowdwn":e="";break;case"boxshadowup":e="";break;case"lozenge4":e="";break;case"lozenge6":e="";break;case"rhombus6":e="";break;case"xrhombus":e="";break;case"rhombus4":e="";break;case"clear":e="";break;case"escape":e="";break;case"command":e="";break;case"rosette":e="";break;case"rosettesolid":e="";break;case"quotedbllftbld":e="";break;case"quotedblrtbld":e="";break;case".notdef":e="";break;case"zerosans":e="";break;case"onesans":e="";break;case"twosans":e="";break;case"threesans":e="";break;case"foursans":e="";break;case"fivesans":e="";break;case"sixsans":e="";break;case"sevensans":e="";break;case"eightsans":e="";break;case"ninesans":e="";break;case"tensans":e="";break;case"zerosansinv":e="";break;case"onesansinv":e="";break;case"twosansinv":e="";break;case"threesansinv":e="";break;case"foursansinv":e="";break;case"circle2":e="";break;case"circle4":e="";break;case"square2":e="";break;case"ring2":e="";break;case"ringbutton2":e="";break;case"target":e="";break;case"square4":e="";break;case"box2":e="";break;case"crosstar2":e="";break;case"pentastar2":e="";break;case"hexstar2":e="";break;case"octastar2":e="";break;case"dodecastar3":e="";break;case"octastar4":e="";break;case"registercircle":e="";break;case"cuspopen":e="";break;case"cuspopen1":e="";break;case"circlestar":e="";break;case"starshadow":e="";break;case"deleteleft":e="";break;case"deleteright":e="";break;case"scissorsoutline":e="";break;case"telephone":e="";break;case"telhandset":e="E";break;case"handptlft1":e="";break;case"handptrt1":e="";break;case"handptlftsld1":e="";break;case"handptrtsld1":e="";break;case"handptup1":e="";break;case"handptdwn1":e="";break;case"xmark":e="";break;case"check":e="";break;case"boxcheck":e="";break;case"boxx":case"boxxbld":e="";break;case"circlex":e="=";break;case"circlexbld":e="";break;case"prohibit":case"prohibitbld":e="";break;case"ampersanditaldm":case"ampersandbld":case"ampersandsans":case"ampersandsandm":e="&";break;case"interrobang":case"interrobangdm":case"interrobangsans":case"interrobngsandm":e="";break;case"sacute":e="";break;case"Sacute":e="";break;case"eogonek":e="";break;case"cacute":e="";break;case"aogonek":e="";break;default:e=t}return e}function Yi(t){var e;switch(t){case"zero":e="0";break;case"one":e="1";break;case"two":e="2";break;case"three":e="3";break;case"four":e="4";break;case"five":e="5";break;case"six":e="6";break;case"seven":e="7";break;case"eight":e="8";break;case"nine":e="9";break;case"aacute":e="";break;case"asciicircum":e="^";break;case"asciitilde":e="~";break;case"asterisk":e="*";break;case"at":e="@";break;case"atilde":e="";break;case"backslash":e="\\";break;case"bar":e="|";break;case"braceleft":e="{";break;case"braceright":e="}";break;case"bracketleft":e="[";break;case"bracketright":e="]";break;case"breve":e="";break;case"brokenbar":e="|";break;case"bullet3":case"bullet":e="";break;case"caron":e="";break;case"ccedilla":e="";break;case"cedilla":e="";break;case"cent":e="";break;case"circumflex":e="";break;case"colon":e=":";break;case"comma":e=",";break;case"copyright":e="";break;case"currency1":e="";break;case"dagger":e="";break;case"daggerdbl":e="";break;case"degree":e="";break;case"dieresis":e="";break;case"divide":e="";break;case"dollar":e="$";break;case"dotaccent":e="";break;case"dotlessi":e="";break;case"eacute":e="";break;case"middot":e="";break;case"edieresis":e="";break;case"egrave":e="";break;case"ellipsis":e="...";break;case"emdash":e="";break;case"endash":e="";break;case"equal":e="=";break;case"eth":e="";break;case"exclam":e="!";break;case"exclamdown":e="";break;case"florin":e="";break;case"fraction":e="";break;case"germandbls":e="";break;case"grave":e="`";break;case"greater":e=">";break;case"guillemotleft4":e="";break;case"guillemotright4":e="";break;case"guilsinglleft":e="";break;case"guilsinglright":e="";break;case"hungarumlaut":e="";break;case"hyphen5":e="-";break;case"iacute":e="";break;case"icircumflex":e="";break;case"idieresis":e="";break;case"igrave":e="";break;case"less":e="<";break;case"logicalnot":e="";break;case"lslash":e="";break;case"Lslash":e="";break;case"macron":e="";break;case"minus":e="";break;case"mu":e="";break;case"multiply":e="";break;case"ntilde":e="";break;case"numbersign":e="#";break;case"oacute":e="";break;case"ocircumflex":e="";break;case"odieresis":e="";break;case"oe":e="oe";break;case"ogonek":e="";break;case"ograve":e="";break;case"onehalf":e="1/2";break;case"onequarter":e="1/4";break;case"onesuperior":e="";break;case"ordfeminine":e="";break;case"ordmasculine":e="";break;case"otilde":e="";break;case"paragraph":e="";break;case"parenleft":e="(";break;case"parenright":e=")";break;case"percent":e="%";break;case"period":e=".";break;case"periodcentered":e="";break;case"perthousand":e="";break;case"plus":e="+";break;case"plusminus":e="";break;case"question":e="?";break;case"questiondown":e="";break;case"quotedbl":e="'";break;case"quotedblbase":e="";break;case"quotedblleft":e="";break;case"quotedblright":e="";break;case"quoteleft":e="";break;case"quoteright":e="";break;case"quotesinglbase":e="";break;case"quotesingle":e="'";break;case"registered":e="";break;case"ring":e="";break;case"scaron":e="";break;case"section":e="";break;case"semicolon":e=";";break;case"slash":e="/";break;case"space6":case"space":e=" ";break;case"udieresis":e="";break;case"uacute":e="";break;case"Ecircumflex":e="";break;case"hyphen":e="-";break;case"underscore":e="_";break;case"adieresis":e="";break;case"ampersand":e="&";break;case"Adieresis":e="";break;case"Udieresis":e="";break;case"ccaron":e="";break;case"Scaron":e="";break;case"zcaron":e="";break;case"sterling":e="";break;case"agrave":e="";break;case"ecircumflex":e="";break;case"acircumflex":e="";break;case"Oacute":e="";break;default:e=t}return e}function Zi(t){var e=t.get("F");return(t.has("State")||t.has("StateModel"))&&(30===e||128===e)}function $i(t){var e=t.get("F");return!(t.has("State")||t.has("StateModel")||28!==e&&128!==e)}var tn=function(t,e){this.message=t,this.name=e},en=function(t){function e(e){return t.call(this,e,"FormatError")||this}return Ke(e,t),e}(tn),nn=function(t){function e(e){return t.call(this,e,"ParserEndOfFileException")||this}return Ke(e,t),e}(tn);function rn(t){return"[object String]"===Object.prototype.toString.call(t)?"$s"+t:"$o"+t.toString()}var an=Object.create(null),sn=Object.create(null),on=Object.create(null),hn=function(){function t(t){this.name=t}return t.get=function(e){return an[e]||(an[e]=new t(e))},t}(),cn=function(){function t(t){this.command=t}return t.get=function(e){return sn[e]||(sn[e]=new t(e))},t}(),_n=function(){function t(t,e){this.objectNumber=t,this.generationNumber=e}return t.prototype.toString=function(){return this.objectNumber+" "+this.generationNumber},t.get=function(e,i){var n=0===i?e+"R":e+"R"+i;return on[n]||(on[n]=new t(e,i))},t}(),dn=function(){function t(t){void 0===t&&(t=null),this._set=new Set(t&&t._set)}return t.prototype.has=function(t){return this._set.has(t.toString())},t.prototype.put=function(t){this._set.add(t.toString())},t.prototype.remove=function(t){this._set.delete(t.toString())},t.prototype.clear=function(){this._set.clear()},t}(),ln=function(){function t(){this._map=new Map}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.get=function(t){return this._map.get(t.toString())},t.prototype.has=function(t){return this._map.has(t.toString())},t.prototype.put=function(t,e){this._map.set(t.toString(),e)},t.prototype.set=function(t,e){this._map.set(t,e)},t.prototype.clear=function(){this._map.clear()},t}(),pn=function(){function t(t){this.table={},this.nElements=0,this.toStr=t||rn}return t.prototype.getValue=function(t){var e=this.table["$"+this.toStr(t)];if(void 0!==e)return e.value},t.prototype.setValue=function(t,e){var i="$"+this.toStr(t);this.table[i];this.nElements++,this.table[i]={key:t,value:e}},t.prototype.keys=function(){for(var t=[],e=Object.keys(this.table),i=0;i<e.length;i++){var n=this.table[e[i]];t.push(n.key)}return t},t.prototype.containsKey=function(t){return!(void 0===this.getValue(t))},t}(),fn=function(){function t(t){this._initialize(t)}return Object.defineProperty(t.prototype,"size",{get:function(){return Object.keys(this._map).length},enumerable:!0,configurable:!0}),t.prototype.assignXref=function(t){this._crossReference=t},t.prototype.getRaw=function(t){return this._map[t]},t.prototype.getRawValues=function(){return this._map.values},t.prototype.get=function(t,e,i){var n=this._get(t,e,i);return this._crossReference&&void 0!==n&&n instanceof _n&&(n=this._crossReference._fetch(n)),n},t.prototype.getArray=function(t,e,i){var n=this.get(t,e,i);if(this._crossReference&&void 0!==n&&Array.isArray(n)){n=n.slice();for(var r=0;r<n.length;r++){var a=n[Number.parseInt(r.toString(),10)];null!=a&&a instanceof _n&&(n[Number.parseInt(r.toString(),10)]=this._crossReference._fetch(a))}}return n},t.prototype.set=function(t,e){this._map[t]=e},t.prototype.has=function(t){return void 0!==this._map[t]},t.prototype.forEach=function(t){for(var e in this._map)t(e,this.getRaw(e))},t.prototype.update=function(t,e){if(this.has(t)){var i=this._map[t];null!=i&&i instanceof _n&&this._crossReference&&(i=this._crossReference._fetch(i)),i!==e&&(this._map[t]=e,this._updated=!0)}else this._map[t]=e,this._updated=!0},t.getEmpty=function(e){var i=new t(e);return i.set=function(t,e){throw new Error("Should not call set on the empty dictionary.")},i},t.merge=function(e,i,n){void 0===n&&(n=!1);for(var r=new t(e),a=Object.create(null),s=0,o=i;s<o.length;s++){if((S=o[s])instanceof t)for(var h=0,c=S._map;h<c.length;h++){var _=c[h],d=_[0],l=_[1],p=a.get(d);if(void 0===p)p=[],a.set(d,p);else if(!(n&&l instanceof t))continue;p.push(l)}}for(var f=0,u=a;f<u.length;f++){var g=u[f],y=g[0],b=g[1];if(1!==b.length&&b[0]instanceof t){for(var m=new t(e),v=0,w=b;v<w.length;v++)for(var S,P=0,A=(S=w[v])._map;P<A.length;P++){var x=A[P];d=x[0],l=x[1];void 0===m._map[d]&&(m._map[d]=l)}m.size>0&&(r._map[y]=m)}else r._map[y]=b[0]}return a.clear(),r.size>0?r:t.getEmpty(e)},t.prototype._initialize=function(t){this._map=Object.create(null),this.suppressEncryption=!1,this._updated=!1,this.isCatalog=!1,this._isNew=!1,t&&(this._crossReference=t)},t.prototype._get=function(t,e,i){var n=this._map[t];return void 0===n&&(n=this._map[e],null!=e?n=this._map[e]:null!=i&&(n=this._map[i])),n},t}(),un=function(t){void 0===t&&(t=[]),this.value=t};function gn(){an=Object.create(null),sn=Object.create(null),on=Object.create(null)}function yn(t,e){return t instanceof hn&&(void 0===e||t.name===e)}function bn(t,e){return t instanceof cn&&(void 0===e||t.command===e)}var mn,vn,wn,Sn,Pn,An,xn,kn,Tn,Rn,Fn=(mn=function(t,e){return(mn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}mn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),In=function(){function t(){}return t.prototype.getByte=function(){return null},t.prototype.getBytes=function(t){return null},Object.defineProperty(t.prototype,"length",{get:function(){throw new Error("Abstract getter `length` accessed")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){throw new Error("Abstract getter `isEmpty` accessed")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDataLoaded",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.peekByte=function(){var t=this.getByte();return-1!==t&&this.offset--,t},t.prototype.peekBytes=function(t){var e=this.getBytes(t);return this.offset-=e.length,e},t.prototype.getUnsignedInteger16=function(){var t=this.getByte(),e=this.getByte();return-1===t||-1===e?-1:(t<<8)+e},t.prototype.getInt32=function(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()},t.prototype.getByteRange=function(t,e){return null},t.prototype.makeSubStream=function(t,e,i){return null},t.prototype.readBlock=function(){return null},t.prototype.reset=function(){return null},t.prototype.moveStart=function(){return null},t.prototype.getString=function(t){void 0===t&&(t=!1);var e=this.getBytes();if(null==e||void 0===e.length)throw new Error("Invalid argument for bytesToString");if(t)return ni(e);var i=e.length;if(i<8192)return String.fromCharCode.apply(null,e);for(var n=[],r=0;r<i;r+=8192)n.push(String.fromCharCode.apply(null,e.subarray(r,Math.min(r+8192,i))));return n.join("")},t.prototype.skip=function(t){this.offset+=t||1},t.prototype.getBaseStreams=function(){return null},t}(),Nn=function(t){function e(e,i,n,r){var a=t.call(this)||this;return a.bytes=e instanceof Uint8Array?e:new Uint8Array(e),a.start=void 0!==n?n:0,a.position=a.start,a.end=n+r||a.bytes.length,a.dictionary=i,a}return Fn(e,t),Object.defineProperty(e.prototype,"position",{get:function(){return this.offset},set:function(t){this.offset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.end-this.start},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.length},enumerable:!0,configurable:!0}),e.prototype.getByte=function(){return this.position>=this.end?-1:this.bytes[this.position++]},e.prototype.getBytes=function(t){var e=this.bytes,i=this.position,n=this.end;if(!t)return e.subarray(i,n);var r=i+t;return r>n&&(r=n),this.position=r,e.subarray(i,r)},e.prototype.getByteRange=function(t,e){return t<0&&(t=0),e>this.end&&(e=this.end),this.bytes.subarray(t,e)},e.prototype.reset=function(){this.position=this.start},e.prototype.moveStart=function(){this.start=this.position},e.prototype.makeSubStream=function(t,i,n){return void 0===n&&(n=null),new e(this.bytes.buffer,n,t,i)},e.prototype.readBlock=function(){throw new Error("Abstract method `readBlock` called")},e}(In),Cn=function(t){function e(e){var i=t.call(this)||this;return i._bytes=e,i.dictionary=new fn,i.dictionary._updated=!0,i}return Fn(e,t),Object.defineProperty(e.prototype,"length",{get:function(){return this._bytes.length},enumerable:!0,configurable:!0}),e.prototype.write=function(t){if("string"==typeof t)for(var e=0;e<t.length;e++)this._bytes.push(t.charCodeAt(e));else for(e=0;e<t.length;e++)this._bytes.push(t[e]);this.dictionary._updated=!0},e.prototype.getString=function(t){void 0===t&&(t=!1);var e=new Uint8Array(this._bytes);if(null==e||void 0===e.length)throw new Error("Invalid argument for bytesToString");if(t)return ni(e);var i=e.length;if(i<8192)return String.fromCharCode.apply(null,e);for(var n=[],r=0;r<i;r+=8192)n.push(String.fromCharCode.apply(null,e.subarray(r,Math.min(r+8192,i))));return n.join("")},e}(In),Mn=function(t){function e(){return t.call(this,new Uint8Array(0))||this}return Fn(e,t),e}(Nn),Bn=(vn=function(t,e){return(vn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}vn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Ln=function(t){function e(e){var i=t.call(this)||this;if(i._rawMinBufferLength=e||0,i.offset=0,i.bufferLength=0,i.eof=!1,i.buffer=new Uint8Array(0),i.minBufferLength=512,e)for(;i.minBufferLength<e;)i.minBufferLength*=2;return i}return Bn(e,t),Object.defineProperty(e.prototype,"isEmpty",{get:function(){for(;!this.eof&&0===this.bufferLength;)this.readBlock();return 0===this.bufferLength},enumerable:!0,configurable:!0}),e.prototype.ensureBuffer=function(t){var e=this.buffer;if(t<=e.byteLength)return e;for(var i=this.minBufferLength;i<t;)i*=2;var n=new Uint8Array(i);return n.set(e),this.buffer=n,this.buffer},e.prototype.getByte=function(){for(var t=this.offset;this.bufferLength<=t;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.offset++]},e.prototype.getBytes=function(t){var e,i=this.offset;if(t){for(this.ensureBuffer(i+t),e=i+t;!this.eof&&this.bufferLength<e;)this.readBlock();var n=this.bufferLength;e>n&&(e=n)}else{for(;!this.eof;)this.readBlock();e=this.bufferLength}return this.offset=e,this.buffer.subarray(i,e)},e.prototype.reset=function(){this.offset=0},e.prototype.makeSubStream=function(t,e,i){if(void 0===e)for(;!this.eof;)this.readBlock();else for(var n=t+e;this.bufferLength<=n&&!this.eof;)this.readBlock();return new Nn(this.buffer,i,t,e)},e.prototype.getBaseStreams=function(){return this.stream?this.stream.getBaseStreams():null},e.prototype.moveStart=function(){throw new Error("Invalid call from decode stream")},e.prototype.getByteRange=function(t,e){throw new Error("Invalid call from decode stream. begin: "+t+", end: "+e)},e.prototype.readBlock=function(){throw new Error("Invalid call from decode stream")},e}(In),En=(wn=function(t,e){return(wn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}wn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Dn=function(t){function e(e,i,n){var r=t.call(this,i)||this;return r._chunkSize=512,r.stream=e,r.dictionary=e.dictionary,r._cipher=n,r._nextChunk=null,r._initialized=!1,r}return En(e,t),e.prototype.readBlock=function(){var t;if(this._initialized?t=this._nextChunk:(t=this.stream.getBytes(this._chunkSize),this._initialized=!0),t&&0!==t.length){this._nextChunk=this.stream.getBytes(this._chunkSize);var e=this._nextChunk&&this._nextChunk.length>0;t=this._cipher._decryptBlock(t,!e);for(var i=this.bufferLength,n=t.length,r=this.ensureBuffer(i+n),a=0;a<n;a++)r[i++]=t[Number.parseInt(a.toString(),10)];this.bufferLength=i}else this.eof=!0},e}(Ln),On=(Sn=function(t,e){return(Sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Sn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),jn=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zn=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),Vn=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),Un=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],Wn=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5],Hn=function(t){function e(e,i){var n=t.call(this,i)||this;n.stream=e,n.dictionary=e.dictionary;var r=e.getByte(),a=e.getByte();if(8!=(15&r))throw new en("Unknown compression method in flate stream: "+r+", "+a);if(((r<<8)+a)%31!=0)throw new en("Bad flag check in flate stream: "+r+", "+a);if(32&a)throw new en("Bad flag bit set in flate stream: "+r+", "+a);return n.codeSize=0,n.codeBuffer=0,n}return On(e,t),e.prototype.getBits=function(t){for(var e,i=this.stream,n=this.codeSize,r=this.codeBuffer;n<t;)r|=(e=i.getByte())<<n,n+=8;return e=r&(1<<t)-1,this.codeBuffer=r>>t,this.codeSize=n-=t,e},e.prototype.getCode=function(t){for(var e=this.stream,i=t[0],n=t[1],r=this.codeSize,a=this.codeBuffer;r<n;)a|=e.getByte()<<r,r+=8;var s=i[a&(1<<n)-1],o=s>>16,h=65535&s;return o<1||r<o||(this.codeBuffer=a>>o,this.codeSize=r-o),h},e.prototype.generateHuffmanTable=function(t){var e,i=t.length,n=0;for(e=0;e<i;++e)t[e]>n&&(n=t[e]);for(var r=1<<n,a=new Int32Array(r),s=1,o=0,h=2;s<=n;++s,o<<=1,h<<=1)for(var c=0;c<i;++c)if(t[c]===s){var _=0,d=o;for(e=0;e<s;++e)_=_<<1|1&d,d>>=1;for(e=_;e<r;e+=h)a[e]=s<<16|c;++o}return[a,n]},e.prototype.readBlock=function(){var t,e,i,n,r=this.stream,a=this.getBits(3);if(1&a&&(this.eof=!0),0===(a>>=1)){var s=r.getByte(),o=s;o|=(s=r.getByte())<<8;var h=s=r.getByte();if((h|=(s=r.getByte())<<8)===(65535&~o)||0===o&&0===h){this.codeBuffer=0,this.codeSize=0;var c=this.bufferLength,_=c+o;if(t=this.ensureBuffer(_),this.bufferLength=_,0===o)-1===r.peekByte()&&(this.eof=!0);else{var d=r.getBytes(o);t.set(d,c),d.length<o&&(this.eof=!0)}return}}if(1===a)i=Un,n=Wn;else if(2===a){var l=this.getBits(5)+257,p=this.getBits(5)+1,f=this.getBits(4)+4,u=new Uint8Array(jn.length),g=void 0;for(g=0;g<f;++g)u[jn[g]]=this.getBits(3);var y=this.generateHuffmanTable(u);e=0,g=0;for(var b=l+p,m=new Uint8Array(b),v=void 0,w=void 0,S=void 0;g<b;){var P=this.getCode(y);if(16===P)v=2,w=3,S=e;else if(17===P)v=3,w=3,S=e=0;else{if(18!==P){m[g++]=e=P;continue}v=7,w=11,S=e=0}for(var A=this.getBits(v)+w;A-- >0;)m[g++]=S}i=this.generateHuffmanTable(m.subarray(0,l)),n=this.generateHuffmanTable(m.subarray(l,b))}for(var x=(t=this.buffer)?t.length:0,k=this.bufferLength;;){var T=this.getCode(i);if(T<256)k+1>=x&&(x=(t=this.ensureBuffer(k+1)).length),t[k++]=T;else{if(256===T)return void(this.bufferLength=k);var R=(T=zn[T-=257])>>16;R>0&&(R=this.getBits(R)),e=(65535&T)+R,T=this.getCode(n),(R=(T=Vn[T])>>16)>0&&(R=this.getBits(R));var F=(65535&T)+R;k+e>=x&&(x=(t=this.ensureBuffer(k+e)).length);for(var I=0;I<e;++I,++k)t[k]=t[k-F]}}},e}(Ln),Gn=function(){function t(t){if(this._crossReference=t,this._catalogDictionary=t._getCatalogObj(),!(this._catalogDictionary instanceof fn))throw new en("Catalog object is not a dictionary.");this._catalogDictionary.isCatalog=!0,this._topPagesDictionary=this._catalogDictionary.get("Pages"),this.pageKidsCountCache=new ln,this.pageIndexCache=new ln}return Object.defineProperty(t.prototype,"version",{get:function(){var t;if(this._catalogDictionary.has("Version")){var e=this._catalogDictionary.get("Version");e&&(t=e.name)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageCount",{get:function(){var t=this._topPagesDictionary.get("Count");if(void 0===t||!Number.isInteger(t))throw new en("Invalid page count");return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"acroForm",{get:function(){var t;if(this._catalogDictionary.has("AcroForm"))t=this._catalogDictionary.get("AcroForm");else{t=new fn(this._crossReference);var e=this._crossReference._getNextReference();this._crossReference._cacheMap.set(e,t),this._catalogDictionary.set("AcroForm",e),this._catalogDictionary._updated=!0}return t},enumerable:!0,configurable:!0}),t.prototype.getPageDictionary=function(t){var e=[this._topPagesDictionary],i=new dn,n=this._catalogDictionary.getRaw("Pages");n instanceof _n&&i.put(n);for(var r=this._crossReference,a=this.pageKidsCountCache,s=this.pageIndexCache,o=0;e.length>0;){var h=e.pop();if(null!=h&&h instanceof _n){var c=a.get(h);if(c>=0&&o+c<=t){o+=c;continue}if(i.has(h))throw new en("Pages tree contains circular reference.");i.put(h);var _=r._fetch(h);if(_ instanceof fn&&(null!=(f=_.getRaw("Type"))&&f instanceof _n&&(f=r._fetch(f)),yn(f,"Page")||!_.has("Kids"))){if(a.has(h)||a.put(h,1),s.has(h)||s.put(h,o),o===t)return{dictionary:_,reference:h};o++;continue}e.push(_)}else{if(!(h instanceof fn))throw new en("Page dictionary kid reference points to wrong type of object.");var d=h.objId,l=h.get("Count");if(null!=l&&l instanceof _n&&(l=r._fetch(l)),null!=l&&Number.isInteger(l)&&l>=0&&(d&&!a.has(d)&&a.set(d,l),o+l<=t))o+=l;else{var p=h.getRaw("Kids");if(null!=p&&p instanceof _n&&(p=r._fetch(p)),!Array.isArray(p)){var f;if(null!=(f=h.getRaw("Type"))&&f instanceof _n&&(f=r._fetch(f)),yn(f,"Page")||!h.has("Kids")){if(o===t)return{dictionary:h,reference:null};o++;continue}throw new en("Page dictionary kids object is not an array.")}for(var u=p.length-1;u>=0;u--)e.push(p[u])}}}throw new Error("Page index "+t+" not found.")},t.prototype._destroy=function(){this._catalogDictionary&&(this._catalogDictionary=void 0),this._topPagesDictionary&&(this._topPagesDictionary=void 0),this.pageIndexCache&&(this.pageIndexCache.clear(),this.pageIndexCache=void 0),this.pageKidsCountCache&&(this.pageKidsCountCache.clear(),this.pageKidsCountCache=void 0)},t}(),qn=(Pn=function(t,e){return(Pn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Pn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Kn=function(t){function e(e,i,n){var r=t.call(this,i)||this;if(!(n instanceof fn))return e;var a=r.predictor=n.get("Predictor")||1;if(a<=1)return e;if(2!==a&&(a<10||a>15))throw new en("Unsupported predictor: "+a);r.readBlock=2===a?r.readBlockTiff:r.readBlockPng,r.stream=e,r.dictionary=e.dictionary;var s=r.colors=n.get("Colors")||1,o=r.bits=n.get("BPC","BitsPerComponent")||8,h=r.columns=n.get("Columns")||1;return r.pixBytes=s*o+7>>3,r.rowBytes=h*s*o+7>>3,r}return qn(e,t),e.prototype.readBlockTiff=function(){var t=this.rowBytes,e=this.bufferLength,i=this.ensureBuffer(e+t),n=this.bits,r=this.colors,a=this.stream.getBytes(t);if(this.eof=!a.length,!this.eof){var s,o=0,h=0,c=0,_=0,d=e;if(1===n&&1===r)for(s=0;s<t;++s){var l=a[s]^o;l^=l>>1,l^=l>>2,o=(1&(l^=l>>4))<<7,i[d++]=l}else if(8===n){for(s=0;s<r;++s)i[d++]=a[s];for(;s<t;++s)i[d]=i[d-r]+a[s],d++}else if(16===n){var p=2*r;for(s=0;s<p;++s)i[d++]=a[s];for(;s<t;s+=2){var f=((255&a[s])<<8)+(255&a[s+1])+((255&i[d-p])<<8)+(255&i[d-p+1]);i[d++]=f>>8&255,i[d++]=255&f}}else{var u=new Uint8Array(r+1),g=(1<<n)-1,y=0,b=e,m=this.columns;for(s=0;s<m;++s)for(var v=0;v<r;++v)c<n&&(o=o<<8|255&a[y++],c+=8),u[v]=u[v]+(o>>c-n)&g,c-=n,h=h<<n|u[v],(_+=n)>=8&&(i[b++]=h>>_-8&255,_-=8);_>0&&(i[b++]=(h<<8-_)+(o&(1<<8-_)-1))}this.bufferLength+=t}},e.prototype.readBlockPng=function(){var t=this.rowBytes,e=this.pixBytes,i=this.stream.getByte(),n=this.stream.getBytes(t);if(this.eof=!n.length,!this.eof){var r,a=this.bufferLength,s=this.ensureBuffer(a+t),o=s.subarray(a-t,a);0===o.length&&(o=new Uint8Array(t));var h,c,_=a;switch(i){case 0:for(r=0;r<t;++r)s[_++]=n[r];break;case 1:for(r=0;r<e;++r)s[_++]=n[r];for(;r<t;++r)s[_]=s[_-e]+n[r]&255,_++;break;case 2:for(r=0;r<t;++r)s[_++]=o[r]+n[r]&255;break;case 3:for(r=0;r<e;++r)s[_++]=(o[r]>>1)+n[r];for(;r<t;++r)s[_]=(o[r]+s[_-e]>>1)+n[r]&255,_++;break;case 4:for(r=0;r<e;++r)h=o[r],c=n[r],s[_++]=h+c;for(;r<t;++r){h=o[r];var d=o[r-e],l=s[_-e],p=l+h-d,f=p-l;f<0&&(f=-f);var u=p-h;u<0&&(u=-u);var g=p-d;g<0&&(g=-g),c=n[r],s[_++]=f<=u&&f<=g?l+c:u<=g?h+c:d+c}break;default:throw new en("Unsupported predictor: "+i)}this.bufferLength+=t}},e}(Ln),Xn=[1,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,2,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Qn=function(){function t(t){this.stream=t,this.nextChar(),this.stringBuffer=[],this._hexStringNumber=0,this.beginInlineImagePosition=-1}return t.prototype.nextChar=function(){return this.currentChar=this.stream.getByte()},t.prototype.peekChar=function(){return this.stream.peekByte()},t.prototype.getNumber=function(){var t=this.currentChar,e=!1,i=0,n=0;if(45===t?(n=-1,45===(t=this.nextChar())&&(t=this.nextChar())):43===t&&(n=1,t=this.nextChar()),10===t||13===t)do{t=this.nextChar()}while(10===t||13===t);if(46===t&&(i=10,t=this.nextChar()),t<48||t>57){if(si(t)||-1===t){if(10===i&&0===n)return 0;if(0===i&&-1===n)return 0}throw new en("Invalid number: "+String.fromCharCode(t)+" (charCode "+t+")")}n=n||1;var r=t-48,a=0,s=1;for(t=this.nextChar();t>=0;){if(t>=48&&t<=57){var o=t-48;e?a=10*a+o:(0!==i&&(i*=10),r=10*r+o)}else if(46===t){if(0!==i)break;i=1}else{if(45===t){t=this.nextChar();continue}if(69!==t&&101!==t)break;if(43===(t=this.peekChar())||45===t)s=45===t?-1:1,this.nextChar();else if(t<48||t>57)break;e=!0}t=this.nextChar()}return 0!==i&&(r/=i),e&&(r*=Math.pow(10,s*a)),n*r},t.prototype.getString=function(){var t=1,e=!1,i=this.stringBuffer;i.length=0;for(var n=this.nextChar();;){var r=!1;switch(0|n){case-1:e=!0;break;case 40:++t,i.push("(");break;case 41:0==--t?(this.nextChar(),e=!0):i.push(")");break;case 92:switch(n=this.nextChar()){case-1:e=!0;break;case 110:i.push("\n");break;case 114:i.push("\r");break;case 116:i.push("\t");break;case 98:i.push("\b");break;case 102:i.push("\f");break;case 92:case 40:case 41:i.push(String.fromCharCode(n));break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:var a=15&n;r=!0,(n=this.nextChar())>=48&&n<=55&&(a=(a<<3)+(15&n),(n=this.nextChar())>=48&&n<=55&&(r=!1,a=(a<<3)+(15&n))),i.push(String.fromCharCode(a));break;case 13:10===this.peekChar()&&this.nextChar();break;case 10:break;default:i.push(String.fromCharCode(n))}break;default:i.push(String.fromCharCode(n))}if(e)break;r||(n=this.nextChar())}return i.join("")},t.prototype.getName=function(){var t,e,i=this.stringBuffer;for(i.length=0,t=this.nextChar();t>=0&&!Xn[t];){if(35===t){if(t=this.nextChar(),Xn[t]){i.push("#");break}var n=this._toHexDigit(t);if(-1!==n){e=t,t=this.nextChar();var r=this._toHexDigit(t);if(-1===r){if(i.push("#",String.fromCharCode(e)),Xn[t])break;i.push(String.fromCharCode(t)),t=this.nextChar();continue}i.push(String.fromCharCode(n<<4|r))}else i.push("#",String.fromCharCode(t))}else i.push(String.fromCharCode(t));t=this.nextChar()}return hn.get(i.join(""))},t.prototype.getHexString=function(){var t=this.stringBuffer;t.length=0;var e,i,n=this.currentChar,r=!0;for(this._hexStringNumber=0;!(n<0);){if(62===n){this.nextChar();break}if(1!==Xn[n]){if(r){if(-1===(e=this._toHexDigit(n))){n=this.nextChar();continue}}else{if(-1===(i=this._toHexDigit(n))){n=this.nextChar();continue}t.push(String.fromCharCode(e<<4|i))}r=!r,n=this.nextChar()}else n=this.nextChar()}return t.join("")},t.prototype.getObject=function(){for(var t=!1,e=this.currentChar;;){if(e<0)return"EOF";if(t)10!==e&&13!==e||(t=!1);else if(37===e)t=!0;else if(1!==Xn[e])break;e=this.nextChar()}switch(0|e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return this.getNumber();case 40:return this.getString();case 47:return this.getName();case 91:return this.nextChar(),cn.get("[");case 93:return this.nextChar(),cn.get("]");case 60:return 60===(e=this.nextChar())?(this.nextChar(),cn.get("<<")):this.getHexString();case 62:return 62===(e=this.nextChar())?(this.nextChar(),cn.get(">>")):cn.get(">");case 123:return this.nextChar(),cn.get("{");case 125:return this.nextChar(),cn.get("}");case 41:throw this.nextChar(),new en("Illegal character: "+e)}var i=String.fromCharCode(e);if(e<32||e>127){var n=this.peekChar();if(n>=32&&n<=127)return this.nextChar(),cn.get(i)}for(e=this.nextChar();e>=0&&!Xn[e];){var r=i+String.fromCharCode(e);if(128===i.length)throw new en("Command token too long: "+i.length);i=r,e=this.nextChar()}return"true"===i||"false"!==i&&("null"===i?null:("BI"===i&&(this.beginInlineImagePosition=this.stream.position),cn.get(i)))},t.prototype.peekObj=function(){var t,e=this.stream.position,i=this.currentChar,n=this.beginInlineImagePosition;try{t=this.getObject()}catch(t){}return this.stream.position=e,this.currentChar=i,this.beginInlineImagePosition=n,t},t.prototype.skipToNextLine=function(){for(var t=this.currentChar;t>=0;){if(13===t){10===(t=this.nextChar())&&this.nextChar();break}if(10===t){this.nextChar();break}t=this.nextChar()}},t.prototype._toHexDigit=function(t){return t>=48&&t<=57?15&t:t>=65&&t<=70||t>=97&&t<=102?9+(15&t):-1},t}(),Jn=function(){function t(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),this.lexicalOperator=t,this.xref=e,this.allowStreams=i,this.recoveryMode=n,this.imageCache=new Map,this.refill()}return t.prototype.refill=function(){this.first=this.lexicalOperator.getObject(),this.second=this.lexicalOperator.getObject()},t.prototype.shift=function(){this.second instanceof cn&&"ID"===this.second.command?(this.first=this.second,this.second=null):(this.first=this.second,this.second=this.lexicalOperator.getObject())},t.prototype.tryShift=function(){try{return this.shift(),!0}catch(t){return!1}},t.prototype.getObject=function(t){var e=this.first;if(this.shift(),e instanceof cn)switch(e.command){case"BI":return this.makeInlineImage(t);case"[":for(var i=[];!bn(this.first,"]")&&"EOF"!==this.first;)i.push(this.getObject(t));if("EOF"===this.first){if(this.recoveryMode)return i;throw new nn("End of file inside array.")}return this.shift(),i;case"<<":for(var n=new fn(this.xref);!bn(this.first,">>")&&"EOF"!==this.first;)if(this.first instanceof hn){var r=this.first.name;if(this.shift(),this._checkEnd())break;n.set(r,this.getObject(t))}else this.shift();if("EOF"===this.first){if(this.recoveryMode)return n;throw new nn("End of file inside dictionary.")}return bn(this.second,"stream")?!0===this.allowStreams?this.makeStream(n,t):n:(this.shift(),n);default:return e}if(Number.isInteger(e)){if(Number.isInteger(this.first)&&bn(this.second,"R")){var a=_n.get(e,this.first);return this.shift(),this.shift(),a}return e}return"string"==typeof e&&t?t.decryptString(e):e},t.prototype.findDiscreteDecodeInlineStreamEnd=function(t){var e,i,n=t.position,r=!1;for(e=t.getByte();-1!==e;)if(255===e){switch(t.getByte()){case 0:break;case 255:t.skip(-1);break;case 217:r=!0;break;case 192:case 193:case 194:case 195:case 197:case 198:case 199:case 201:case 202:case 203:case 205:case 206:case 207:case 196:case 204:case 218:case 219:case 220:case 221:case 222:case 223:case 224:case 225:case 226:case 227:case 228:case 229:case 230:case 231:case 232:case 233:case 234:case 235:case 236:case 237:case 238:case 239:case 254:(i=t.getUnsignedInteger16())>2?t.skip(i-2):t.skip(-2)}if(r)break;e=t.getByte()}else e=t.getByte();var a=t.position-n;return-1===e?(t.skip(-a),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),a)},t.prototype.findDecodeInlineStreamEnd=function(t){for(var e,i=t.position;-1!==(e=t.getByte());)if(126===e){var n=t.position;for(e=t.peekByte();si(e);)t.skip(),e=t.peekByte();if(62===e){t.skip();break}if(t.position>n){var r=t.peekBytes(2);if(69===r[0]&&73===r[1])break}}var a=t.position-i;return-1===e?(t.skip(-a),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),a)},t.prototype.findHexDecodeInlineStreamEnd=function(t){var e,i=t.position;for(e=t.getByte();-1!==e&&62!==e;)e=t.getByte();var n=t.position-i;return-1===e?(t.skip(-n),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),n)},t.prototype.inlineStreamSkipEI=function(t){var e,i=0;for(e=t.getByte();-1!==e;){if(0===i)i=69===e?1:0;else if(1===i)i=73===e?2:0;else if(2===i)break;e=t.getByte()}},t.prototype.makeInlineImage=function(t){for(var e,i=this.lexicalOperator,n=i.stream,r=new fn(this.xref);!bn(this.first,"ID")&&"EOF"!==this.first;){if(!(this.first instanceof hn))throw new en("Dictionary key must be a name object");var a=this.first.name;if(this.shift(),"EOF"===this.first.name)break;r.set(a,this.getObject(t))}-1!==i.beginInlineImagePosition&&(e=n.position-i.beginInlineImagePosition);var s,o=r.get("F","Filter");if(o instanceof hn)s=o.name;else if(Array.isArray(o)){var h=o[0],c=null!=h&&h instanceof _n?this.xref._fetch(h):h;c&&(s=c.name)}var _,d=n.position;switch(s){case"DCT":case"DCTDecode":_=this.findDiscreteDecodeInlineStreamEnd(n);break;case"A85":case"ASCII85Decode":_=this.findDecodeInlineStreamEnd(n);break;case"AHx":case"ASCIIHexDecode":_=this.findHexDecodeInlineStreamEnd(n);break;default:_=this.findDefaultInlineStreamEnd(n)}var l,p=n.makeSubStream(d,_,r);if(_<1e3&&e<5552){var f=p.getBytes();p.reset();var u=n.position;n.position=i.beginInlineImagePosition;var g=n.getBytes(e);n.position=u,l=this._computeMaxNumber(f)+"_"+this._computeMaxNumber(g);var y=this.imageCache[l];if(void 0!==y)return this.second=cn.get("EI"),this.shift(),y.reset(),y}return t&&(p=t.createStream(p,_)),(p=this.filter(p,r,_)).dictionary=r,void 0!==l&&(this.imageCache[l]=p),this.second=cn.get("EI"),this.shift(),p},t.prototype._computeMaxNumber=function(t){for(var e=t.length,i=1,n=0,r=0;r<e;++r)n+=i+=255&t[r];return n%65521<<16|i%65521},t.prototype.makeStream=function(t,e){var i=this.lexicalOperator,n=i.stream;i.skipToNextLine();var r=n.position-1,a=t.get("Length");if(Number.isInteger(a)||(a=0),n.position=r+a,i.nextChar(),this.tryShift()&&bn(this.second,"endstream"))this.shift();else{var s=new Uint8Array([101,110,100,115,116,114,101,97,109]),o=this._findStreamLength(r,s);if(o<0){var h=s.length-1,c=s.slice(0,h),_=this._findStreamLength(r,c);if(_>=0)si(n.peekBytes(h+1)[h])&&(o=_);if(o<0)throw new en("Missing endstream command.")}a=o,i.nextChar(),this.shift(),this.shift()}return this.shift(),n=n.makeSubStream(r,a,t),e&&(n=e.createStream(n,a)),(n=this.filter(n,t,a)).dictionary=t,n},t.prototype.filter=function(t,e,i){var n=e.get("F","Filter"),r=e.get("DP","DecodeParms");if(n instanceof hn)return this.makeFilter(t,n.name,i,r);var a=i;if(Array.isArray(n))for(var s=n,o=r,h=0;h<s.length;++h){var c=s[Number.parseInt(h.toString(),10)];if(!((n=c instanceof _n?this.xref._fetch(c):c)instanceof hn))throw new en("Bad filter name '"+n+"'");if(r=null,Array.isArray(o)&&h in o){var _=o[Number.parseInt(h.toString(),10)];r=_ instanceof _n?this.xref._fetch(_):_}t=this.makeFilter(t,n.name,a,r),a=null}return t},t.prototype.makeFilter=function(t,e,i,n){if(0===i)return new Mn;try{return"Fl"===e||"FlateDecode"===e?n?new Kn(new Hn(t,i),i,n):new Hn(t,i):t}catch(t){return new Mn}},t.prototype._findStreamLength=function(t,e){var i=this.lexicalOperator.stream;i.position=t;for(var n=e.length;i.position<i.end;){var r=i.peekBytes(2048),a=r.length-n;if(a<=0)break;for(var s=0;s<a;){for(var o=0;o<n&&r[s+o]===e[o];)o++;if(o>=n)return i.position+=s,i.position-t;s++}i.position+=a}return-1},t.prototype.findDefaultInlineStreamEnd=function(t){var e,i,n=t.position,r=0;for(e=t.getByte();-1!==e;){if(0===r)r=69===e?1:0;else if(1===r)r=73===e?2:0;else{if(2!==r)throw new Error("findDefaultInlineStreamEnd - invalid state.");if(32===e||10===e||13===e){i=t.position;for(var a=t.peekBytes(10),s=0,o=a.length;s<o;s++)if((0!==(e=a[s])||0===a[s+1])&&10!==e&&13!==e&&(e<32||e>127)){r=0;break}if(2!==r){e=t.getByte();continue}if(2===r)break}else r=0}e=t.getByte()}-1===e&&void 0!==i&&t.skip(-(t.position-i));var h=4;return t.skip(-h),e=t.peekByte(),t.skip(h),si(e)||h--,t.position-h-n},t.prototype._checkEnd=function(){return"EOF"===this.first},t}(),Yn=function(){function t(t){this.isValid=!1;var e=new Jn(new Qn(t),null),i=e.getObject(),n=e.getObject(),r=e.getObject(),a=e.getObject();if(this.isValid=Number.isInteger(i)&&Number.isInteger(n)&&bn(r,"obj")&&void 0!==a,this.isValid){var s=a.get("Linearized");this.isValid=void 0!==s&&s>0}if(this.isValid){var o=this.getInt(a,"L");if(o!==t.length)throw new Error("The L parameter in the linearization dictionary does not equal the stream length.");this.length=o,this.hints=this.getHints(a),this.objectNumberFirst=this.getInt(a,"O"),this.endFirst=this.getInt(a,"E"),this.pageCount=this.getInt(a,"N"),this.mainXRefEntriesOffset=this.getInt(a,"T"),this.pageFirst=a.has("P")?this.getInt(a,"P",!0):0}}return t.prototype.getInt=function(t,e,i){void 0===i&&(i=!1);var n=t.get(e);if(void 0!==n&&Number.isInteger(n)&&(i?n>=0:n>0))return n;throw new Error("The '"+e+"' parameter in the linearization dictionary is invalid.")},t.prototype.getHints=function(t){var e=t.getArray("H"),i=e.length;if(e&&(2===i||4===i)){for(var n=0;n<i;n++){var r=e[n];if(!(Number.isInteger(r)&&r>0))throw new Error("Hint ("+n+") in the linearization dictionary is invalid.")}return e}throw new Error("Hint array in the linearization dictionary is invalid.")},t}(),Zn=(An=function(t,e){return(An=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}An(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),$n=function(){function t(t,e,i){void 0===i&&(i=""),this._defaultPasswordBytes=new Uint8Array([40,191,78,94,78,117,138,65,100,0,78,86,255,250,1,8,46,46,0,182,208,104,62,128,47,12,169,254,100,83,105,122]);var n=t.get("Filter");if(!yn(n,"Standard"))throw new en("unknown encryption method");this._filterName=n.name,this._dictionary=t;var r=t.get("V");if(!Number.isInteger(r)||1!==r&&2!==r&&4!==r&&5!==r)throw new en("unsupported encryption algorithm");this._algorithm=r;var a=t.get("Length");if(!a)if(r<=3)a=40;else{var s=t.get("CF"),o=t.get("StmF");if(s&&o){s.suppressEncryption=!0;var h=s.get(o.name);(a=h&&h.get("Length")||128)<40&&(a<<=3)}}if(!Number.isInteger(a)||a<40||a%8!=0)throw new en("invalid key length");var c=Ye(t.get("O")).subarray(0,32),_=Ye(t.get("U")).subarray(0,32),d=t.get("P"),l=t.get("R");this._encryptMetaData=(4===r||5===r)&&!1!==t.get("EncryptMetadata");var p,f,u=Ye(e);if(i&&(6===l&&(i=encodeURIComponent(i)),p=Ye(i)),5!==r)f=this._prepareKeyData(u,p,c,_,d,l,a,this._encryptMetaData);else{var g=Ye(t.get("O")),y=g.subarray(32,40),b=g.subarray(40,48),m=Ye(t.get("U")),v=m.subarray(0,48),w=m.subarray(32,40),S=m.subarray(40,48),P=Ye(t.get("OE")),A=Ye(t.get("UE"));f=this._createEncryptionKey(l,p,c,y,b,v,_,w,S,P,A)}if(!f){if(!i)throw new Error("Cannot open an encrypted document. The password is invalid.");var x=this._decodeUserPassword(p,c,l,a);f=this._prepareKeyData(u,x,c,_,d,l,a,this._encryptMetaData)}if(this._encryptionKey=f,r>=4){var k=t.get("CF");k&&(k.suppressEncryption=!0),this._cipherDictionary=k,this._stream=t.get("StmF")||hn.get("Identity"),this._string=t.get("StrF")||hn.get("Identity"),this._eff=t.get("EFF")||this._stream}}return Object.defineProperty(t.prototype,"_md5",{get:function(){return void 0===this._messageDigest&&(this._messageDigest=new tr),this._messageDigest},enumerable:!0,configurable:!0}),t.prototype._createEncryptionKey=function(t,e,i,n,r,a,s,o,h,c,_){e=e?e.subarray(0,Math.min(127,e.length)):new Uint8Array([]);var d=6===t?new sr:new ar;return d._checkUserPassword(e,o,s)?d._getUserKey(e,h,_):e.length&&d._checkOwnerPassword(e,n,a,i)?d._getOwnerKey(e,r,a,c):null},t.prototype._prepareKeyData=function(t,e,i,n,r,a,s,o){var h,c=new Uint8Array(40+i.length+t.length),_=0,d=0;if(e)for(h=Math.min(32,e.length);_<h;++_)c[Number.parseInt(_.toString(),10)]=e[Number.parseInt(_.toString(),10)];for(;_<32;)c[_++]=this._defaultPasswordBytes[d++];for(d=0,h=i.length;d<h;++d)c[_++]=i[Number.parseInt(d.toString(),10)];for(c[_++]=255&r,c[_++]=r>>8&255,c[_++]=r>>16&255,c[_++]=r>>>24&255,d=0,h=t.length;d<h;++d)c[_++]=t[Number.parseInt(d.toString(),10)];a>=4&&!o&&(c[_++]=255,c[_++]=255,c[_++]=255,c[_++]=255);var l=this._md5.hash(c,0,_),p=s>>3;if(a>=3)for(d=0;d<50;++d)l=this._md5.hash(l,0,p);var f,u=l.subarray(0,p);if(a>=3){for(_=0;_<32;++_)c[Number.parseInt(_.toString(),10)]=this._defaultPasswordBytes[Number.parseInt(_.toString(),10)];for(d=0,h=t.length;d<h;++d)c[_++]=t[Number.parseInt(d.toString(),10)];f=new hr(u)._encryptBlock(this._md5.hash(c,0,_)),h=u.length;var g=new Uint8Array(h);for(d=1;d<=19;++d){for(var y=0;y<h;++y)g[Number.parseInt(y.toString(),10)]=u[Number.parseInt(y.toString(),10)]^d;f=new hr(g)._encryptBlock(f)}for(d=0,h=f.length;d<h;++d)if(n[Number.parseInt(d.toString(),10)]!==f[Number.parseInt(d.toString(),10)])return null}else for(d=0,h=(f=new hr(u)._encryptBlock(this._defaultPasswordBytes)).length;d<h;++d)if(n[Number.parseInt(d.toString(),10)]!==f[Number.parseInt(d.toString(),10)])return null;return u},t.prototype._decodeUserPassword=function(t,e,i,n){for(var r=new Uint8Array(32),a=0,s=0,o=Math.min(32,t.length);a<o;++a)r[Number.parseInt(a.toString(),10)]=t[Number.parseInt(a.toString(),10)];for(;a<32;)r[a++]=this._defaultPasswordBytes[s++];var h,c=this._md5.hash(r,0,a),_=n>>3;if(i>=3)for(s=0;s<50;++s)c=this._md5.hash(c,0,c.length);if(i>=3){h=e;var d=new Uint8Array(_);for(s=19;s>=0;s--){for(var l=0;l<_;++l)d[Number.parseInt(l.toString(),10)]=c[Number.parseInt(l.toString(),10)]^s;h=new hr(d)._encryptBlock(h)}}else h=new hr(c.subarray(0,_))._encryptBlock(e);return h},t.prototype._createCipherTransform=function(t,e){if(4===this._algorithm||5===this._algorithm){var i=this._buildCipherConstructor(this._cipherDictionary,this._string,t,e,this._encryptionKey),n=this._buildCipherConstructor(this._cipherDictionary,this._stream,t,e,this._encryptionKey);return new pr(i,n)}var r=this._buildObjectKey(t,e,this._encryptionKey,!1);return new pr(new hr(r),new hr(r))},t.prototype._buildCipherConstructor=function(t,e,i,n,r){var a,s=t.get(e.name);if(s&&(a=s.get("CFM")),!a)return new lr;switch(a.name){case"None":return new lr;case"AESV2":return new _r(this._buildObjectKey(i,n,r,!0));case"AESV3":return new dr(r);case"V2":return new hr(this._buildObjectKey(i,n,r,!1))}throw new en("Unknown cryptography method")},t.prototype._buildObjectKey=function(t,e,i,n){void 0===n&&(n=!1);var r,a=new Uint8Array(i.length+9);for(r=0;r<i.length;++r)a[Number.parseInt(r.toString(),10)]=i[Number.parseInt(r.toString(),10)];return a[r++]=255&t,a[r++]=t>>8&255,a[r++]=t>>16&255,a[r++]=255&e,a[r++]=e>>8&255,n&&(a[r++]=115,a[r++]=65,a[r++]=108,a[r++]=84),this._md5.hash(a,0,r).subarray(0,Math.min(i.length+5,16))},t}(),tr=function(){function t(){this._r=new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]),this._k=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551])}return t.prototype.hash=function(t,e,i){for(var n=1732584193,r=-271733879,a=-1732584194,s=271733878,o=i+72&-64,h=new Uint8Array(o),c=0,_=0;c<i;++c)h[Number.parseInt(c.toString(),10)]=t[e++];h[c++]=128;for(var d=o-8;c<d;)h[c++]=0;h[c++]=i<<3&255,h[c++]=i>>5&255,h[c++]=i>>13&255,h[c++]=i>>21&255,h[c++]=i>>>29&255,h[c++]=0,h[c++]=0,h[c++]=0;var l=new Int32Array(16);for(c=0;c<o;){for(_=0;_<16;++_,c+=4)l[Number.parseInt(_.toString(),10)]=h[Number.parseInt(c.toString(),10)]|h[c+1]<<8|h[c+2]<<16|h[c+3]<<24;var p=n,f=r,u=a,g=s,y=void 0,b=void 0;for(_=0;_<64;++_){_<16?(y=f&u|~f&g,b=_):_<32?(y=g&f|~g&u,b=5*_+1&15):_<48?(y=f^u^g,b=3*_+5&15):(y=u^(f|~g),b=7*_&15);var m=g,v=p+y+this._k[Number.parseInt(_.toString(),10)]+l[Number.parseInt(b.toString(),10)]|0,w=this._r[Number.parseInt(_.toString(),10)];g=u,u=f,f=f+(v<<w|v>>>32-w)|0,p=m}n=n+p|0,r=r+f|0,a=a+u|0,s=s+g|0}return new Uint8Array([255&n,n>>8&255,n>>16&255,n>>>24&255,255&r,r>>8&255,r>>16&255,r>>>24&255,255&a,a>>8&255,a>>16&255,a>>>24&255,255&s,s>>8&255,s>>16&255,s>>>24&255])},t}(),er=function(){function t(){}return t.prototype._rotateRight=function(t,e){return t>>>e|t<<32-e},t.prototype._sigma=function(t){return this._rotateRight(t,2)^this._rotateRight(t,13)^this._rotateRight(t,22)},t.prototype._sigmaPrime=function(t){return this._rotateRight(t,6)^this._rotateRight(t,11)^this._rotateRight(t,25)},t.prototype._littleSigma=function(t){return this._rotateRight(t,7)^this._rotateRight(t,18)^t>>>3},t.prototype._littleSigmaPrime=function(t){return this._rotateRight(t,17)^this._rotateRight(t,19)^t>>>10},t.prototype._hash=function(t,e,i){for(var n,r=1779033703,a=3144134277,s=1013904242,o=2773480762,h=1359893119,c=2600822924,_=528734635,d=1541459225,l=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=64*Math.ceil((i+9)/64),f=new Uint8Array(p),u=0;u<i;++u)f[Number.parseInt(u.toString(),10)]=t[e++];f[u++]=128;for(var g=p-8;u<g;)f[u++]=0;f[u++]=0,f[u++]=0,f[u++]=0,f[u++]=i>>>29&255,f[u++]=i>>21&255,f[u++]=i>>13&255,f[u++]=i>>5&255,f[u++]=i<<3&255;var y=new Uint32Array(64);for(u=0;u<p;){for(n=0;n<16;++n)y[Number.parseInt(n.toString(),10)]=f[Number.parseInt(u.toString(),10)]<<24|f[u+1]<<16|f[u+2]<<8|f[u+3],u+=4;for(n=16;n<64;++n)y[Number.parseInt(n.toString(),10)]=this._littleSigmaPrime(y[n-2])+y[n-7]+this._littleSigma(y[n-15])+y[n-16]|0;var b=r,m=a,v=s,w=o,S=h,P=c,A=_,x=d,k=void 0,T=void 0;for(n=0;n<64;++n)k=x+this._sigmaPrime(S)+(S&P^~S&A)+l[Number.parseInt(n.toString(),10)]+y[Number.parseInt(n.toString(),10)],T=this._sigma(b)+(b&m^b&v^m&v),x=A,A=P,P=S,S=w+k|0,w=v,v=m,m=b,b=k+T|0;r=r+b|0,a=a+m|0,s=s+v|0,o=o+w|0,h=h+S|0,c=c+P|0,_=_+A|0,d=d+x|0}return new Uint8Array([r>>24&255,r>>16&255,r>>8&255,255&r,a>>24&255,a>>16&255,a>>8&255,255&a,s>>24&255,s>>16&255,s>>8&255,255&s,o>>24&255,o>>16&255,o>>8&255,255&o,h>>24&255,h>>16&255,h>>8&255,255&h,c>>24&255,c>>16&255,c>>8&255,255&c,_>>24&255,_>>16&255,_>>8&255,255&_,d>>24&255,d>>16&255,d>>8&255,255&d])},t}(),ir=function(){function t(){this._k=[new nr(1116352408,3609767458),new nr(1899447441,602891725),new nr(3049323471,3964484399),new nr(3921009573,2173295548),new nr(961987163,4081628472),new nr(1508970993,3053834265),new nr(2453635748,2937671579),new nr(2870763221,3664609560),new nr(3624381080,2734883394),new nr(310598401,1164996542),new nr(607225278,1323610764),new nr(1426881987,3590304994),new nr(1925078388,4068182383),new nr(2162078206,991336113),new nr(2614888103,633803317),new nr(3248222580,3479774868),new nr(3835390401,2666613458),new nr(4022224774,944711139),new nr(264347078,2341262773),new nr(604807628,2007800933),new nr(770255983,1495990901),new nr(1249150122,1856431235),new nr(1555081692,3175218132),new nr(1996064986,2198950837),new nr(2554220882,3999719339),new nr(2821834349,766784016),new nr(2952996808,2566594879),new nr(3210313671,3203337956),new nr(3336571891,1034457026),new nr(3584528711,2466948901),new nr(113926993,3758326383),new nr(338241895,168717936),new nr(666307205,1188179964),new nr(773529912,1546045734),new nr(1294757372,1522805485),new nr(1396182291,2643833823),new nr(1695183700,2343527390),new nr(1986661051,1014477480),new nr(2177026350,1206759142),new nr(2456956037,344077627),new nr(2730485921,1290863460),new nr(2820302411,3158454273),new nr(3259730800,3505952657),new nr(3345764771,106217008),new nr(3516065817,3606008344),new nr(3600352804,1432725776),new nr(4094571909,1467031594),new nr(275423344,851169720),new nr(430227734,3100823752),new nr(506948616,1363258195),new nr(659060556,3750685593),new nr(883997877,3785050280),new nr(958139571,3318307427),new nr(1322822218,3812723403),new nr(1537002063,2003034995),new nr(1747873779,3602036899),new nr(1955562222,1575990012),new nr(2024104815,1125592928),new nr(2227730452,2716904306),new nr(2361852424,442776044),new nr(2428436474,593698344),new nr(2756734187,3733110249),new nr(3204031479,2999351573),new nr(3329325298,3815920427),new nr(3391569614,3928383900),new nr(3515267271,566280711),new nr(3940187606,3454069534),new nr(4118630271,4000239992),new nr(116418474,1914138554),new nr(174292421,2731055270),new nr(289380356,3203993006),new nr(460393269,320620315),new nr(685471733,587496836),new nr(852142971,1086792851),new nr(1017036298,365543100),new nr(1126000580,2618297676),new nr(1288033470,3409855158),new nr(1501505948,4234509866),new nr(1607167915,987167468),new nr(1816402316,1246189591)]}return t.prototype._sigma=function(t,e,i){t.assign(e),t.rotateRight(28),i.assign(e),i.rotateRight(34),t.xor(i),i.assign(e),i.rotateRight(39),t.xor(i)},t.prototype._sigmaPrime=function(t,e,i){t.assign(e),t.rotateRight(14),i.assign(e),i.rotateRight(18),t.xor(i),i.assign(e),i.rotateRight(41),t.xor(i)},t.prototype._littleSigma=function(t,e,i){t.assign(e),t.rotateRight(1),i.assign(e),i.rotateRight(8),t.xor(i),i.assign(e),i.shiftRight(7),t.xor(i)},t.prototype._littleSigmaPrime=function(t,e,i){t.assign(e),t.rotateRight(19),i.assign(e),i.rotateRight(61),t.xor(i),i.assign(e),i.shiftRight(6),t.xor(i)},t.prototype._hash=function(t,e,i,n){var r,a,s,o,h,c,_,d;void 0===n&&(n=!1),n?(r=new nr(3418070365,3238371032),a=new nr(1654270250,914150663),s=new nr(2438529370,812702999),o=new nr(355462360,4144912697),h=new nr(1731405415,4290775857),c=new nr(2394180231,1750603025),_=new nr(3675008525,1694076839),d=new nr(1203062813,3204075428)):(r=new nr(1779033703,4089235720),a=new nr(3144134277,2227873595),s=new nr(1013904242,4271175723),o=new nr(2773480762,1595750129),h=new nr(1359893119,2917565137),c=new nr(2600822924,725511199),_=new nr(528734635,4215389547),d=new nr(1541459225,327033209));var l,p=128*Math.ceil((i+17)/128),f=new Uint8Array(p);for(l=0;l<i;++l)f[Number.parseInt(l.toString(),10)]=t[e++];f[l++]=128;for(var u=p-16;l<u;)f[l++]=0;f[l++]=0,f[l++]=0,f[l++]=0,f[l++]=0,f[l++]=0,f[l++]=0,f[l++]=0,f[l++]=0,f[l++]=0,f[l++]=0,f[l++]=0,f[l++]=i>>>29&255,f[l++]=i>>21&255,f[l++]=i>>13&255,f[l++]=i>>5&255,f[l++]=i<<3&255;var g=new Array(80);for(l=0;l<80;l++)g[Number.parseInt(l.toString(),10)]=new nr(0,0);var y,b,m=new nr(0,0),v=new nr(0,0),w=new nr(0,0),S=new nr(0,0),P=new nr(0,0),A=new nr(0,0),x=new nr(0,0),k=new nr(0,0),T=new nr(0,0),R=new nr(0,0),F=new nr(0,0),I=new nr(0,0);for(l=0;l<p;){var N=void 0;for(N=0;N<16;++N)g[Number.parseInt(N.toString(),10)].high=f[Number.parseInt(l.toString(),10)]<<24|f[l+1]<<16|f[l+2]<<8|f[l+3],g[Number.parseInt(N.toString(),10)].low=f[l+4]<<24|f[l+5]<<16|f[l+6]<<8|f[l+7],l+=8;for(N=16;N<80;++N)y=g[Number.parseInt(N.toString(),10)],this._littleSigmaPrime(y,g[N-2],I),y.add(g[N-7]),this._littleSigma(F,g[N-15],I),y.add(F),y.add(g[N-16]);for(m.assign(r),v.assign(a),w.assign(s),S.assign(o),P.assign(h),A.assign(c),x.assign(_),k.assign(d),N=0;N<80;++N)T.assign(k),this._sigmaPrime(F,P,I),T.add(F),F.assign(P),F.and(A),I.assign(P),I.not(),I.and(x),F.xor(I),T.add(F),T.add(this._k[Number.parseInt(N.toString(),10)]),T.add(g[Number.parseInt(N.toString(),10)]),this._sigma(R,m,I),F.assign(m),F.and(v),I.assign(m),I.and(w),F.xor(I),I.assign(v),I.and(w),F.xor(I),R.add(F),y=k,k=x,x=A,A=P,S.add(T),P=S,S=w,w=v,v=m,y.assign(T),y.add(R),m=y;r.add(m),a.add(v),s.add(w),o.add(S),h.add(P),c.add(A),_.add(x),d.add(k)}return n?(b=new Uint8Array(48),r.copyTo(b,0),a.copyTo(b,8),s.copyTo(b,16),o.copyTo(b,24),h.copyTo(b,32),c.copyTo(b,40)):(b=new Uint8Array(64),r.copyTo(b,0),a.copyTo(b,8),s.copyTo(b,16),o.copyTo(b,24),h.copyTo(b,32),c.copyTo(b,40),_.copyTo(b,48),d.copyTo(b,56)),b},t}(),nr=function(){function t(t,e){this.high=0|t,this.low=0|e}return t.prototype.and=function(t){this.high&=t.high,this.low&=t.low},t.prototype.or=function(t){this.high|=t.high,this.low|=t.low},t.prototype.not=function(){this.high=~this.high,this.low=~this.low},t.prototype.xor=function(t){this.high^=t.high,this.low^=t.low},t.prototype.shiftRight=function(t){t>=32?(this.low=this.high>>>t-32|0,this.high=0):(this.low=this.low>>>t|this.high<<32-t,this.high=this.high>>>t|0)},t.prototype.shiftLeft=function(t){t>=32?(this.high=this.low<<t-32,this.low=0):(this.high=this.high<<t|this.low>>>32-t,this.low<<=t)},t.prototype.rotateRight=function(t){var e,i;32&t?(i=this.low,e=this.high):(e=this.low,i=this.high),t&=31,this.low=e>>>t|i<<32-t,this.high=i>>>t|e<<32-t},t.prototype.add=function(t){var e=(this.low>>>0)+(t.low>>>0),i=(this.high>>>0)+(t.high>>>0);e>4294967295&&(i+=1),this.low=0|e,this.high=0|i},t.prototype.copyTo=function(t,e){t[Number.parseInt(e.toString(),10)]=this.high>>>24&255,t[e+1]=this.high>>16&255,t[e+2]=this.high>>8&255,t[e+3]=255&this.high,t[e+4]=this.low>>>24&255,t[e+5]=this.low>>16&255,t[e+6]=this.low>>8&255,t[e+7]=255&this.low},t.prototype.assign=function(t){this.high=t.high,this.low=t.low},t}(),rr=function(){function t(){}return Object.defineProperty(t.prototype,"_sha256",{get:function(){return void 0===this._sha256Obj&&(this._sha256Obj=new er),this._sha256Obj},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_sha512",{get:function(){return void 0===this._sha512Obj&&(this._sha512Obj=new ir),this._sha512Obj},enumerable:!0,configurable:!0}),t}(),ar=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zn(e,t),e.prototype._checkOwnerPassword=function(t,e,i,n){var r=new Uint8Array(t.length+56);return r.set(t,0),r.set(e,t.length),r.set(i,t.length+e.length),$e(this._sha256._hash(r,0,r.length),n)},e.prototype._checkUserPassword=function(t,e,i){var n=new Uint8Array(t.length+8);return n.set(t,0),n.set(e,t.length),$e(this._sha256._hash(n,0,n.length),i)},e.prototype._getOwnerKey=function(t,e,i,n){var r=new Uint8Array(t.length+56);r.set(t,0),r.set(e,t.length),r.set(i,t.length+e.length);var a=this._sha256._hash(r,0,r.length);return new dr(a)._decryptBlock(n,!1,new Uint8Array(16))},e.prototype._getUserKey=function(t,e,i){var n=new Uint8Array(t.length+8);n.set(t,0),n.set(e,t.length);var r=this._sha256._hash(n,0,n.length);return new dr(r)._decryptBlock(i,!1,new Uint8Array(16))},e}(rr),sr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zn(e,t),e.prototype._checkOwnerPassword=function(t,e,i,n){var r=new Uint8Array(t.length+56);return r.set(t,0),r.set(e,t.length),r.set(i,t.length+e.length),$e(this._hash(t,r,i),n)},e.prototype._checkUserPassword=function(t,e,i){var n=new Uint8Array(t.length+8);return n.set(t,0),n.set(e,t.length),$e(this._hash(t,n,new Uint8Array([])),i)},e.prototype._getOwnerKey=function(t,e,i,n){var r=new Uint8Array(t.length+56);r.set(t,0),r.set(e,t.length),r.set(i,t.length+e.length);var a=this._hash(t,r,i);return new dr(a)._decryptBlock(n,!1,new Uint8Array(16))},e.prototype._getUserKey=function(t,e,i){var n=new Uint8Array(t.length+8);n.set(t,0),n.set(e,t.length);var r=this._hash(t,n,new Uint8Array([]));return new dr(r)._decryptBlock(i,!1,new Uint8Array(16))},e.prototype._hash=function(t,e,i){for(var n=this._sha256._hash(e,0,e.length).subarray(0,32),r=new Uint8Array([0]),a=0;a<64||r[r.length-1]>a-32;){var s=t.length+n.length+i.length,o=new Uint8Array(s),h=0;o.set(t,h),h+=t.length,o.set(n,h),h+=n.length,o.set(i,h);for(var c=new Uint8Array(64*s),_=0,d=0;_<64;_++)c.set(o,d),d+=s;r=new _r(n.subarray(0,16))._encrypt(c,n.subarray(16,32));for(var l=0,p=0;p<16;p++)l*=1,l%=3,l+=(r[Number.parseInt(p.toString(),10)]>>>0)%3,l%=3;2===l?n=this._sha512._hash(r,0,r.length):1===l?n=this._sha512._hash(r,0,r.length,!0):0===l&&(n=this._sha256._hash(r,0,r.length)),a++}return n.subarray(0,32)},e}(rr),or=function(){},hr=function(t){function e(e){var i=t.call(this)||this;i._a=0,i._b=0;for(var n=new Uint8Array(256),r=0;r<256;++r)n[Number.parseInt(r.toString(),10)]=r;for(var a=e.length,s=(r=0,0);r<256;++r){var o=n[Number.parseInt(r.toString(),10)];s=s+o+e[r%a]&255,n[Number.parseInt(r.toString(),10)]=n[Number.parseInt(s.toString(),10)],n[Number.parseInt(s.toString(),10)]=o}return i._s=n,i}return Zn(e,t),e.prototype._encryptBlock=function(t){for(var e=this._a,i=this._b,n=this._s,r=t.length,a=new Uint8Array(r),s=0;s<r;++s){e=e+1&255;var o=n[Number.parseInt(e.toString(),10)];i=i+o&255;var h=n[Number.parseInt(i.toString(),10)];n[Number.parseInt(e.toString(),10)]=h,n[Number.parseInt(i.toString(),10)]=o,a[Number.parseInt(s.toString(),10)]=t[Number.parseInt(s.toString(),10)]^n[o+h&255]}return this._a=e,this._b=i,a},e.prototype._decryptBlock=function(t){return this._encryptBlock(t)},e.prototype._encrypt=function(t){return this._encryptBlock(t)},e}(or),cr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._buffer=new Uint8Array(16),e._position=0,e._s=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]),e._inverseS=new Uint8Array([82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125]),e._mix=new Uint32Array([0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795]),e}return Zn(e,t),Object.defineProperty(e.prototype,"_mixCol",{get:function(){if(void 0===this._mixC){this._mixC=new Uint8Array(256);for(var t=0;t<256;t++)this._mixC[Number.parseInt(t.toString(),10)]=t<128?t<<1:t<<1^27}return this._mixC},enumerable:!0,configurable:!0}),e.prototype._decrypt=function(t,e){var i,n,r,a=new Uint8Array(16);a.set(t);for(var s=0,o=this._keySize;s<16;++s,++o)a[Number.parseInt(s.toString(),10)]^=e[Number.parseInt(o.toString(),10)];for(var h=this._cyclesOfRepetition-1;h>=1;--h){i=a[13],a[13]=a[9],a[9]=a[5],a[5]=a[1],a[1]=i,i=a[14],n=a[10],a[14]=a[6],a[10]=a[2],a[6]=i,a[2]=n,i=a[15],n=a[11],r=a[7],a[15]=a[3],a[11]=i,a[7]=n,a[3]=r;for(s=0;s<16;++s)a[Number.parseInt(s.toString(),10)]=this._inverseS[a[Number.parseInt(s.toString(),10)]];for(s=0,o=16*h;s<16;++s,++o)a[Number.parseInt(s.toString(),10)]^=e[Number.parseInt(o.toString(),10)];for(s=0;s<16;s+=4){var c=this._mix[a[Number.parseInt(s.toString(),10)]],_=this._mix[a[s+1]],d=this._mix[a[s+2]],l=this._mix[a[s+3]];i=c^_>>>8^_<<24^d>>>16^d<<16^l>>>24^l<<8,a[Number.parseInt(s.toString(),10)]=i>>>24&255,a[s+1]=i>>16&255,a[s+2]=i>>8&255,a[s+3]=255&i}}i=a[13],a[13]=a[9],a[9]=a[5],a[5]=a[1],a[1]=i,i=a[14],n=a[10],a[14]=a[6],a[10]=a[2],a[6]=i,a[2]=n,i=a[15],n=a[11],r=a[7],a[15]=a[3],a[11]=i,a[7]=n,a[3]=r;for(s=0;s<16;++s)a[Number.parseInt(s.toString(),10)]=this._inverseS[a[Number.parseInt(s.toString(),10)]],a[Number.parseInt(s.toString(),10)]^=e[Number.parseInt(s.toString(),10)];return a},e.prototype._encryptBlock=function(t,e){var i,n,r,a=this._s,s=new Uint8Array(16);s.set(t);for(var o=0;o<16;++o)s[Number.parseInt(o.toString(),10)]^=e[Number.parseInt(o.toString(),10)];for(var h=1;h<this._cyclesOfRepetition;h++){for(o=0;o<16;++o)s[Number.parseInt(o.toString(),10)]=a[s[Number.parseInt(o.toString(),10)]];r=s[1],s[1]=s[5],s[5]=s[9],s[9]=s[13],s[13]=r,r=s[2],n=s[6],s[2]=s[10],s[6]=s[14],s[10]=r,s[14]=n,r=s[3],n=s[7],i=s[11],s[3]=s[15],s[7]=r,s[11]=n,s[15]=i;for(o=0;o<16;o+=4){var c=s[o+0],_=s[o+1],d=s[o+2],l=s[o+3];i=c^_^d^l,s[o+0]^=i^this._mixCol[c^_],s[o+1]^=i^this._mixCol[_^d],s[o+2]^=i^this._mixCol[d^l],s[o+3]^=i^this._mixCol[l^c]}o=0;for(var p=16*h;o<16;++o,++p)s[Number.parseInt(o.toString(),10)]^=e[Number.parseInt(p.toString(),10)]}for(o=0;o<16;++o)s[Number.parseInt(o.toString(),10)]=a[s[Number.parseInt(o.toString(),10)]];r=s[1],s[1]=s[5],s[5]=s[9],s[9]=s[13],s[13]=r,r=s[2],n=s[6],s[2]=s[10],s[6]=s[14],s[10]=r,s[14]=n,r=s[3],n=s[7],i=s[11],s[3]=s[15],s[7]=r,s[11]=n,s[15]=i;for(o=0,p=this._keySize;o<16;++o,++p)s[Number.parseInt(o.toString(),10)]^=e[Number.parseInt(p.toString(),10)];return s},e.prototype._decryptBlockHelper=function(t,e){for(var i=t.length,n=this._buffer,r=this._position,a=[],s=this._iv,o=0;o<i;++o)if(n[Number.parseInt(r.toString(),10)]=t[Number.parseInt(o.toString(),10)],!(++r<16)){for(var h=this._decrypt(n,this._key),c=0;c<16;++c)h[Number.parseInt(c.toString(),10)]^=s[Number.parseInt(c.toString(),10)];s=n,a.push(h),n=new Uint8Array(16),r=0}if(this._buffer=n,this._bufferLength=r,this._iv=s,0===a.length)return new Uint8Array(0);var _=16*a.length;if(e){var d=a[a.length-1],l=d[15];if(l<=16){o=15;for(var p=16-l;o>=p;--o)if(d[Number.parseInt(o.toString(),10)]!==l){l=0;break}_-=l,a[a.length-1]=d.subarray(0,16-l)}}var f=new Uint8Array(_);for(o=0,c=0;o<a.length;++o,c+=16)f.set(a[Number.parseInt(o.toString(),10)],c);return f},e.prototype._decryptBlock=function(t,e,i){var n=t.length,r=this._buffer,a=this._position;if(i)this._iv=i;else{for(var s=0;a<16&&s<n;++s,++a)r[Number.parseInt(a.toString(),10)]=t[Number.parseInt(s.toString(),10)];if(a<16)return this._bufferLength=a,new Uint8Array(0);this._iv=r,t=t.subarray(16)}return this._buffer=new Uint8Array(16),this._bufferLength=0,this._decryptBlock=this._decryptBlockHelper,this._decryptBlock(t,e)},e.prototype._encrypt=function(t,e){var i=t.length,n=this._buffer,r=this._position,a=[];e||(e=new Uint8Array(16));for(var s=0;s<i;++s)if(n[Number.parseInt(r.toString(),10)]=t[Number.parseInt(s.toString(),10)],!(++r<16)){for(var o=0;o<16;++o)n[Number.parseInt(o.toString(),10)]^=e[Number.parseInt(o.toString(),10)];var h=this._encryptBlock(n,this._key);e=h,a.push(h),n=new Uint8Array(16),r=0}if(this._buffer=n,this._bufferLength=r,this._iv=e,0===a.length)return new Uint8Array(0);var c=16*a.length,_=new Uint8Array(c);for(s=0,o=0;s<a.length;++s,o+=16)_.set(a[Number.parseInt(s.toString(),10)],o);return _},e}(or),_r=function(t){function e(e){var i=t.call(this)||this;return i._cyclesOfRepetition=10,i._keySize=160,i._key=new Uint8Array([141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141]),i._key=i._expandKey(e),i}return Zn(e,t),e.prototype._expandKey=function(t){var e=this._s,i=this._key,n=new Uint8Array(176);n.set(t);for(var r=16,a=1;r<176;++a){var s=n[r-3],o=n[r-2],h=n[r-1],c=n[r-4];s=e[Number.parseInt(s.toString(),10)],o=e[Number.parseInt(o.toString(),10)],h=e[Number.parseInt(h.toString(),10)],c=e[Number.parseInt(c.toString(),10)],s^=i[Number.parseInt(a.toString(),10)];for(var _=0;_<4;++_)n[Number.parseInt(r.toString(),10)]=s^=n[r-16],n[r+1]=o^=n[r-15],n[r+2]=h^=n[r-14],n[r+3]=c^=n[r-13],r+=4}return n},e}(cr),dr=function(t){function e(e){var i=t.call(this)||this;return i._cyclesOfRepetition=14,i._keySize=224,i._key=i._expandKey(e),i}return Zn(e,t),e.prototype._expandKey=function(t){var e=this._s,i=new Uint8Array(240);i.set(t);for(var n,r,a,s,o=1,h=32,c=1;h<240;++c){h%32==16?(n=e[Number.parseInt(n.toString(),10)],r=e[Number.parseInt(r.toString(),10)],a=e[Number.parseInt(a.toString(),10)],s=e[Number.parseInt(s.toString(),10)]):h%32==0&&(n=i[h-3],r=i[h-2],a=i[h-1],s=i[h-4],n=e[Number.parseInt(n.toString(),10)],r=e[Number.parseInt(r.toString(),10)],a=e[Number.parseInt(a.toString(),10)],s=e[Number.parseInt(s.toString(),10)],n^=o,(o<<=1)>=256&&(o=255&(27^o)));for(var _=0;_<4;++_)i[Number.parseInt(c.toString(),10)]=n^=i[h-32],i[h+1]=r^=i[h-31],i[h+2]=a^=i[h-30],i[h+3]=s^=i[h-29],h+=4}return i},e}(cr),lr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zn(e,t),e.prototype._decryptBlock=function(t){return t},e.prototype._encrypt=function(t){return t},e}(or),pr=function(){function t(t,e){this._stringCipher=t,this._streamCipher=e}return t.prototype.createStream=function(t,e){return new Dn(t,e,this._streamCipher)},t.prototype.decryptString=function(t){return ii(this._stringCipher._decryptBlock(Ye(t),!0))},t.prototype.encryptString=function(t){if(this._stringCipher instanceof cr){var e=16-t.length%16;t+=String.fromCharCode(e).repeat(e);var i=new Uint8Array(16);if("undefined"!=typeof crypto)crypto.getRandomValues(i);else for(var n=0;n<16;n++)i[Number.parseInt(n.toString(),10)]=Math.floor(256*Math.random());var r=this._stringCipher._encrypt(Ye(t),i),a=new Uint8Array(16+r.length);return a.set(i),a.set(r,16),ii(a)}return ii(this._stringCipher._encrypt(Ye(t)))},t}(),fr=function(){function e(t,e){this._version="",this._newLine="\r\n",this._password=e,this._document=t,this._stream=t._stream,this._entries=[],this._crossReferencePosition=Object.create(null),this._cacheMap=new Map,this._pendingRefs=new dn}return e.prototype._setStartXRef=function(t){this._startXRefQueue=[t],this._prevStartXref=t},e.prototype._parse=function(e){var i;(i=e?this._indexObjects():this._readXRef()).assignXref(this),this._nextReferenceNumber=i.get("Size"),this._trailer=i;var n=i.get("Encrypt");if(n){this._ids=i.get("ID"),this._permissionFlags=n.get("P");var r=this._ids&&this._ids.length?this._ids[0]:"";n.suppressEncryption=!0,this._encrypt=new $n(n,r,this._password),this._type=t.PdfCrossReferenceType.stream}var a=!1;try{var s=i.get("Root");if(s)s.get("Pages")&&(this._root=s,a=!0)}catch(t){throw new tn("Invalid cross reference","InvalidXRef")}if(!a)throw new tn("Invalid cross reference",e?"InvalidXRef":"XRefParseException")},e.prototype._getEntry=function(t){var e=this._entries[t];return e&&!e.free&&e.offset?e:null},e.prototype._fetch=function(t,e){var i;if(!(t instanceof _n))throw new Error("ref object is not a reference");var n=t.objectNumber,r=this._cacheMap.get(t);if(void 0!==r)return r instanceof fn&&!r.objId&&(r.objId=n),r;var a=this._getEntry(n);if(null===a)return this._cacheMap.set(t,a),a;if(this._pendingRefs.has(t))throw this._pendingRefs.remove(t),new Error("circular reference");this._pendingRefs.put(t);try{i=a.uncompressed?this._fetchUncompressed(t,a,e):this._fetchCompressed(t,a),this._pendingRefs.remove(t)}catch(e){throw this._pendingRefs.remove(t),e}return i},e.prototype._fetchUncompressed=function(t,e,i){var n=t.generationNumber,r=t.objectNumber;if(e.gen!==n)throw new tn("Inconsistent generation in XRef: "+t,"XRefEntryException");var a,s=this._stream.makeSubStream(e.offset+this._stream.start,void 0),o=new Jn(new Qn(s),this,!0),h=o.getObject(),c=o.getObject(),_=o.getObject();if(h!==r||c!==n||void 0===_)throw new tn("Bad (uncompressed) XRef entry: "+t,"XRefEntryException");return(a=this._encrypt&&!i?o.getObject(this._encrypt._createCipherTransform(t.objectNumber,t.generationNumber)):o.getObject())instanceof In||this._cacheMap.set(t,a),a instanceof fn?a.objId=t.toString():a instanceof In&&(a.dictionary.objId=t.toString()),a},e.prototype._fetchCompressed=function(t,e){var i=e.offset,n=this._fetch(_n.get(i,0));if(void 0===n)throw new en("bad ObjStm stream");var r=n.dictionary.get("First"),a=n.dictionary.get("N"),s=t.generationNumber;if(!Number.isInteger(r)||!Number.isInteger(a))throw new en("invalid first and n parameters for ObjStm stream");for(var o=new Jn(new Qn(n),this,!0),h=new Array(a),c=new Array(a),_=0;_<a;++_){var d=o.getObject();if(!Number.isInteger(d))throw new en("invalid object number in the ObjStm stream: "+d);var l=o.getObject();if(!Number.isInteger(l))throw new en("invalid object offset in the ObjStm stream: "+l);h[_]=d,c[_]=l}var p=(n.start||0)+r,f=new Array(a);for(_=0;_<a;++_){var u=_<a-1?c[_+1]-c[_]:void 0;if(u<0)throw new en("Invalid offset in the ObjStm stream.");var g=(o=new Jn(new Qn(n.makeSubStream(p+c[_],u,n.dictionary)),this,!0)).getObject();if(f[_]=g,!(g instanceof In)){d=h[_];var y=this._entries[d];if(y&&y.offset===i&&y.gen===_){var b=d+" "+s;this._cacheMap.set(_n.get(d,s),g),g instanceof fn&&(g.objId=b)}}}var m=f[e.gen];if(void 0===m)throw new tn("Bad (compressed) XRef entry: "+t,"XRefEntryException");return m},e.prototype._readXRef=function(e){void 0===e&&(e=!1);var i=this._stream,n=new Set;try{for(;this._startXRefQueue.length;){var r=this._startXRefQueue[0];if(this._prevStartXref<r&&(this._prevStartXref=r),n.has(r))this._startXRefQueue.shift();else{n.add(r),i.position=r+i.start;var a=new Jn(new Qn(i),this,!0),s=a.getObject(),o=void 0;if(bn(s,"xref")){if(void 0===this._type&&(this._type=t.PdfCrossReferenceType.table),o=this._processXRefTable(a),this._topDictionary||(this._topDictionary=o),s=o.get("XRefStm"),Number.isInteger(s)){var h=s;h in this._crossReferencePosition||(this._crossReferencePosition[h]=1,this._startXRefQueue.push(h))}}else{if(!Number.isInteger(s))throw new en("Invalid XRef stream header");void 0===this._type&&(this._type=t.PdfCrossReferenceType.stream);var c=a.getObject(),_=a.getObject();if(s=a.getObject(),!(void 0!==c&&Number.isInteger(c)&&bn(_,"obj")&&s instanceof In))throw new en("Invalid cross reference stream");if(o=this._processXRefStream(s),this._topDictionary||(this._topDictionary=o),!o)throw new en("Failed to read XRef stream")}s=o.get("Prev"),Number.isInteger(s)?this._startXRefQueue.push(s):s instanceof _n&&this._startXRefQueue.push(s.objectNumber),this._startXRefQueue.shift()}}return this._topDictionary}catch(t){this._startXRefQueue.shift()}if(!e)throw new tn("Invalid cross reference","XRefParseException")},e.prototype._readToken=function(t,e){for(var i="",n=t[e];10!==n&&13!==n&&60!==n&&!(++e>=t.length);)i+=String.fromCharCode(n),n=t[e];return i},e.prototype._skipUntil=function(t,e,i){for(var n=i.length,r=t.length,a=0;e<r;){for(var s=0;s<n&&t[e+s]===i[s];)++s;if(s>=n)break;e++,a++}return a},e.prototype._indexObjects=function(){var t=/^(\d+)\s+(\d+)\s+obj\b/,e=/\bendobj[\b\s]$/,i=/\s+(\d+\s+\d+\s+obj[\b\s<])$/,n=new Uint8Array([116,114,97,105,108,101,114]),r=new Uint8Array([115,116,97,114,116,120,114,101,102]),a=new Uint8Array([111,98,106]),s=new Uint8Array([47,88,82,101,102]);this._entries.length=0,this._cacheMap.clear();var o=this._stream;o.position=0;for(var h,c=o.getBytes(),_=c.length,d=o.start,l=[],p=[];d<_;){var f=c[d];if(9!==f&&10!==f&&13!==f&&32!==f)if(37!==f){var u=this._readToken(c,d),g=void 0;if(u.startsWith("xref")&&(4===u.length||/\s/.test(u[4])))d+=this._skipUntil(c,d,n),l.push(d),d+=this._skipUntil(c,d,r);else if(g=t.exec(u)){var y=0|Number.parseInt(g[1]),b=0|Number.parseInt(g[2]),m=void 0,v=d+u.length,w=!1;if(this._entries[y]){if(this._entries[y].gen===b)try{var S=o.makeSubStream(v,o.length-v),P=new Qn(S);(C=new Jn(P,null)).getObject(),w=!0}catch(t){w=!(t instanceof nn)}}else w=!0;if(w){var A=new ur;A.offset=d-o.start,A.gen=b,A.uncompressed=!0,this._entries[y]=A}for(;v<c.length;){var x=v+this._skipUntil(c,v,a)+4;m=x-d;var k=Math.max(x-25,v),T=ii(c.subarray(k,x));if(e.test(T))break;var R=i.exec(T);if(R&&R[1]){m-=R[1].length;break}v=x}var F=c.subarray(d,d+m),I=this._skipUntil(F,0,s);I<m&&F[I+5]<64&&(p.push(d-o.start),this._crossReferencePosition[d-o.start]=1),d+=m}else u.startsWith("trailer")&&(7===u.length||/\s/.test(u[7]))?(l.push(d),d+=this._skipUntil(c,d,r)):d+=u.length+1}else do{if(++d>=_)break;f=c[d]}while(10!==f&&13!==f);else++d}for(var N=0;N<p.length;++N)this._startXRefQueue.push(p[N]),this._readXRef(!0);for(N=0;N<l.length;++N){var C;if(o.position=l[N],bn((C=new Jn(new Qn(o),this,!0,!0)).getObject(),"trailer")){var M=C.getObject();if(M instanceof fn){try{var B=M.get("Root");if(!(B instanceof fn))continue;var L=B.get("Pages");if(!(L instanceof fn))continue;var E=L.get("Count");if(void 0===E||!Number.isInteger(E))continue}catch(t){continue}if(M.has("ID"))return M;h=M}}}if(h)return h;if(this._topDictionary)return this._topDictionary;throw new tn("Invalid PDF structure.","InvalidPDFException")},e.prototype._processXRefTable=function(t){if(void 0===this._tableState){var e=new gr;e.entryNum=0,e.streamPos=t.lexicalOperator.stream.position,e.parserBuf1=t.first,e.parserBuf2=t.second,this._tableState=e}if(!bn(this._readXRefTable(t),"trailer"))throw new en("Invalid XRef table: could not find trailer dictionary");var i,n=t.getObject();if(n&&(n instanceof fn?i=n:n instanceof In&&n.dictionary&&(i=n.dictionary)),!i)throw new en("Invalid cross reference: could not parse trailer dictionary");return this._tableState=void 0,i},e.prototype._readXRefTable=function(t){var e,i=t.lexicalOperator.stream;for(i.position=this._tableState.streamPos,t.first=this._tableState.parserBuf1,t.second=this._tableState.parserBuf2;;){if(void 0===this._tableState.firstEntryNum||void 0===this._tableState.entryCount){if(bn(e=t.getObject(),"trailer"))break;this._tableState.firstEntryNum=e,this._tableState.entryCount=t.getObject()}var n=this._tableState.firstEntryNum,r=this._tableState.entryCount;if(!Number.isInteger(n)||!Number.isInteger(r))throw new en("Invalid cross reference: wrong types in subsection header");for(var a=this._tableState.entryNum;a<r;a++){this._tableState.streamPos=i.position,this._tableState.entryNum=a,this._tableState.parserBuf1=t.first,this._tableState.parserBuf2=t.second;var s=new ur;s.offset=t.getObject(),s.gen=t.getObject();var o=t.getObject();if(o)switch(o.command){case"f":s.free=!0;break;case"n":s.uncompressed=!0}if(!Number.isInteger(s.offset)||!Number.isInteger(s.gen)||!s.free&&!s.uncompressed)throw new en("Invalid entry in cross reference subsection: "+n+", "+r);0===a&&s.free&&1===n&&(n=0),this._entries[a+n]||(this._entries[a+n]=s)}this._tableState.entryNum=0,this._tableState.streamPos=i.position,this._tableState.parserBuf1=t.first,this._tableState.parserBuf2=t.second,this._tableState.firstEntryNum=void 0,this._tableState.entryCount=void 0}if(this._entries[0]&&!this._entries[0].free)throw new en("Invalid XRef table: unexpected first object");return e},e.prototype._processXRefStream=function(t){if(void 0===this._streamState){var e=t.dictionary,i=new yr,n=e.getArray("Index");n||(n=[0,e.get("Size")]),i.entryRanges=n,i.byteWidths=e.getArray("W"),i.entryNum=0,i.streamPos=t.position,this._streamState=i}return this._readXRefStream(t),this._streamState=void 0,t.dictionary},e.prototype._readXRefStream=function(t){t.position=this._streamState.streamPos;for(var e=this._streamState.byteWidths[0],i=this._streamState.byteWidths[1],n=this._streamState.byteWidths[2],r=this._streamState.entryRanges;r.length>0;){var a=r[0],s=r[1];if(!Number.isInteger(a)||!Number.isInteger(s))throw new en("Invalid XRef range fields: "+a+", "+s);if(!Number.isInteger(e)||!Number.isInteger(i)||!Number.isInteger(n))throw new en("Invalid XRef entry fields length: "+a+", "+s);for(var o=this._streamState.entryNum;o<s;++o){this._streamState.entryNum=o,this._streamState.streamPos=t.position;for(var h=0,c=0,_=0,d=0;d<e;++d){var l=t.getByte();if(-1===l)throw new en("invalid cross reference byte width type.");h=h<<8|l}0===e&&(h=1);for(d=0;d<i;++d){var p=t.getByte();if(-1===p)throw new en("invalid cross reference byte width offset.");c=c<<8|p}for(d=0;d<n;++d){var f=t.getByte();if(-1===f)throw new en("invalid cross reference byte width generation.");_=_<<8|f}var u=new ur;switch(u.offset=c,u.gen=_,h){case 0:u.free=!0;break;case 1:u.uncompressed=!0;break;case 2:break;default:throw new en("Invalid XRef entry type: "+h)}this._entries[a+o]||(this._entries[a+o]=u)}this._streamState.entryNum=0,this._streamState.streamPos=t.position,r.splice(0,2)}},e.prototype._getCatalogObj=function(){return this._root},e.prototype._save=function(){var e=this,i=this._stream.length,n=[this._newLine.charCodeAt(0),this._newLine.charCodeAt(1),37,80,68,70,45];this._writeString(""+this._version+this._newLine,n),n.push(37,131,146,250,254),this._writeString(this._newLine,n);var r=0,a=0;if(this._type===t.PdfCrossReferenceType.stream){var s=[],o=[],h="",c=[];c.push(0,1);var _=[],d=[];this._cacheMap.forEach((function(t,r){var s,o;(t instanceof In&&(s=t.dictionary),s&&s._updated&&(!s.isCatalog||e._allowCatalog))&&(c.push(r.objectNumber,1),d.push(i+n.length),e._encrypt&&(o=e._encrypt._createCipherTransform(r.objectNumber,r.generationNumber)),e._writeObject(t,n,r,o),a++,s._updated=!1)})),this._cacheMap.forEach((function(t,s){if(t instanceof fn)!t._updated||t.isCatalog&&!e._allowCatalog||(h+=s.objectNumber+" "+o.length+e._newLine,_.push(s.objectNumber,1),r++,e._writeObject(t,o));else if(t instanceof In){var l=t.dictionary;l&&l._updated&&(!l.isCatalog||e._allowCatalog)&&(c.push(s.objectNumber,1),d.push(i+n.length),e._writeObject(t,n,s),a++,l._updated=!1)}}));for(var l=0;l<_.length;l++)c.push(_[parseInt(l.toString(),10)]);var p=void 0,f=void 0;if(r>0){f=this._getNextReference(),c.push(f.objectNumber,2),this._writeString(h,s),this._writeBytes(o,s);var u=new fn(this);u.set("Type",hn.get("ObjStm")),u.set("N",r),u.set("First",h.length),u.set("Length",s.length);var g,y=new Nn(s,u,0,s.length);p=i+n.length,this._encrypt&&(g=this._encrypt._createCipherTransform(f.objectNumber,f.generationNumber)),this._writeObject(y,n,f,g)}var b=this._getNextReference(),m=i+n.length;(x=new fn(this)).set("Type",hn.get("XRef")),x.set("Index",c),x.set("W",[1,3,1]),this._copyTrailer(x),this._ids&&this._ids.length>0&&x.update("ID",[this._ids[0],this._computeMessageDigest(m)]);var v=[];if(this._writeLong(0,1,v),this._writeLong(1,3,v),this._writeLong(-1,1,v),a>0)for(var w=0;w<a;w++)this._writeLong(1,1,v),this._writeLong(d[w],3,v),this._writeLong(0,1,v);if(r>0){for(w=0;w<r;w++)this._writeLong(2,1,v),this._writeLong(f.objectNumber,3,v),this._writeLong(w,1,v);this._writeLong(1,1,v),this._writeLong(p,3,v),this._writeLong(0,1,v)}this._writeLong(1,1,v),this._writeLong(m,3,v),this._writeLong(0,1,v),x.set("Length",v.length);var S=new Nn(v,x,0,v.length),P=void 0;this._encrypt&&(P=this._encrypt._createCipherTransform(b.objectNumber,b.generationNumber)),this._writeObject(S,n,b,P,!0),this._writeString("startxref"+this._newLine+m+this._newLine+"%%EOF"+this._newLine,n)}else{var A="";this._cacheMap.forEach((function(t,a){var s;if(t instanceof fn?s=t:t instanceof In&&(s=t.dictionary),s&&s._updated&&(!s.isCatalog||e._allowCatalog)){for(var o=(i+n.length).toString();o.length<10;)o="0"+o;for(var h=a.generationNumber.toString();h.length<5;)h="0"+h;A+=a.objectNumber+" 1"+e._newLine+o+" "+h+" n"+e._newLine,r++,e._writeObject(t,n,a)}}));m=n.length+i;this._writeString("xref"+this._newLine+"0 1"+this._newLine+"0000000000 65535 f"+this._newLine,n),r>0&&this._writeString(A,n),this._writeString("trailer"+this._newLine,n);var x=new fn(this);this._copyTrailer(x),this._writeDictionary(x,n,this._newLine),this._writeString("startxref"+this._newLine+m+this._newLine+"%%EOF"+this._newLine,n)}var k=new Uint8Array(this._stream.length+n.length);return k.set(this._stream.bytes),k.set(n,this._stream.length),k},e.prototype._copyTrailer=function(t){t.set("Size",this._nextReferenceNumber),t.set("Prev",this._prevStartXref);var e=this._trailer.getRaw("Root");null!=e&&t.set("Root",e);var i=this._trailer.getRaw("Info");null!=i&&t.set("Info",i);var n=this._trailer.getRaw("Encrypt");null!=n&&t.set("Encrypt",n)},e.prototype._computeMessageDigest=function(t){var e=this,i=[Math.floor(Date.now()/1e3).toString(),"",t.toString()],n=this._trailer.getRaw("Info"),r=new fn;n&&n instanceof fn&&n.forEach((function(t,e){e&&"string"==typeof e&&r.set(t,Je(e))})),r.forEach((function(t,e){i.push(e)}));var a=[];return i.forEach((function(t){e._writeString(t,a)})),ii((new tr).hash(new Uint8Array(a)))},e.prototype._getNextReference=function(){return new _n(this._nextReferenceNumber++,0)},e.prototype._writeObject=function(t,e,i,n,r){i&&i instanceof _n&&this._writeString(i.objectNumber+" "+i.generationNumber+" obj"+this._newLine,e),t instanceof fn?this._writeDictionary(t,e,this._newLine,n,r):t instanceof In&&this._writeStream(t,e,n,r),i&&i instanceof _n&&this._writeString("endobj"+this._newLine,e)},e.prototype._writeDictionary=function(t,e,i,n,r){var a=this;t._currentObj&&t._currentObj._beginSave(),this._writeString("<<"+i,e),t.forEach((function(t,s){a._writeString("/"+Ri(t)+" ",e),a._writeValue(s,e,n,r),a._writeString(i,e)})),this._writeString(">>"+this._newLine,e)},e.prototype._writeStream=function(t,e,i,n){var r=[],a=t.getString();if(!n){for(var s=[],o=0;o<a.length;o++)s.push(a.charCodeAt(o));var h=new Uint8Array(s),c=new sf.compression.CompressedStreamWriter;c.write(h,0,h.length),c.close(),a=c.getCompressedString,t.dictionary.update("Filter",hn.get("FlateDecode")),i&&(a=i.encryptString(a))}this._writeString(a,r),t.dictionary.update("Length",r.length),this._writeDictionary(t.dictionary,e,this._newLine,i,n),this._writeString("stream"+this._newLine,e),this._writeBytes(r,e),this._writeString(this._newLine+"endstream"+this._newLine,e)},e.prototype._writeValue=function(t,e,i,n){if(t instanceof hn)this._writeString("/"+Ri(t.name),e);else if(t instanceof _n)this._writeString(t.toString()+" R",e);else if(Array.isArray(t)){this._writeString("[",e);for(var r=!0,a=0,s=t;a<s.length;a++){var o=s[a];r?r=!1:this._writeString(" ",e),this._writeValue(o,e,i,n)}this._writeString("]",e)}else"string"==typeof t?(!n&&i&&(t=i.encryptString(t)),this._writeString("("+this._escapeString(t)+")",e)):"number"==typeof t?this._writeString(ti(t),e):"boolean"==typeof t?this._writeString(t.toString(),e):t instanceof fn?this._writeDictionary(t,e,this._newLine,i,n):t instanceof In?this._writeStream(t,e,i,n):null===t&&this._writeString("null",e)},e.prototype._writeString=function(t,e){for(var i=0;i<t.length;i++)e.push(255&t.charCodeAt(i))},e.prototype._writeBytes=function(t,e){for(var i=0;i<t.length;i++)e.push(t[i])},e.prototype._writeLong=function(t,e,i){for(var n=e-1;n>=0;--n)i.push(t>>(n<<3)&255)},e.prototype._escapeString=function(t){return t.replace(/([()\\\n\r])/g,(function(t){return"\n"===t?"\\n":"\r"===t?"\\r":"\\"+t}))},e.prototype._destroy=function(){this._entries=void 0,this._pendingRefs.clear(),this._pendingRefs=void 0,this._cacheMap.clear(),this._pendingRefs=void 0,this._root=void 0,this._startXRefQueue=[],this._startXRefQueue=void 0,this._stream=void 0,this._streamState=void 0,this._tableState=void 0,this._topDictionary=void 0,this._trailer=void 0,this._version=void 0,this._crossReferencePosition=void 0},e}(),ur=function(){},gr=function(){},yr=function(){},br=function(){function e(t,e){this._hasKids=!1,this._setAppearance=!1,this._exportEmptyFields=!1,this._dictionary=t,this._crossReference=e,this._parsedFields=new Map,this._fields=[],this._createFields()}return Object.defineProperty(e.prototype,"count",{get:function(){return this._fields.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needAppearances",{get:function(){return this._dictionary.has("NeedAppearances")&&(this._needAppearances=this._dictionary.get("NeedAppearances")),this._needAppearances},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exportEmptyFields",{get:function(){return this._exportEmptyFields},set:function(t){this._exportEmptyFields=t},enumerable:!0,configurable:!0}),e.prototype.fieldAt=function(e){if(e<0||e>=this._fields.length)throw Error("Index out of range.");var i;if(this._parsedFields.has(e))i=this._parsedFields.get(e);else{var n=void 0,r=this._fields[e];if(r&&r instanceof _n&&(n=this._crossReference._fetch(r)),n){var a=ci(n,"FT",!1,!0,"Parent"),s=0,o=ci(n,"Ff",!1,!0,"Parent");if(void 0!==o&&(s=o),a)switch(a.name.toLowerCase()){case"tx":i=Vt._load(this,n,this._crossReference,r);break;case"btn":i=0!=(s&t._FieldFlag.pushButton)?Ut._load(this,n,this._crossReference,r):0!=(s&t._FieldFlag.radio)?Ht._load(this,n,this._crossReference,r):Wt._load(this,n,this._crossReference,r);break;case"ch":i=0!=(s&t._FieldFlag.combo)?Gt._load(this,n,this._crossReference,r):qt._load(this,n,this._crossReference,r);break;case"sig":i=new Kt(this,n,this._crossReference,r)}this._parsedFields.set(e,i),i&&i instanceof zt&&(i._annotationIndex=e)}}return i},e.prototype.add=function(t){if(this._fields.push(t._ref),this._dictionary.update("Fields",this._fields),this._parsedFields.set(this._fields.length-1,t),t._form=this,this._crossReference._allowCatalog=!0,this._crossReference._root._updated=!0,t._kidsCount>0)for(var e=0;e<t._kidsCount;e++){var i=t.itemAt(e);(n=i._page).annotations._annotations.push(i._ref),n._pageDictionary.set("Annots",n.annotations._annotations),n._pageDictionary._updated=!0}else if(t._dictionary.has("Subtype")&&"Widget"===t._dictionary.get("Subtype").name){var n;(n=t._page).annotations._annotations.push(t._ref),t._page._pageDictionary.set("Annots",t.page.annotations._annotations),t._page._pageDictionary._updated=!0}return this._fields.length-1},e.prototype.setDefaultAppearance=function(t){this._setAppearance=!t,this._needAppearances=t,this._dictionary.update("NeedAppearances",t)},e.prototype._createFields=function(){var t;this._dictionary.has("Fields")&&(t=this._dictionary.get("Fields"));for(var e=0,i=[];null!=t;){for(;e<t.length;e++){var n=t[e],r=void 0;n&&n instanceof _n&&(r=this._crossReference._fetch(n));var a=void 0;if(r&&r.has("Kids")&&void 0!==(a=r.get("Kids"))&&a.length>0)for(var s=0;s<a.length;s++){var o=a[Number.parseInt(s.toString(),10)];if(o&&o instanceof _n){var h=this._crossReference._fetch(o);void 0===h||h.has("Parent")||h.update("Parent",n)}}if(void 0===a)void 0!==r&&-1===this._fields.indexOf(n)&&this._fields.push(n);else!r.has("FT")||this._isNode(a)?(i.push({fields:t,count:e}),this._hasKids=!0,e=-1,t=a):this._fields.push(n)}if(0===i.length)break;var c=i.pop();t=c.fields,e=c.count+1}},e.prototype._isNode=function(t){var e=!1;if(void 0!==t&&t.length>0){var i=t[0],n=void 0;if(null!=i&&(i instanceof fn?n=i:i instanceof _n&&(n=this._crossReference._fetch(i))),void 0!==n&&n.has("Subtype")){var r=n.get("Subtype");r&&"Widget"!==r.name&&(e=!0)}}return e},e.prototype._parseWidgetReferences=function(){var t=this;return void 0===this._widgetReferences&&this.count>0&&(this._widgetReferences=[],this._fields.forEach((function(e){var i=t._crossReference._fetch(e);if(i)if(i.has("Kids")){var n=i.get("Kids");n&&n.length>0&&n.forEach((function(e){var i;if(e instanceof fn?i=e:e instanceof _n&&(i=t._crossReference._fetch(e)),void 0!==i&&i.has("Subtype")){var n=i.get("Subtype");n&&"Widget"===n.name&&t._widgetReferences.push(e)}}))}else t._widgetReferences.push(e)}))),this._widgetReferences},e.prototype._doPostProcess=function(t){for(var e=0;e<this.count;e++){var i=this.fieldAt(e);i&&i._doPostProcess(t)}},e.prototype._getFieldIndex=function(t){var e=-1;if(this.count>0){this._fieldNames||(this._fieldNames=[]),this._indexedFieldNames||(this._indexedFieldNames=[]),this._actualFieldNames||(this._actualFieldNames=[]),this._indexedActualFieldNames||(this._indexedActualFieldNames=[]);for(var i=0;i<this.count;i++){var n=this.fieldAt(i);if(n){var r=n.name;r&&(this._fieldNames.push(r),this._indexedFieldNames.push(r.split("[")[0]));var a=n.actualName;a&&(this._actualFieldNames.push(a),this._indexedActualFieldNames.push(a.split("[")[0]))}}var s=this._fieldNames.indexOf(t);(-1!==s||-1!==(s=this._indexedFieldNames.indexOf(t))||-1!==(s=this._actualFieldNames.indexOf(t))||-1!==(s=this._indexedActualFieldNames.indexOf(t)))&&(e=s)}return e},e.prototype.orderFormFields=function(t){var e=this,i=this._getOrder(t);this._tabOrder=t;for(var n=[],r=0;r<this._fields.length;r++){var a=this.fieldAt(r);a&&a instanceof zt&&n.push(a)}n.sort((function(t,i){return e._compareFields(t,i)})),this._parsedFields.clear();for(r=0;r<n.length;r++)this._parsedFields.set(Number.parseInt(r.toString(),10),n[Number.parseInt(r.toString(),10)]),this._fields[Number.parseInt(r.toString(),10)]=n[Number.parseInt(r.toString(),10)]._ref,n[Number.parseInt(r.toString(),10)].page._pageDictionary.update("Tabs",i);this._dictionary.update("Fields",this._fields)},e.prototype._getOrder=function(e){if(e!==t.PdfFormFieldsTabOrder.none){var i="";return e===t.PdfFormFieldsTabOrder.row?i="R":e===t.PdfFormFieldsTabOrder.column?i="C":e===t.PdfFormFieldsTabOrder.structure&&(i="S"),hn.get(i)}return null},e.prototype._compareFields=function(e,i){var n,r,a=0,s=e.page,o=i.page;if(s&&s instanceof Le&&o&&o instanceof Le){var h=s._pageIndex,c=o._pageIndex,_=this._getRectangle(e._dictionary),d=this._getRectangle(i._dictionary);if(_&&_.length>=2&&d&&d.length>=2){var l=_[0],p=_[1],f=d[0],u=d[1];if("number"==typeof l&&"number"==typeof f&&"number"==typeof p&&"number"==typeof u)if(r=h-c,this._tabOrder===t.PdfFormFieldsTabOrder.row)n=this._compare(u,p),a=0!==r?r:0!==n?n:this._compare(l,f);else if(this._tabOrder===t.PdfFormFieldsTabOrder.column)n=this._compare(l,f),a=0!==r?r:0!==n?n:this._compare(u,p);else if((this._tabOrder===t.PdfFormFieldsTabOrder.manual||this._tabOrder===t.PdfFormFieldsTabOrder.none||this._tabOrder===t.PdfFormFieldsTabOrder.structure)&&e instanceof zt&&i instanceof zt){var g=e.tabIndex,y=i.tabIndex;n=this._compare(g,y),a=0!==r?r:n}}}return a},e.prototype._getRectangle=function(t){var e=this;if(t.has("Rect")){var i=t.get("Rect");if(i)return i}else if(t.has("Kids")){var n=t.get("Kids");if(n){n.length>1&&n.sort((function(t,i){return e._compareKidsElement(t,i)}));var r=this._crossReference._fetch(n[0]);return this._getRectangle(r)}}return null},e.prototype._compare=function(t,e){return t>e?1:t<e?-1:0},e.prototype._compareKidsElement=function(e,i){var n=this._crossReference._fetch(e),r=this._crossReference._fetch(i),a=this._getRectangle(n),s=this._getRectangle(r);if(a&&a.length>=2&&s&&s.length>=2){var o=a[0],h=a[1],c=s[0],_=s[1];if("number"==typeof o&&"number"==typeof c&&"number"==typeof h&&"number"==typeof _){var d=0,l=void 0;return this._tabOrder===t.PdfFormFieldsTabOrder.row?d=0!==(l=this._compare(_,h))?l:this._compare(o,c):this._tabOrder===t.PdfFormFieldsTabOrder.column&&(d=0!==(l=this._compare(o,c))?l:this._compare(_,h)),d}}return null},e}(),mr=function(){function t(t){void 0===t&&(t=!1),this._position=0,this._bufferText="",this._buffer=new Uint8Array(0),this._namespaceStack=[],this._elementStack=[],t?(this._currentState="StartDocument",this._skipNamespace=!0):(this._currentState="Initial",this._namespaceStack.push(new vr),this._elementStack.push(new wr),this._namespaceStack[0]._set("xmlns","http://www.w3.org/2000/xmlns/","Special"),this._namespaceStack.push(new vr),this._namespaceStack[1]._set("xml","http://www.w3.org/XML/1998/namespace","Special"),this._namespaceStack.push(new vr),this._namespaceStack[2]._set("","","Implied"),this._elementStack[0]._set("","","",this._namespaceStack.length-1)),this._attributeStack=[]}return Object.defineProperty(t.prototype,"buffer",{get:function(){return this._flush(),this._buffer},enumerable:!0,configurable:!0}),t.prototype._writeStartDocument=function(t){if("Initial"!==this._currentState||void 0===this._buffer)throw new Error("InvalidOperationException: Wrong Token");this._currentState="StartDocument",this._rawText('<?xml version="1.0" encoding="utf-8'),null!=t&&(this._rawText('" standalone="'),this._rawText(t?"yes":"no")),this._rawText('"?>')},t.prototype._writeStartElement=function(t,e,i){if(void 0===this._buffer)throw new Error("InvalidOperationException: Wrong Token");if(null==t||0===t.length)throw new Error("ArgumentException: localName cannot be undefined, null or empty");if(this._checkName(t),"Initial"===this._currentState&&this._writeStartDocument(),"StartElement"===this._currentState&&this._startElementContent(),this._currentState="StartElement",null==e)null!=i&&(e=this._lookupPrefix(i)),null==e&&(e="");else if(e.length>0&&(null==i&&(i=this._lookupNamespace(e)),null==i||void 0!==i&&0===i.length))throw new Error("ArgumentException: Cannot use a prefix with an empty namespace");null==i&&(i=this._lookupNamespace(e)),this._writeStartElementInternal(e,t,i)},t.prototype._writeEndElement=function(){"StartElement"===this._currentState?(this._startElementContent(),this._currentState="ElementContent"):"ElementContent"===this._currentState&&(this._currentState="ElementContent"),this._currentState="EndElement";var t=this._elementStack.length-1;this._writeEndElementInternal(this._elementStack[Number.parseInt(t.toString(),10)]._prefix,this._elementStack[Number.parseInt(t.toString(),10)]._localName),this._namespaceStack.splice(this._elementStack[Number.parseInt(t.toString(),10)]._previousTop+1),this._elementStack.splice(t)},t.prototype._writeElementString=function(t,e,i,n){this._writeStartElement(t,i,n),null!=e&&0!==e.length&&this._writeString(e),this._writeEndElement()},t.prototype._writeAttributeString=function(t,e,i,n){this._writeStartAttribute(t,e,i,n),this._writeStringInternal(e,!0),this._writeEndAttribute()},t.prototype._writeString=function(t){this._writeInternal(t,!1)},t.prototype._writeRaw=function(t){this._writeInternal(t,!0)},t.prototype._writeInternal=function(t,e){if(null!=t){if("StartElement"!==this._currentState&&"ElementContent"!==this._currentState)throw new Error("InvalidOperationException: Wrong Token");"StartElement"===this._currentState&&this._startElementContent(),this._currentState="ElementContent",e?this._rawText(t):this._writeStringInternal(t,!1)}},t.prototype._save=function(){for(;this._elementStack.length-1>0;)this._writeEndElement();return""!==this._bufferText&&this._flush(),this._buffer},t.prototype._destroy=function(){this._buffer=void 0;for(var t=0;t<this._namespaceStack.length;t++)this._namespaceStack[Number.parseInt(t.toString(),10)]._destroy();this._namespaceStack=[];for(t=0;t<this._elementStack.length;t++)this._elementStack[Number.parseInt(t.toString(),10)]._destroy();this._elementStack=[],this._bufferText="",this._position=0},t.prototype._flush=function(){if(this._buffer&&this._bufferText&&""!==this._bufferText){if(this._buffer.length>0){for(var t=new Array(this._bufferText.length),e=0;e<this._bufferText.length;e++)t[Number.parseInt(e.toString(),10)]=255&this._bufferText.charCodeAt(e);var i=new Uint8Array(this._buffer.length+t.length);i.set(this._buffer),i.set(t,this._buffer.length),this._buffer=i}else this._buffer=Ye(this._bufferText);this._bufferText=""}},t.prototype._writeStartAttribute=function(t,e,i,n){if(null==t||0===t.length){if("xmlns"!==i)throw new Error("ArgumentException: localName cannot be undefined, null or empty");t="xmlns",i=""}if("StartElement"!==this._currentState)throw new Error("InvalidOperationException: Wrong Token");this._checkName(t),this._writeStartAttributePrefixAndNameSpace(t,e,i,n)},t.prototype._writeStartAttributePrefixAndNameSpace=function(t,e,i,n){null==i&&(null!=n&&("xmlns"===t&&"http://www.w3.org/2000/xmlns/"===n||(i=this._lookupPrefix(n))),null==i&&(i="")),null==n&&(null!=i&&i.length>0&&(n=this._lookupNamespace(i)),null==n&&(n="")),this._writeStartAttributeSpecialAttribute(i,t,n,e)},t.prototype._writeStartAttributeSpecialAttribute=function(t,e,i,n){if(0===t.length){if("x"===e[0]&&"xmlns"===e)return this._skipPushAndWrite(t,e,i),void this._pushNamespaceExplicit("",n);i.length>0&&(t=this._lookupPrefix(i))}else{if("x"===t[0]){if("xmlns"===t)return this._skipPushAndWrite(t,e,i),void this._pushNamespaceExplicit(e,n);if("xml"===t&&("space"===e||"lang"===e))return void this._skipPushAndWrite(t,e,i)}0===i.length&&(t="")}null!=t&&0!==t.length&&this._pushNamespaceImplicit(t,i),this._skipPushAndWrite(t,e,i)},t.prototype._writeEndAttribute=function(){this._currentState="StartElement",this._bufferText+='"'},t.prototype._writeStartElementInternal=function(t,e,i){this._bufferText+="<",t.length>0&&(this._rawText(t),this._bufferText+=":"),this._rawText(e);var n=this._elementStack.length;this._elementStack.push(new wr),this._elementStack[Number.parseInt(n.toString(),10)]._set(t,e,i,this._namespaceStack.length-1),this._pushNamespaceImplicit(t,i);for(var r=0;r<this._attributeStack.length;r++)this._attributeStack[Number.parseInt(r.toString(),10)]._destroy();this._attributeStack=[]},t.prototype._writeEndElementInternal=function(t,e){this._position!==this._bufferText.length+1?(this._bufferText+="</",null!=t&&0!==t.length&&(this._rawText(t),this._bufferText+=":"),this._rawText(e),this._bufferText+=">"):(this._bufferText=this._bufferText.substring(0,this._bufferText.length-1),this._bufferText+=" />")},t.prototype._writeStartAttributeInternal=function(t,e){this._bufferText+=" ",null!=t&&t.length>0&&(this._rawText(t),this._bufferText+=":"),this._rawText(e),this._bufferText+='="'},t.prototype._writeNamespaceDeclaration=function(t,e){this._skipNamespace||(this._writeStartNamespaceDeclaration(t),this._writeStringInternal(e,!0),this._bufferText+='"')},t.prototype._writeStartNamespaceDeclaration=function(t){null==t||0===t.length?this._rawText(' xmlns="'):(this._rawText(" xmlns:"),this._rawText(t),this._bufferText+="=",this._bufferText+='"')},t.prototype._writeStringInternal=function(t,e){null==t&&(t=""),t=(t=(t=t.replace(/\&/g,"&amp;")).replace(/\</g,"&lt;")).replace(/\>/g,"&gt;"),e&&(t=t.replace(/\"/g,"&quot;")),this._bufferText+=t,e||(this._position=0)},t.prototype._startElementContent=function(){for(var t=this._elementStack[this._elementStack.length-1]._previousTop,e=this._namespaceStack.length-1;e>t;e--)"NeedToWrite"===this._namespaceStack[Number.parseInt(e.toString(),10)]._kind&&this._writeNamespaceDeclaration(this._namespaceStack[Number.parseInt(e.toString(),10)]._prefix,this._namespaceStack[Number.parseInt(e.toString(),10)]._namespaceUri);this._bufferText+=">",this._position=this._bufferText.length+1},t.prototype._rawText=function(t){this._bufferText+=t},t.prototype._addNamespace=function(t,e,i){var n=this._namespaceStack.length;this._namespaceStack.push(new vr),this._namespaceStack[Number.parseInt(n.toString(),10)]._set(t,e,i)},t.prototype._lookupPrefix=function(t){for(var e=this._namespaceStack.length-1;e>=0;e--)if(this._namespaceStack[Number.parseInt(e.toString(),10)]._namespaceUri===t)return this._namespaceStack[Number.parseInt(e.toString(),10)]._prefix},t.prototype._lookupNamespace=function(t){for(var e=this._namespaceStack.length-1;e>=0;e--)if(this._namespaceStack[Number.parseInt(e.toString(),10)]._prefix===t)return this._namespaceStack[Number.parseInt(e.toString(),10)]._namespaceUri},t.prototype._lookupNamespaceIndex=function(t){for(var e=this._namespaceStack.length-1;e>=0;e--)if(this._namespaceStack[Number.parseInt(e.toString(),10)]._prefix===t)return e;return-1},t.prototype._pushNamespaceImplicit=function(t,e){var i,n=this._lookupNamespaceIndex(t),r=!0;if(-1!==n)if(n>this._elementStack[this._elementStack.length-1]._previousTop){if(this._namespaceStack[Number.parseInt(n.toString(),10)]._namespaceUri!==e)throw new Error("XmlException namespace Uri needs to be the same as the one that is already declared");r=!1}else if("Special"===this._namespaceStack[Number.parseInt(n.toString(),10)]._kind){if("xml"!==t)throw new Error('InvalidArgumentException: Prefix "xmlns" is reserved for use by XML.');if(e!==this._namespaceStack[Number.parseInt(n.toString(),10)]._namespaceUri)throw new Error("InvalidArgumentException: Xml String");i="Implied"}else i=this._namespaceStack[Number.parseInt(n.toString(),10)]._namespaceUri===e?"Implied":"NeedToWrite";else{if("http://www.w3.org/XML/1998/namespace"===e&&"xml"!==t||"http://www.w3.org/2000/xmlns/"===e&&"xmlns"!==t)throw new Error("InvalidArgumentException");i="NeedToWrite"}r&&this._addNamespace(t,e,i)},t.prototype._pushNamespaceExplicit=function(t,e){var i=this._lookupNamespaceIndex(t);-1!==i&&i>this._elementStack[this._elementStack.length-1]._previousTop?this._namespaceStack[Number.parseInt(i.toString(),10)]._kind="Written":this._addNamespace(t,e,"Written")},t.prototype._addAttribute=function(t,e,i){var n=this._attributeStack.length;this._attributeStack.push(new Sr),this._attributeStack[Number.parseInt(n.toString(),10)]._set(t,e,i);for(var r=0;r<n;r++)if(this._attributeStack[Number.parseInt(r.toString(),10)]._isDuplicate(t,e,i))throw new Error("XmlException: duplicate attribute name")},t.prototype._skipPushAndWrite=function(t,e,i){this._addAttribute(t,e,i),this._writeStartAttributeInternal(t,e)},t.prototype._checkName=function(t){if(/[ !@#$%^&*()+\=\[\]{};':"\\|,<>\/?]/.test(t))throw new Error("InvalidArgumentException: invalid name character")},t}(),vr=function(){function t(){}return t.prototype._set=function(t,e,i){this._prefix=t,this._namespaceUri=e,this._kind=i},t.prototype._destroy=function(){this._prefix=void 0,this._namespaceUri=void 0,this._kind=void 0},t}(),wr=function(){function t(){}return t.prototype._set=function(t,e,i,n){this._previousTop=n,this._prefix=t,this._namespaceUri=i,this._localName=e},t.prototype._destroy=function(){this._previousTop=void 0,this._prefix=void 0,this._localName=void 0,this._namespaceUri=void 0},t}(),Sr=function(){function t(){}return t.prototype._set=function(t,e,i){this._prefix=t,this._namespaceUri=i,this._localName=e},t.prototype._isDuplicate=function(t,e,i){return this._localName===e&&(this._prefix===t||this._namespaceUri===i)},t.prototype._destroy=function(){this._prefix=void 0,this._namespaceUri=void 0,this._localName=void 0},t}(),Pr=(xn=function(t,e){return(xn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}xn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Ar=function(){function t(){this._asPerSpecification=!1,this._fileName="",this._formKey="",this._exportEmptyFields=!1,this._groupReferences=new Map,this._groupHolders=[],this._richTextPrefix='<?xml version="1.0"?>',this._table=new Map,this._fields=new Map,this._richTextValues=new Map,this._jsonData=[],this._openingBrace=123,this._openingBracket=91,this._closingBrace=125,this._closingBracket=93,this._colon=58,this._doubleQuotes=34,this._comma=44,this._space=32,this.fdfString=""}return t.prototype._exportFormFieldsData=function(t){var e="";if(null!=t&&t.export){var i=ci(t._dictionary,"FT",!1,!0,"Parent");if(i&&null!==i.name&&void 0!==i.name){var n=this._getEncodedFontDictionary(t._dictionary),r=t.name;null!=n&&(r=this._getEncodedValue(r,n));var a=void 0,s=void 0;switch(i.name){case"Tx":null!=(e=ci(t._dictionary,"V",!1,!0,"Parent"))?(e=this._getEncodedValue(e,n),this._table.set(r,e)):this._exportEmptyFields&&(e="",this._table.set(r,e));break;case"Ch":null!=(a=ci(t._dictionary,"V",!1,!0,"Parent"))&&(s=this._getExportValue(a)),!a&&t._dictionary.has("I")&&(t instanceof qt||t instanceof Gt)&&(s=t._obtainSelectedValue()[0]),null!=s&&""!==s?(e=s=this._getEncodedValue(s,n),this._table.set(r,e)):this._exportEmptyFields&&(e="",this._table.set(r,e));break;case"Btn":if(null!=(a=ci(t._dictionary,"V",!1,!0,"Parent"))){var o=this._getExportValue(a,t);if(null!=o&&""!==o){var h=void 0;if(t instanceof Ht&&(h=t),!t._dictionary.has("Opt")||null!=h&&-1===h.selectedIndex)e=o=this._getEncodedValue(o,n),this._table.set(r,e);else if(t._dictionary.has("Opt")){var c=t._dictionary.getArray("Opt"),_=Number.parseInt(o,10);if((null==_||Number.isNaN(_))&&(_=0),null!=c){var d=void 0;null!=(d=h?c[h.selectedIndex]:c[Number.parseInt(_.toString(),10)])&&(o=d),null!=o&&""!==o&&(e=o=this._getEncodedValue(o,n),this._table.set(r,e))}}}else(t instanceof Ht||t instanceof Wt)&&(e=this._exportEmptyFields?o:"Off",this._table.set(r,e))}else if(t instanceof Ht)(e=t._getAppearanceStateValue())||(e=this._exportEmptyFields?"":"Off"),this._table.set(r,e);else{var l=t.itemAt(t._defaultIndex),p=void 0;(p=l?l._dictionary:t._dictionary)&&p.has("AS")?(e=p.get("AS").name,this._table.set(r,e)):this._exportEmptyFields&&(e="",this._table.set(r,e))}}}}return e},t.prototype._exportFormFieldData=function(t){var e=ci(t._dictionary,"FT",!1,!0,"Parent");if(e&&null!==e.name&&void 0!==e.name){var i=this._getEncodedFontDictionary(t._dictionary),n=t.name;null!=i&&(n=this._getEncodedValue(n,i));var r=void 0,a=void 0;switch(e.name){case"Tx":if(r=ci(t._dictionary,"V",!1,!0,"Parent"),this._asPerSpecification){if(t._dictionary.has("RV"))null!=(r=ci(t._dictionary,"RV",!1,!0,"Parent"))&&(r+=this._key,this._formKey=this._key,this._table.set(n,r));else if(null!=r){var s=r=this._getEncodedValue(r,i);t instanceof Vt&&t.multiLine&&(r=s=(s=s.replace("\n","")).replace("\r","\r\n")),this._table.set(n,r)}}else null!=r?(r=this._getEncodedValue(r,i),this._table.set(n,r)):this._exportEmptyFields&&this._table.set(n,"");break;case"Ch":if(this._asPerSpecification){var o="";a=ci(t._dictionary,"V",!1,!0,"Parent"),t instanceof qt?Array.isArray(a)?this._table.set(n,a):"string"==typeof a?(a=this._getEncodedValue(a,i),this._table.set(n,a)):null==a&&t._dictionary.has("I")&&(o=t._obtainSelectedValue()[0],o=this._getEncodedValue(o,i),this._table.set(n,o)):t instanceof Gt&&(a instanceof hn?this._table.set(n,a.name):"string"==typeof a?(a=this._getEncodedValue(a,i),this._table.set(n,a)):null==a&&t._dictionary.has("I")&&(o=t._obtainSelectedValue()[0],o=this._getEncodedValue(o,i),this._table.set(n,o)))}else{o=void 0;null!=(a=ci(t._dictionary,"V",!1,!0,"Parent"))&&(o=this._getExportValue(a)),!a&&t._dictionary.has("I")&&(t instanceof qt||t instanceof Gt)&&(o=t._obtainSelectedValue()[0]),null!=o&&""!==o?(o=this._getEncodedValue(o,i),this._table.set(n,o)):this._exportEmptyFields&&this._table.set(n,"")}break;case"Btn":if(null!=(a=ci(t._dictionary,"V",!1,!0,"Parent")))if(null!=(l=this._getExportValue(a,t))&&""!==l){this._asPerSpecification&&"XML"!==this._format&&(l=ai(l));var h=void 0;if(t instanceof Ht&&(h=t),!t._dictionary.has("Opt")||null!=h&&-1===h.selectedIndex)l=this._getEncodedValue(l,i),this._table.set(n,l);else if(t._dictionary.has("Opt")){var c=t._dictionary.getArray("Opt"),_=Number.parseInt(l,10);if((null==_||Number.isNaN(_))&&(_=0),null!=c){var d=void 0;null!=(d=h?c[h.selectedIndex]:c[Number.parseInt(_.toString(),10)])&&(l=d),null!=l&&""!==l&&(l=this._getEncodedValue(l,i),this._table.set(n,l))}}}else(t instanceof Ht||t instanceof Wt)&&(this._exportEmptyFields?this._table.set(n,l):this._table.set(n,"Off"));else if(t instanceof Ht){var l;(l=t._getAppearanceStateValue())||(l=this._exportEmptyFields?"":"Off"),this._table.set(n,l)}else{var p=t.itemAt(t._defaultIndex),f=void 0;(f=p?p._dictionary:t._dictionary)&&f.has("AS")?this._table.set(n,f.get("AS").name):this._exportEmptyFields&&this._table.set(n,"")}}}},t.prototype._getAnnotationType=function(t){var e="";if(t.has("Subtype")){var i=t.get("Subtype");i&&(e=i.name)}return e},t.prototype._getValue=function(t,e){void 0===e&&(e=!1);var i="";if(null!=t)if(t instanceof hn)i=t.name;else if("boolean"==typeof t)i=t?e?"true":"yes":e?"false":"no";else if("string"==typeof t)i=this._getValidString(t);else if(Array.isArray(t)){var n=t;n.length>0&&(i=this._getValue(n[0],e));for(var r=1;r<n.length;r++)i+=","+this._getValue(n[Number.parseInt(r.toString(),10)],e)}else"number"==typeof t&&(i=t.toString());return i},t.prototype._getColor=function(t){var e="";if(t&&Array.isArray(t)&&t.length>=3){var i=Math.round(255*t[0]).toString(16).toUpperCase(),n=Math.round(255*t[1]).toString(16).toUpperCase(),r=Math.round(255*t[2]).toString(16).toUpperCase();e="#"+(1===i.length?"0"+i:i)+(1===n.length?"0"+n:n)+(1===r.length?"0"+r:r)}return e},t.prototype._getValidString=function(t){return-1!==t.indexOf("\n")&&(t=t.replace(/\n/g,"\\n")),-1!==t.indexOf("\r")&&(t=t.replace(/\r/g,"\\r")),t},t.prototype._getEncodedFontDictionary=function(t){var e,i;if(t.has("Kids")&&!t.has("AP")&&(i=t.getArray("Kids")),t.has("AP")||null!=i&&Array.isArray(i)){var n=void 0;if(null!=i&&i.length>0){var r=i[0];null!=r&&r.has("AP")&&(n=r.get("AP"))}else n=t.get("AP");if(null!=n&&n.has("N")){var a=n.get("N");if(null!=a&&a instanceof In&&a.dictionary.has("Resources")){var s=a.dictionary.get("Resources");null!=s&&s.has("Font")&&(e=s.get("Font"))}}}return e},t.prototype._getEncodedValue=function(t,e){var i,n=this,r=t;if(null!==this._encodeDictionary&&void 0!==this._encodeDictionary)return i=new kr(this._encodeDictionary),this._replaceNotUsedCharacters(r,i);var a=this._document.form._dictionary;if(null!=a&&a.has("DR")){var s=a.get("DR");if(null!=s&&s.has("Encoding")){var o=s.get("Encoding");if(null!=o&&o.has("PDFDocEncoding")){var h=o.get("PDFDocEncoding");if(null!=h&&h.has("Differences")){var c=new fn(this._crossReference);c.set("Differences",h.get("Differences"));var _=this._crossReference._getNextReference();this._crossReference._cacheMap.set(_,c);var d=new fn(this._crossReference);if(d.set("Subtype",hn.get("Type1")),d.set("Encoding",_),null!=(i=new kr(d))&&null!==i.differencesDictionary&&void 0!==i.differencesDictionary&&i.differencesDictionary.size>0)return this._encodeDictionary=d,this._replaceNotUsedCharacters(r,i)}}}}if(null!=t&&null!=e&&e.size>0){var l,p=!1;if(e.forEach((function(t,e){if(!p&&null!=e){var a=void 0;if(e instanceof fn)a=e;else if(e instanceof _n){var s=n._crossReference._fetch(e);null!=s&&s instanceof fn&&(a=s)}a&&(i=new kr(a),l=n._replaceNotUsedCharacters(r,i),p=!0)}})),!p)return l}return r},t.prototype._replaceNotUsedCharacters=function(t,e){for(var i="",n=e.differencesDictionary,r=0;r<t.length;r++){var a=t[Number.parseInt(r.toString(),10)],s=t.charCodeAt(r);if(n.has(a)){var o=n.get(a);o.length>1&&"Type3"!==e._fontType||s>127&&s<=255&&"Type1"===e._fontType&&"WinAnsiEncoding"!==e._baseFontEncoding&&"Encoding"===e._fontEncoding&&"ZapfDingbats"===e._fontName?i+=a:i+=o}else i+=a}return i},t.prototype._getExportValue=function(t,e){var i;if(null!=t)if(null!=e){if(t instanceof hn?i=t.name:"string"==typeof t&&(i=t),null!=i&&""!==i&&e instanceof Ht&&-1!==e.selectedIndex){var n=e.itemAt(e.selectedIndex);null!=n&&n.value===i&&(i=n.value)}}else if(t instanceof hn)i=t.name;else if("string"==typeof t)i=t;else if(Array.isArray(t))for(var r=void 0;r<t.length;r++){var a=t[Number.parseInt(r.toString(),10)];if(a instanceof hn)return a.name;if("string"==typeof a)return a}return i},t.prototype._addReferenceToGroup=function(t,e){var i=e.get("NM");i&&""!==i?(this._groupReferences.set(i,t),e.has("IRT")&&this._groupHolders.push(e)):!i&&e.has("IRT")&&(i=e.get("IRT"))&&""!==i&&this._groupReferences.has(i)&&e.update("IRT",this._groupReferences.get(i))},t.prototype._handlePopup=function(t,e,i,n){if(i.has("Popup")){var r=i.getRaw("Popup"),a=i.get("Popup");if(a instanceof fn){r&&a&&a.update("Parent",e);var s=t._parseAnnotation(a),o=t._annotations.length;t._annotations.push(e),n.set("Annots",t._annotations),n._updated=!0,t._parsedAnnotations.set(o,s)}}},t.prototype._importField=function(){var t=this,e=this._document.form,i=e.count;i&&this._fields.forEach((function(n,r){var a;t._richTextValues.size>0&&t._richTextValues.has(r)&&(a=t._richTextValues.get(r));var s=e._getFieldIndex(r);if(-1!==s&&s<i){var o=e.fieldAt(s);o&&null!=o&&(a&&""!==a&&o._dictionary.update("RV",a),t._importFieldData(o,n))}}))},t.prototype._importFieldData=function(t,e){if(null!=e&&e.length>0&&null!=t&&!t.readOnly){var i=e[0];if(t instanceof Vt)null!=i&&(t instanceof Vt&&t.multiLine&&(i=(i=i.replace("\r\n","\r")).replace("\n","\r")),t.text=i);else if(t instanceof qt||t instanceof Gt){var n;n=e.length>1?e:[i.split(",")[0]];var r=[],a=t._options;a&&a.length>0&&a.forEach((function(t){-1===n.indexOf(t[0])&&-1===n.indexOf(t[1])||r.push(a.indexOf(t))})),r.length>0&&(t.multiSelect?t.selectedIndex=r:t.selectedIndex=r[0],t instanceof Gt&&this._asPerSpecification&&t._dictionary.has("AP")&&(delete t._dictionary._map.AP,t._dictionary._updated=!0))}else if(t instanceof Wt){var s=i.toLowerCase();this._containsExportValue(i,t)||"on"===s||"yes"===s?t.checked=!0:t.checked=!1}else if(t instanceof Ht){for(var o=-1,h=0;h<t._kidsCount;h++){var c=t.itemAt(h);if(c&&c.value&&c.value===i){o=h;break}}-1!==o&&t.selectedIndex!==o&&(t.selectedIndex=o)}}},t.prototype._containsExportValue=function(t,e){var i=!1;if(e._kidsCount>0)for(var n=0;n<e._kidsCount;n++){var r=e.itemAt(n);if(r&&this._checkSelected(r._dictionary,t))return!0}else if(!(i=this._checkSelected(e._dictionary,t))&&this._asPerSpecification&&e._dictionary.has("AS")){var a=e._dictionary.get("AS");if(!a||"Off"!==a.name&&"No"!==a.name)i=!0;else if(e._dictionary.has("Opt")){var s=e._dictionary.getArray("Opt");s&&s.length>0&&s.forEach((function(e){e===t&&(i=!0)}))}}return i},t.prototype._checkSelected=function(t,e){if(t&&t.has("AP")){var i=t.get("AP");if(i&&i instanceof fn&&i.has("N")){var n=i.get("N");if(n&&n instanceof fn&&n.has(e)&&"off"!==e.toLocaleLowerCase()&&"no"!==e.toLocaleLowerCase())return!0}}return!1},t.prototype._dispose=function(){this.exportAppearance=void 0,this._asPerSpecification=void 0,this._skipBorderStyle=void 0,this._fileName=void 0,this._document=void 0,this._crossReference=void 0,this._isAnnotationExport=void 0,this._isAnnotationImport=void 0,this._key=void 0,this._formKey=void 0,this._exportEmptyFields=void 0,this._groupReferences=void 0,this._groupHolders=void 0,this._encodeDictionary=void 0,this._annotationTypes=void 0,this._annotationAttributes=void 0,this._xmlDocument=void 0,this._parser=void 0,this._table=void 0,this._fields=void 0,this._richTextValues=void 0,this._jsonData=void 0},t}(),xr=function(e){function i(t){var i=e.call(this)||this;return null!=t&&(i._fileName=t),i}return Pr(i,e),i.prototype._exportAnnotations=function(t){return this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!0,this._save()},i.prototype._exportFormFields=function(t){return this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!1,this._key=Ti(),this._save()},i.prototype._save=function(){var t=new mr;if(t._writeStartDocument(),t._writeStartElement("xfdf"),t._writeAttributeString(null,"http://ns.adobe.com/xfdf/","xmlns",null),t._writeAttributeString("space","preserve","xml",null),this._isAnnotationExport){if(t._writeStartElement("annots"),this._document)for(var e=0;e<this._document.pageCount;e++)for(var i=this._document.getPage(e).annotations,n=0;n<i.count;n++){var r=i.at(n);r&&(!this._annotationTypes||0===this._annotationTypes.length||this._annotationTypes&&this._annotationTypes.length>0&&this._checkAnnotationType(r))&&this._exportAnnotationData(r,t,e)}t._writeEndElement()}else{var a=this._document.form;if(null!=a){this._exportEmptyFields=a.exportEmptyFields;var s=this._document.form.count;for(e=0;e<s;e++){var o=this._document.form.fieldAt(e);null!=o&&o.export&&this._exportFormFieldData(o)}this._writeFormFieldData(t,this._asPerSpecification)}}this._asPerSpecification||(t._writeStartElement("f"),t._writeAttributeString("href",this._fileName));var h=t._save();return t._destroy(),h},i.prototype._writeFormFieldData=function(t,e){var i=this;if(void 0===e&&(e=!1),e){t._writeStartElement("f"),t._writeAttributeString("href",this._fileName),t._writeEndElement();var n=this._getElements(this._table);if(n&&n.size>0){t._writeStartElement("fields");var r=!1;n.forEach((function(e,n){if(t._writeStartElement("field"),t._writeAttributeString("name",n.toString()),Array.isArray(e)&&e.forEach((function(e){t._writeStartElement("value"),t._writeString(e.toString()),t._writeEndElement(),r=!0})),e instanceof Map)i._writeFieldName(e,t);else if(!r&&!e.toString().endsWith(i._formKey)||!r&&""===i._formKey)t._writeStartElement("value"),t._writeString(e.toString()),t._writeEndElement();else if(""!==i._formKey&&e.toString().endsWith(i._formKey)){t._writeStartElement("value-richtext");var a=e.toString();a.startsWith('<?xml version="1.0"?>')&&(a=a.substring(21));var s=a.length-i._formKey.length;a=a.substring(0,s)+a.substring(s+i._formKey.length),t._writeRaw(a),t._writeEndElement()}t._writeEndElement(),r=!1})),t._writeEndElement()}t._writeStartElement("ids");var a=!1;if(this._crossReference._root.has("ID")){var s=this._crossReference._root.getArray("ID");s&&s.length>=1&&(t._writeAttributeString("original",s[0]),t._writeAttributeString("modified",s[1]),a=!0)}a||(t._writeAttributeString("original",""),t._writeAttributeString("modified","")),t._writeEndElement()}else t._writeStartElement("fields"),this._table.forEach((function(e,i){t._writeStartElement("field"),t._writeAttributeString("name",i.toString()),Array.isArray(e)?e.forEach((function(e){t._writeStartElement("value"),t._writeString(e.toString()),t._writeEndElement()})):(t._writeStartElement("value"),t._writeString(e.toString()),t._writeEndElement()),t._writeEndElement()})),t._writeEndElement()},i.prototype._writeFieldName=function(t,e){var i=this;t.forEach((function(t,n){if(t instanceof Map)e._writeStartElement("field"),e._writeAttributeString("name",n.toString()),i._writeFieldName(t,e),e._writeEndElement();else{if(e._writeStartElement("field"),e._writeAttributeString("name",n.toString()),Array.isArray(t))t.forEach((function(t){e._writeStartElement("value"),e._writeString(t.toString()),e._writeEndElement()}));else{if(t.toString().endsWith(i._formKey)&&""!==i._formKey){e._writeStartElement("value-richtext");var r=t.toString();r.startsWith('<?xml version="1.0"?>')&&(r=r.substring(21));var a=r.length-i._formKey.length;r=r.substring(0,a)+r.substring(a+i._formKey.length),e._writeRaw(r)}else e._writeStartElement("value"),e._writeString(t.toString());e._writeEndElement()}e._writeEndElement()}}))},i.prototype._getElements=function(t){var e=this,i=new Map;return t.forEach((function(t,n){var r=i;if(-1!==n.toString().indexOf("."))for(var a=n.toString().split("."),s=0;s<a.length;s++){var o=a[Number.parseInt(s.toString(),10)];if(r.has(o))e._getElements(r[o]),r=r[o];else if(s===a.length-1)r.set(o,t);else{var h=new Map;r.set(o,h),r=h}}else r.set(n,t)})),i},i.prototype._checkAnnotationType=function(t){return void 0!==t._type&&-1!==this._annotationTypes.indexOf(t._type)},i.prototype._exportAnnotationData=function(t,e,i){t._dictionary&&!(t instanceof ce||t instanceof le||t instanceof de||t instanceof _e)&&this._writeAnnotationData(e,i,t)},i.prototype._writeAnnotationData=function(t,e,i){var n,r,a=!1;i instanceof Yt?(n=i,r=i._dictionary):r=i;var s=this._getAnnotationType(r);if(this._skipBorderStyle=!1,s&&""!==s){this._annotationAttributes||(this._annotationAttributes=[]),t._writeStartElement(s.toLowerCase()),t._writeAttributeString("page",e.toString());var o=void 0;switch(s){case"Line":o=n.linePoints,t._writeAttributeString("start",o[0].toString()+","+o[1].toString()),t._writeAttributeString("end",o[2].toString()+","+o[3].toString());break;case"Stamp":case"Square":a=!0}if(r&&r.has("BE")&&r.has("BS")){var h=r.get("BE");h&&h.has("S")&&(this._skipBorderStyle=!0)}this._writeDictionary(r,e,t,a),t._writeEndElement(),this._annotationAttributes=[]}},i.prototype._writeDictionary=function(t,e,i,n){var r=this,a=!1;if(t.has("Type")){var s=t.get("Type");a=s&&"Border"===s.name&&this._skipBorderStyle}if(t.forEach((function(s,o){if((n||"AP"!==s)&&"P"!==s&&"Parent"!==s){var h=void 0;if(o instanceof _n&&(h=t.get(s)),h&&h instanceof fn)switch(s){case"BS":case"BE":r._writeDictionary(h,e,i,!1);break;case"IRT":h.has("NM")&&i._writeAttributeString("inreplyto",r._getValue(h.get("NM")))}else o instanceof fn?r._writeDictionary(o,e,i,!1):(!a||a&&"S"!==s)&&r._writeAttribute(i,s,o)}})),(this.exportAppearance||n)&&t.has("AP")){var o=this._getAppearanceString(t.get("AP"));o&&o.length>0&&(i._writeStartElement("appearance"),i._writeRaw(hi(o)),i._writeEndElement())}if(t.has("Measure")&&this._exportMeasureDictionary(t.get("Measure"),i),t.has("Sound")){var h=t.get("Sound");if(h&&h.dictionary){var c=h.dictionary;if(c.has("B")&&i._writeAttributeString("bits",this._getValue(c.get("B"))),c.has("C")&&i._writeAttributeString("channels",this._getValue(c.get("C"))),c.has("E")&&i._writeAttributeString("encoding",this._getValue(c.get("E"))),c.has("R")&&i._writeAttributeString("rate",this._getValue(c.get("R"))),c.has("Length")&&c.get("Length")>0)(p=ni(h.getBytes()))&&""!==p&&(i._writeStartElement("data"),i._writeAttributeString("MODE","raw"),i._writeAttributeString("encoding","hex"),c.has("Length")&&i._writeAttributeString("length",this._getValue(c.get("Length"))),c.has("Filter")&&i._writeAttributeString("filter",this._getValue(c.get("Filter"))),i._writeRaw(p),i._writeEndElement())}}else if(t.has("FS")){var _=t.get("FS");if(_&&(_.has("F")&&i._writeAttributeString("file",this._getValue(_.get("F"))),_.has("EF"))){var d=_.get("EF");if(d&&d.has("F")){var l=d.get("F");if(l&&l.dictionary){var p,f=l.dictionary;if(f.has("Params")){var u=f.get("Params");if(u){if(u.has("CreationDate")){var g=this._getValue(u.get("CreationDate"));i._writeAttributeString("creation",g)}if(u.has("ModificationDate")){var g=this._getValue(u.get("ModificationDate"));i._writeAttributeString("modification",g)}if(u.has("Size")&&i._writeAttributeString("size",this._getValue(u.get("Size"))),u.has("CheckSum")){var y=ni(Ye(g=this._getValue(u.get("CheckSum"))));i._writeAttributeString("checksum",y)}}}(p=ni(l.getBytes()))&&""!==p&&(i._writeStartElement("data"),i._writeAttributeString("MODE","raw"),i._writeAttributeString("encoding","hex"),f.has("Length")&&i._writeAttributeString("length",this._getValue(f.get("Length"))),f.has("Filter")&&i._writeAttributeString("filter",this._getValue(f.get("Filter"))),i._writeRaw(p),i._writeEndElement())}}}}if(t.has("Vertices")){i._writeStartElement("vertices");var b=t.getArray("Vertices");if(b&&b.length>0){var m=b.length;if(m%2==0){for(var g="",v=0;v<m-1;v++)g+=this._getValue(b[Number.parseInt(v.toString(),10)])+(v%2!=0?";":",");(g+=this._getValue(b[m-1]))&&""!==g&&i._writeRaw(g)}}i._writeEndElement()}if(t.has("Popup")){var w=t.get("Popup");w&&this._writeAnnotationData(i,e,w)}if(t.has("DA")){var S=t.get("DA");S&&this._writeRawData(i,"defaultappearance",S)}if(t.has("DS")){var P=t.get("DS");P&&this._writeRawData(i,"defaultstyle",P)}if(t.has("InkList")){var A=t.getArray("InkList");if(A&&A.length>0){i._writeStartElement("inklist");for(var x=0;x<A.length;x++)i._writeElementString("gesture",this._getValue(A[Number.parseInt(x.toString(),10)]));i._writeEndElement()}}if(t.has("RC")&&((g=t.get("RC"))&&""!==g)){var k=g.indexOf("<body");k>0&&(g=g.substring(k)),this._writeRawData(i,"contents-richtext",g)}t.has("Contents")&&((g=t.get("Contents"))&&g.length>0&&(i._writeStartElement("contents"),i._writeString(g),i._writeEndElement()))},i.prototype._getAppearanceString=function(t){var e=new mr(!0);e._writeStartElement("DICT"),e._writeAttributeString("KEY","AP"),this._writeAppearanceDictionary(e,t),e._writeEndElement();var i=e.buffer;return e._destroy(),i},i.prototype._writeAppearanceDictionary=function(t,e){var i=this;e&&e.size>0&&e.forEach((function(n,r){i._writeObject(t,r instanceof _n?e.get(n):r,e,n)}))},i.prototype._writeObject=function(t,e,i,n){if(e)if(e instanceof hn)this._writePrefix(t,"NAME",n),t._writeAttributeString("VAL",e.name),t._writeEndElement();else if(Array.isArray(e))this._writePrefix(t,"ARRAY",n),this._writeArray(t,i.getArray(n),i),t._writeEndElement();else if("string"==typeof e)this._writePrefix(t,"STRING",n),t._writeAttributeString("VAL",e),t._writeEndElement();else if("number"==typeof e)Number.isInteger(e)?(this._writePrefix(t,"INT",n),t._writeAttributeString("VAL",e.toString())):(this._writePrefix(t,"FIXED",n),t._writeAttributeString("VAL",e.toFixed(6))),t._writeEndElement();else if("boolean"==typeof e)this._writePrefix(t,"BOOL",n),t._writeAttributeString("VAL",e?"true":"false"),t._writeEndElement();else if(e instanceof fn)this._writePrefix(t,"DICT",n),this._writeAppearanceDictionary(t,e),t._writeEndElement();else if(null===e)this._writePrefix(t,"NULL",n),t._writeEndElement();else if(e instanceof In&&e.dictionary){var r=e.dictionary;this._writePrefix(t,"STREAM",n),t._writeAttributeString("DEFINE",""),this._writeAppearanceDictionary(t,r),t._writeStartElement("DATA");var a=r.get("Length");if(a>0&&r.has("Subtype")&&"Image"===this._getValue(r.get("Subtype"))||!r.has("Type")&&!r.has("Subtype"))t._writeAttributeString("MODE","RAW"),t._writeAttributeString("ENCODING","HEX"),(s=e.getString())&&""!==s&&t._writeRaw(s);else if(a>0){var s;t._writeAttributeString("MODE","FILTERED"),t._writeAttributeString("ENCODING","ASCII"),(s=e.getString())&&""!==s&&t._writeRaw(s)}t._writeEndElement(),t._writeEndElement()}else e instanceof _n&&this._crossReference&&this._writeObject(t,this._crossReference._fetch(e),i,n)},i.prototype._writePrefix=function(t,e,i){t._writeStartElement(e),i&&t._writeAttributeString("KEY",i)},i.prototype._writeArray=function(t,e,i){var n=this;e.forEach((function(e){n._writeObject(t,e,i)}))},i.prototype._getFormatedString=function(t,e){return void 0===e&&(e=!1),t=e?(t=(t=t.replace("&amp;","&")).replace("&lt;","<")).replace("&gt;",">"):(t=(t=t.replace("&","&amp;")).replace("<","&lt;")).replace(">","&gt;")},i.prototype._writeAttribute=function(t,e,i){if(this._annotationAttributes&&-1===this._annotationAttributes.indexOf(e))switch(e){case"C":this._writeColor(t,i,"color","c");break;case"IC":this._writeColor(t,i,"interior-color");break;case"M":this._writeAttributeString(t,"date",i);break;case"NM":this._writeAttributeString(t,"name",i);break;case"Name":this._writeAttributeString(t,"icon",i);break;case"Subj":this._writeAttributeString(t,"subject",i);break;case"T":this._writeAttributeString(t,"title",i);break;case"Rotate":this._writeAttributeString(t,"rotation",i);break;case"W":this._writeAttributeString(t,"width",i);break;case"LE":i&&Array.isArray(i)?2===i.length&&(t._writeAttributeString("head",this._getValue(i[0])),t._writeAttributeString("tail",this._getValue(i[1]))):i instanceof hn&&this._writeAttributeString(t,"head",i);break;case"S":if(-1===this._annotationAttributes.indexOf("style")){switch(this._getValue(i)){case"D":t._writeAttributeString("style","dash");break;case"C":t._writeAttributeString("style","cloudy");break;case"S":t._writeAttributeString("style","solid");break;case"B":t._writeAttributeString("style","bevelled");break;case"I":t._writeAttributeString("style","inset");break;case"U":t._writeAttributeString("style","underline")}this._annotationAttributes.push("style")}break;case"D":this._writeAttributeString(t,"dashes",i);break;case"I":this._writeAttributeString(t,"intensity",i);break;case"RD":this._writeAttributeString(t,"fringe",i);break;case"IT":this._writeAttributeString(t,"IT",i);break;case"RT":this._writeAttributeString(t,"replyType",i,!0);break;case"LL":this._writeAttributeString(t,"leaderLength",i);break;case"LLE":this._writeAttributeString(t,"leaderExtend",i);break;case"Cap":this._writeAttributeString(t,"caption",i);break;case"Q":this._writeAttributeString(t,"justification",i);break;case"CP":this._writeAttributeString(t,"caption-style",i);break;case"CL":this._writeAttributeString(t,"callout",i);break;case"QuadPoints":this._writeAttributeString(t,"coords",i);break;case"CA":this._writeAttributeString(t,"opacity",i);break;case"F":if("number"==typeof i&&-1===this._annotationAttributes.indexOf("flags")){var n=Xe(i);t._writeAttributeString("flags",n),this._annotationAttributes.push("flags")}break;case"InkList":case"Type":case"Subtype":case"P":case"Parent":case"L":case"Contents":case"RC":case"DA":case"DS":case"FS":case"MeasurementTypes":case"Vertices":case"GroupNesting":case"ITEx":break;default:this._writeAttributeString(t,e.toLowerCase(),i)}},i.prototype._writeAttributeString=function(t,e,i,n){if(void 0===n&&(n=!1),-1===this._annotationAttributes.indexOf(e)){var r=this._getValue(i);t._writeAttributeString(e,n?r.toLowerCase():r),this._annotationAttributes.push(e)}},i.prototype._writeRawData=function(t,e,i){i&&""!==i&&(t._writeStartElement(e),t._writeRaw(i),t._writeEndElement())},i.prototype._writeColor=function(t,e,i,n){var r=this._getColor(e);if("number"==typeof e&&n){var a=this._getValue(e);a&&""!==a&&-1===this._annotationAttributes.indexOf(n)&&(t._writeAttributeString(n,a),this._annotationAttributes.push(n))}r&&""!==r&&-1===this._annotationAttributes.indexOf(i)&&(t._writeAttributeString(i,r),this._annotationAttributes.push(i))},i.prototype._exportMeasureDictionary=function(t,e){if(e._writeStartElement("measure"),t){if(t.has("R")&&e._writeAttributeString("rateValue",this._getValue(t.get("R"))),t.has("A")){var i=t.getArray("A");e._writeStartElement("area"),this._exportMeasureFormatDetails(i[0],e),e._writeEndElement()}if(t.has("D")){i=t.getArray("D");e._writeStartElement("distance"),this._exportMeasureFormatDetails(i[0],e),e._writeEndElement()}if(t.has("X")){i=t.getArray("X");e._writeStartElement("xformat"),this._exportMeasureFormatDetails(i[0],e),e._writeEndElement()}}e._writeEndElement()},i.prototype._exportMeasureFormatDetails=function(t,e){t.has("C")&&e._writeAttributeString("c",this._getValue(t.get("C"))),t.has("F")&&e._writeAttributeString("f",this._getValue(t.get("F"))),t.has("D")&&e._writeAttributeString("d",this._getValue(t.get("D"))),t.has("RD")&&e._writeAttributeString("rd",this._getValue(t.get("RD"))),t.has("U")&&e._writeAttributeString("u",this._getValue(t.get("U"))),t.has("RT")&&e._writeAttributeString("rt",this._getValue(t.get("RT"))),t.has("SS")&&e._writeAttributeString("ss",this._getValue(t.get("SS"))),t.has("FD")&&e._writeAttributeString("fd",this._getValue(t.get("FD")))},i.prototype._importAnnotations=function(t,e){this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!1;var i=ii(e);this._xmlDocument=(new DOMParser).parseFromString(i,"text/xml"),this._isAnnotationImport=!0,this._readXmlData(this._xmlDocument.documentElement)},i.prototype._importFormData=function(t,e){this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!1,this._xmlDocument=(new DOMParser).parseFromString(ii(e),"text/xml"),this._readXmlData(this._xmlDocument.documentElement)},i.prototype._readXmlData=function(t){if(t&&1===t.nodeType)if(this._checkXfdf(t),this._isAnnotationImport){var e=t.getElementsByTagName("annots");if(e&&e.length>0)for(var i=0;i<e.length;i++){var n=e.item(i);if(n&&"annots"===n.localName&&n.hasChildNodes())for(var r=n.childNodes,a=0;a<r.length;a++){var s=r.item(a);if(s&&1===s.nodeType){var o=s;o&&1===o.nodeType&&this._parseAnnotationData(o)}}}if(this._groupHolders.length>0)for(i=0;i<this._groupHolders.length;i++){var h=this._groupHolders[Number.parseInt(i.toString(),10)],c=h.get("IRT");c&&""!==c&&(this._groupReferences.has(c)?h.update("IRT",this._groupReferences.get(c)):delete h._map.IRT)}this._groupHolders=[],this._groupReferences=new Map}else this._parseFormData(t);this._dispose()},i.prototype._checkXfdf=function(t){if("xfdf"!==t.nodeName)throw new Error("Invalid XFDF file.")},i.prototype._parseFormData=function(t){var e=t.getElementsByTagName("f");if(e&&e.length>0){var i=e.item(0);if(i&&"f"===i.localName&&i.hasAttribute("href")){var n=i.getAttribute("href");n&&""!==n&&(this._fileName=n)}}(e=t.getElementsByTagName("ids"))&&e.length>0&&(this._asPerSpecification=!0);var r=t.childNodes;if(r&&r.length>0)for(var a=0;a<r.length;a++){var s=r.item(a);if(s&&1===s.nodeType){var o=s;if(o&&"fields"===o.localName&&o.hasChildNodes()){for(var h=o.childNodes,c=[],_=0;_<h.length;_++){var d=h.item(_);if(d&&1===d.nodeType){var l=d;l&&"field"===l.localName&&c.push(l)}}this._importFormNodes(c)}}}this._importField()},i.prototype._importFormNodes=function(t){for(var e=function(e){var n=t[Number.parseInt(e.toString(),10)],r="";if(n&&(n.hasAttribute("name")&&(r=n.getAttribute("name")),r&&""!==r))if(n.hasChildNodes&&n.childNodes.length>1){var a=[];n.childNodes.forEach((function(t){if(1===t.nodeType){var e=t;"field"===e.localName&&a.push(e)}})),i._importFormNodes(a)}else{var s=n.getElementsByTagName("value");if(s&&s.length>0){for(var o=n,h="";"fields"!==o.localName;){h.length>0&&(h="."+h);var c=!1;if(o.hasAttribute("name")){var _=o.getAttribute("name");_&&""!==_&&(h=_+h,c=!0)}c||(h+=o.localName),o=o.parentElement}r=h;var d=void 0;d=i._fields.has(r)?i._fields.get(r):[];for(var l=0;l<s.length;l++)d.push(s.item(l).textContent);i._fields.set(r,d)}else if((s=n.getElementsByTagName("value-richtext"))&&s.length>0){var p=s.item(0);if(p){for(o=n,h="";"fields"!==o.localName;){h.length>0&&(h="."+h);c=!1;if(o.hasAttribute("name")){var f=o.getAttribute("name");f&&""!==f&&(h=f+h,c=!0)}c||(h+=o.localName),o=o.parentElement}r=h;var u=p.textContent;if(p.childNodes&&p.childNodes.length>0){var g=p.childNodes[0];if(g&&g.hasChildNodes()){u="";var y=g.childNodes;for(l=void 0;l<y.length;l++)u+=y.item(l).textContent+"\r";u=u.length>0?u.substring(0,u.length-1):p.textContent}}d=void 0;d=i._fields.has(r)?i._fields.get(r):[];for(l=0;l<s.length;l++)d.push(u);i._fields.set(r,d),i._richTextValues.has(r)||i._richTextValues.set(r,p.innerHTML)}}}},i=this,n=0;n<t.length;n++)e(n)},i.prototype._parseAnnotationData=function(t){if(t){var e=-1;if(t.hasAttributes&&t.hasAttribute("page")&&(e=Number.parseInt(t.getAttribute("page"),10))>=0&&e<this._document.pageCount){var i=this._document.getPage(e),n=this._getAnnotationDictionary(i,t);if(n&&n.size>0){var r=i._pageDictionary;if(r){var a=i.annotations,s=a._parseAnnotation(n);if(s){var o=this._crossReference._getNextReference();this._crossReference._cacheMap.set(o,n),(n.has("NM")||n.has("IRT"))&&this._addReferenceToGroup(o,n),s._ref=o;var h=a._annotations.length;a._annotations.push(o),r.set("Annots",a._annotations),r._updated=!0,a._parsedAnnotations.set(h,s),this._handlePopup(a,o,n,r)}}}}}},i.prototype._getAnnotationDictionary=function(t,e){var i=new fn(this._crossReference);i.update("Type",hn.get("Annot"));var n=!0;switch(e.localName.toLowerCase()){case"line":if(i.update("Subtype",hn.get("Line")),e.hasAttribute("start")&&e.hasAttribute("end")){var r=[];e.getAttribute("start").split(",").forEach((function(t){r.push(Number.parseFloat(t))})),e.getAttribute("end").split(",").forEach((function(t){r.push(Number.parseFloat(t))})),4===r.length&&i.update("L",r)}this._addLineEndStyle(i,e);break;case"circle":i.update("Subtype",hn.get("Circle"));break;case"square":i.update("Subtype",hn.get("Square"));break;case"polyline":i.update("Subtype",hn.get("PolyLine")),this._addLineEndStyle(i,e);break;case"polygon":i.update("Subtype",hn.get("Polygon")),this._addLineEndStyle(i,e);break;case"ink":i.update("Subtype",hn.get("Ink"));break;case"popup":i.update("Subtype",hn.get("Popup"));break;case"text":i.update("Subtype",hn.get("Text"));break;case"freetext":i.update("Subtype",hn.get("FreeText")),this._addLineEndStyle(i,e);break;case"stamp":i.update("Subtype",hn.get("Stamp"));break;case"highlight":i.update("Subtype",hn.get("Highlight"));break;case"squiggly":i.update("Subtype",hn.get("Squiggly"));break;case"underline":i.update("Subtype",hn.get("Underline"));break;case"strikeout":i.update("Subtype",hn.get("StrikeOut"));break;case"fileattachment":i.update("Subtype",hn.get("FileAttachment"));break;case"sound":i.update("Subtype",hn.get("Sound"));break;case"caret":i.update("Subtype",hn.get("Caret"));break;case"redact":i.update("Subtype",hn.get("Redact"));break;default:n=!1}return n&&this._addAnnotationData(i,e,t),i},i.prototype._addAnnotationData=function(t,e,i){this._addBorderStyle(t,e),this._applyAttributeValues(t,e.attributes),this._parseInnerElements(t,e,i),this._addMeasureDictionary(t,e)},i.prototype._addBorderStyle=function(t,e){var i=new fn(this._crossReference),n=new fn(this._crossReference);e.hasAttribute("width")&&n.update("W",Number.parseFloat(e.getAttribute("width")));var r=!0;if(e.hasAttribute("style")){var a="";switch(e.getAttribute("style")){case"dash":a="D";break;case"solid":a="S";break;case"bevelled":a="B";break;case"inset":a="I";break;case"underline":a="U";break;case"cloudy":a="C",r=!1}if(""!==a)if((r?n:i).update("S",hn.get(a)),!r&&e.hasAttribute("intensity"))i.update("I",Number.parseFloat(e.getAttribute("intensity")));else if(e.hasAttribute("dashes")){var s=[];e.getAttribute("dashes").split(",").forEach((function(t){s.push(Number.parseFloat(t))})),n.update("D",s)}}i.size>0&&t.update("BE",i),n.size>0&&(n.update("Type","Border"),t.update("BS",n))},i.prototype._applyAttributeValues=function(e,i){for(var n=0;n<i.length;n++){var r=i[Number.parseInt(n.toString(),10)],a=r.value,s=void 0,o=void 0;switch(r.name.toLowerCase()){case"page":case"start":case"end":case"width":case"head":case"tail":case"style":case"intensity":case"itex":break;case"state":this._addString(e,"State",a);break;case"statemodel":this._addString(e,"StateModel",a);break;case"replytype":"group"===a&&e.update("RT",hn.get("Group"));break;case"inreplyto":this._addString(e,"IRT",a);break;case"rect":(s=this._obtainPoints(a))&&4===s.length&&e.update("Rect",s);break;case"color":(s=ui(a))&&3===s.length&&e.update("C",[s[0]/255,s[1]/255,s[2]/255]);break;case"interior-color":(s=ui(a))&&3===s.length&&e.update("IC",[s[0]/255,s[1]/255,s[2]/255]);break;case"date":this._addString(e,"M",a);break;case"creationdate":this._addString(e,"CreationDate",a);break;case"name":this._addString(e,"NM",a);break;case"icon":a&&""!==a&&e.update("Name",hn.get(a));break;case"subject":this._addString(e,"Subj",this._getFormatedString(a,!0));break;case"title":this._addString(e,"T",this._getFormatedString(a,!0));break;case"rotation":this._addInt(e,"Rotate",a);break;case"justification":this._addInt(e,"Q",a);break;case"fringe":this._addFloatPoints(e,this._obtainPoints(a),"RD");break;case"it":a&&""!==a&&e.update("IT",hn.get(a));break;case"leaderlength":this._addFloat(e,"LL",a);break;case"leaderextend":void 0!==(o=Number.parseFloat(a))&&e.update("LLE",o);break;case"caption":a&&""!==a&&e.update("Cap","yes"===a.toLowerCase());break;case"caption-style":a&&""!==a&&e.update("CP",hn.get(a));break;case"callout":this._addFloatPoints(e,this._obtainPoints(a),"CL");break;case"coords":this._addFloatPoints(e,this._obtainPoints(a),"QuadPoints");break;case"border":this._addFloatPoints(e,this._obtainPoints(a),"Border");break;case"opacity":this._addFloat(e,"CA",a);break;case"flags":if(a&&""!==a){for(var h=t.PdfAnnotationFlag.default,c=a.split(","),_=0;_<c.length;_++){var d=Qe(c[Number.parseInt(_.toString(),10)]);0===_?h=d:h|=d}e.update("F",h)}break;case"open":a&&""!==a&&e.update("Open","true"===a||"yes"===a);break;case"calibrate":this._addString(e,"Calibrate",a);break;case"customdata":this._addString(e,"CustomData",a);break;case"overlaytext":e.update("OverlayText",a);break;case"repeat":e.update("Repeat","true"===a||"yes"===a)}}},i.prototype._obtainPoints=function(t){var e=[];return t.split(",").forEach((function(t){e.push(Number.parseFloat(t))})),e},i.prototype._parseInnerElements=function(t,e,i){if(e.hasChildNodes)for(var n=e.childNodes,r=function(r){var s=n[Number.parseInt(r.toString(),10)];if(1===s.nodeType){var o=s,h=s.textContent,c=o.innerHTML;switch(s.nodeName.toLowerCase()){case"popup":if(o&&o.hasAttributes){var _=a._getAnnotationDictionary(i,o);if(_.size>0){var d=a._crossReference._getNextReference();a._crossReference._cacheMap.set(d,_),t.update("Popup",d),_.has("NM")&&a._addReferenceToGroup(d,_)}}break;case"contents":h&&""!==h&&t.update("Contents",a._getFormatedString(h,!0));break;case"contents-richtext":c&&""!==c&&t.update("RC",a._richTextPrefix+c);break;case"defaultstyle":a._addString(t,"DS",h);break;case"defaultappearance":a._addString(t,"DA",h);break;case"vertices":if(h&&""!==h){var l=[];if(h.split(",").forEach((function(t){-1!==t.indexOf(";")?t.split(";").forEach((function(t){l.push(t)})):l.push(t)})),l.length>0){var p=[];l.forEach((function(t){p.push(Number.parseFloat(t))})),t.update("Vertices",p)}}break;case"appearance":a._addAppearanceData(s,t);break;case"inklist":if(s.hasChildNodes){for(var f=[],u=s.childNodes,g=function(t){var e=u[Number.parseInt(t.toString(),10)];if(e&&1===e.nodeType){var i=e;if("gesture"===i.nodeName.toLowerCase()&&i.textContent&&""!==i.textContent){var n=[];if(i.textContent.split(",").forEach((function(t){-1!==t.indexOf(";")?t.split(";").forEach((function(t){n.push(t)})):n.push(t)})),n.length>0){var r=[];n.forEach((function(t){r.push(Number.parseFloat(t))})),f.push(r)}}}},y=0;y<u.length;y++)g(y);t.update("InkList",f)}break;case"data":a._addStreamData(s,t,e)}}},a=this,s=0;s<n.length;s++)r(s)},i.prototype._addStreamData=function(t,e,i){if(t&&t.textContent&&""!==t.textContent){var n=ri(t.textContent,!0);if(n&&n.length>0&&e.has("Subtype")){var r=e.get("Subtype");r&&"FileAttachment"===r.name?this._addFileAttachment(e,i,n):r&&"Sound"===r.name&&this._addSound(e,i,n)}}},i.prototype._addSound=function(t,e,i){var n=new Cn(i);if(n.dictionary._crossReference=this._crossReference,n.dictionary.update("Type",hn.get("Sound")),e.hasAttribute("bits")&&this._addInt(n.dictionary,"B",e.getAttribute("bits")),e.hasAttribute("rate")&&this._addInt(n.dictionary,"R",e.getAttribute("rate")),e.hasAttribute("channels")&&this._addInt(n.dictionary,"C",e.getAttribute("channels")),e.hasAttribute("encoding")){var r=e.getAttribute("encoding");r&&""!==r&&n.dictionary.update("E",hn.get(r))}e.hasAttribute("filter")&&n.dictionary.update("Filter",hn.get("FlateDecode"));var a=this._crossReference._getNextReference();this._crossReference._cacheMap.set(a,n),t.update("Sound",a)},i.prototype._addFileAttachment=function(t,e,i){var n=new fn(this._crossReference);if(n.update("Type",hn.get("Filespec")),e.hasAttribute("file")){var r=e.getAttribute("file");this._addString(n,"F",r),this._addString(n,"UF",r)}var a=new Cn(i);a.dictionary._crossReference=this._crossReference;var s=new fn(this._crossReference);if(e.hasAttribute("size")){var o=Number.parseInt(e.getAttribute("size"),10);void 0!==o&&(s.update("Size",o),a.dictionary.update("DL",o))}e.hasAttribute("modification")&&this._addString(s,"ModDate",e.getAttribute("modification")),e.hasAttribute("creation")&&this._addString(s,"CreationDate",e.getAttribute("creation")),a.dictionary.update("Params",s),e.hasAttribute("mimetype")&&this._addString(a.dictionary,"Subtype",e.getAttribute("mimetype")),a.dictionary.update("Filter",hn.get("FlateDecode"));var h=new fn(this._crossReference),c=this._crossReference._getNextReference();this._crossReference._cacheMap.set(c,a),h.update("F",c),n.update("EF",h);var _=this._crossReference._getNextReference();this._crossReference._cacheMap.set(_,n),t.update("FS",_)},i.prototype._addAppearanceData=function(t,e){var i=t.textContent;if(i&&""!==i){var n=oi(i);if(n&&n.length>0){var r=(new DOMParser).parseFromString(ii(n),"text/xml");if(r&&r.hasChildNodes){var a=r.childNodes;if(a&&1===a.length){var s=a[0];if(s&&1===s.nodeType){var o=s;if("DICT"===o.nodeName.toLowerCase()&&o.hasAttribute("KEY")){var h=o.getAttribute("KEY");if(h&&"AP"===h&&o.hasChildNodes){var c=new fn(this._crossReference);a=o.childNodes;for(var _=0;_<a.length;_++)this._getAppearance(c,a[Number.parseInt(_.toString(),10)]);c.size>0&&e.update("AP",c)}}}}}}}},i.prototype._getAppearance=function(t,e){var i=t instanceof fn?t:t.dictionary;if(e&&1===e.nodeType){var n=e;if(n&&n.localName){var r=void 0,a=void 0;switch(n.localName){case"STREAM":if(r=this._getStream(n)){var s=this._crossReference._getNextReference();this._crossReference._cacheMap.set(s,r),this._addKey(s,i,n)}break;case"DICT":if(this._getDictionary(n)){s=this._crossReference._getNextReference();this._crossReference._cacheMap.set(s,r),this._addKey(s,i,n)}break;case"ARRAY":this._addKey(this._getArray(n),i,n);break;case"FIXED":this._addKey(this._getFixed(n),i,n);break;case"INT":this._addKey(this._getInt(n),i,n);break;case"STRING":this._addKey(this._getString(n),i,n);break;case"NAME":this._addKey(this._getName(n),i,n);break;case"BOOL":this._addKey(this._getBoolean(n),i,n);break;case"DATA":(a=this._getData(n))&&a.length>0&&t instanceof Cn&&(t._bytes=a)}}}},i.prototype._getStream=function(t){var e=new Cn([]);if(e.dictionary._crossReference=this._crossReference,t.hasChildNodes)for(var i=t.childNodes,n=0;n<i.length;n++){var r=i[Number.parseInt(n.toString(),10)];r&&1===r.nodeType&&this._getAppearance(e,r)}return e},i.prototype._getDictionary=function(t){var e=new fn(this._crossReference);if(t.hasChildNodes)for(var i=t.childNodes,n=0;n<i.length;n++){var r=i[Number.parseInt(n.toString(),10)];r&&1===r.nodeType&&this._getAppearance(e,r)}return e},i.prototype._getArray=function(t){var e=[];if(t.hasChildNodes)for(var i=t.childNodes,n=0;n<i.length;n++){var r=i[Number.parseInt(n.toString(),10)];r&&1===r.nodeType&&this._addArrayElements(e,r)}return e},i.prototype._getData=function(t){var e=[];if(t&&t.textContent&&""!==t.textContent&&t.hasAttribute("MODE")&&t.hasAttribute("ENCODING")){var i=t.getAttribute("MODE"),n=t.getAttribute("ENCODING");if(i&&n){var r=this._getFormatedString(t.textContent,!0);"FILTERED"===i&&"ASCII"===n?e=Ye(r,!0):"RAW"===i&&"HEX"===n&&(e=ri(r,!0))}}return e},i.prototype._addArrayElements=function(t,e){if(e&&1===e.nodeType){var i,n=e,r=void 0,a=void 0,s=void 0,o=void 0,h=void 0,c=void 0;switch(n.localName){case"STREAM":if(r=this._getStream(n)){var _=this._crossReference._getNextReference();r.reference=_,this._crossReference._cacheMap.set(_,r),t.push(_)}break;case"DICT":if(a=this._getDictionary(n)){_=this._crossReference._getNextReference();this._crossReference._cacheMap.set(_,a),t.push(_)}break;case"ARRAY":(s=this._getArray(n))&&t.push(s);break;case"FIXED":void 0===(o=this._getFixed(n))||isNaN(o)||t.push(o);break;case"INT":void 0===(h=this._getInt(n))||isNaN(h)||t.push(h);break;case"NAME":(i=this._getName(n))&&t.push(i);break;case"BOOL":null!=(c=this._getBoolean(n))&&t.push(c)}}},i.prototype._getFixed=function(t){var e;return t&&t.hasAttribute("VAL")&&(e=Number.parseFloat(t.getAttribute("VAL"))),e},i.prototype._getInt=function(t){var e;return t&&t.hasAttribute("VAL")&&(e=Number.parseInt(t.getAttribute("VAL"),10)),e},i.prototype._getString=function(t){var e;return t&&t.hasAttribute("VAL")&&(e=t.getAttribute("VAL")),e},i.prototype._getName=function(t){var e;return t&&t.hasAttribute("VAL")&&(e=hn.get(t.getAttribute("VAL"))),e},i.prototype._getBoolean=function(t){var e;return t&&t.hasAttribute("VAL")&&(e="true"===t.getAttribute("VAL")),e},i.prototype._addMeasureDictionary=function(t,e){var i,n,r,a;if(e.hasChildNodes)for(var s=e.childNodes,o=0;o<s.length;o++){if((g=s[Number.parseInt(o.toString(),10)])&&"measure"===g.localName){i=g;break}}var h=new fn(this._crossReference),c=new fn(this._crossReference),_=new fn(this._crossReference),d=new fn(this._crossReference),l=[],p=[],f=[];if(i){if(h.update("Type",hn.get("Measure")),i.hasAttribute("rateValue")){var u=i.getAttribute.rateValue;u&&""!==u&&h.update("R",u)}if(i.hasChildNodes)for(s=i.childNodes,o=0;o<s.length;o++){var g,y=s[Number.parseInt(o.toString(),10)];if(y&&1===y.nodeType)switch((g=y).nodeName.toLowerCase()){case"distance":r=g;break;case"area":n=g;break;case"xformat":a=g}}}if(a&&(this._addElements(a,d),f.push(d)),r&&(this._addElements(r,c),l.push(c)),n&&(this._addElements(n,_),p.push(_)),h.set("A",p),h.set("D",l),h.set("X",f),h.size>0&&h.has("Type")){var b=this._crossReference._getNextReference();this._crossReference._cacheMap.set(b,h),t.update("Measure",b)}},i.prototype._addElements=function(t,e){t.hasAttribute("d")&&this._addFloat(e,"D",t.getAttribute("d")),t.hasAttribute("c")&&this._addFloat(e,"C",t.getAttribute("c")),t.hasAttribute("rt")&&e.update("RT",t.getAttribute("rt")),t.hasAttribute("rd")&&e.update("RD",t.getAttribute("rt")),t.hasAttribute("ss")&&e.update("SS",t.getAttribute("ss")),t.hasAttribute("u")&&e.update("U",t.getAttribute("u")),t.hasAttribute("f")&&e.update("F",hn.get(t.getAttribute("f"))),t.hasAttribute("fd")&&e.update("FD","yes"===t.getAttribute("fd"))},i.prototype._addString=function(t,e,i){i&&""!==i&&t.update(e,i)},i.prototype._addInt=function(t,e,i){var n=Number.parseInt(i,10);void 0!==n&&t.update(e,n)},i.prototype._addFloat=function(t,e,i){var n=Number.parseFloat(i);void 0!==n&&t.update(e,n)},i.prototype._addFloatPoints=function(t,e,i){e&&e.length>0&&t.update(i,e)},i.prototype._addKey=function(t,e,i){null!=t&&i.hasAttribute("KEY")&&e.update(i.getAttribute("KEY"),t)},i.prototype._addLineEndStyle=function(t,e){var i="";e.hasAttribute("head")&&(i=e.getAttribute("head"));var n="";if(e.hasAttribute("tail")&&(n=e.getAttribute("tail")),i&&""!==i)if(n&&""!==n){var r=[];r.push(hn.get(i)),r.push(hn.get(n)),t.update("LE",r)}else t.update("LE",hn.get(i));else n&&""!==n&&t.update("LE",hn.get(n))},i}(Ar),kr=function(){function t(t){this._baseFontEncoding="",this._dictionary=t,this._fontType=this._dictionary.get("Subtype").name}return Object.defineProperty(t.prototype,"differencesDictionary",{get:function(){return this._differencesDictionary||(this._differencesDictionary=this._getDifferencesDictionary()),this._differencesDictionary},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseFontEncoding",{get:function(){return this._baseFontEncoding},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontEncoding",{get:function(){return this._fontEncoding||(this._fontEncoding=this._getFontEncoding()),this._fontEncoding},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontName",{get:function(){return this._fontName||(this._fontName=this._getFontName()),this._fontName},enumerable:!0,configurable:!0}),t.prototype._getFontEncoding=function(){var t="";if(null!==this._dictionary&&void 0!==this._dictionary&&this._dictionary.has("Encoding")){var e=this._dictionary.get("Encoding");if(e instanceof hn)t=e.name;else if(e instanceof fn){if(e.has("BaseEncoding")){var i=e.get("BaseEncoding");i&&i instanceof hn&&(this._baseFontEncoding=i.name)}if(e.has("Type")){var n=e.get("Type");null!=n&&(t=n.name)}}}return"identity#2dh"!==t.toString()&&"CMap"!==t||(t="Identity-H"),t},t.prototype._getDifferencesDictionary=function(){var t=new Map;if(null!==this._dictionary&&void 0!==this._dictionary&&this._dictionary.has("Encoding")){var e=this._dictionary.get("Encoding");if(null!=e&&e instanceof fn&&e.has("Differences")){var i=e.getArray("Differences"),n=0;if(null!=i)for(var r=0;r<i.length;r++){var a="",s=i[Number.parseInt(r.toString(),10)];"number"==typeof s?(a=s.toString(),n=Number.parseInt(a,10)):s instanceof hn&&(a=s.name,"Type1"===this._fontType&&".notdef"===a?(a=" ",t.set(n.toString(),Yi(a))):(a=Ji(a=Yi(a)),t.has(n.toString())||t.set(n.toString(),Yi(a)),n++))}}}return t},t.prototype._getFontName=function(){var t="";if(null!==this._dictionary&&void 0!==this._dictionary&&this._dictionary.has("BaseFont")){var e=this._dictionary.get("BaseFont"),i=e.name;if(-1!==i.indexOf("#20")&&-1===i.indexOf("+")){var n=i.lastIndexOf("#20");i=i.substring(0,n),i+="+"}-1!==(t=-1!==e.name.indexOf("+")?e.name.split("+")[1]:e.name).indexOf("-")?t=t.split("-")[0]:-1!==t.indexOf(",")&&(t=t.split(",")[0]),-1!==t.indexOf("MT")&&(t=t.replace("MT","")),-1!==t.indexOf("#20")&&(t=t.replace("#20"," ")),-1!==t.indexOf("#")&&(t=this._decodeHexFontName(t))}return t},t.prototype._decodeHexFontName=function(t){for(var e=t,i=0;i<t.length;i++)if("#"===t[Number.parseInt(i.toString(),10)]){var n=t[i+1]+t[i+2],r=Number.parseInt(n,16);if(0!==r&&(e=e.replace("#"+n,String.fromCharCode(r)),i+=2),-1===e.indexOf("#"))break}return e},t}(),Tr=(kn=function(t,e){return(kn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}kn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Rr=function(e){function i(t){var i=e.call(this)||this;return null!=t&&(i._fileName=t),i}return Tr(i,e),i.prototype._exportAnnotations=function(t){return this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!0,this._exportAnnotationData(t,t.pageCount),this._save()},i.prototype._exportFormFields=function(t){this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!1;var e=this._document.form;if(null!=e){this._exportEmptyFields=e.exportEmptyFields;for(var i=this._document.form.count,n=0;n<i;n++){var r=this._document.form.fieldAt(n);this._exportFormFieldsData(r)}this._writeFormFieldData()}return this._save()},i.prototype._save=function(){var t=new Uint8Array(this._jsonData);return this._jsonData=[],t},i.prototype._writeFormFieldData=function(){var t=this;this._jsonData.push(this._openingBrace);var e=0;this._table.forEach((function(i,n){n=t._getValidString(n),i=t._getValidString(i),t._jsonData.push(t._doubleQuotes);for(var r=0;r<n.length;r++)t._jsonData.push(n.charCodeAt(r));t._jsonData.push(t._doubleQuotes,t._colon,t._doubleQuotes);for(r=0;r<i.length;r++)t._jsonData.push(i.charCodeAt(r));t._jsonData.push(t._doubleQuotes),e<t._table.size-1&&t._jsonData.push(t._comma),e++})),this._jsonData.push(this._closingBrace)},i.prototype._exportAnnotationData=function(t,e){var i=!1;this._jsonData.push(this._openingBrace,this._doubleQuotes,112,100,102,65,110,110,111,116,97,116,105,111,110,this._doubleQuotes,this._colon,this._openingBrace);for(var n=0;n<e;n++){var r=t.getPage(n);r&&r.annotations.count>0&&(this._jsonData.push(0!==n&&i?this._comma:this._space),this._jsonData.push(this._doubleQuotes,n.toString().charCodeAt(0),this._doubleQuotes,this._colon,this._openingBrace,this._doubleQuotes,115,104,97,112,101,65,110,110,111,116,97,116,105,111,110,this._doubleQuotes,this._colon,this._openingBracket),i=!0);for(var a=0;a<r.annotations.count;a++){var s=r.annotations.at(a);s&&(this._exportAnnotation(s,n),this._jsonData=Ze(this._convertToJson(this._table),this._jsonData),a<r.annotations.count-1&&this._jsonData.push(this._comma),this._table.clear())}r&&r.annotations.count>0&&this._jsonData.push(this._closingBracket,this._closingBrace)}this._jsonData.push(this._closingBrace,this._closingBrace)},i.prototype._exportAnnotation=function(t,e){var i=!1,n=t._dictionary,r=this._getAnnotationType(t._dictionary);if(this._skipBorderStyle=!1,r&&""!==r){this._table.set("type",r),this._table.set("page",e.toString());var a=void 0;switch(r){case"Line":a=t.linePoints,this._table.set("start",a[0].toString()+","+a[1].toString()),this._table.set("end",a[2].toString()+","+a[3].toString());break;case"Stamp":case"Square":i=!0}if(n&&n.has("BE")&&n.has("BS")){var s=n.get("BE");s&&s.has("S")&&(this._skipBorderStyle=!0)}this._writeDictionary(n,e,i)}},i.prototype._writeDictionary=function(t,e,i){var n=this,r=!1;if(t.has("Type")){var a=t.get("Type");r=a&&"Border"===a.name&&this._skipBorderStyle}if(t.forEach((function(a,s){if((i||"AP"!==a)&&"P"!==a&&"Parent"!==a){var o=void 0;if(s instanceof _n&&(o=t.get(a)),o&&o instanceof fn)switch(a){case"BS":case"BE":n._writeDictionary(o,e,!1);break;case"IRT":o.has("NM")&&n._table.set("inreplyto",n._getValue(o.get("NM"),!0))}else s instanceof fn?n._writeDictionary(s,e,!1):(!r||r&&"S"!==a)&&n._writeAttribute(a,s,t)}})),t.has("Measure")&&this._exportMeasureDictionary(t.get("Measure")),(this.exportAppearance||i)&&t.has("AP")){var s=this._getAppearanceString(t.get("AP"));s&&s.length>0&&this._table.set("appearance",hi(s))}if(t.has("Sound")){var o=t.get("Sound");if(o&&o.dictionary){var h=o.dictionary;if(h.has("B")&&this._table.set("bits",this._getValue(h.get("B"),!0)),h.has("C")&&this._table.set("channels",this._getValue(h.get("C"),!0)),h.has("E")&&this._table.set("encoding",this._getValue(h.get("E"),!0)),h.has("R")&&this._table.set("rate",this._getValue(h.get("R"),!0)),h.has("Length")&&h.get("Length")>0)(l=ni(o.getBytes()))&&""!==l&&(this._table.set("MODE","raw"),this._table.set("encoding","hex"),h.has("Length")&&this._table.set("length",this._getValue(h.get("Length"),!0)),h.has("Filter")&&this._table.set("filter",this._getValue(h.get("Filter"),!0)),this._table.set("data",l))}}else if(t.has("FS")){var c=t.get("FS");if(c&&(c.has("F")&&this._table.set("file",this._getValue(c.get("F"),!0)),c.has("EF"))){var _=c.get("EF");if(_&&_.has("F")){var d=_.get("F");if(d&&d.dictionary){var l,p=d.dictionary;if(p.has("Params")){var f=p.get("Params");if(f){if(f.has("CreationDate")){var u=this._getValue(f.get("CreationDate"),!0);this._table.set("creation",u)}if(f.has("ModificationDate")){u=this._getValue(f.get("ModificationDate"),!0);this._table.set("modification",u)}if(f.has("Size")&&this._table.set("size",this._getValue(f.get("Size"),!0)),f.has("CheckSum")){var g=ni(Ye(u=this._getValue(f.get("CheckSum"),!0)));this._table.set("checksum",g)}}}(l=ni(d.getBytes()))&&""!==l&&(this._table.set("MODE","raw"),this._table.set("encoding","hex"),p.has("Length")&&this._table.set("length",this._getValue(p.get("Length"),!0)),p.has("Filter")&&this._table.set("filter",this._getValue(p.get("Filter"),!0)),this._table.set("data",l))}}}}},i.prototype._writeColor=function(t,e,i){var n=this._getColor(t);if("number"==typeof t&&i){var r=this._getValue(t,!0);r&&""!==r&&this._table.set(i,r)}n&&""!==n&&this._table.set(e,n)},i.prototype._writeAttributeString=function(t,e,i){void 0===i&&(i=!1);var n=this._getValue(e,!0);this._table.set(t,i?n.toLowerCase():n)},i.prototype._writeAttribute=function(t,e,i){var n;switch(t){case"C":this._writeColor(e,"color","c");break;case"IC":this._writeColor(e,"interior-color");break;case"DA":(n=i.get("DA"))&&this._table.set("defaultappearance",n);break;case"M":this._writeAttributeString("date",e);break;case"NM":this._table.set("name",e);break;case"Name":this._writeAttributeString("icon",e);break;case"Subj":this._writeAttributeString("subject",e);break;case"T":this._writeAttributeString("title",e);break;case"Rect":if(n=this._getValue(e,!0)){var r=n.split(","),a=new Map;a.set("x",r[0]),a.set("y",r[1]),a.set("width",r[2]),a.set("height",r[3]),this._table.set(t.toLowerCase(),this._convertToJson(a))}break;case"CreationDate":this._writeAttributeString("creationdate",e);break;case"Rotate":this._writeAttributeString("rotation",e);break;case"W":this._writeAttributeString("width",e);break;case"LE":e&&Array.isArray(e)?2===e.length&&(this._table.set("head",this._getValue(e[0],!0)),this._table.set("tail",this._getValue(e[1],!0))):e instanceof hn&&this._writeAttributeString("head",e);break;case"S":switch(this._getValue(e,!0)){case"D":this._table.set("style","dash");break;case"C":this._table.set("style","cloudy");break;case"S":this._table.set("style","solid");break;case"B":this._table.set("style","bevelled");break;case"I":this._table.set("style","inset");break;case"U":this._table.set("style","underline")}break;case"D":this._writeAttributeString("dashes",e);break;case"I":this._writeAttributeString("intensity",e);break;case"RD":this._writeAttributeString("fringe",e);break;case"IT":this._writeAttributeString("IT",e);break;case"RT":this._writeAttributeString("replyType",e,!0);break;case"LL":this._writeAttributeString("leaderLength",e);break;case"LLE":this._writeAttributeString("leaderExtend",e);break;case"Cap":this._writeAttributeString("caption",e);break;case"CP":this._writeAttributeString("caption-style",e);break;case"CL":this._writeAttributeString("callout",e);break;case"QuadPoints":this._writeAttributeString("coords",e);break;case"CA":this._writeAttributeString("opacity",e);break;case"F":if("number"==typeof e){var s=Xe(e);this._table.set("flags",s)}break;case"Contents":(n=i.get("Contents"))&&n.length>0&&this._table.set("contents",this._getValidString(n));break;case"InkList":this._writeInkList(i);break;case"Vertices":this._writeVertices(i);break;case"DS":if(n=i.get("DS")){for(var o=new Map,h=n.split(";"),c=0;c<h.length;c++){var _=h[Number.parseInt(c.toString(),10)].split(":");_&&_.length>0&&_[0]&&_[0].length>1&&_[0].startsWith(" ")&&(_[0]=_[0].substring(1)),o.set(_[0],_[1])}this._table.set("defaultStyle",this._convertToJson(o))}break;case"Type":case"Subtype":case"P":case"Parent":case"L":case"RC":case"FS":case"MeasurementTypes":case"GroupNesting":case"ITEx":break;case"Border":case"A":case"R":case"X":case"ca":this._writeAttributeString(t.toLowerCase(),e);break;default:this._writeAttributeString(t,e)}},i.prototype._writeVertices=function(t){var e=t.getArray("Vertices");if(e&&e.length>0){var i=e.length;if(i%2==0){for(var n="",r=0;r<i-1;r++)n+=this._getValue(e[Number.parseInt(r.toString(),10)],!0)+(r%2!=0?";":",");(n+=this._getValue(e[i-1],!0))&&""!==n&&this._table.set("vertices",n)}}},i.prototype._writeInkList=function(t){var e=t.getArray("InkList");if(e&&e.length>0){for(var i=new Map,n="[",r=0;r<e.length;r++)n+="["+this._getValue(e[Number.parseInt(r.toString(),10)],!0)+"]",r<e.length-1&&(n+=",");n+="]",i.set("gesture",n),this._table.set("inklist",this._convertToJson(i))}},i.prototype._exportMeasureDictionary=function(t){if(t){if(t.has("Type")&&this._table.set("type1","Measure"),t.has("R")&&this._table.set("ratevalue",this._getValue(t.get("R"),!0)),t.has("SubType")&&this._table.set("SubType",this._getValue(t.get("SubType"),!0)),t.has("TargetUnitConversion")&&this._table.set("TargetUnitConversion",this._getValue(t.get("TargetUnitConversion"),!0)),t.has("A")){var e=t.getArray("A");this._exportMeasureFormatDetails("area",e[0])}if(t.has("D")){e=t.getArray("D");this._exportMeasureFormatDetails("distance",e[0])}if(t.has("X")){e=t.getArray("X");this._exportMeasureFormatDetails("xformat",e[0])}if(t.has("T")){e=t.getArray("T");this._exportMeasureFormatDetails("tformat",e[0])}if(t.has("V")){e=t.getArray("V");this._exportMeasureFormatDetails("vformat",e[0])}}},i.prototype._exportMeasureFormatDetails=function(t,e){var i=new Map;e.has("C")&&i.set("c",this._getValue(e.get("C"),!0)),e.has("F")&&i.set("f",this._getValue(e.get("F"),!0)),e.has("D")&&i.set("d",this._getValue(e.get("D"),!0)),e.has("RD")&&i.set("rd",this._getValue(e.get("RD"),!0)),e.has("U")&&i.set("u",this._getValue(e.get("U"),!0)),e.has("RT")&&i.set("rt",this._getValue(e.get("RT"),!0)),e.has("SS")&&i.set("ss",this._getValue(e.get("SS"),!0)),e.has("FD")&&i.set("fd",this._getValue(e.get("FD"),!0)),this._table.set(t,this._convertToJson(i))},i.prototype._getAppearanceString=function(t){var e=new Map,i=new Map;return this._writeAppearanceDictionary(i,t),e.set("ap",this._convertToJson(i)),Ye(this._convertToJson(e))},i.prototype._writeAppearanceDictionary=function(t,e){var i=this;e&&e.size>0&&e.forEach((function(n,r){i._writeObject(t,r instanceof _n?e.get(n):r,e,n)}))},i.prototype._writeObject=function(t,e,i,n,r){if(e instanceof hn)this._writeTable("name",e.name,t,n,r);else if(Array.isArray(e)){var a=[];this._writeArray(a,e,i),this._writeTable("array",this._convertToJsonArray(a),t,n,a)}else if("string"==typeof e)this._writeTable("string",e,t,n,r);else if("number"==typeof e)this._writeTable(Number.isInteger(e)?"int":"fixed",e.toString(),t,n,r);else if("boolean"==typeof e)this._writeTable("boolean",e?"true":"false",t,n,r);else if(e instanceof fn){var s=new Map;this._writeAppearanceDictionary(s,e),this._writeTable("dict",this._convertToJson(s),t,n,r)}else if(e instanceof In&&e.dictionary){var o=new Map,h=new Map,c=e.dictionary;this._writeAppearanceDictionary(h,c);var _=c.get("Length"),d=void 0;if(c.has("Subtype")&&(d=this._getValue(c.get("Subtype"))),_>0){!c.has("Type")&&!c.has("Subtype")||c.has("Subtype")&&("Image"===d||"Form"===d||"CIDFontType0C"===d||"OpenType"===d)?(o.set("mode","raw"),o.set("encoding","hex")):(o.set("mode","filtered"),o.set("encoding","ascii"));var l=e.getString(!0);l&&""!==l&&o.set("bytes",l)}h.set("data",this._convertToJson(o)),this._writeTable("stream",this._convertToJson(h),t,n,r)}else e instanceof _n&&this._crossReference?this._writeObject(t,this._crossReference._fetch(e),i,n):null==e&&this._writeTable("null","null",t,n,r)},i.prototype._writeTable=function(t,e,i,n,r){var a=new Map;a.set(t,e),n?i.set(n,this._convertToJson(a)):r&&r.push(a)},i.prototype._writeArray=function(t,e,i){for(var n=0;n<e.length;n++)this._writeObject(null,e[Number.parseInt(n.toString(),10)],i,null,t)},i.prototype._convertToJson=function(t){var e=0,i="{";return t.forEach((function(n,r){n.startsWith("{")||n.startsWith("[")?i+='"'+r+'":'+n:(n.startsWith(" ")&&n.length>1&&("["===n[1]||"{"===n[1])&&(n=n.substring(1)),i+='"'+r+'":"'+n+'"'),e<t.size-1&&(i+=","),e++})),i+"}"},i.prototype._convertToJsonArray=function(t){for(var e="[",i=0;i<t.length;i++)e+=this._convertToJson(t[Number.parseInt(i.toString(),10)]),i<t.length-1&&(e+=",");return e+"]"},i.prototype._parseJson=function(t,e){this._document=t,this._crossReference=t._crossReference;var i=ii(e);if(i.startsWith("{")&&!i.endsWith("}"))for(;i.length>0&&!i.endsWith("}");)i=i.substring(0,i.length-1);return JSON.parse(i)},i.prototype._importFormData=function(t,e){var i=this._parseJson(t,e);if(i){var n=Object.keys(i);if(n&&n.length>0){for(var r=0;r<n.length;r++){var a=n[Number.parseInt(r.toString(),10)],s=i[a];this._fields.has("key")?this._fields.get(a).push(s):this._fields.set(a,[s])}this._importField()}}},i.prototype._importAnnotations=function(t,e){var i=this,n=this._parseJson(t,e);if(n&&-1!==Object.keys(n).indexOf("pdfAnnotation")){var r=n.pdfAnnotation,a=t.pageCount,s=Object.keys(r);if(s&&s.length>0&&s.forEach((function(e){var n=Number.parseInt(e,10);if(void 0!==n&&n<a){var s=t.getPage(n),o=r[e];if(o){var h=Object.keys(o);if(h&&h.length>0&&-1!==h.indexOf("shapeAnnotation")){var c=o.shapeAnnotation;c&&c.length>0&&c.forEach((function(t){var e=Object.keys(t);if(e&&e.length>0&&-1!==e.indexOf("type")){var n=new fn(i._crossReference);n.update("Type",hn.get("Annot"));var r=!0;switch(t.type.toLowerCase()){case"line":n.update("Subtype",hn.get("Line"));break;case"circle":n.update("Subtype",hn.get("Circle"));break;case"square":n.update("Subtype",hn.get("Square"));break;case"polyline":n.update("Subtype",hn.get("PolyLine"));break;case"polygon":n.update("Subtype",hn.get("Polygon"));break;case"ink":n.update("Subtype",hn.get("Ink"));break;case"popup":n.update("Subtype",hn.get("Popup"));break;case"text":n.update("Subtype",hn.get("Text"));break;case"freetext":n.update("Subtype",hn.get("FreeText"));break;case"stamp":n.update("Subtype",hn.get("Stamp"));break;case"highlight":n.update("Subtype",hn.get("Highlight"));break;case"squiggly":n.update("Subtype",hn.get("Squiggly"));break;case"underline":n.update("Subtype",hn.get("Underline"));break;case"strikeout":n.update("Subtype",hn.get("StrikeOut"));break;case"fileattachment":n.update("Subtype",hn.get("FileAttachment"));break;case"sound":n.update("Subtype",hn.get("Sound"));break;case"redact":n.update("Subtype",hn.get("Redact"));break;case"caret":n.update("Subtype",hn.get("Caret"));break;default:r=!1}if(r){i._addAnnotationData(n,t,e);var a=s._pageDictionary;if(a){var o=s.annotations,h=o._parseAnnotation(n);if(h){h._isImported=!0;var c=i._crossReference._getNextReference();i._crossReference._cacheMap.set(c,n),(n.has("NM")||n.has("IRT"))&&i._addReferenceToGroup(c,n),h._ref=c;var _=o._annotations.length;o._annotations.push(c),a.set("Annots",o._annotations),a._updated=!0,o._parsedAnnotations.set(_,h),i._handlePopup(o,c,n,a)}}}}}))}}}})),this._groupHolders.length>0)for(var o=0;o<this._groupHolders.length;o++){var h=this._groupHolders[Number.parseInt(o.toString(),10)],c=h.get("IRT");c&&""!==c&&(this._groupReferences.has(c)?h.update("IRT",this._groupReferences.get(c)):delete h._map.IRT)}this._groupHolders=[],this._groupReferences=new Map}},i.prototype._addAnnotationData=function(e,i,n){var r,a,s,o,h=this,c=new fn(this._crossReference),_=new fn(this._crossReference),d=new Map,l=[],p="";if(n.forEach((function(n){var f=i[n];switch(n.toLowerCase()){case"start":case"end":h._addLinePoints(f,l),4===l.length&&(e.update("L",l),l=[]);break;case"itex":break;case"state":h._addString(e,"State",f);break;case"statemodel":h._addString(e,"StateModel",f);break;case"replytype":"group"===f.toLowerCase()&&e.update("RT",hn.get("Group"));break;case"inreplyto":h._addString(e,"IRT",f);break;case"dashes":case"width":case"intensity":case"style":h._addBorderStyle(n,f,c,_);break;case"rect":if(s=f){var u=[];u.push(Number.parseFloat(s.x)),u.push(Number.parseFloat(s.y)),u.push(Number.parseFloat(s.width)),u.push(Number.parseFloat(s.height)),u&&4===u.length&&e.update("Rect",u)}break;case"color":(f=ui(f))&&3===f.length&&e.update("C",[f[0]/255,f[1]/255,f[2]/255]);break;case"oc":if(f&&"Redact"===e.get("Subtype").name){o=f.split(",");var g=[];o.forEach((function(t){g.push(Number.parseFloat(t))})),g&&g.length>0&&e.update("OC",g)}break;case"interior-color":(f=ui(f))&&3===f.length&&e.update("IC",[f[0]/255,f[1]/255,f[2]/255]);break;case"date":h._addString(e,"M",f);break;case"creationdate":h._addString(e,"CreationDate",f);break;case"name":h._addString(e,"NM",f);break;case"icon":f&&e.update("Name",hn.get(f));break;case"subject":h._addString(e,"Subj",f);break;case"title":h._addString(e,"T",f);break;case"rotation":e.update("Rotate",Number.parseFloat(f));break;case"fringe":h._addFloatPoints(e,"RD",h._parseFloatPoints(f));break;case"it":f&&e.update("IT",hn.get(f));break;case"leaderlength":e.update("LL",Number.parseFloat(f));break;case"leaderextend":e.update("LLE",Number.parseFloat(f));break;case"caption":h._addBoolean(e,"Cap",f.toLowerCase());break;case"caption-style":f&&e.update("CP",hn.get(f));break;case"callout":h._addFloatPoints(e,"CL",h._parseFloatPoints(f));break;case"coords":h._addFloatPoints(e,"QuadPoints",h._parseFloatPoints(f));break;case"border":h._addFloatPoints(e,"Border",h._parseFloatPoints(f));break;case"opacity":e.update("CA",Number.parseFloat(f));break;case"defaultstyle":if(f){var y=Object.keys(f);if(y&&y.length>0){var b="",m=0;y.forEach((function(t){var e=f[t];b+=t+":"+e,m<y.length-1&&(b+=";"),m++})),h._addString(e,"DS",b)}}break;case"defaultappearance":h._addString(e,"DA",f);break;case"flags":if(f&&"string"==typeof f){for(var v=t.PdfAnnotationFlag.default,w=f.split(","),S=0;S<w.length;S++){var P=Qe(w[Number.parseInt(S.toString(),10)]);0===S?v=P:v|=P}e.update("F",v)}break;case"open":h._addBoolean(e,"Open",f.toLowerCase());break;case"repeat":h._addBoolean(e,"Repeat",f.toLowerCase());break;case"overlaytext":h._addString(e,"OverlayText",f);break;case"contents":"string"==typeof f&&(-1!==f.indexOf("\\r")&&(f=f.replace("\\r","\r")),f&&h._addString(e,"Contents",f));break;case"q":e.update("Q",Number.parseInt(f,10));break;case"inklist":if(f){var A=Object.keys(f);if(A&&A.length>0&&-1!==A.indexOf("gesture")){var x=f.gesture;x&&x.length>0&&e.update("InkList",x)}}break;case"head":r=f;break;case"tail":a=f;break;case"creation":case"modification":case"file":case"bits":case"channels":case"encoding":case"rate":case"length":case"filter":case"mode":case"size":d.set(n,f);break;case"data":p=f;break;case"vertices":if(f&&"string"==typeof f){var k=f.split(/[,;]/);if(k&&k.length>0){var T=[];for(S=0;S<k.length;S++)T.push(Number.parseFloat(k[Number.parseInt(S.toString(),10)]));T.length>0&&T.length%2==0&&e.update("Vertices",T)}}break;case"customdata":h._addString(e,"CustomData",f);break;case"appearance":h._addAppearanceData(e,f)}})),this._addMeasureDictionary(e,i,n),r?a?e.update("LE",[hn.get(r),hn.get(a)]):e.update("LE",r):a&&e.update("LE",a),_.size>0){_.update("Type",hn.get("Border"));var f=this._crossReference._getNextReference();_.objId=f.objectNumber+" "+f.generationNumber,this._crossReference._cacheMap.set(f,_),e.update("BS",f)}if(c.size>0){f=this._crossReference._getNextReference();_.objId=f.objectNumber+" "+f.generationNumber,this._crossReference._cacheMap.set(f,c),e.update("BE",f)}this._addStreamData(e,d,p)},i.prototype._addLinePoints=function(t,e){t&&-1!==t.indexOf(",")&&t.split(",").forEach((function(t){e.push(Number.parseFloat(t))}))},i.prototype._addString=function(t,e,i){i&&t.update(e,i)},i.prototype._addBoolean=function(t,e,i){i&&t.update(e,"yes"===i||"true"===i)},i.prototype._addBorderStyle=function(t,e,i,n){var r="",a=!0;switch(e){case"dash":r="D";break;case"solid":r="S";break;case"bevelled":r="B";break;case"inset":r="I";break;case"underline":r="U";break;case"cloudy":r="C",a=!1}switch(t.toLowerCase()){case"width":n.update("W",Number.parseFloat(e));break;case"intensity":i.update("I",Number.parseFloat(e));break;case"dashes":e&&-1!==e.indexOf(",")&&n.update("D",this._parseFloatPoints(e))}r&&(a?n.update("S",hn.get(r)):i.update("S",hn.get(r)))},i.prototype._parseFloatPoints=function(t){var e=t.split(","),i=[];return e.forEach((function(t){i.push(Number.parseFloat(t))})),i},i.prototype._addFloatPoints=function(t,e,i){i&&i.length>0&&t.update(e,i)},i.prototype._addMeasureDictionary=function(t,e,i){var n=new fn(this._crossReference),r=[],a=[],s=[],o=[],h=[];if(n.set("A",r),n.set("D",a),n.set("X",s),n.set("T",o),n.set("V",h),-1!==i.indexOf("ratevalue")&&this._addString(n,"R",e.ratevalue),-1!==i.indexOf("subtype")&&this._addString(n,"Subtype",e.subtype),-1!==i.indexOf("targetunitconversion")&&this._addString(n,"TargetUnitConversion",e.targetunitconversion),-1!==i.indexOf("area")&&r.push(this._readDictionaryElements(e.area)),-1!==i.indexOf("distance")&&a.push(this._readDictionaryElements(e.distance)),-1!==i.indexOf("xformat")&&s.push(this._readDictionaryElements(e.xformat)),-1!==i.indexOf("tformat")&&o.push(this._readDictionaryElements(e.tformat)),-1!==i.indexOf("vformat")&&h.push(this._readDictionaryElements(e.vformat)),-1!==i.indexOf("type1")){n.set("Type",hn.get("Measure"));var c=this._crossReference._getNextReference();n.objId=c.objectNumber+" "+c.generationNumber,this._crossReference._cacheMap.set(c,n),t.update("Measure",c)}},i.prototype._readDictionaryElements=function(t){var e=Object.keys(t),i=new fn(this._crossReference);return e&&e.length>0&&e.forEach((function(e){var n=t[e];if(e&&n)switch(e){case"d":i.set("D",Number.parseFloat(n));break;case"c":i.set("C",Number.parseFloat(n));break;case"rt":i.set("RT",n);break;case"rd":i.set("RD",n);break;case"ss":i.set("SS",n);break;case"u":i.set("U",n);break;case"f":i.set("F",hn.get(n));break;case"fd":i.set("FD",n);break;case"type":i.set("Type",hn.get(n))}})),i},i.prototype._addStreamData=function(t,e,i){var n=this,r=t.get("Subtype").name,a=ri(i,!0);if("Sound"===r){var s=new Cn(a);s.dictionary._crossReference=this._crossReference,s.dictionary.update("Type",hn.get("Sound")),e.forEach((function(t,e){if(e&&t)switch(e){case"bits":case"rate":case"channels":s.dictionary.set(e,Number.parseInt(t,10));break;case"encoding":s.dictionary.set("E",hn.get(t));break;case"filter":s.dictionary.set("Filter",hn.get("FlateDecode"))}})),s.reference=this._crossReference._getNextReference(),s.dictionary.objId=s.reference.objectNumber+" "+s.reference.generationNumber,this._crossReference._cacheMap.set(s.reference,s),t.update("Sound",s.reference)}else if("FileAttachment"===r){var o=new fn(this._crossReference);o.update("Type",hn.get("Filespec"));var h=new Cn(a);h.dictionary._crossReference=this._crossReference;var c=new fn(this._crossReference);e.forEach((function(t,e){if(e&&t){var i=void 0;switch(e){case"file":n._addString(o,"F",t),n._addString(o,"UF",t);break;case"size":void 0!==(i=Number.parseInt(t,10))&&(c.update("Size",i),h.dictionary.update("DL",i));break;case"creation":n._addString(c,"CreationDate",t);break;case"modification":n._addString(c,"ModificationDate",t)}}})),h.dictionary.update("Params",c),h.dictionary.update("Filter",hn.get("FlateDecode")),h.reference=this._crossReference._getNextReference(),h.dictionary.objId=h.reference.objectNumber+" "+h.reference.generationNumber,this._crossReference._cacheMap.set(h.reference,h);var _=new fn(this._crossReference);_.update("F",h.reference),o.update("EF",_);var d=this._crossReference._getNextReference();o.objId=d.objectNumber+" "+d.generationNumber,this._crossReference._cacheMap.set(d,o),t.update("FS",d)}},i.prototype._addAppearanceData=function(t,e){if(e){var i=ii(oi(e,!1));if(i.startsWith("{")&&!i.endsWith("}"))for(;i.length>0&&!i.endsWith("}");)i=i.substring(0,i.length-1);var n=JSON.parse(i);if(n){var r=Object.keys(n);r&&r.length>0&&-1!==r.indexOf("ap")&&t.update("AP",this._parseDictionary(n.ap))}}},i.prototype._parseAppearance=function(t){var e,i=this,n=Object.keys(t);if(-1!==n.indexOf("name"))e=hn.get(t.name);else if(-1!==n.indexOf("int"))e=Number.parseInt(t.int,10);else if(-1!==n.indexOf("fixed"))e=Number.parseFloat(t.fixed);else if(-1!==n.indexOf("string"))e=t.string;else if(-1!==n.indexOf("boolean"))e="true"===t.boolean;else if(-1!==n.indexOf("array")){var r=t.array;e=[],r.forEach((function(t){e.push(i._parseAppearance(t))}))}else if(-1!==n.indexOf("dict")){var a=this._parseDictionary(t.dict);e=this._crossReference._getNextReference(),a.objId=e.objectNumber+" "+e.generationNumber,this._crossReference._cacheMap.set(e,a)}else if(-1!==n.indexOf("stream")){var s=this._parseStream(t.stream);e=this._crossReference._getNextReference(),s.reference=e,s.dictionary.objId=e.objectNumber+" "+e.generationNumber,this._crossReference._cacheMap.set(e,s)}else e=null;return e},i.prototype._parseDictionary=function(t){var e=this,i=new fn(this._crossReference);if(t){var n=Object.keys(t);n&&n.length>0&&n.forEach((function(n){var r=t[n];if("data"!==n){var a=e._parseAppearance(r);i.update(n,a)}}))}return i},i.prototype._parseStream=function(t){var e,i=Object.keys(t);if(t&&i.indexOf("data")){var n=t.data,r=void 0;if(n){var a=Object.keys(n);if(a&&-1!==a.indexOf("bytes")){var s=n.bytes;s&&(r=ri(s,!0))}}r||(r=[]);var o=new Cn(r),h=this._parseDictionary(t);o.dictionary=h,e=o}return e},i.prototype._getValidString=function(t){return-1!==t.indexOf("\\")&&(t=t.replace(/\\/g,"\\\\")),-1!==t.indexOf('"')&&(t=t.replace(/"/g,'\\"')),-1!==t.indexOf("[")&&(t=t.replace(/\[/g,"\\[")),-1!==t.indexOf("]")&&(t=t.replace(/\[/g,"\\]")),-1!==t.indexOf("{")&&(t=t.replace(/\[/g,"\\{")),-1!==t.indexOf("}")&&(t=t.replace(/\}/g,"\\}")),-1!==t.indexOf("\n")&&(t=t.replace(/\n/g,"\\n")),-1!==t.indexOf("\r")&&(t=t.replace(/\r/g,"\\r")),t},i}(Ar),Fr=(Tn=function(t,e){return(Tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Tn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Ir=function(t){function e(e){var i=t.call(this)||this;return i._annotationObjects=new Map,i._specialCharacters="",null!=e&&(i._fileName=e),i}return Fr(e,t),e.prototype._exportAnnotations=function(t){return this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!0,this._exportAnnotationData(t,t.pageCount),this._save()},e.prototype._exportFormFields=function(t){return this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!1,this._key=Ti(),this._save()},e.prototype._save=function(){var t=this,e=0,i=[];if(!this._isAnnotationExport){this._asPerSpecification?(this.fdfString+="%FDF-1.2\n%"+this._specialCharacters+"\r\n1 0 obj\r<</FDF<</F(",this.fdfString+=this._fileName+")",this.fdfString+="/Fields["):this.fdfString+="%FDF-1.2\n";var n=this._document.form;if(null!=n){this._exportEmptyFields=n.exportEmptyFields;for(var r=this._document.form.count,a=0;a<r;a++){var s,o=this._document.form.fieldAt(a);s=this._exportFormFieldsData(o),(o instanceof Vt||o instanceof qt||o instanceof Gt||o instanceof Ht||o instanceof Wt)&&e++,this._asPerSpecification?o instanceof Vt||o instanceof qt||o instanceof Gt?(i.push(e),this.fdfString+="<</T("+o.name+")/V("+s+")>>"):(o instanceof Ht||o instanceof Wt)&&(i.push(e),this.fdfString+="<</T("+o.name+")/V/"+s+">>"):o instanceof Vt||o instanceof qt||o instanceof Gt?(i.push(e),this.fdfString+=e+" 0 obj<</T <"+this._stringToHexString(o.name)+"> /V <",this.fdfString+=this._stringToHexString(s)+"> >>endobj\n"):(o instanceof Ht||o instanceof Wt)&&(i.push(e),this.fdfString+=e+" 0 obj<</T <"+this._stringToHexString(o.name)+"> /V /",this.fdfString+=s+" >>endobj\n")}}if(this._asPerSpecification)this.fdfString+="]",this.fdfString+="/ID[]/UF("+this._fileName+")>>/Type/Catalog>>\rendobj\rtrailer\r\n<</Root 1 0 R>>\r\n",this.fdfString+="%%EOF\r\n";else{this.fdfString+=this._table.size+1+" 0 obj<</F <"+this._stringToHexString(this._fileName)+">  /Fields [";for(a=0;a<this._table.size;a++){null!=(o=this._document.form.fieldAt(a))&&o.export&&(this.fdfString+=i[Number.parseInt(a.toString(),10)]+" 0 R ")}this.fdfString+="]>>endobj\n",this.fdfString+=i.length+2+" 0 obj<</Version /1.4 /FDF "+(i.length+1)+" 0 R>>endobj\n",this.fdfString+="trailer\n<</Root "+(i.length+2)+" 0 R>>"}}var h=new ArrayBuffer(1*this.fdfString.length),c=new Uint8Array(h);return c.forEach((function(e,i){c[i]=t.fdfString.charCodeAt(i)})),c},e.prototype._importAnnotations=function(t,e){this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!1,this._checkFdf(ii(e));var i=new Nn(e);this._isAnnotationImport=!0;var n=new Jn(new Qn(i),null,!0,!1);this._readFdfData(n),null!==this._annotationObjects&&void 0!==this._annotationObjects&&this._annotationObjects.size>0&&this._annotationObjects.clear(),null!==this._table&&void 0!==this._table&&this._table.size>0&&this._table.clear()},e.prototype._importFormData=function(t,e){this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!1,this._checkFdf(ii(e));var i=new Nn(e),n=new Jn(new Qn(i),null,!1,!1);this._readFdfData(n)},e.prototype._readFdfData=function(t){var e=this,i=t.getObject();if(this._isAnnotationImport){for(var n="";null!=i&&"EOF"!==i;)i instanceof fn||i instanceof Nn||i instanceof Hn?(this._table.set(n,i),n=""):null!==i&&Number.isInteger(i)&&0!==i?t.first>=0&&(n=i.toString()+" "+t.first.toString()):i instanceof cn&&null!==i.command&&void 0!==i.command&&"trailer"===i.command&&(n=i.command),i=t.getObject();this._annotationObjects=this._parseAnnotationData(),this._annotationObjects.forEach((function(t,i){var n=t;if(n._crossReference=e._crossReference,n._updated=!0,null!=n&&n.has("Page")){var r=n.get("Page");if(null!=r){var a=r;if(a<e._document.pageCount){var s=e._document.getPage(a),o=s._pageDictionary;if(null!=o){var h=s.annotations,c=h._parseAnnotation(n);if(null!=c){c._isImported=!0;var _=e._crossReference._getNextReference();e._crossReference._cacheMap.set(_,n),(n.has("NM")||n.has("IRT"))&&e._addReferenceToGroup(_,n),c._ref=_;var d=h._annotations.length;h._annotations.push(_),o.set("Annots",h._annotations),o._updated=!0,h._parsedAnnotations.set(d,c),e._handlePopup(h,_,n,o)}}}}}}))}else{if(i=t.getObject(),this._asPerSpecification)for(;null!=i&&"EOF"!==i;){if(i instanceof fn&&null!==i&&null!==i._map.FDF&&void 0!==i._map.FDF&&(i=i._map.FDF)instanceof fn&&null!==i._map.Fields&&void 0!==i._map.Fields&&null!=(i=i._map.Fields))for(var r=0;r<i.length;r++){var a=i[Number.parseInt(r.toString(),10)];if(a instanceof fn&&null!=a){s=a.getArray("T"),o=void 0;o=a._map.V instanceof hn?a.getArray("V").name:a.getArray("V"),null!=s&&s.length>0&&this._table.set(s,o)}}i=t.getObject()}else for((i=t.getObject())instanceof cn&&null!==i.command&&(i=i.command);null!=i&&"EOF"!==i;){if(i instanceof fn){var s=i.getArray("T"),o=void 0;o=i._map.V instanceof hn?i.getArray("V").name:i.getArray("V"),null!=s&&s.length>0&&this._table.set(s,o)}i=t.getObject()}this._importField()}},e.prototype._parseAnnotationData=function(){var t=new Map,e=new Map;if(null!=(t=this._table)&&t.size>0&&t.has("trailer")){var i=t.get("trailer");if(i instanceof fn&&null!=i&&i.has("Root")){var n=i.getRaw("Root");if(null!=n){var r=n.objectNumber.toString()+" "+n.generationNumber.toString();if(t.has(r)){var a=t.get(r);if(null!=a&&a.has("FDF")){var s=a.get("FDF");if(null!=s&&s.has("Annots")){var o=s.get("Annots");if(null!=o&&o.length>0)for(var h=0;h<o.length;h++){var c=o[Number.parseInt(h.toString(),10)],_=c.objectNumber.toString()+" "+c.generationNumber.toString();t.has(_)&&(c=t.get(_),e.set(_,c),t.delete(_))}}}}t.delete(r)}}t.delete("trailer")}return e},e.prototype._importField=function(){var t=this,e=this._document.form,i=e.count;i&&this._table.forEach((function(n,r){var a;t._table.size>0&&t._table.has(r)&&(a=t._table.get(r));var s=e._getFieldIndex(r);if(-1!==s&&s<i){var o=e.fieldAt(s);if(null!=o&&o){a&&""!==a&&o._dictionary.update("RV",a);var h=[];h.push(n),t._importFieldData(o,h)}}}))},e.prototype._exportAnnotationData=function(t,e){var i=nt._whiteSpace+"0"+nt._whiteSpace;this.fdfString+="%FDF-1.2\r\n";for(var n=2,r=new Array,a=this.exportAppearance,s=0;s<e;s++){var o=t.getPage(s);if(null!=o&&o.annotations.count>0)for(var h=0;h<o.annotations.count;h++){var c,_=o.annotations.at(h);if(null!=_&&!(_ instanceof ce||_ instanceof le||_ instanceof de||_ instanceof _e))if(_ instanceof ye||_ instanceof ne)n=(c=this._exportAnnotation(_,this.fdfString,n,r,s,!0)).index,r=c.annot;else n=(c=this._exportAnnotation(_,this.fdfString,n,r,s,a)).index,r=c.annot}}if(2!==n){var d="1"+i;this.fdfString+=d+"obj\r\n<</FDF<</Annots[";for(s=0;s<r.length-1;s++)this.fdfString+=r[Number.parseInt(s.toString(),10)]+i+"R ";this.fdfString+=r[r.length-1]+i+"R]/F("+this._fileName+")/UF(",this.fdfString+=this._fileName+")>>/Type/Catalog>>\r\nendobj\r\n",this.fdfString+="trailer\r\n<</Root "+d+"R>>\r\n%%EOF\r\n"}},e.prototype._exportAnnotation=function(t,e,i,n,r,a){this.fdfString=e;var s=new Nr,o=t._dictionary,h=nt._whiteSpace+"0"+nt._whiteSpace+"obj\r\n";this._annotationID=i.toString(),this.fdfString+=i+h+"<<";var c=new Map,_=new Array;n.push(this._annotationID),o.set("Page",r);var d=this._getEntries(c,_,i,o,this.fdfString,a);i=d.index,c=d.list,_=d.streamReference,delete o._map.Page,this.fdfString+=">>\r\nendobj\r\n";for(var l=function(){var t=Array();c.forEach((function(e,i){t.push(i)}));for(var e=0;e<t.length;e++){var s=t[Number.parseInt(e.toString(),10)];if((c.get(s)instanceof fn||c.get(s)instanceof Nn||c.get(s)instanceof Hn)&&null!=(o=c.get(s)instanceof fn?c.get(s):c.get(s).dictionary)){if(o instanceof fn&&o.has("Type")){var d=o.get("Type");null!=d&&"Annot"===d.name&&(n.push(s.toString()),o.set("Page",r))}p.fdfString+=s+h+"<<";var l=p._getEntries(c,_,i,o,p.fdfString,a);c=l.list,_=l.streamReference,i=l.index,o instanceof fn&&o.has("Page")&&delete o._map.Page,p.fdfString+=">>",null!=_&&-1!==_.indexOf(s)&&p._appendStream(c.get(s),p.fdfString),p.fdfString+="\r\nendobj\r\n"}c.delete(s)}},p=this;c.size>0;)l();return i++,s.index=i,s.annot=n,s},e.prototype._appendStream=function(t,e){var i=t;if(this.fdfString=e,(t instanceof Hn||t instanceof Nn)&&(i=t instanceof Hn?t.stream:t),t instanceof Hn||t instanceof Nn){var n=i.getBytes(),r=new Uint8Array(n),a=new sf.compression.CompressedStreamWriter;a.write(r,0,r.length),a.close();var s=a.getCompressedString;this.fdfString+="stream\r\n",this.fdfString+=s,this.fdfString+="\r\nendstream"}},e.prototype._getEntries=function(t,e,i,n,r,a){var s=this,o=!1,h=new Nr;this.fdfString=r;var c=t;return n.forEach((function(t,r){if(a||"AP"!==t){"P"!==t&&(s.fdfString+="/"+t),("Sound"===t||"F"===t||a)&&(o=!0);var h=r;if("string"==typeof h)s.fdfString+="("+s._getFormattedString(h)+")";else if(h instanceof hn)s.fdfString+="/"+h.name;else if(h instanceof Array){h=h;var _=s._appendArray(h,s.fdfString,i,o,c,e);c=_.list,e=_.streamReference,i=_.index}else if("number"==typeof h)s.fdfString+=" "+h.toString();else if("boolean"==typeof h)s.fdfString+=" "+(h?"true":"false");else if(h instanceof fn){s.fdfString+="<<",h=h;var d=s._getEntries(c,e,i,h,s.fdfString,a);c=d.list,e=d.streamReference,i=d.index,s.fdfString+=">>"}else if(h instanceof _n){var l=n.get("Page");if("Parent"===t)s.fdfString+=" "+s._annotationID+" 0 R",s.fdfString+="/Page "+l;else if("IRT"===t){if(n.has("NM")){var p=n.get("NM");null!==p&&(s.fdfString+="("+s._getFormattedString(p)+")")}}else if("P"!==t){var f=h;null!=f&&(i++,s.fdfString+=" "+i+" 0 R",o&&e.push(i),c.set(i,n.get(t)))}}o=!1}})),h.list=c,h.streamReference=e,h.index=i,h},e.prototype._appendArray=function(t,e,i,n,r,a){this.fdfString=e,this.fdfString+="[";var s=new Nr,o=r;if(null!==t&&t.length>0)for(var h=t.length,c=0;c<h;c++){var _=t[Number.parseInt(c.toString(),10)];0!==c&&("number"==typeof _||_ instanceof _n||"boolean"==typeof _)&&(this.fdfString+=" ");var d=this._appendElement(_,this.fdfString,i,n,o,a);o=d.list,a=d.streamReference,i=d.index}return this.fdfString+="]",s.list=o,s.streamReference=a,s.index=i,s},e.prototype._appendElement=function(t,e,i,n,r,a){this.fdfString=e;var s=new Nr,o=r;if("number"==typeof t)this.fdfString+=t.toString();else if(t instanceof hn)this.fdfString+=t.name.toString();else if(t instanceof Array){t=t,o=(h=this._appendArray(t,this.fdfString,i,n,o,a)).list,a=h.streamReference,i=h.index}else if(t instanceof fn){var h;this.fdfString+="<<",t=t,o=(h=this._getEntries(o,a,i,t,this.fdfString,n)).list,a=h.streamReference,i=h.index,this.fdfString+=">>"}return s.list=o,s.streamReference=a,s.index=i,s},e.prototype._getFormattedString=function(t){for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);40!==n&&41!==n||(e+="'"),e+=String.fromCharCode(n)}return e},e.prototype._checkFdf=function(t){if(((t.includes(this._specialCharacters)||t.includes(""))&&(this._asPerSpecification=!0),t.startsWith("%"))&&"FDF-"!==t.substring(1,5))throw new Error("Invalid FDF file.")},e.prototype._stringToHexString=function(t){var e="";null!=t&&t.length>0&&(e=ni(Ye(t)));return e},e}(Ar),Nr=function(){},Cr=(Rn=function(t,e){return(Rn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}Rn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Mr=function(t){function e(e){var i=t.call(this)||this;return null!=e&&(i._fileName=e),i}return Cr(e,t),e.prototype._exportAnnotations=function(t){throw new Error("Method not implemented.")},e.prototype._exportFormFields=function(t){return this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!1,this._format="XML",this._key=Ti(),this._save()},e.prototype._save=function(){var t=new mr;t._writeStartDocument(),this._asPerSpecification?(t._writeStartElement("fields"),t._writeAttributeString("xfdf","http://ns.adobe.com/xfdf-transition/","xmlns",null)):t._writeStartElement("Fields");var e=this._document.form;if(null!=e){this._exportEmptyFields=e.exportEmptyFields;for(var i=this._document.form.count,n=0;n<i;n++){var r=this._document.form.fieldAt(n);null!=r&&r.export&&this._exportFormFieldData(r)}this._writeFormFieldData(t,this._asPerSpecification)}var a=t._save();return t._destroy(),a},e.prototype._writeFormFieldData=function(t,e){void 0===e&&(e=!1),e?this._table.forEach((function(e,i){if(i.includes(" ")){var n=i.replace(" ","");t._writeStartElement(n.toString()),t._writeAttributeString("original",i.toString(),"xfdf",null)}else t._writeStartElement(i.toString());t._writeString(e.toString()),t._writeEndElement()})):this._table.forEach((function(e,i){i.includes(" ")&&(i=i.replace(" ","_x0020_")),t._writeStartElement(i.toString()),t._writeString(e.toString()),t._writeEndElement()})),t._writeEndElement()},e.prototype._importFormData=function(t,e){this._document=t,this._crossReference=t._crossReference,this._isAnnotationExport=!1;var i=ii(e);i=(i=i.replace(/(\r\n|\n|\r)/gm,"")).replace(/[^\x20-\x7E]/g,""),this._xmlDocument=(new DOMParser).parseFromString(i,"text/xml"),this._checkXml(this._xmlDocument),this._parseFormData(this._xmlDocument.documentElement)},e.prototype._parseFormData=function(t){var e=t.childNodes;if(null!=e&&e.length>0)for(var i=0;i<e.length;i++){var n=e.item(i);if(null!=n&&1===n.nodeType){var r=n,a="";if(null!==r.attributes&&void 0!==r.attributes&&r.attributes.length>0){var s=r.attributes.item(0);null!=s&&"xfdf:original"===s.name&&(a=s.value)}else a=r.tagName;var o=r.textContent;null!=a&&a.length>0&&this._table.set(a,o)}}this._importField()},e.prototype._importField=function(){var t=this,e=this._document.form,i=e.count;i&&this._table.forEach((function(n,r){var a;t._table.size>0&&t._table.has(r)&&(a=t._table.get(r));var s=r.toString();-1!==s.indexOf("_x0020_")&&(s=s.replace("_x0020_"," "));var o=e._getFieldIndex(s);if(-1!==o&&o<i){var h=e.fieldAt(o);if(h&&null!=h){a&&""!==a&&h._dictionary.update("RV",a);var c=[];c.push(n),t._importFieldData(h,c)}}}))},e.prototype._checkXml=function(t){if(t.getElementsByTagName("parsererror").length>0)throw new Error("Invalid XML file.")},e}(Ar),Br=function(){function e(e,i){if(this._headerSignature=new Uint8Array([37,80,68,70,45]),this._startXrefSignature=new Uint8Array([115,116,97,114,116,120,114,101,102]),this._endObjSignature=new Uint8Array([101,110,100,111,98,106]),this._version="",this._permissions=t.PdfPermissionFlag.default,!e)throw new Error("PDF data cannot be undefined or null");this._stream=new Nn("string"==typeof e?oi(e):e),this._crossReference=new fr(this,i),this._pages=new Map,this._checkHeader(),this._crossReference._setStartXRef(this._startXRef);try{this._parse(!1)}catch(t){if("XRefParseException"!==t.name)throw t;this._parse(!0)}this._crossReference._version=this._version}return Object.defineProperty(e.prototype,"_linearization",{get:function(){if(!this._linear){var t=void 0;try{t=new Yn(this._stream)}catch(t){}this._linear=t}return this._linear},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_startXRef",{get:function(){var t=this._stream,e=0;if(this._linearization&&this._linearization.isValid)t.reset(),this._find(t,this._endObjSignature)&&(e=t.position+6-t.start);else{for(var i=this._startXrefSignature.length,n=!1,r=t.end;!n&&r>0;)(r-=1024-i)<0&&(r=0),t.position=r,n=this._find(t,this._startXrefSignature,1024,!0);if(n){t.skip(9);var a=void 0;do{a=t.getByte()}while(si(a));for(var s="";a>=32&&a<=57;)s+=String.fromCharCode(a),a=t.getByte();e=parseInt(s,10),isNaN(e)&&(e=0)}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageCount",{get:function(){return void 0===this._pageCount&&(this._pageCount=0,this._linearization&&this._linearization.isValid?this._pageCount=this._linearization.pageCount:this._pageCount=this._catalog.pageCount),this._pageCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"form",{get:function(){return void 0===this._form&&(this._form=new br(this._catalog.acroForm,this._crossReference)),this._form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flatten",{get:function(){return this._flatten},set:function(t){this._flatten=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"permissions",{get:function(){if(this._crossReference){var t=this._crossReference._permissionFlags;void 0!==t&&(this._permissions=3903&t)}return this._permissions},enumerable:!0,configurable:!0}),e.prototype.getPage=function(t){var e=this._pages.get(t);if(e)return e;var i,n=this._catalog,r=this._linearization;i=r&&r.isValid&&r.pageFirst===t?this._getLinearizationPage(t):n.getPageDictionary(t);var a=new Le(this._crossReference,t,i.dictionary,i.reference);return this._pages.set(t,a),a},e.prototype.save=function(e,i){if(this._doPostProcess(this._flatten),"string"!=typeof e)return e&&void 0===i&&this._crossReference._type!==t.PdfCrossReferenceType.stream&&(this._crossReference._type=e),this._crossReference._save();i&&this._crossReference._type!==t.PdfCrossReferenceType.stream&&(this._crossReference._type=i),sf.fileutils.Save.save(e,new Blob([this._crossReference._save()],{type:"application/pdf"}))},e.prototype.saveAsBlob=function(){var t=this;return new Promise((function(e){e({blobData:new Blob([t._crossReference._save()],{type:"application/pdf"})})}))},e.prototype.exportAnnotations=function(e,i){var n,r;if(this._doPostProcessOnAnnotations(),e&&e instanceof Lr?r=e:i&&i instanceof Lr&&(r=i),r){if(r.dataFormat===t.DataFormat.xfdf)n=new xr;else if(r.dataFormat===t.DataFormat.json)n=new Rr;else{if(r.dataFormat!==t.DataFormat.fdf)return;n=new Ir}n.exportAppearance=r.exportAppearance}else n=new xr;var a=n._exportAnnotations(this);if(!e||"string"!=typeof e)return a;sf.fileutils.Save.save(e,new Blob([a],{type:"text/plain"}))},e.prototype.exportFormData=function(e,i){var n,r;if(this._doPostProcessOnFormFields(),e&&e instanceof Er?r=e:i&&i instanceof Er&&(r=i),r){if(r.dataFormat===t.DataFormat.xfdf)n=new xr(r.exportName);else if(r.dataFormat===t.DataFormat.json)n=new Rr(r.exportName);else if(r.dataFormat===t.DataFormat.fdf)n=new Ir(r.exportName);else{if(r.dataFormat!==t.DataFormat.xml)return;n=new Mr(r.exportName)}n._asPerSpecification=r.asPerSpecification}else(n=new xr)._asPerSpecification=!1;if(!e||"string"!=typeof e)return n._exportFormFields(this);sf.fileutils.Save.save(e,new Blob([n._exportFormFields(this)],{type:"text/plain"}))},e.prototype.importAnnotations=function(e,i){if(i===t.DataFormat.xfdf)(new xr)._importAnnotations(this,"string"==typeof e?oi(e):e);else if(i===t.DataFormat.json){(new Rr)._importAnnotations(this,"string"==typeof e?oi(e):e)}else if(i===t.DataFormat.fdf){(new Ir)._importAnnotations(this,"string"==typeof e?oi(e):e)}},e.prototype.importFormData=function(e,i){if(this.form.count>0)if(i===t.DataFormat.xfdf)(new xr)._importFormData(this,"string"==typeof e?oi(e):e);else if(i===t.DataFormat.json){(new Rr)._importFormData(this,"string"==typeof e?oi(e):e)}else if(i===t.DataFormat.fdf){(new Ir)._importFormData(this,"string"==typeof e?oi(e):e)}else if(i===t.DataFormat.xml){(new Mr)._importFormData(this,"string"==typeof e?oi(e):e)}},e.prototype.destroy=function(){this._crossReference&&(this._crossReference._destroy(),this._crossReference=void 0),this._catalog&&(this._catalog._destroy(),this._catalog=void 0),this._endObjSignature=void 0,this._headerSignature=void 0,this._pages&&this._pages.size>0&&this._pages.forEach((function(t){t._destroy()})),this._pages.clear(),this._pages=void 0,this._startXrefSignature=void 0,this._stream=void 0,this._form=void 0,gn()},e.prototype._getLinearizationPage=function(t){var e=this._catalog,i=this._linearization,n=this._crossReference,r=_n.get(i.objectNumberFirst,0);try{var a=n._fetch(r);if(a instanceof fn)if(yn(a.get("Type"),"Page")||!a.has("Type")&&!a.has("Kids"))return e.pageKidsCountCache.has(r)||e.pageKidsCountCache.put(r,1),e.pageIndexCache.has(r)||e.pageIndexCache.put(r,0),{dictionary:a,reference:r};throw new en("The Linearization dictionary does not point to a valid Page dictionary.")}catch(i){return e.getPageDictionary(t)}},e.prototype._checkHeader=function(){var t=this._stream;if(t.reset(),this._find(t,this._headerSignature)){t.moveStart();for(var e="",i=t.getByte();i>32&&!(e.length>=12);)e+=String.fromCharCode(i),i=t.getByte();this._version||(this._version=e.substring(5))}},e.prototype._parse=function(t){this._crossReference._parse(t),this._catalog=new Gn(this._crossReference),this._catalog.version&&(this._version=this._catalog.version)},e.prototype._find=function(t,e,i,n){void 0===i&&(i=1024),void 0===n&&(n=!1);var r=e.length,a=t.peekBytes(i),s=a.length-r;if(s<=0)return!1;if(n)for(var o=r-1,h=a.length-1;h>=o;){for(var c=0;c<r&&a[h-c]===e[o-c];)c++;if(c>=r)return t.position+=h-o,!0;h--}else for(h=0;h<=s;){for(c=0;c<r&&a[h+c]===e[c];)c++;if(c>=r)return t.position+=h,!0;h++}return!1},e.prototype._doPostProcess=function(t){void 0===t&&(t=!1),this._doPostProcessOnFormFields(t),this._doPostProcessOnAnnotations(t)},e.prototype._doPostProcessOnFormFields=function(t){if(void 0===t&&(t=!1),this.form._doPostProcess(t),t){var e=this._catalog._catalogDictionary.getRaw("AcroForm"),i=new fn(this._crossReference);i._updated=!0,e instanceof _n?this._crossReference._cacheMap.set(e,i):(this.form._dictionary=new fn(this._crossReference),this.form._dictionary._updated=!0,this._crossReference._allowCatalog=!0)}},e.prototype._doPostProcessOnAnnotations=function(t){void 0===t&&(t=!1);for(var e=0;e<this.pageCount;e++){var i=this.getPage(e);i.annotations._doPostProcess(t),t&&i._pageDictionary.has("Annots")&&(delete i._pageDictionary._map.Annots,i._pageDictionary._updated=!0)}},e.prototype._addWatermarkText=function(){if(this.pageCount>0)for(var e=0;e<this._pageCount;e++){var i=this.getPage(e);if(i)try{var n=i._graphics;n._save(),n._setTransparency(.2),n._drawRectangle(0,0,i.size[0],33.75,new He([255,255,255])),n._restore(),n._save(),n._setTransparency(.5);var r=new Pt(t.PdfFontFamily.helvetica,12,t.PdfFontStyle.regular),a=new j(t.PdfTextAlignment.center,t.PdfVerticalAlignment.middle);n._drawString("Created with a trial version of Syncfusion Essential PDF",r,[0,0,i.size[0],33.75],null,new He([0,0,0]),a),n._restore()}catch(t){}}},e}(),Lr=function(){function e(){this._format=t.DataFormat.xfdf,this._exportAppearance=!1}return Object.defineProperty(e.prototype,"dataFormat",{get:function(){return this._format},set:function(t){this._format=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exportAppearance",{get:function(){return this._exportAppearance},set:function(t){this._exportAppearance=t},enumerable:!0,configurable:!0}),e}(),Er=function(){function e(){this._format=t.DataFormat.xfdf,this._exportName="",this._asPerSpecification=!0}return Object.defineProperty(e.prototype,"dataFormat",{get:function(){return this._format},set:function(t){this._format=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exportName",{get:function(){return this._exportName},set:function(t){this._exportName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asPerSpecification",{get:function(){return this._asPerSpecification},set:function(t){this._asPerSpecification=t},enumerable:!0,configurable:!0}),e}();return t._PdfBaseStream=In,t._PdfStream=Nn,t._PdfContentStream=Cn,t._PdfNullStream=Mn,t._PdfDecodeStream=Ln,t._PdfDecryptStream=Dn,t._PdfFlateStream=Hn,t._PdfCatalog=Gn,t._PdfCrossReference=fr,t.PdfDocument=Br,t.PdfAnnotationExportSettings=Lr,t.PdfFormFieldExportSettings=Er,t.PdfPage=Le,t.PdfDestination=Ee,t._PdfLexicalOperator=Qn,t._PdfParser=Jn,t._Linearization=Yn,t._PdfName=hn,t._PdfCommand=cn,t._PdfReference=_n,t._PdfReferenceSet=dn,t._PdfReferenceSetCache=ln,t.Dictionary=pn,t._PdfDictionary=fn,t._PdfNull=un,t._clearPrimitiveCaches=gn,t._isName=yn,t._isCommand=bn,t.PdfPredictorStream=Kn,t._annotationFlagsToString=Xe,t._stringToAnnotationFlags=Qe,t._stringToPdfString=Je,t._stringToBytes=Ye,t._convertStringToBytes=Ze,t._areArrayEqual=$e,t._numberToString=ti,t._areNotEqual=ei,t._bytesToString=ii,t._byteArrayToHexString=ni,t._hexStringToByteArray=ri,t._hexStringToString=ai,t._isWhiteSpace=si,t._decode=oi,t._encode=hi,t._getInheritableProperty=ci,t._parseRectangle=_i,t._calculateBounds=di,t._toRectangle=li,t._fromRectangle=pi,t._getUpdatedBounds=fi,t._convertToColor=ui,t._parseColor=gi,t._mapBorderStyle=yi,t._mapBorderEffectStyle=bi,t._reverseMapEndingStyle=mi,t._mapLineEndingStyle=vi,t._mapHighlightMode=wi,t._reverseMapHighlightMode=Si,t._reverseMapBlendMode=Pi,t._mapBlendMode=Ai,t._floatToString=xi,t._addProcSet=ki,t._getNewGuidString=Ti,t._escapePdfName=Ri,t._getBezierArc=Fi,t._findPage=Ii,t._getItemValue=Ni,t._getStateTemplate=Ci,t._getColorValue=Mi,t._setMatrix=Bi,t._styleToString=Li,t._stringToStyle=Ei,t._mapMeasurementUnit=Di,t._mapMarkupAnnotationType=Oi,t._reverseMarkupAnnotationType=ji,t._mapGraphicsUnit=zi,t._mapRubberStampIcon=Vi,t._mapPopupIcon=Ui,t._reverseMapAnnotationState=Wi,t._mapAnnotationState=Hi,t._reverseMapAnnotationStateModel=Gi,t._mapAnnotationStateModel=qi,t._mapAttachmentIcon=Ki,t._mapAnnotationIntent=Xi,t._reverseMapPdfFontStyle=Qi,t._getSpecialCharacter=Ji,t._getLatinCharacter=Yi,t._encodeValue=function(t){for(var e="",i=0;i<t.length;i++){var n=255&t.charCodeAt(i),r=String.fromCharCode(n),a="";switch(r){case" ":case"%":case"(":case")":case"<":case">":case"[":case"]":case"{":case"}":case"/":case"#":e+="#",e+=1===(a=n.toString(16).toUpperCase()).length?"0"+a:a;break;default:n>126||n<37?(e+="#",e+=1===(a=n.toString(16).toUpperCase()).length?"0"+a:a):e+=r}}return e},t._getCommentsOrReview=function(t,e){return e?t.reviewHistory:t.comments},t._checkReview=Zi,t._checkComment=$i,t.BaseException=tn,t.FormatError=en,t.ParserEndOfFileException=nn,t._defaultToString=rn,t.PdfAnnotationCollection=Me,t.PdfPopupAnnotationCollection=Be,t.PdfAnnotation=Yt,t.PdfComment=Zt,t.PdfLineAnnotation=$t,t.PdfCircleAnnotation=te,t.PdfEllipseAnnotation=ee,t.PdfSquareAnnotation=ie,t.PdfRectangleAnnotation=ne,t.PdfPolygonAnnotation=re,t.PdfPolyLineAnnotation=ae,t.PdfAngleMeasurementAnnotation=se,t.PdfInkAnnotation=oe,t.PdfPopupAnnotation=he,t.PdfFileLinkAnnotation=ce,t.PdfUriAnnotation=_e,t.PdfDocumentLinkAnnotation=de,t.PdfTextWebLinkAnnotation=le,t.PdfAttachmentAnnotation=pe,t.Pdf3DAnnotation=fe,t.PdfTextMarkupAnnotation=ue,t.PdfWatermarkAnnotation=ge,t.PdfRubberStampAnnotation=ye,t.PdfSoundAnnotation=be,t.PdfFreeTextAnnotation=me,t.PdfRedactionAnnotation=ve,t.PdfRichMediaAnnotation=we,t.PdfWidgetAnnotation=Se,t.PdfStateItem=Pe,t.PdfRadioButtonListItem=Ae,t.PdfListFieldItem=xe,t.PdfAnnotationCaption=ke,t.PdfAnnotationLineEndingStyle=Te,t.PdfInteractiveBorder=Re,t.PdfAnnotationBorder=Fe,t.PdfBorderEffect=Ie,t._PaintParameter=Ne,t._PdfFontMetrics=W,t._WidthTable=H,t._StandardWidthTable=G,t._CjkWidthTable=q,t._CjkWidth=K,t._CjkSameWidth=X,t._CjkDifferentWidth=Q,t.PdfFont=St,t.PdfStandardFont=Pt,t.PdfCjkStandardFont=At,t.PdfTrueTypeFont=xt,t._PdfStandardFontMetricsFactory=kt,t._PdfCjkStandardFontMetricsFactory=Tt,t._PdfCjkFontDescriptorFactory=Rt,t.PdfStringFormat=j,t._PdfStringLayouter=J,t._PdfStringLayoutResult=Y,t._LineInfo=Z,t._StringTokenizer=nt,t._TtfReader=ut,t._TtfNameRecord=gt,t._TtfMetrics=yt,t._TtfLongHorMetric=bt,t._TtfGlyphInfo=mt,t._TtfTableInfo=rt,t._TtfOS2Table=at,t._TtfPostTable=st,t._TtfNameTable=ot,t._TtfMicrosoftCmapSubTable=ht,t._TtfHorizontalHeaderTable=ct,t.TtfHeadTable=_t,t._TtfCmapTable=dt,t._TtfCmapSubTable=lt,t._TtfAppleCmapSubTable=pt,t._TtfTrimmedCmapSubTable=ft,t._UnicodeTrueTypeFont=vt,t.PdfField=zt,t.PdfTextBoxField=Vt,t.PdfButtonField=Ut,t.PdfCheckBoxField=Wt,t.PdfRadioButtonListField=Ht,t.PdfComboBoxField=Gt,t.PdfListBoxField=qt,t.PdfSignatureField=Kt,t._PdfDefaultAppearance=Xt,t.PdfForm=br,t._PdfGraphics=Oe,t._PdfTransformationMatrix=je,t._Matrix=ze,t._PdfGraphicsState=Ve,t._PdfBrush=He,t._PdfPen=Ge,t._PdfUnitConvertor=qe,t._PdfPath=It,t._PdfStreamWriter=De,t._PdfTemplate=O,t._PdfEncryptor=$n,t._MD5=tr,t._Sha256=er,t._Sha512=ir,t._Word64=nr,t._EncryptionKey=rr,t._BasicEncryption=ar,t._AdvancedEncryption=sr,t._Cipher=or,t._NormalCipherFour=hr,t._AdvancedEncryptionBaseCipher=cr,t._AdvancedEncryption128Cipher=_r,t._AdvancedEncryption256Cipher=dr,t._NullCipher=lr,t._CipherTransform=pr,t._ExportHelper=Ar,t._XfdfDocument=xr,t._FontStructure=kr,t._XmlWriter=mr,t._Namespace=vr,t._XmlElement=wr,t._XmlAttribute=Sr,t},sf.pdf=sf.pdf({})}}]);(async()=>{await import(`${document.baseURI}_content/Syncfusion.Blazor/scripts/syncfusion-blazor-base.min.js?v=22.1.undefined`).then(()=>{})})();